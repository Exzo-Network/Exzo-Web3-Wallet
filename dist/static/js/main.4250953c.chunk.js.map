{"version":3,"sources":["context/commTypes.ts","context/ModalContext.tsx","components/GlobalModal.tsx","context/setup.ts","context/background/backgroundReducer.tsx","context/util/isWindow.ts","context/util/platform.ts","util/hooks/useAsyncInvoke.ts","util/phishingPrevention.ts","context/commActions.ts","context/background/backgroundContext.tsx","context/background/BackgroundState.tsx","components/spinner/Spinner.tsx","context/background/backgroundHooks.ts","context/hooks/useBeforeUnload.ts","context/hooks/usePreventWindowResize.ts","util/reducerUtils.ts","util/hooks/useSubmitOnEnter.ts","styles/classes.ts","components/FullCenterContainer.tsx","components/ui/Icon.tsx","assets/images/logo.svg","components/LogoHeader.tsx","components/PageLayout.tsx","components/popup/PopupLayout.tsx","assets/images/icons/cross.svg","routes/setup/PendingSetupPage.tsx","components/popup/PopupFooter.tsx","context/hooks/useOnMount.ts","assets/images/icons/ETH.svg","context/util/isFeatureEnabled.ts","context/hooks/useSelectedNetwork.ts","util/getAccountColor.ts","util/getNetworkColor.ts","components/label/GenericTooltip.tsx","components/chain/NetworkDisplayBadge.tsx","components/icons/AppIcon.tsx","components/icons/CloseIcon.tsx","components/icons/ArrowIcon.tsx","components/icons/ThreeDotsIcon.tsx","components/icons/GroupIcon.tsx","components/icons/SearchIcon.tsx","components/icons/CheckmarkIcon.tsx","components/icons/CrossedOutEyeIcon.tsx","components/icons/EyeIcon.tsx","components/icons/TrashBinIcon.tsx","components/icons/PencilIcon.tsx","components/icons/PlusIcon.tsx","components/icons/EmptyDrawerIcon.tsx","components/icons/WalletIcon.tsx","components/icons/UsbIcon.tsx","components/icons/ImportIcon.tsx","components/icons/ClockIcon.tsx","components/icons/SwitchIcon.tsx","components/icons/RightChevronIcon.tsx","util/useOnClickOutside.ts","util/hooks/useIsHovering.ts","components/ui/OutlinedButton.tsx","components/ui/Dropdown/DropdownContext.tsx","components/ui/Dropdown/DropdownButton.tsx","components/ui/Dropdown/DropdownMenu.tsx","components/ui/Dropdown/Dropdown.tsx","context/hooks/useDappRequest.ts","components/popup/PopupHeader.tsx","components/input/CapsLockDetector.tsx","assets/images/icons/eye_open.svg","assets/images/icons/eye_close.svg","components/input/PasswordInput.tsx","components/dialog/Dialog.tsx","components/dialog/ConfirmDialog.tsx","components/button/ClickableText.tsx","components/label/Tooltip.tsx","components/phishing/AntiPhishing.tsx","components/button/ButtonWithLoading.tsx","util/constants.ts","routes/UnlockPage.tsx","util/getPathDepth.ts","router/TransitionRoute.tsx","util/makeRoutes.tsx","components/Divider.tsx","util/formatAccount.ts","components/icons/AccountIcon.tsx","util/formatNumberLength.ts","components/label/Ð¡opyToClipboardTooltip.tsx","context/hooks/useSelectedAccount.ts","context/hooks/useTokensList.ts","util/getNonSubmittedTransactions.ts","context/util/getRequestRouteAndStatus.ts","context/hooks/useNextRequestRoute.ts","util/hooks/useDebouncedState.ts","routes/dApp/DappRequest.tsx","components/dialog/CheckboxDialog.tsx","context/hooks/useUserSettings.ts","components/dialog/FullScreenDialog.tsx","components/dialog/MessageDialog.tsx","components/dialog/WarningDialog.tsx","util/connectionStepUtils.tsx","context/util/requestConnectDevice.ts","components/loading/LoadingOverlay.tsx","context/hooks/useWindowId.tsx","util/time.ts","util/localSotrage.ts","util/hooks/useLocalStorageState.ts","components/AnimatedIcon.tsx","util/hooks/useLocationRecovery.ts","context/hooks/useClearStickyStorage.tsx","util/hooks/useHardwareWalletConnect.tsx","components/dialog/HardwareDeviceNotLinkedDialog.tsx","util/hooks/useCheckAccountDeviceLinked.ts","components/spinner/ThinSpinner.tsx","components/dialog/LoadingDialog.tsx","components/dialog/ErrorDialog.tsx","util/getExplorer.ts","components/account/AccountDisplayMenu.tsx","assets/images/icons/arrow_right.svg","components/dialog/SuccessDialog.tsx","components/dialog/WaitingDialog.tsx","util/hardwareDevice.ts","util/account.ts","util/transactionUtils.ts","util/hooks/useCountdown.ts","context/hooks/useTransactionWaitingDialog.tsx","util/getAwaitingSigningMessage.ts","components/dApp/DAppPopupHeader.tsx","components/dApp/DAppOrigin.tsx","util/formatUrl.ts","components/ui/CodeBlock.tsx","routes/dApp/SignPage.tsx","assets/images/icons/connect_dapp.svg","assets/images/icons/checkmark_mini.svg","util/filterAccounts.ts","components/ui/Tag.tsx","util/hooks/useCopyToClipboard.ts","util/hooks/useSelectedAddressWithChainIdChecksum.ts","components/account/AccountDisplay.tsx","components/account/AccountMultipleSelect.tsx","context/hooks/useSortedAccounts.ts","components/button/ActionButton.tsx","assets/images/icons/account_add.svg","components/account/AccountSearchBar.tsx","util/hooks/account/useAccountSearch.tsx","components/CollapsableWarning.tsx","routes/connect/ConnectPage.tsx","util/isOriginSafe.ts","context/hooks/usePendingPermissionRequest.ts","routes/settings/ConnectedSitesPage.tsx","components/icons/ExclamationCircleIconFull.tsx","components/label/WarningTip.tsx","routes/settings/ConnectedSiteAccountsPage.tsx","components/loading/LoadingDots.tsx","components/input/HorizontalSelect.tsx","components/input/EndLabel.tsx","util/capitalize.ts","util/form.ts","util/formatRounded.ts","assets/images/icons/arrow_down.svg","components/icons/ArrowUpDown.tsx","context/hooks/useGasPriceData.ts","util/convertAmount.ts","util/formatCurrency.ts","util/gasPrice.ts","components/ui/Typography.tsx","components/transactions/GasPriceComponent.tsx","components/button/ToggleButton.tsx","components/transactions/AdvancedSettings.tsx","components/transactions/GasPriceSelector.tsx","assets/images/icons/arrow_right_black.svg","context/hooks/useSelectedAccountBalance.ts","context/hooks/useNonSubmittedExternalTransaction.ts","context/hooks/useTransactionById.ts","context/hooks/useAddressBook.ts","assets/images/icons/open_external.svg","util/exchangeUtils.ts","util/isNil.ts","components/ExpandableText.tsx","components/transactions/TransactionDetailsItem.tsx","components/transactions/TransactionDetailsList.tsx","util/numberUtils.ts","util/tokenUtils.ts","components/transactions/TransactionDetailsBasic.tsx","components/transactions/TransactionDetailsAdvanced.tsx","components/transactions/TransactionDetails.tsx","routes/dApp/TransactionConfirmPage.tsx","components/icons/GearIcon.tsx","components/account/AccountsList.tsx","util/hooks/account/useConnectedAccounts.tsx","util/hooks/account/useAccountsFilter.tsx","components/ui/Badge.tsx","components/account/AccountFilters.tsx","components/ui/EmptyState.tsx","components/account/AccountSelect.tsx","routes/account/AccountsPage.tsx","components/icons/QRIcon.tsx","util/networkUtils.ts","components/input/NetworkSelect.tsx","assets/images/icons/arrow_margin.svg","components/icons/ArrowHoverAnimation.tsx","util/hooks/useDOMElementObserver.ts","assets/images/icons/dot_loading.svg","assets/images/icons/plus.svg","assets/images/unknown_token.svg","components/icons/ChevronRightIcon.tsx","components/skeleton/AssetsLoadingSkeleton.tsx","util/objectUtils.ts","util/hooks/useCurrencyFormatter.ts","context/hooks/useSelectedAccountHasEnoughNativeTokensToSend.ts","components/AssetsList.tsx","util/getDisplayTime.ts","util/formatTransactionValue.ts","util/hooks/useGetBridgeTransactionsData.ts","components/bridge/ExpandableItem.tsx","components/bridge/FeeItem.tsx","components/bridge/FeeTokenSummaryDisplay.tsx","components/bridge/BridgeDetailsFees.tsx","util/bridgeUtils.ts","components/bridge/BridgeDetailsStatus.tsx","components/bridge/BridgeDetailsSummary.tsx","components/bridge/BridgeDetails.tsx","components/transactions/TransactionItem.tsx","assets/images/flashbots.png","components/skeleton/TransactionsLoadingSkeleton.tsx","components/transactions/TransactionsList.tsx","util/hooks/useTransactions.ts","components/ActivityAssetsView.tsx","components/ActivityList.tsx","components/skeleton/BalanceLoadingSkeleton.tsx","components/token/TokenSummary.tsx","components/assets/AssetSelection.tsx","components/icons/GasIcon.tsx","assets/images/icons/car.svg","assets/images/icons/scooter.svg","assets/images/icons/plane.svg","components/gas/GasPricesInfo.tsx","assets/images/icons/vector_right.svg","components/icons/DoubleArrowHoverAnimation.tsx","components/loading/TransparentOverlay.tsx","routes/PopupPage.tsx","context/hooks/useConnectedSite.ts","components/icons/OpenExplorerIcon.tsx","components/button/ViewOnExplorerButtons.tsx","routes/ReceivePage.tsx","components/input/DropDownSelector.tsx","context/hooks/useMergeRefs.ts","assets/images/icons/search.svg","components/icons/CheckmarkCircle.tsx","components/input/SearchInput.tsx","components/token/TokenLogo.tsx","components/assets/AssetDropdownDisplay.tsx","components/token/TokenDisplay.tsx","components/assets/AssetList.tsx","context/hooks/useSwappedTokenList.ts","components/error/ErrorMessage.tsx","context/hooks/useWaitingForSigningInternalTransaction.ts","context/hooks/useInProgressInternalTransaction.tsx","components/addressBook/AddressDisplay.tsx","routes/send/SendConfirmPage.tsx","context/hooks/useAccountNameByAddress.ts","context/hooks/useAddressBookAccounts.ts","util/searchEns.ts","util/searchUD.ts","components/account/AccountSearchResults.tsx","components/input/Checkbox.tsx","routes/send/SendPage.tsx","routes/account/CreateAccountPage.tsx","components/input/TextInput.tsx","components/token/AddTokenManualView.tsx","context/hooks/useAccountTokens.ts","components/token/AddTokenListView.tsx","routes/settings/AddTokensPage.tsx","routes/settings/AddTokensConfirmPage.tsx","components/input/Select.tsx","components/chain/RPCValidationEndLabelInfo.tsx","routes/settings/ExportAccountPage.tsx","assets/images/icons/copy.svg","components/button/LinkButton.tsx","assets/images/icons/lock.svg","components/label/ClickToReveal.tsx","assets/images/icons/download.svg","routes/settings/ExportDonePage.tsx","components/input/VerticalSelect.tsx","assets/images/icons/book.svg","assets/images/icons/spanner.svg","assets/images/icons/logout.svg","assets/images/icons/account.svg","assets/images/icons/about.svg","assets/images/icons/network_cloud.svg","assets/images/icons/usb.svg","components/AppVersion.tsx","routes/settings/SettingsPage.tsx","util/hooks/useStateLogs.ts","routes/settings/AboutPage.tsx","routes/ReminderPage.tsx","util/findPosition.ts","util/window.ts","components/IdleComponent.tsx","routes/setup/BackupConfirmPage.tsx","util/shuffle.ts","routes/BackupDonePage.tsx","components/error/ErrorFallbackPage.tsx","routes/settings/AddressBookPage.tsx","routes/settings/AddContactPage.tsx","assets/images/icons/info_circle.svg","components/InfoComponent.tsx","routes/dApp/SwitchEthereumChain.tsx","components/dialog/DetailsDialog.tsx","routes/dApp/AddEthereumChain.tsx","routes/settings/LockTimeout.tsx","assets/images/icons/export.svg","assets/images/icons/trash_bin.svg","assets/images/icons/accounts.svg","assets/images/icons/reset.svg","assets/images/icons/qr_icon.svg","assets/images/icons/connected_sites.svg","assets/images/icons/pencil.svg","components/account/AccountMenu.tsx","routes/account/ResetAccountPage.tsx","routes/account/EditAccountPage.tsx","routes/dApp/WatchAsset.tsx","components/CancelSpeedUpCommon.tsx","util/getTransactionType.ts","components/transactions/Price.tsx","routes/transaction/SpeedUpPage.tsx","routes/transaction/CancelPage.tsx","components/icons/MiniCheckmark.tsx","util/approval.ts","routes/dApp/ApproveAsset.tsx","util/hooks/useGetAssetByTokenAddress.ts","util/hooks/useTokenTransactions.ts","components/button/RoundedIconButton.tsx","components/assets/AssetDetailsPage.tsx","components/button/ButtonWithIcon.tsx","assets/images/icons/refresh.svg","routes/preferences/PhishingProtectionPreferencesPage.tsx","routes/preferences/LocalePreferencesPage.tsx","assets/images/icons/pin.svg","assets/images/icons/world.svg","assets/images/icons/gas.svg","assets/images/icons/news.svg","assets/images/icons/bell.svg","assets/images/icons/shield.svg","routes/settings/PreferencesPage.tsx","routes/preferences/DefaultWalletPreferencesPage.tsx","routes/preferences/DefaultGasPreferencesPage.tsx","routes/preferences/ReleaseNotesPreferencesPage.tsx","components/info/Info.tsx","routes/transaction/ApprovePage.tsx","components/info/ReleaseNotesInfo.tsx","components/releaseNotes/OnDemandReleaseNotesPage.tsx","components/info/WelcomeInfo.tsx","routes/preferences/WarningsPreferencesPage.tsx","components/chain/ChainFiltersButton.tsx","routes/account/useNewAccountHelper.tsx","routes/account/AddAccountPage.tsx","routes/account/ImportAccountPage.tsx","routes/dApp/ApproveNFT.tsx","components/swaps/RateUpdateDialog.tsx","assets/images/icons/swap.svg","components/swaps/RefreshLabel.tsx","context/hooks/useTokenBalance.ts","util/yup/GetAmountSchema.ts","routes/swap/SwapPage.tsx","components/assets/AssetAmountDisplay.tsx","assets/images/icons/arrow_down_long.svg","context/hooks/useHasSufficientBalance.ts","context/hooks/useAwaitAllowanceTransactionDialog.tsx","components/dialog/WaitingAllowanceTransactionDialog.tsx","routes/swap/SwapConfirmPage.tsx","routes/swap/SwapAfterAddTokenPage.tsx","components/networks/NetworkDisplay.tsx","routes/networks/NetworksPage.tsx","components/ui/Alert.tsx","util/hooks/usePersistedLocalStorageForm.ts","routes/networks/NetworkFormPage.tsx","routes/networks/NetworkDetailsPage.tsx","components/chain/ChainDisplay.tsx","routes/bridge/BridgeErrorMessage.tsx","routes/networks/SearchNetworkPage.tsx","routes/networks/SuggestedAddNetwork.tsx","routes/networks/ManuallyAddNetwork.tsx","components/network/NetworkLogo.tsx","components/network/DropdownNetworkDisplay.tsx","components/network/NetworkSelectorList.tsx","components/network/NetworkDisplay.tsx","components/network/NetworkDropdownDisplay.tsx","components/network/NetworkSelector.tsx","components/bridge/BridgeNotFoundItem.tsx","components/bridge/BridgeQuoteNotFoundErrorDetails.tsx","components/transactions/BridgeNotFoundQuoteDetails.tsx","components/FeeDetails.tsx","components/setup/SeedImport.tsx","routes/bridge/BridgeSetupPage.tsx","routes/bridge/BridgeConfirmPage.tsx","router/routes.ts","routes/bridge/BridgeAfterAddTokenPage.tsx","components/news/WalletNews.tsx","router/LocationHolder.tsx","components/dialog/ProviderDownDialog.tsx","router/PopupRouter.tsx","routes/IntroductionPage.tsx","assets/images/icons/drawer.svg","assets/images/icons/pen.svg","assets/images/icons/backup.svg","routes/setup/BackupNoticePage.tsx","context/hooks/useCheckUserIsOnboarded.ts","routes/setup/PasswordSetupPage.tsx","components/label/InfoTip.tsx","util/url.ts","routes/setup/SeedImportPage.tsx","routes/setup/SetupDonePage.tsx","assets/images/icons/checkmark.svg","routes/setup/SetupPage.tsx","routes/setup/ResetPage.tsx","routes/setup/ResetDonePage.tsx","assets/images/icons/ledger.svg","assets/images/icons/trezor.svg","components/dialog/IsLockedDialog.tsx","routes/hardware-wallet/SetupLayout.tsx","routes/hardware-wallet/VendorsPage.tsx","components/icons/EyeRevealIcon.tsx","components/ui/Pagination/PagesList.tsx","components/ui/Pagination/PaginationControls.tsx","routes/hardware-wallet/AccountsPage.tsx","components/icons/CenteredTextCircle.tsx","routes/hardware-wallet/Step.tsx","routes/hardware-wallet/ConnectDeviceStepsLayout.tsx","routes/hardware-wallet/HardwareWalletConnectionPage.tsx","routes/hardware-wallet/HardwareWalletReconnectionPage.tsx","routes/hardware-wallet/RemoveDevice.tsx","router/TabRouter.tsx","routes/hardware-wallet/RemoveSuccessPage.tsx","routes/hardware-wallet/SuccessPage.tsx","App.tsx","context/util/isPopup.ts","index.tsx"],"names":["ACCOUNT","APP","BACKGROUND","DAPP","EXCHANGE","BRIDGE","EXTERNAL","NETWORK","PASSWORD","PERMISSION","STATE","ENS","UD","TRANSACTION","TOKEN","WALLET","ADDRESS_BOOK","BROWSER","FILTERS","ModalContext","createContext","isOpen","content","undefined","open","close","ModalProvider","children","useState","setIsOpen","setContent","Provider","value","n","GlobalModal","useContext","onRequestClose","TransactionStatus","TransactionCategories","PendingWithdrawalStatus","Origin","HardwareWalletOpTypes","BackgroundActions","MetaType","TransactionType","ExchangeType","BridgeImplementation","BridgeAllowanceCheck","Devices","Messages","AccountType","AccountStatus","BridgeStatus","BridgeSubstatus","QuoteFeeStatus","BIP44_PATH","HDPaths","LEDGER","name","path","default","TREZOR","port","BackgroundReducer","state","action","type","SUBSCRIBE","blankState","payload","handlers","isPortConnected","session","isAutomaticClose","chrome","tabs","query","active","currentWindow","a","Promise","resolve","getCurrent","tab","favIconUrl","url","title","URL","origin","hostname","data","iconURL","initialize","runtime","sendMessage","message","response","error","lastError","setTimeout","isBlankInitialized","connect","EXTENSION","onDisconnect","addListener","log","debug","onMessage","handler","id","subscriber","subscription","parsedError","JSON","parse","err","Error","stack","reject","CLOSE_WINDOW","window","screenLeft","screenTop","screen","width","height","getPlatformInfo","platformInfo","os","style","document","createElement","innerHTML","head","appendChild","Status","generatePhishingPreventionBase64","customUuid","uuid","createUuid","generatePhishingPrevention","requestId","request","Date","now","postMessage","createAccount","CREATE","exportAccountJson","address","password","encryptPassword","EXPORT_JSON","exportAccountPrivateKey","EXPORT_PRIVATE_KEY","importAccountPrivateKey","importArgs","IMPORT_PRIVATE_KEY","hideAccount","HIDE","unhideAccount","UNHIDE","removeAccount","REMOVE","resetAccount","RESET","renameAccount","RENAME","selectAccount","SELECT","getAccountBalance","GET_BALANCE","getAccountNativeTokenBalanceForChain","chainId","GET_NATIVE_TOKEN_BALANCE","fetchLatestGasPriceForChain","FETCH_LATEST_GAS_PRICE","setLastUserActiveTime","SET_LAST_USER_ACTIVE_TIME","setIdleTimeout","idleTimeout","SET_IDLE_TIMEOUT","getIdleTimeout","GET_IDLE_TIMEOUT","lockApp","LOCK","unlockApp","UNLOCK","returnToOnboarding","RETURN_TO_ONBOARDING","rejectUnconfirmedRequests","REJECT_UNCONFIRMED_REQUESTS","requestSeedPhrase","REQUEST_SEED_PHRASE","verifySeedPhrase","seedPhrase","VERIFY_SEED_PHRASE","completeSetup","sendNotification","SETUP_COMPLETE","openReset","OPEN_RESET","verifyPassword","VERIFY","getState","GET","resolveEnsName","RESOLVE_NAME","lookupAddressEns","LOOKUP_ADDRESS","resolveUDName","sendEther","to","feeData","advancedData","SEND_ETHER","getSendTransactionGasLimit","CALCULATE_SEND_TRANSACTION_GAS_LIMIT","getLatestGasPrice","GET_LATEST_GAS_PRICE","getTokenBalance","tokenAddress","account","addCustomTokens","tokens","ADD_CUSTOM_TOKENS","deleteCustomToken","DELETE_CUSTOM_TOKEN","sendToken","SEND_TOKEN","searchTokenInAssetsList","exact","SEARCH_TOKEN","createWallet","antiPhishingImage","importWallet","defaultNetwork","IMPORT","resetWallet","updatePopupTab","popupTab","UPDATE_POPUP_TAB","confirmPermission","accounts","CONFIRM","confirmDappRequest","isConfirmed","confirmOptions","CONFIRM_REQUEST","removeAccountFromSite","REMOVE_ACCOUNT_FROM_SITE","updateSitePermissions","UPDATE_SITE_PERMISSIONS","getApproveTransactionGasLimit","spender","amount","CALCULATE_APPROVE_TRANSACTION_GAS_LIMIT","subscribeState","cb","changeNetwork","networkName","CHANGE","setShowTestNetworks","showTestNetworks","SET_SHOW_TEST_NETWORKS","removeNetwork","REMOVE_NETWORK","getSpecificChainDetails","GET_SPECIFIC_CHAIN_DETAILS","addNetwork","networkInput","ADD_NETWORK","editNetwork","editNetworkInput","EDIT_NETWORK","editNetworksOrder","EDIT_NETWORKS_ORDER","getRpcChainId","rpcUrl","GET_RPC_CHAIN_ID","confirmTransaction","transactionId","rejectTransaction","REJECT","rejectReplacementTransaction","REJECT_REPLACEMENT_TRANSACTION","cancelTransaction","gasLimit","gasValues","CANCEL_TRANSACTION","speedUpTransaction","SPEED_UP_TRANSACTION","getCancelGasPrice","GET_CANCEL_GAS_PRICE","getSpeedUpGasPrice","GET_SPEED_UP_GAS_PRICE","addressBookDelete","DELETE","addressBookSet","note","SET","setUserSettings","settings","SET_USER_SETTINGS","getNextNonce","GET_NEXT_NONCE","dismissWelcomeMessage","DISMISS_WELCOME_MESSAGE","dismissDefaultWalletPreferences","DISMISS_DEFAULT_WALLET_PREFERENCES","dismissReleaseNotes","DISMISS_RELEASE_NOTES","toggleReleaseNotesSubscription","enabled","TOGGLE_RELEASE_NOTES_SUBSCRIPTION","releaseNotesSubscriptionEnabled","toggleDefaultBrowserWallet","TOGGLE_DEFAULT_BROWSER_WALLET","defaultBrowserWalletEnabled","setDefaultGasPreference","defaultGasOption","SET_DEFAULT_GAS","updateAntiPhishingImage","image","UPDATE_ANTI_PHISHING_IMAGE","toggleAntiPhishingProtection","TOGGLE_ANTI_PHISHING_PROTECTION","antiPhishingProtectionEnabeld","setNativeCurrency","currencyCode","SET_NATIVE_CURRENCY","getValidCurrencies","GET_VALID_CURRENCIES","openHardwareConnect","OPEN_HW_CONNECT","openHardwareRemove","OPEN_HW_REMOVE","openHardwareReconnect","OPEN_HW_RECONNECT","connectHardwareWallet","device","HARDWARE_CONNECT","getHardwareWalletAccounts","pageIndex","pageSize","HARDWARE_GET_ACCOUNTS","importHardwareWalletAccounts","deviceAccounts","HARDWARE_IMPORT_ACCOUNTS","setHardwareWalletHDPath","HARDWARE_SET_HD_PATH","getHardwareWalletHDPath","HARDWARE_GET_HD_PATH","getWindowId","GET_WINDOW_ID","searchChainsByTerm","term","SEARCH_CHAINS","generateOnDemandReleaseNotes","version","GENERATE_ON_DEMAND_RELEASE_NOTES","updateAccountFilters","filters","SET_ACCOUNT_FILTERS","accountFilters","isAccountDeviceLinked","HARDWARE_IS_LINKED","removeHardwareWallet","HARDWARE_REMOVE","checkExchangeAllowance","exchangeType","CHECK_ALLOWANCE","approveExchange","allowance","customNonce","APPROVE","getExchangeQuote","quoteParams","GET_QUOTE","getExchangeParameters","exchangeParams","GET_EXCHANGE","executeExchange","EXECUTE","setNetworkStatus","networkStatus","SET_USER_ONLINE","getBridgeAvailableRoutes","routesRequest","GET_BRIDGE_ROUTES","approveBridgeAllowance","spenderAddress","APPROVE_BRIDGE_ALLOWANCE","getBridgeQuote","quoteRequest","checkAllowance","GET_BRIDGE_QUOTE","executeBridge","bridgeTransaction","EXECUTE_BRIDGE","initBackgroundState","BackgroundContext","isContextInit","BackgroundState","props","useReducer","dispatch","useEffect","initContext","initialState","navigator","addEventListener","Spinner","size","text","iconTextSeparation","color","display","role","className","marginRight","useBlankState","useBeforeunload","capture","removeEventListener","usePreventWindowResize","fixedSizes","time","innerWidth","innerHeight","sizes","preventResize","clearTimeout","resizeBy","cancelPreventResize","mergeReducer","s","defaultInitialState","status","IDLE","useAsyncInvoke","initialStateRef","useRef","current","setState","setData","useCallback","SUCCESS","setError","ERROR","reset","run","promise","then","PENDING","isIdle","isLoading","isError","isSuccess","useSubmitOnEnter","onSubmit","isFormValid","isEnabled","canSubmit","e","key","preventDefault","catch","classnames","_classnames","primaryButton","Classes","centered","start","animated","transform","iconButton","baseButton","button","smallButton","menuButton","buttonIcon","actionButton","logoutButton","disabledLogoutButton","redButton","disabledButton","darkButton","disabledDarkButton","liteButton","inputLabel","inputBordered","input","inputBorder","checkbox","checkboxAlt","placeholder","blueSection","blueSelectionDisabled","blueSectionActive","blueSectionInput","roundedIcon","roundedFilledIcon","clickableText","selectBaseStyle","selectStyle","selectStyleDisabled","selectInlineStyle","IconName","FullCenterContainer","LogoHeader","src","logo","alt","PageLayout","header","maxWidth","sideComponent","PopupLayout","footer","submitOnEnter","fullHeader","useLayoutEffect","PendingSetupPage","cross","onClick","PopupFooter","useOnMountHistory","history","useHistory","useMemo","useOnMountLocation","location","useLocation","isFeatureEnabled","network","feature","features","some","f","useSelectedNetwork","availableNetworks","selectedNetwork","isEIP1559Compatible","isUserNetworkOnline","availableBridgeChains","availableSwapChainIds","toUpperCase","defaultNetworkLogo","iconUrls","ETH_LOGO","isSendEnabled","isTornadoEnabled","isSwapEnabled","includes","isBridgeEnabled","find","chain","getAccountColor","hash","lastDigit","parseInt","match","hueMin","hueMax","saturation","ColorHash","hue","min","max","hex","getNetworkColor","keccak256","toUtf8Bytes","GenericTooltip","disabled","top","right","bottom","left","divFull","autoPositioning","paddingFromRight","ref","paddingRight","placeholderRect","getBoundingClientRect","placeholderRightX","x","NetworkDisplayBadge","fill","truncate","networkDesc","desc","networkColor","formattedNetworkName","length","slice","backgroundColor","AppIcon","iconSize","background","draggable","CloseIcon","viewBox","xmlns","d","ArrowIcon","ThreeDotsIcon","GroupIcon","SearchIcon","CheckmarkIcon","CrossedOutEyeIcon","EyeIcon","TrashBinIcon","PencilIcon","PlusIcon","EmptyDrawer","stroke","strokeWidth","strokeDasharray","WalletIcon","clipPath","strokeMiterlimit","strokeLinecap","UsbIcon","ImportIcon","ClockIcon","SwitchIcon","ICONS","GROUP","THREE_DOTS","SEARCH","CHECKMARK","CROSSED_OUT_EYE","EYE","TRASH_BIN","PENCIL","PLUS","EMPTY_DRAWER","EmptyDrawerIcon","USB","RIGHT_CHEVRON","CLOCK","SWITCH","STROKED_ICONS","SIZES","sm","md","lg","xl","Icon","profile","sizeClasses","iconType","selected","danger","useOnClickOutside","onClickOutsideFunction","listener","event","contains","target","useIsHovering","isHovering","setIsHovering","getIsHoveringProps","onMouseEnter","onMouseLeave","OutlinedButton","DropdownContext","isShowingMenu","toggleMenu","onClickItem","useDropdownContext","DropdownButton","Children","map","child","childNode","cloneElement","DropdownIconButton","iconName","DropdownOutlinedIconButton","DropdownMenu","stopPropagation","DropdownMenuItem","nativeEvent","Dropdown","setIsShowingMenu","menuRender","buttonRender","forEach","compundMember","compoundName","prev","Menu","Button","MenuItem","DappReq","DappRequestSigningStatus","PopupHeader","backButton","keepState","networkIndicator","icon","onClose","onBack","actions","goBackState","lastLocation","useLastLocation","useOnMountLastLocation","fromAction","setFromAction","mounted","setMounted","backdropFilter","minHeight","replace","newState","pathname","go","goBack","idx","push","CapsLockDetector","isCapsLock","setIsCapsLock","cbUp","getModifierState","cbDown","PasswordInput","forwardRef","label","autoFocus","autoComplete","strengthBar","onChange","onPaste","setPasswordScore","onKeyDown","passwordValue","setPasswordValue","showPassword","setShowPassword","showStrengthBar","setShowStrengthBar","handlePasswordChange","htmlFor","classNames","eyeClose","eyeOpen","onChangeScore","Dialog","onClickOutside","nodeRef","CSSTransition","in","timeout","unmountOnExit","maxHeight","marginTop","ConfirmDialog","onConfirm","ClickableText","Tooltip","normal","TRANSLATE","AntiPhishing","imgSize","translateTooltip","rel","href","ButtonWithLoading","buttonClass","formId","form","SEND_GAS_COST","BigNumber","from","APPROVE_GAS_COST","DEFAULT_DECIMALS","DAPP_FEEDBACK_WINDOW_TIMEOUT","LINKS","HD_PATH","LOCK_TIMEOUT","CUSTOM_NETWORK_RISKS","MALICIOUS_DAPPS","BRIDGES","CHANGELOG","schema","yup","shape","required","UnlockPage","useForm","resolver","yupResolver","register","handleSubmit","errors","formState","isSeedPhraseBackedUp","lockedByTimeout","hasDialog","setHasDialog","setIsLoading","getSeedPhrase","phrase","hasBack","shouldFocus","Object","keys","useAntiPhishingProtection","getPathDepth","split","filter","p","TransitionClass","up","down","TransitionRoute","transition","Component","component","rest","pathName","lastPathName","transitionDirection","currentDepth","makeRoutes","routes","route","i","Divider","formatHash","chars","formatName","accountName","maxLength","formatHashLastChars","AccountIcon","fillRule","clipRule","formatNumberLength","maxDigits","ellipsis","whole","decimal","displayDecimal","Math","displayEllipsis","join","CopyTooltip","copied","zIndex","fontSize","useSelectedAccount","selectedAddress","useTokensList","balances","nativeCurrency","nativeToken","decimals","symbol","nativeTokenBalance","token","balance","currentNetworkTokens","values","sort","b","firstNumber","gt","eq","getNonSubmittedTransactions","transactions","external","validStates","UNAPPROVED","APPROVED","SIGNED","filteredTransactions","t","nonSubmittedTransactions","reduce","result","transaction","getRequestRouteAndStatus","permissionRequests","unapprovedTransactions","dappRequests","permissionsReqs","entries","transactionReqs","transactionCategory","TOKEN_METHOD_APPROVE","tokenId","dappReqs","SIGNING","ASSET","SWITCH_NETWORK","ADD_ETHEREUM_CHAIN","sortedList","isEmpty","useNextRequestRoute","isNotEmpty","removeTiemout","timeoutId","useDebouncedState","timeoutRef","setDebouncedState","nextState","debounce","DappRequest","requestType","layoutRender","latestDappRequest","requests","timeA","siteMetadata","dappReqData","params","approveTime","requestCount","useDappRequest","nextRequest","setNextRequest","CheckBoxDialog","showCheckbox","checkboxText","closeText","showCloseButton","confirmText","onCancel","checked","setChecked","useUserSettings","FullScreenDialog","MessageDialog","wideMargins","fullScreen","DialogComponent","WarningDialog","onDone","buttonLabel","iconColor","useClickOutside","cancelButton","DEVICE_RECONNECTION_WARNING_STEPS","info","DEVICE_CONNECTION_STEPS","requestConnectDevice","hid","requestDevice","vendorId","connectedDevices","LoadingOverlay","WindowIdContext","windowId","WindowIdProvider","setWindowId","wId","get","useWindowId","timeExceedsTTL","lastTime","ttl","getTime","calculateRemainingSeconds","startTime","minValue","timeEllapsed","remainingTime","remainingSeconds","abs","twoDigits","toLocaleString","minimumIntegerDigits","useGrouping","secondsToMMSS","seconds","minutes","floor","concat","Number","secondsToEstimatedMinutes","legend","VOLATILE_LOCAL_STORAGE_PREFIX","VOLATILE_ITEMS_REGEX","RegExp","saveLocalStorageItem","localStorage","removeItem","toStore","updateTime","setItem","stringify","findLocalStorageItems","results","item","hasOwnProperty","getItem","clearVolatileLocalStorageItems","clearLocalStorageItems","defaultOptions","initialValue","volatile","useLocalStorageState","AnimatedIconName","stateOptions","storageKey","generateVolatileLocalStorageKey","storedData","parsedData","retrieveLocalStorageItem","deserializer","unlisten","listen","useLocationRecovery","setLastLocation","clear","persist","useClearStickyStorage","clearLocationRecovery","executeConnect","vendor","useHardwareWalletConnect","isReconnecting","clearStickyStorage","HardwareDeviceNotLinkedDialog","showReconnect","steps","connectAndClose","step","index","useCheckAccountDeviceLinked","isDeviceUnlinked","setIsDeviceUnlinked","check","checkDeviceIsLinked","resetDeviceLinkStatus","checkDeviceIsLinkedWrapper","wrappedFn","cx","cy","r","LoadingDialog","customSpinner","ErrorDialog","hideButton","timer","getChainIdFromNetwork","networks","getNetworkFromChainId","generateExplorerLink","blockExplorerUrls","createCustomExplorerLink","createCustomAccountLink","getExplorerTitle","blockExplorerName","AccountMenuOptionType","Animations","Bridge","autoplay","bridgeIcon","hover","ConfirmationCheck","confirmationCheck","DeviceInteraction","deviceInteraction","loop","Success","successAnim","BlueLineLoadingSkeleton","blueLineLoadingSkeleton","GreyLineLoadingSkeleton","greyLineLoadingSkeleton","GreyCircleLoadingSkeleton","greyCircleLoadingSkeleton","BlueCircleLoadingSkeleton","blueCircleLoadingSkeleton","AnimatedIcon","svgClassName","element","lottieInstance","animationData","instance","lottie","loadAnimation","rendererSettings","preserveAspectRatio","container","stop","destroy","play","SuccessDialog","txHash","explorerName","arrow","reducer","texts","titles","gifs","forceOpen","useWaitingDialog","defaultStatus","defaultIsOpen","WaitingDialog","clickOutsideToClose","loading","success","getDeviceFromAccountType","accountType","accountSort","getSortedAccounts","isHiddenAccount","toString","HIDDEN","getDefaultAccountName","accountNumber","HARDWARE_TYPES","isHardwareWallet","isInternalAccount","HD_ACCOUNT","accountNameExists","normalizeAccountName","getNextAccountName","nextAccountName","flagQueuedTransactions","pendingTransactions","lowestPendingNonce","SUBMITTED","INCOMING_BRIDGE_PLACEHOLDER","lowest","currentNonce","transactionParams","nonce","MAX_VALUE","transactionNonce","isQueued","isPendingState","getUITransactionParams","gasPricesLevels","gasPrice","average","maxPriorityFeePerGas","maxFeePerGas","isTransactionOrRequestAwaitingSigning","canUserSubmitTransaction","useCountdown","React","setRemainingSeconds","intervalRef","setInterval","clearInterval","messages","SIGN_TRANSACTION","confirming","failed","rejected","SIGN_MESSAGE","APPROVE_ALLOWANCE","SIGN_CANCEL","SIGN_SPEEDUP","Timer","operation","names","initialCaption","timeData","WaitingHWConfirmation","txTime","txTimeout","useTransactionWaitingDialog","callbacks","txSignTimeout","hwDeviceMessage","opType","getAwaitingSigningMessage","epochTime","FAILED","REJECTED","closeDialog","DAppPopupHeader","showNetworkIndicator","DAppOrigin","CodeBlock","Sign","requestStatus","hideAddressWarning","setCopied","accountWarningClosed","setAccountWarningClosed","isEthSignWarningOpen","setIsEthSignWarningOpen","method","dappReqParams","websiteIcon","rawData","accountData","differentAddress","getAddress","ATTEMPT_REJECT_REQUEST","sign","copy","clipboard","writeText","formatTypedDomain","domain","displayOrder","formattedDomainKeyNames","salt","verifyingContract","parsedDomain","nameOrDesc","getNetworkNameFromChainId","param","saveChoice","formatUnits","v1Data","v4Data","enableClipboard","indentWidth","iconStyle","displayObjectSize","displayDataTypes","quotesOnKeys","formatSignatureData","SignPage","AccountFilter","RemoveOption","MENU_ITEM_BY_OPTION","CUSTOM","REMOVE_CONTACT","REMOVE_ACCOUNT","EDIT","HIDE_ACCOUNT","UNHIDE_ACCOUNT","PROFILE_COLORS","textColor","borderColor","warning","dark","Tag","tagSize","useCopyToClipboard","initialText","onCopy","CHAIN_IDS_REQUIRE_EIP1191","useSelectedAddressWithChainIdChecksum","useAddressWithChainIdChecksum","eip1191ChainId","toChecksumAddress","AccountDisplay","showSelectedCheckmark","showAddress","showConnected","copyAddressToClipboard","actionButtons","menu","onClickAccount","confirmationDialog","setConfirmationDialog","isHoveringMenu","checksumAddress","hoverStyle","checkmarkIcon","menuItem","indx","optionMenuMetadata","defaultConfig","optionType","requiresConfirmation","confirmationTitle","confirmationMessage","getAccountMenuOptionMetadata","optionMetadata","handleOptionClick","AccountMultipleSelect","selectedAccount","toggleAccount","newValue","useSortedAccounts","includeHiddenAccounts","filterCurrentAccount","hiddenAccounts","ActionButton","AccountSearchBar","createAccountTo","setIsSearching","searchBarVisible","setSearchBarVisible","inputRef","focus","accountAdd","AccountFilterOptions","ALL","combinableValues","HARDWARE","getAccountFilterValue","filterByAccountFilter","safeFilters","filterAccounts","toLowerCase","matchByTerm","useAccountSearch","search","setSearch","onChangeSearch","CollapsableWarning","isCollapsedByDefault","onDismiss","dialog","collapsedMessage","isCollapsed","setIsCollapsed","ConnectSteps","site","isSiteOriginSafe","subdomains","every","subdomain","isOriginSafe","accountsList","selectedAccounts","setSelectedAccounts","filteredAccounts","setStep","allowSite","setAllowSite","checkAll","setCheckAll","nextEnabled","next","confirm","accept","postProcess","connectIcon","isSearching","c","ConnectPage","pendingPermissionRequest","usePendingPermissionRequest","ConnectedSite","onSiteClick","onDelete","confirmOpen","setConfirmOpen","ConnectedSitesPage","fromAccountList","connectedSites","permissions","handleSiteClick","handleDeleteClick","permission","PROFILES","outlined","ExclamationCircleIconFull","rx","warningBgStyle","WarningTip","justify","withCloseIcon","isClosed","setIsClosed","ConnectedSiteAccount","connected","handleRemoveFromSite","handleConnectSite","handleSwitchAccount","networkNativeCurrency","ConnectedSiteAccountsPage","fromRoot","activeAcc","activeAccount","connectedAccounts","isSelectedAccountConnected","Dots","styled","span","LoadingDots","HorizontalSelect","options","disableStyles","containerClassName","optionClassName","containerStyle","option","EndLabel","capitalize","toLocaleUpperCase","makeStringNumberFormField","requiredMessage","isGteThan0","test","isNaN","parseFloat","handleKeyDown","amt","currentTarget","MAX_SAFE_INTEGER","makeHandleChangeAmount","defaultValue","substring","handleChangeAmountGwei","handleChangeAmountWei","formatRounded","FixedNumber","fromString","round","ArrowUpDown","arrowDown","useGasPriceData","gasPriceData","slow","fast","convertAmount","rate","numberAmount","convertedNumberAmount","CURRENCY_SYMBOLS","USD","toCurrencyAmount","exchangeRate","formatCurrency","currencyAmount","returnNonBreakingSpace","locale_info","currency","precision","showCurrency","showSymbol","formatter","Intl","NumberFormat","minimumFractionDigits","maximumFractionDigits","prefix","formattedValue","format","TypographyType","calculateTransactionGas","mul","gasPriceToNativeCurrency","conversionData","exchangeRates","localeInfo","language","calculateGasPricesFromTransactionFees","gasFees","baseFee","percentage","div","minBaseFee","sub","maxValue","lt","add","minValueNativeCurrency","maxValueNativeCurrency","gasToGweiString","gas","gasInGwei","String","getTransactionFees","estimatedBaseFee","priority","baseFeePlusTip","totalGwei","totalTransactionCost","getTransactionSpeeds","gasPrices","low","medium","high","selectedOption","setSelectedGas","totalNativeCurrencyCostRange","totalETHCostRange","getGasOption","baseFeePerGas","gasLowerCap","defaultFees","isCustom","setIsCustom","averageTip","minGasLimit","schemaBuilder","gasLimitWarning","setGasLimitWarning","tipWarning","setTipWarning","maxFeeWarning","setMaxFeeWarning","defaultValues","setValue","getValues","clearErrors","handleCustomChange","validateGasLimit","handleBlur","fees","validateFees","parseUnits","handleSave","custom","pattern","onInput","shouldValidate","onFocus","onBlur","tabIndex","v","GasPriceComponent","defaultGas","setGas","isParentLoading","showEstimationError","displayOnlyMaxValue","setActive","nativeCurrencyDecimals","setBaseFee","showEstimationWarning","setShowEstimationWarning","transactionSpeeds","setTransactionSpeeds","minValueFormatted","maxValueFormatted","networkSymbol","totalETHCost","lte","totalNativeCurrencyCost","gasOptions","setGasOptions","selectedGas","defaultLevel","setTab","TabComponent","isLoaded","setIsLoaded","speedOptions","speed","defaultOption","nativeCurrencyIcon","ToggleButton","inputName","defaultChecked","readOnly","onToggle","isChecked","setIsCheked","backgroundStyle","defaultAdvancedSettings","customAllowance","flashbots","slippage","defaultSettingsDisplay","FLASHBOTS_MIN_GAS_LIMIT","AdvancedSettings","advancedSettings","setAdvancedSettings","defaultSettings","transactionGasLimit","isFlashbotsAvailable","isFlashbotsEnabled","setIsFlashbotsEnabled","slippageWarning","setSlippageWarning","nextNonce","clickOutsideRef","when","is","GetAdvancedSettingsSchema","validateSlippage","parsedSlippage","fetch","onSlippageChange","onNonceChange","isModified","selectedGasPrice","handlePriceSelection","price","nativeCurrencyAmount","ethTotalCost","defaultGasLimit","defaultGasPrice","setUserChanged","getSpeedOption","setGasPriceWarning","gasPriceWarning","GasPriceSelector","setGasPriceAndLimit","showGasLevels","speeds","setTransactionSpeedOptions","limit","setSelectedGasPrice","userChanged","o","useSelectedAccountBalance","useNonSubmittedExternalTransaction","transactionIds","transactionCount","useTransactionById","useAddressBook","addressBook","defaultParams","filterContacts","useAddressBookRecentAddresses","recentAddresses","recentNetworkAddresses","acc","calcExchangeRate","fromAmount","fromTokenDecimals","toAmount","toTokenDecimals","plainRate","toFixed","populateExchangeTransaction","swapParameters","blocksDropCount","metaType","REGULAR","loadingGasValues","tx","methodSignature","SWAP_1INCH","fromToken","toToken","fromTokenAmount","toTokenAmount","blockWalletFee","isNil","ExpandableText","isExpended","setIsExpended","_","TransactionDetailItem","isNativeValue","noSpace","expandable","unitName","TransactionDetailsList","details","detail","marginLeft","bnOr0","compareAddresses","isNativeTokenAddress","TransactionDetailsBasic","fromName","toName","_transaction","_nonce","useMultipleCopyToClipboard","CONFIRMED","transactionReceipt","effectiveGasPrice","gasUsed","txFee","transferType","BLANK_WITHDRAWAL","withdrawFee","transactionTo","TOKEN_METHOD_TRANSFER","resolveTransactionTo","arrowRight","CONTRACT_DEPLOYMENT","openIcon","ArgumentValue","unformattedValue","Array","isArray","canCollapse","parsedValue","isValidAddress","Argument","TransactionDetails","signature","parsedName","charAt","args","arg","TransactionDetailsAdvanced","TransactionConfirm","dialogOpen","gasPriceThresholdWarning","setGasPriceThresholdWarning","txById","checksumFromAddress","dialogClosed","setDialogClosed","selectedAccountBalance","ethExchangeRate","hasDetails","setHasDetails","hasBalance","setHasBalance","gasEstimationFailed","setGasEstimationFailed","gasCost","setGasCost","total","setTotal","totalInNativeCurrency","setTotalInNativeCurrency","setDefaultGas","transactionGas","setTransactionGas","transactionAdvancedData","setTransactionAdvancedData","nonceRef","description","totalCalc","calcTranTotals","hideEstimatedGasExceedsThresholdWarning","estimatedGas","isLower","baseMinGas","dif","gte","estimatedGasExceedsBaseLowerThreshold","isHigher","baseMaxGas","estimatedGasExceedsBaseHigherThreshold","addressDialogIsOpen","gasExceedsThresholdDialogIsOpen","totalLength","valueWidth","originWidth","transactionValues","newSettings","TransactionConfirmPage","nextTransaction","currentTx","setCurrentTx","GearIcon","AccountsList","useConnectedAccounts","isAccountConnected","accountAddress","useAccountsFilter","offsets","Badge","position","offset","getFilterOptions","customFilters","filterOptions","divider","AccountFilters","onChangeFilters","selectedFilters","badgeCount","newFilter","currentFilters","nextFilters","filteredFilters","getNextAccountFilterValue","Styles","TITLE","Typography","extraProps","EmptyState","AccountSelect","showMenu","showActionButtons","onAccountChange","filterValue","setFilterValue","searchedAccounts","currentAccountAddress","currentAccount","otherAccounts","internalAccountsNumber","accountInfo","ACTIVE","isActiveAccount","getAccountOptions","searchedActiveAccounts","showEmptyState","newFilters","prevValue","AccountsPage","setSelectedAccount","QRIcon","sortNetworksByOrder","n1","n2","order","getFirstUrl","urls","canDeleteNetwork","parseChainId","NetworkOption","handleNetworkChange","enable","NetworkSelect","optionsContainerClassName","networkList","setNetworkList","isImportingDeposits","getNetworkData","hidden","isFromHomePage","HoverAnimation","keyframes","rotate","ROTATE","ArrowHoverAnimation","direction","backgroundImage","backgroundSize","backgroundPosition","useDOMElementObserver","domRef","fn","deps","observerRef","disconnect","IntersectionObserver","entry","isIntersecting","threshold","observe","ChevronRightIcon","AssetsLoadingSkeleton","deepEqual","object1","object2","keys1","keys2","val1","val2","areObjects","isObject","object","getValueByKey","existsKeyInObject","EnoughNativeTokensToSend","useCurrencyFromatter","tokenSymbol","isNativeCurrency","AssetIcon","asset","filled","unknownTokenIcon","onError","onerror","Asset","SubAssetList","assets","isNetworkChanging","isRatesChangingAfterNetworkChange","deletedTokens","setDeletedTokens","pushDeleteTokens","deleteToken","newDeleted","AssetsList","plus","getDisplayTime","checkTime","checkTimeHours","toLocaleTimeString","timeStyle","today","yesterday","setDate","getDate","isToday","getMonth","getFullYear","isYesterday","year","month","day","hour","minute","formatTransactionValue","roundDecimals","BRIDGE_TX_CATEGORIES","INCOMING_BRIDGE","INCOMING_BRIDGE_REFUND","useGetBridgeTransactionsData","bridgeDetails","setBridgeDetails","getChainData","chainData","blockExplorerUrl","explorer","explorers","getBridgeDetails","txLink","explorerLink","bridgeParams","fromChainId","sendingChainData","effectiveToChainId","toChainId","receivingChainData","sendingTransaction","sendingTxHash","sendingTxLink","receivingTransaction","receivingTxHash","receivingTxLink","fillBridgeDetails","ExpandableItem","expanded","defaultExpanded","isExpanded","setIsExpanded","FeeItem","amountStr","FeeTokenSummaryDisplay","feeDetail","fee","Fragment","BridgeDetilsFees","bridgeTransactionsData","currentChainId","feesByChain","chainFees","groupFeesByChain","feeCosts","getChainName","LIFI_NATIVE_ADDRESS","BRIDGE_PENDING_STATUS","NOT_FOUND","checkForBridgeNativeAsset","populateBridgeTransaction","bridgeQuote","transactionRequest","bridgeImplementation","LIFI_BRIDGE","tool","estimatedDurationInSeconds","hasEnoughFundsToPayTheGasInSendTransaction","gasPricesData","transactionFees","isANotFoundQuote","quote","getBridgePendingMessage","destinationNetworkName","substatus","NOT_PROCESSABLE_REFUND_NEEDED","REFUND_IN_PROGRESS","CHAIN_NOT_AVAILABLE","BRIDGE_NOT_AVAILABLE","UNKNOWN_ERROR","WAIT_SOURCE_CONFIRMATIONS","WAIT_DESTINATION_TRANSACTION","BridgeCompletedStatus","BridgePartiallyCompletedStatus","BridgeRefundedStatus","ErroredBridgeStatus","NotInitializedBridgeStatus","PendingBridgeStatus","pendingMessage","BridgeDetailsStatus","DONE","COMPLETED","PARTIAL","REFUNDED","Explorer","BridgeDetailsSummary","birdgeTransactionsData","bridgeSendingChainLabel","bridgeReceivingChainLabel","effectiveToToken","bridgedAmount","labelForFinalState","effectiveToTokenAmount","buildBridgeDetailedItems","statusDetail","durationDetails","durationInSeconds","endTime","explorerDetails","BridgeTransactionDetails","BridgeDetails","selectedTab","setSelectedTab","transactionMessages","BLANK_DEPOSIT","INCOMING","SENT_ETHER","CONTRACT_INTERACTION","TOKEN_METHOD_INCOMING_TRANSFER","TOKEN_METHOD_TRANSFER_FROM","pendingTransactionMessages","getTransactionMessage","category","transactionIcons","blankLogo","eth","failedStatuses","CANCELLED","DROPPED","PendingSpinner","TransactionIcon","transactionStatus","transactionIcon","getTransactionLabel","pendingIndex","defaultCategory","isPending","CANCEL","SPEED_UP","getPendingTransactionMessage","getCategoryMessage","getTransactionTimeOrStatus","confirmationTime","submittedTime","forceDrop","displayTime","REGULAR_CANCELLING","REGULAR_SPEEDING_UP","extraInfo","getTransactionTime","TransactionItem","transfer","isBlankWithdraw","txValueSign","txValue","valueLabel","formattedLabel","typeCss","amountCss","getTransactionItemStyles","transferCurrencyAmount","canSpeedUpOrCancel","OperationDetails","txId","curr","TransactionsLoadingSkeleton","TransactionsList","getInitialCount","setTransactionCount","isLoadingMoreTransactions","setIsLoadingMoreTransactions","loaderRef","countToLoad","dotLoading","useTransactions","activityList","confirmed","pending","allTransactions","flatMap","speedUpTx","replacedBy","cancelTx","ActivityAssetsView","initialTabIndex","initialTab","onTabChange","BalanceLoadingSkeleton","TokenSummary","Balances","TokenBalance","ExchangeRateBalance","TokenName","Actions","AssetListType","GasIcon","defaultObj","GasData","GasDataInfo","INFO_BY_LEVEL","scooter","car","plane","GasPricesInfo","calculateGasCost","displayGasPrices","level","getDisplayGasPrices","SEND","DoubleArrowHoverAnimation","vector","TransparentOverlay","DAppConnection","dAppConnected","isConnected","setIsConnected","useConnectedSite","PopupPage","hasErrorDialog","setHasErrorDialog","OpenExplorerIcon","ViewOnExplorerButton","mode","ReceivePage","copyToClipboard","DropDownSelector","topMargin","bottomMargin","popupMargin","customWidth","midToTopDistance","setMidToTopDistance","maxHeightInPx","setMaxHeightInPx","displayRef","popupRef","viewHeight","midToTopDistanceCalc","maxHeightInPxCalc","useMergeRefs","refs","filteredRefs","Boolean","inst","CheckmarkCircle","classes","opacity","SearchInput","isValid","debounced","debounceTime","minSearchChar","inputClassName","timeoutIdRef","isFocus","setIsFocus","onValueChanged","searchIcon","animate","TokenLogo","bigLogo","AssetDropdownDisplay","selectedAsset","displayIcon","customAmount","assetBalance","assetBalanceClassName","TokenDisplay","clickable","hoverable","textSize","isSmall","setSelected","checkmarkMiniIcon","AssetList","onAssetClick","searchValue","addTokenState","plusIcon","ZERO_BN","AssetSelection","onAssetChange","selectedAssetList","dropdownWidth","searchResult","setSearchResult","assetList","setAssetList","swappedAssetList","swapTransactionList","useSwappedTokenList","defaultAssetList","searchAll","searchRes","ownedAsset","exactResult","partialResult","elseResult","searchLength","lcSymbol","startsWith","uppercasedSearch","useCustomCompareEffect","prevDeps","nextDeps","prevAssets","nextAssets","prevToken","nextToken","oldBalance","newBalance","ErrorMessage","applyCustomFilters","matched","categories","useWaitingForSigningInternalTransaction","txFilters","useInProgressInternalTransaction","lastPendingTransaction","currentTxId","setCurrentTxId","clearTransaction","AddressDisplay","receivingAddress","selectedAccountName","showingTheWholeAddress","setShowingTheWholeAddress","isNativeToken","addressToDisplay","fullAddressToDisplay","accountNameToDisplay","displayAddressSpan","GetAmountYupSchema","GasCostBalanceValidation","txAmount","EtherSendBalanceValidation","TokenSendBalanceValidation","BalanceValidation","HasBalance","selectedToken","isZero","INITIAL_VALUE_PERSISTED_DATA","submitted","SendConfirmPage","persistedData","setPersistedData","currentTransaction","useAccountNameByAddress","preSelectedAsset","showSendingToTokenAddressWarning","setShowSendingToTokenAddressWarning","isGasLoading","setIsGasLoading","usingMax","setUsingMax","nativeCurrencyAmt","setSelectedToken","calcNativeCurrency","assetAmount","trigger","getMaxTransactionAmount","balanceValidation","errorMessage","sendPromise","console","setMaxTransactionAmount","_usingMax","maxTransactionAmount","formatAmount","handleChangeAmount","newAmount","handleChangeAsset","cleanAmount","hasTokenBalance","Zero","estimateValue","One","estimationSucceeded","checkIfSendingToTokenAddress","inputFocus","setInputFocus","DEFAULT","useAddressBookAccounts","localeCompare","searchEns","suffixValue","supportedSuffixes","searchUD","isAddress","suffix","pop","AccountSearchResults","onSelect","resultsToDisplay","wallet","ens","ud","defaultAccounts","addressBookAccounts","ensEnabled","setResults","noWalletResults","noAddressBookResults","noEnsResults","noUDResults","newResults","Checkbox","SendPage","defaultAsset","fromAssetPage","myAccounts","searchString","setSearchString","setWarning","setPreSelectedAsset","setIsAddress","addContact","setAddContact","canAddContact","setCanAddContact","searchInputRef","validAddress","normalizedAddress","isCurrentAccount","isInAddressBook","isInMyAccounts","checkAddress","blur","len","setSelectionRange","goToSide","CardFrame","ariaProps","CreateAccountCard","CreateAccountPage","TextInput","appearance","endLabel","onClickInfo","spellCheck","hasFocus","setHasFocus","AddTokenManualView","manualTokenAddress","setSubmitEnabled","addManualTokenSchema","tokenDecimals","tokenLogo","tokenName","tokenType","watch","userTokens","useAccountTokens","tokenAddresses","tokenSymbols","setMessage","refetchOption","setRefetchOption","refetchAnimation","setRefetchAnimation","shouldShowWarningDialog","setShouldShowWarningDialog","tokenToAdd","msg","onAddressChange","fetchTokenData","tokenSearchResponse","fetchFailed","AddTokenListView","searchedValue","el","filteredResults","select","itemCount","itemSize","itemData","AddTokensPage","submitEnabled","setSearchedValue","isManualTokenView","res","exacts","others","handleSubmitEnabled","redirectTo","AddTokensConfirmPage","addingTokens","setAddingTokens","tokenList","getClassnamesForType","Select","currentValue","setShowMenu","handleItemChange","selectLabel","SelectOption","Option","memo","IconURLValidation","ChainIdValidation","BlockExplorerValidation","RPCUrlValidation","exportType","encryptingPassword","rule","encryptingPasswordConfirmation","nullable","notRequired","oneOf","ExportAccountPage","isVerificationInProgress","setIsVerificationInProgress","shouldUnregister","exportData","LinkButton","passState","lite","currentState","ClickToReveal","hiddenText","revealMessage","revealed","lockIcon","ExportDonePage","setRevealed","collapseStringsAfterLength","collapsed","encodeURIComponent","download","DownloadIcon","VerticalSelect","disabledOptions","isActive","isDisabled","tooltipOptions","AppVersion","process","SettingsPage","handleError","useErrorHandler","networkCloud","book","spanner","usb","about","logoutIcon","create","useStateLogs","downloadStateLogsHandler","stateLogs","previousWithdrawals","pendingDeposits","depositsCount","pendingWithdrawals","areDepositsPending","areWithdrawalsPending","isVaultInitialized","importingErrors","stateJsonString","link","fileName","click","links","AboutPage","ReminderPage","setSeedPhrase","setPassword","showRequests","requestRoute","shouldEnterPassword","isReminder","findPositionOfSelectedWord","wordsArray","word","findIndex","wordObj","isSelected","checkForError","closeCurrentTab","remove","IdleComponent","handleOnAction","useIdleTimer","onAction","eventsThrottle","SeedWordsInput","words","availableWords","setAvailableWords","handleWordClick","seedWord","wordIndex","isInputClick","updatedAvailableWords","splice","wordIndexInInput","SeedPhraseBlock","verificationError","seedWords","inputWords","onSeedWordsChange","BackupConfirmPage","isUnlocked","alert","backLink","doneLink","setInputWords","setVerificationError","wordsForSeedPhrase","array","j","random","shuffleArray","isPhraseValid","inputPhrase","confirmSeedPhrase","BackupDonePage","ErrorFallbackPage","resetErrorBoundary","handleReset","AddressBookPage","removeContact","editMode","contact","contactSchema","contactName","trim","contactAddress","AddContactPage","canUpdate","setCanUpdate","pageTitle","buttonTitle","placeholderÐ¡ontactName","contactNameExists","InfoComponent","infoIcon","SwitchEthereumChain","currentNetworkChainId","newNetworkChainId","currentNetwork","newNetwork","currentSiteMetadata","approve","fontStyle","SwitchEthereumChainPage","DetailsDialog","itemTitleSize","itemContentSize","titleSize","fixedTitle","onOption","showUndefined","expends","setExpends","previousLengthRef","newExpends","RPCValidationEndLabelInfo","isValidating","toolTipClassName","wrapperClassName","rpcValidation","rpcChainId","withWrapper","CHAIN_ID_DOESNT_MATCH","INVALID_URL","INVALID_ENDPOINT","UNVERIFIED_ENDPOINT","EMPTY_UNKNOWN_CHAIN","VERIFIED_ENDPOINT","KNOWN_EXPLORER","UNKNOWN_EXPLORER","KNOWN_CHAIN_ID","UNKNOWN_CHAIN_ID","CUSTOM_ICON","ChainIcon","iconUrl","hide","loaded","setLoaded","unknownChainIcon","onLoad","AddEthereumChain","chainName","validations","isImageSaved","setIsImageSaved","saveImage","knownChainId","knownRpcUrl","knownBlockExplorer","knownIcon","AddEthereumChainPage","LockTimeout","currentTimeout","setCurrentTimeout","selectedTimeout","setSelectedTimeout","timeoutEnabled","setTimeoutEnabled","onSave","AccountMenu","exportAccountDataLabel","qrIcon","sites","exportIcon","openExternal","trashBinIcon","accountsIcon","resetIcon","editIcon","ResetAccountPage","editAccountSchema","EditAccountPage","UNKNOWN_BALANCE","WatchAsset","setBalance","isUpdate","savedToken","isBase64Image","assetImageSrc","addToken","copyAssetAddress","fetchedBalance","blankIcon","WatchAssetPage","formSchema","calcGasPrice","FEE_MARKET_EIP1559","CancelAndSpeedUpComponent","getSuggestedFees","submitAction","currentBalance","customErrors","setCustomErrors","txObj","currentReplacementTxId","setCurrentReplacementTxId","replacementTx","oldGasLimit","oldGasPrice","oldMaxFeePerGas","oldMaxPriorityFeePerGas","newFees","setNewFees","suggestedAmount","setSuggestedAmount","transactionType","accessList","ACCESS_LIST_EIP2930","LEGACY","getParsedValues","isFeeLow","notEnoughFunds","newCustomErrors","newWarning","gasLimitRef","gasPriceRef","maxPriorityFeePerGasRef","maxFeePerGasRef","Price","SpeedUpPage","oldFees","CancelPage","_oldFees","MiniCheckmark","parseAllowance","parsedCustomAllowance","_hex","stripHexPrefix","UNLIMITED_ALLOWANCE","MaxUint256","ApproveAsset","setTokenName","setTokenLogo","isEditAllowancePage","setIsEditAllowancePage","isCustomSelected","setIsCustomSelected","setCustomAllowance","isCustomAllowanceSaved","setIsCustomAllowanceSaved","setAssetBalance","isTokenLoading","setIsTokenLoading","isNameLoading","setIsNameLoading","defaultAllowance","finally","searchTokensResponse","parsed","GetAllowanceYupSchema","mainSection","editAllowanceSection","ApproveAssetPage","useGetAssetByTokenAddress","useTokenTransactions","contractToLower","contractAddress","RoundedIconButton","AssetDetailsPage","currencyFormatter","isNative","tokenTransactions","isRemoving","setIsRemoving","successOpen","setSuccessOpen","formattedTokenBalance","roundedTokenBalance","optionsWidth","removeToken","fromTokenBalance","ButtonWithIcon","PhishingProtectionPreferencesPage","newPhishingImage","setNewPhishingImage","showSuccessDialog","setShowSuccessDialog","phishingEnabled","setPhishingEnabled","isDirtyEnabled","isDirtyImage","isDirty","refreshImage","newImage","refresh","LocalePreferencesPage","validCurrencies","setValidCurrencies","newCurrency","setNewCurrency","currencies","code","PreferencesPage","lock","pin","news","world","bell","shield","DefaultWalletPreferencesPage","isWelcome","defaultBrowserWallet","setDefaultBrowserWallet","wasDefaultBrowserWallet","onNext","DefaultGasPreferencesPage","setSelectedOption","ReleaseNotesPreferencesPage","subscribedToReleaseaNotes","subscribedReleaseNotes","setSubscribedToReleaseNotes","Info","BulletType","warn","Item","Bullet","Title","List","ApproveOperation","ReleaseNotesInfo","releaseNotes","notesGroupedByTitle","sections","section","notes","OnDemandReleaseNotesPage","useParams","WelcomeInfo","WarningsPreferencesPage","hideBridgeInsufficientNativeTokenWarning","warningsConfig","setWarningsConfig","ChainFilters","assetAllowance","ApprovePage","assetAddress","minAllowance","approveOperation","SWAP","nextLocationState","inProgressTransaction","isEditAllowanceSection","setIsEditAllowanceSection","isGasUpdating","setIsGasUpdating","setCustomNonce","isApproving","minimumAllowance","hasMinAllowance","labels","assetName","mainSectionTitle","mainSectionText","editAllowanceText","getLabels","localAsset","assetDecimals","shouldShowError","parsedAllowance","selectedFees","setSelectedFees","selectedGasLimit","setSelectedGasLimit","feePerGas","saveAllowance","swapQuote","allowanceResponse","allowanceTransactionId","useNewAccountHelper","allAccounts","suggestedAccountName","checkAccountNameAvailablility","isAvailable","createAccountSchema","AddAccountPage","accountNameErr","createAccountAction","newAccount","importAccountSchema","privateKey","importType","ImportAccountPage","ApproveNFT","isNFTSection","setIsNFTSection","ApproveNFTPage","RateUpdateDialog","lastRateRef","th","lastRate","toNumber","RefreshLabel","useTokenBalance","addr","SwapPage","defaultAmount","timeoutStart","setTimeoutStart","hasAllowance","setHasAllowance","setQuote","canSwitchInputs","setCanSwitchInputs","tokenFrom","tokenTo","bigNumberAmount","swapDataState","setSwapDataState","tokenFromBalance","triggerAmountValidation","watchedAmount","formattedAmount","isUsingNetworkNativeCurrency","maxAmount","isMaxAmountEnabled","onUpdateAmount","parsedAmount","switchInputs","nextSwapState","toTokenAmountBN","intervalTimeoutRef","isValidFetch","fetchQuote","allowanceCheck","fromTokenAddress","toTokenAddress","remainingSuffix","ceil","swapFee","BASE_SWAP_FEE","tokenTarget","swapIcon","AssetAmountDisplay","amountString","useHasSufficientBalance","currentNetworkToken","tokenBalance","useAwaitAllowanceTransactionDialog","WaitingMessage","WaitingAllowanceTransactionDialog","onSuccess","SwapPageConfirm","allowanceTransaction","isInProgressAllowanceTransaction","allowanceTxDialogStatus","allowanceTxDialogIsOpen","closeAllowanceTxDialog","isFetchingSwaps","setIsFetchingSwaps","setSwapParameters","showDetails","setShowDetails","isSwapping","shouldFetchSwapParams","isGasInitialized","isSwappingNativeToken","hasNativeAssetBalance","hasFromTokenBalance","swapTransactionParams","updateSwapParameters","fromAddress","swapParams","SwapAfterAddTokenPage","NetworkDisplay","networkInfo","moveNetworkCard","isTestnet","findNetworkCard","onSuccessfulDrop","isSelectedNetwork","isHoveringIcons","confirmSwitchNetwork","setConfirmSwitchNetwork","dropAnimation","setDropAnimation","dropRef","dragRef","originalIndex","useDrag","collect","monitor","isDragging","end","didDrop","drag","preview","useDrop","overIndex","dropResult","getDropResult","drop","cardHoverStyle","NetworksPage","mainNetworks","setMainNetworks","testNetworks","setTestNetworks","onClickNetwork","indexOf","hoveredOnIndex","draggedIndex","setNetworks","draggedItem","newNetworks","structuredClone","networksOrder","parsedAvailableNetworks","netInfo","testnets","mainnets","DndProvider","backend","HTML5Backend","CLASSES_BY_TYPE","Alert","usePersistedLocalStorageForm","localStorageProps","formProps","persistedForm","setPersistedForm","formReturn","watched","useWatch","control","getStatusFromEnpoint","chainInfo","configuredUrl","rpc","validateUrl","networkSchema","NetworkFormPage","canDelete","isEdit","selectedChainId","chainDetailsRef","addNetworkInvoke","removeNetworkInvoke","setIsValidating","confirmDeletion","setConfirmDeletion","EMPTY","rpcValidationStatus","setRpcValidationStatus","setRpcChainId","isNativelySupported","setIsNativelySupported","isProviderNetworkOnline","watchedFields","watchName","watchChainId","watchRPCUrl","watchCurrencySymbol","derivateRPCStatusFromWatchers","parsedChainId","networkData","currencySymbol","updates","existingNetwork","nativelySupported","rpcEndpointIsValid","invalidCurrencySymbolWarn","networkAlreadyExistError","networkNameInUseError","net","editingSelectedNetwork","canSubmitForm","NetworkDetailsPage","rpcUrls","ChainDisplay","logoUrl","unkownLogoUrl","BridgeErrorType","ChainFiltersButton","idxToRemove","handleOnChange","TESTNET","ENABLED","SearchNetworkPage","setFilters","hintRef","pickedChain","setPickedChain","manuallyAddNetwork","hint","filteredChains","suggestedChain","valueAsNumber","SuggestedAddNetwork","formNetwork","ManuallyAddNetwork","NetworkLogo","DropdownNetworkDisplay","NetworkSelectorList","onSelectNetwork","padding","transparent","NetworkDropdownDisplay","loadingText","emptyText","NetworkSelector","onNetworkChange","partial","BridgeNotFoundItem","BridgeErrorDisplay","bridgeError","Map","has","set","errorSummary","BridgeNotFoundQuoteDetails","errorsByTool","FeeDetails","summary","ERROR_BY_TYPE","INSUFFICIENT_BALANCE_TO_COVER_FEES","QUOTE_NOT_FOUND","OTHER","BridgeErrorMessage","onClickDetails","BridgeSetupPage","historyAmount","routesError","setRoutesError","bridgeQuoteError","setBridgeQuoteError","isFetchingRoutes","setIsFetchingRoutes","isFetchingQuote","setisFetchingQuote","availableRoutes","setAvailableRoutes","quoteNotFoundErrors","setQuoteNotFoundErrors","bridgeDataState","setBridgeDataState","selectedTokenBalance","selectedToNetwork","setFocus","selectedRoute","getRouteForNetwork","availbleChainsId","filteredAvailableNetworks","showBridgeNotFoundQuoteDetails","setShowBridgeNotFoundQuoteDetails","fetchRoutes","routesRes","fromTokens","toTokens","fetchedQuote","validQuote","quoteFeeStatus","OK","bridgeFeeSummary","feeDetails","INSUFFICIENT_ALLOWANCE","nextViewState","ENOUGH_ALLOWANCE","QUOTE_REFRESH_TIMEOUT","BridgeConfirmPage","isFetchingParams","setIsFetchingParams","bridgeDetailsModal","setBridgeDetailsModal","initialBridgeSlippage","isBridging","shouldFetchBridgeParams","isBridgingNativeToken","hasStarted","setHasStarted","all","hasEnoughFunds","UNKNOWN","ENOUGH","NOT_ENOUGH","useSelectedAccountHasEnoughNativeTokensToSend","isLoadingSelectedAccountHasEnoughNativeTokensToSend","selectedAccountNativeTokensInDestinationNetwork","checkSelectedAccountHasEnoughNativeTokensToSend","destinationTokenIsNative","destinationNetwork","checkNativeTokensInDestinationNetwork","idleScreen","bridgeWarningMessage","nativeTokenStatus","networkNativeToken","body","getBridgeWarningMessages","showBridgeWarningMessage","txParams","fetchParams","fetchQuoteParams","errorType","invalidQuote","ROUTES_DEFINITION","SetupBridgePage","blockListedForRecovery","appRoutes","WalletNews","showWelcomeMessage","showDefaultWalletPreferences","releaseNotesSettings","latestReleaseNotes","BLOCKLISTED_PATHNAMES","LocationHolder","blockList","store","useLocationRecoveryListener","allowedPaths","ProviderDownDialog","showDialog","reload","PopupComponent","isOnboarded","isAppUnlocked","lastActiveTime","showUnlock","showPage","PopupRouter","classList","resetHandler","shouldShowDialog","setShouldShowDialog","FallbackComponent","onReset","resetKeys","IntroductionPage","backgroundRepeat","SideTips","drawerIcon","penIcon","backupIcon","BackupNoticePage","useCheckUserIsOnboarded","matches","passwordConfirmation","acceptTOU","PasswordSetupPage","passwordScore","isCreating","setIsCreating","isSubmitDisabled","setIsSubmitDisabled","passwordValues","infoBgStyle","InfoTip","numberOfWordsOptions","SeedImport","numberOfWords","setNumberOfWords","seedPhraseError","setSeedPhraseError","isImportDisabled","setIsImportDisabled","passwordConfirmationWatch","isValidMnemonic","onSeedPhraseChange","newSP","onSeedPhraseWordChange","wordN","onSeedPhrasePaste","pastedSP","newNumberOfWords","wordnN","clipboardData","getData","getQueryParameter","paramName","URLSearchParams","SeedImportPage","SetupDonePage","confettiActive","setConfettiActive","config","angle","spread","startVelocity","elementCount","dragFriction","duration","stagger","perspective","colors","SetupOption","linkTo","linkLabel","SetupPage","crossIcon","ResetPage","ResetDonePage","IsLockedDialog","HardwareWalletSetupLayout","subtitle","buttons","ExternalLink","EyeRevealIcon","PageButton","StickyFirstPage","currentPage","PagesList","stickyFirstPage","pages","onChangePage","pagesToShow","page","pageNumber","PageControlButton","Previous","Next","PaginationControls","gettingAccounts","deviceNotReady","HardwareWalletAccount","accountsBalances","onBalanceFetched","fetchBalance","balanceFetched","currentHDPath","setHDPath","openModal","setOpenModal","hdPaths","selectedHDPath","setSelectedHDPath","hdPath","HardwareWalletAccountsPage","isLoadingHDPath","runImportAccounts","isImportingAccounts","existingAccounts","existingAddresses","setAccountBalances","addAccountBalance","getAccounts","importAccounts","updateHDPath","SIZES_IN_PX","CenteredTextCircle","circleSize","TEXT_SIZES_CLASSES","Step","ConnectDeviceStepsLayout","onConnect","HardwareWalletConnectionPage","setDeviceNotReady","deviceSteps","HardwareWalletReconnectionPage","reconnect","HardwareWalletRemoveDevicePage","selectedVendor","setSelectedVendor","isDeviceImported","ledger","trezor","introRoutes","vendorName","TabRouter","rootComponent","AppLoading","App","WrappedApp","setLevel","LOG_LEVEL","Modal","setAppElement","getElementById","createRoot","render"],"mappings":"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","file":"static/js/main.4250953c.chunk.js","sourcesContent":["enum ACCOUNT {\r\n    CREATE = \"CREATE_ACCOUNT\",\r\n    EXPORT_JSON = \"EXPORT_ACCOUNT_JSON\",\r\n    EXPORT_PRIVATE_KEY = \"EXPORT_ACCOUNT_PK\",\r\n    IMPORT_JSON = \"IMPORT_ACCOUNT_JSON\",\r\n    IMPORT_PRIVATE_KEY = \"IMPORT_ACCOUNT_PK\",\r\n    REMOVE = \"REMOVE_ACCOUNT\",\r\n    RESET = \"RESET_ACCOUNT\",\r\n    RENAME = \"RENAME_ACCOUNT\",\r\n    SELECT = \"SELECT_ACCOUNT\",\r\n    GET_BALANCE = \"GET_ACCOUNT_BALANCE\",\r\n    HIDE = \"HIDE_ACCOUNT\",\r\n    UNHIDE = \"UNHIDE_ACCOUNT\",\r\n    GET_NATIVE_TOKEN_BALANCE = \"GET_NATIVE_TOKEN_BALANCE\",\r\n}\r\n\r\nenum APP {\r\n    LOCK = \"LOCK_APP\",\r\n    UNLOCK = \"UNLOCK_APP\",\r\n    GET_IDLE_TIMEOUT = \"GET_IDLE_TIMEOUT\",\r\n    SET_IDLE_TIMEOUT = \"SET_IDLE_TIMEOUT\",\r\n    SET_LAST_USER_ACTIVE_TIME = \"SET_LAST_USER_ACTIVE_TIME\",\r\n    RETURN_TO_ONBOARDING = \"RETURN_TO_ONBOARDING\",\r\n    OPEN_RESET = \"OPEN_RESET\",\r\n    OPEN_HW_CONNECT = \"OPEN_HW_CONNECT\",\r\n    OPEN_HW_REMOVE = \"OPEN_HW_REMOVE\",\r\n    OPEN_HW_RECONNECT = \"OPEN_HW_RECONNECT\",\r\n    SET_USER_SETTINGS = \"SET_USER_SETTINGS\",\r\n    UPDATE_POPUP_TAB = \"UPDATE_POPUP_TAB\",\r\n    REJECT_UNCONFIRMED_REQUESTS = \"REJECT_UNCONFIRMED_REQUESTS\",\r\n    SET_USER_ONLINE = \"SET_USER_ONLINE\",\r\n}\r\n\r\nenum BACKGROUND {\r\n    ACTION = \"ACTION\",\r\n}\r\n\r\nenum DAPP {\r\n    CONFIRM_REQUEST = \"CONFIRM_DAPP_REQUEST\",\r\n    ATTEMPT_REJECT_REQUEST = \"ATTEMPT_REJECT_DAPP_REQUEST\",\r\n}\r\n\r\nenum EXCHANGE {\r\n    CHECK_ALLOWANCE = \"CHECK_ALLOWANCE\",\r\n    APPROVE = \"APPROVE_EXCHANGE\",\r\n    GET_QUOTE = \"GET_EXCHANGE_QUOTE\",\r\n    GET_EXCHANGE = \"GET_EXCHANGE\",\r\n    EXECUTE = \"EXECUTE_EXCHANGE\",\r\n}\r\n\r\nenum BRIDGE {\r\n    APPROVE_BRIDGE_ALLOWANCE = \"APPROVE_BRIDGE_ALLOWANCE\",\r\n    GET_BRIDGE_AVAILABLE_CHAINS = \"GET_BRIDGE_AVAILABLE_CHAINS\",\r\n    GET_BRIDGE_TOKENS = \"GET_BRIDGE_TOKENS\",\r\n    GET_BRIDGE_QUOTE = \"GET_BRIDGE_QUOTE\",\r\n    GET_BRIDGE_ROUTES = \"GET_BRIDGE_ROUTES\",\r\n    EXECUTE_BRIDGE = \"EXECUTE_BRIDGE\",\r\n}\r\n\r\nenum EXTERNAL {\r\n    SET_SITE_DATA = \"SET_SITE_DATA\",\r\n    REQUEST = \"EXTERNAL_REQUEST\",\r\n    EVENT_SUBSCRIPTION = \"EVENT_SUBSCRIPTION\",\r\n}\r\n\r\nenum NETWORK {\r\n    CHANGE = \"NETWORK_CHANGE\",\r\n    SET_SHOW_TEST_NETWORKS = \"SHOW_TEST_NETWORKS\",\r\n    ADD_NETWORK = \"ADD_NETWORK\",\r\n    EDIT_NETWORK = \"EDIT_NETWORK\",\r\n    EDIT_NETWORKS_ORDER = \"EDIT_NETWORKS_ORDER\",\r\n    REMOVE_NETWORK = \"REMOVE_NETWORK\",\r\n    GET_SPECIFIC_CHAIN_DETAILS = \"GET_SPECIFIC_CHAIN_DETAILS\",\r\n    GET_RPC_CHAIN_ID = \"GET_RPC_CHAIN_ID\",\r\n    SEARCH_CHAINS = \"SEARCH_CHAINS\",\r\n}\r\n\r\nenum PASSWORD {\r\n    VERIFY = \"VERIFY_PASSWORD\",\r\n    CHANGE = \"CHANGE_PASSWORD\",\r\n}\r\n\r\nenum PERMISSION {\r\n    ADD_NEW = \"ADD_NEW_SITE_PERMISSIONS\",\r\n    CONFIRM = \"CONFIRM_PERMISSION_REQUEST\",\r\n    GET_ACCOUNT_PERMISSIONS = \"GET_ACCOUNT_PERMISSIONS\",\r\n    REMOVE_ACCOUNT_FROM_SITE = \"REMOVE_ACCOUNT_FROM_SITE\",\r\n    UPDATE_SITE_PERMISSIONS = \"UPDATE_SITE_PERMISSIONS\",\r\n}\r\n\r\nenum STATE {\r\n    GET = \"GET_STATE\",\r\n    SUBSCRIBE = \"STATE_SUBSCRIBE\",\r\n}\r\n\r\nenum ENS {\r\n    LOOKUP_ADDRESS = \"LOOKUP_ADDRESS_ENS\",\r\n    RESOLVE_NAME = \"RESOLVE_ENS_NAME\",\r\n}\r\n\r\nenum UD {\r\n    RESOLVE_NAME = \"RESOLVE_UD_NAME\",\r\n}\r\n\r\nenum TRANSACTION {\r\n    SEND_ETHER = \"SEND_ETHER\",\r\n    ADD_NEW_SEND_TRANSACTION = \"ADD_NEW_SEND_TRANSACTION\",\r\n    UPDATE_SEND_TRANSACTION_GAS = \"UPDATE_SEND_TRANSACTION_GAS\",\r\n    APPROVE_SEND_TRANSACTION = \"APPROVE_SEND_TRANSACTION\",\r\n    GET_SEND_TRANSACTION_RESULT = \"GET_SEND_TRANSACTION_RESULT\",\r\n    CALCULATE_SEND_TRANSACTION_GAS_LIMIT = \"CALCULATE_SEND_TRANSACTION_GAS_LIMIT\",\r\n    CALCULATE_APPROVE_TRANSACTION_GAS_LIMIT = \"CALCULATE_APPROVE_TRANSACTION_GAS_LIMIT\",\r\n    GET_LATEST_GAS_PRICE = \"GET_LATEST_GAS_PRICE\",\r\n    FETCH_LATEST_GAS_PRICE = \"FETCH_LATEST_GAS_PRICE\",\r\n    CONFIRM = \"CONFIRM_TRANSACTION\",\r\n    REJECT = \"REJECT_TRANSACTION\",\r\n    CANCEL_TRANSACTION = \"CANCEL_TRANSACTION\",\r\n    SPEED_UP_TRANSACTION = \"SPEED_UP_TRANSACTION\",\r\n    GET_SPEED_UP_GAS_PRICE = \"GET_SPEED_UP_GAS_PRICE\",\r\n    GET_CANCEL_GAS_PRICE = \"GET_CANCEL_GAS_PRICE\",\r\n    GET_NEXT_NONCE = \"GET_NEXT_NONCE\",\r\n    REJECT_REPLACEMENT_TRANSACTION = \"REJECT_REPLACEMENT_TRANSACTION\",\r\n}\r\n\r\nenum TOKEN {\r\n    GET_BALANCE = \"GET_TOKEN_BALANCE\",\r\n    GET_TOKENS = \"GET_TOKENS\",\r\n    GET_USER_TOKENS = \"GET_USER_TOKENS\",\r\n    GET_TOKEN = \"GET_TOKEN\",\r\n    ADD_CUSTOM_TOKEN = \"ADD_CUSTOM_TOKEN\",\r\n    ADD_CUSTOM_TOKENS = \"ADD_CUSTOM_TOKENS\",\r\n    DELETE_CUSTOM_TOKEN = \"DELETE_CUSTOM_TOKEN\",\r\n    SEND_TOKEN = \"SEND_TOKEN\",\r\n    POPULATE_TOKEN_DATA = \"POPULATE_TOKEN_DATA\",\r\n    SEARCH_TOKEN = \"SEARCH_TOKEN\",\r\n}\r\n\r\nenum WALLET {\r\n    CREATE = \"CREATE_WALLET\",\r\n    IMPORT = \"IMPORT_WALLET\",\r\n    RESET = \"RESET\",\r\n    VERIFY_SEED_PHRASE = \"VERIFY_SEED_PHRASE\",\r\n    REQUEST_SEED_PHRASE = \"REQUEST_SEED_PHRASE\",\r\n    SETUP_COMPLETE = \"SETUP_COMPLETE\",\r\n    DISMISS_WELCOME_MESSAGE = \"DISMISS_WELCOME_MESSAGE\",\r\n    DISMISS_DEFAULT_WALLET_PREFERENCES = \"DISMISS_DEFAULT_WALLET_PREFERENCES\",\r\n    DISMISS_RELEASE_NOTES = \"DISMISS_RELEASE_NOTES\",\r\n    TOGGLE_RELEASE_NOTES_SUBSCRIPTION = \"TOGGLE_RELEASE_NOTES_SUBSCRIPTION\",\r\n    UPDATE_ANTI_PHISHING_IMAGE = \"UPDATE_ANTI_PHISHING_IMAGE\",\r\n    TOGGLE_ANTI_PHISHING_PROTECTION = \"TOGGLE_ANTI_PHISHING_PROTECTION\",\r\n    TOGGLE_DEFAULT_BROWSER_WALLET = \"TOGGLE_DEFAULT_BROWSER_WALLET\",\r\n    SET_NATIVE_CURRENCY = \"SET_NATIVE_CURRENCY\",\r\n    GET_VALID_CURRENCIES = \"GET_VALID_CURRENCIES\",\r\n    GENERATE_ON_DEMAND_RELEASE_NOTES = \"GENERATE_ON_DEMAND_RELEASE_NOTES\",\r\n    HARDWARE_CONNECT = \"HARDWARE_CONNECT\",\r\n    HARDWARE_REMOVE = \"HARDWARE_REMOVE\",\r\n    HARDWARE_GET_ACCOUNTS = \"HARDWARE_GET_ACCOUNTS\",\r\n    HARDWARE_IMPORT_ACCOUNTS = \"HARDWARE_IMPORT_ACCOUNTS\",\r\n    HARDWARE_GET_HD_PATH = \"HARDWARE_GET_HD_PATH\",\r\n    HARDWARE_SET_HD_PATH = \"HARDWARE_SET_HD_PATH\",\r\n    HARDWARE_IS_LINKED = \"HARDWARE_IS_LINKED\",\r\n    SET_DEFAULT_GAS = \"SET_DEFAULT_GAS\"\r\n}\r\n\r\nenum ADDRESS_BOOK {\r\n    CLEAR = \"CLEAR\",\r\n    DELETE = \"DELETE\",\r\n    SET = \"SET\",\r\n    GET = \"GET\",\r\n    GET_BY_ADDRESS = \"GET_BY_ADDRESS\",\r\n    GET_RECENT_ADDRESSES = \"GET_RECENT_ADDRESSES\",\r\n}\r\n\r\nenum BROWSER {\r\n    GET_WINDOW_ID = \"GET_WINDOW_ID\",\r\n}\r\n\r\nenum FILTERS {\r\n    SET_ACCOUNT_FILTERS = \"SET_ACCOUNT_FILTERS\",\r\n}\r\n\r\nexport const Messages = {\r\n    ACCOUNT,\r\n    APP,\r\n    BACKGROUND,\r\n    DAPP,\r\n    EXCHANGE,\r\n    EXTERNAL,\r\n    NETWORK,\r\n    PASSWORD,\r\n    PERMISSION,\r\n    STATE,\r\n    TOKEN,\r\n    ENS,\r\n    UD,\r\n    TRANSACTION,\r\n    WALLET,\r\n    ADDRESS_BOOK,\r\n    BROWSER,\r\n    FILTERS,\r\n    BRIDGE,\r\n}\r\n\r\nexport enum TransactionStatus {\r\n    FAILED = \"FAILED\",\r\n    DROPPED = \"DROPPED\",\r\n    CANCELLED = \"CANCELLED\",\r\n    SIGNED = \"SIGNED\",\r\n    APPROVED = \"APPROVED\",\r\n    REJECTED = \"REJECTED\",\r\n    SUBMITTED = \"SUBMITTED\",\r\n    CONFIRMED = \"CONFIRMED\",\r\n    UNAPPROVED = \"UNAPPROVED\",\r\n}\r\n\r\nexport enum TransactionCategories {\r\n    BLANK_DEPOSIT = \"blankDeposit\",\r\n    BLANK_WITHDRAWAL = \"blankWithdrawal\",\r\n    INCOMING = \"incoming\",\r\n    SENT_ETHER = \"sentEther\",\r\n    CONTRACT_DEPLOYMENT = \"contractDeployment\",\r\n    CONTRACT_INTERACTION = \"contractInteraction\",\r\n    TOKEN_METHOD_APPROVE = \"approve\",\r\n    TOKEN_METHOD_TRANSFER = \"transfer\",\r\n    TOKEN_METHOD_INCOMING_TRANSFER = \"incoming_transfer\",\r\n    TOKEN_METHOD_TRANSFER_FROM = \"transferfrom\",\r\n    EXCHANGE = \"exchange\",\r\n    BRIDGE = \"bridge\",\r\n    INCOMING_BRIDGE = \"incoming_bridge\",\r\n    INCOMING_BRIDGE_REFUND = \"incoming_bridge_refund\",\r\n    // Category that temporarely represents receiving transactions in a bridge operation:\r\n    INCOMING_BRIDGE_PLACEHOLDER = \"incoming_bridge_placeholder\",\r\n}\r\n\r\nexport enum PendingWithdrawalStatus {\r\n    UNSUBMITTED = \"UNSUBMITTED\",\r\n    PENDING = \"PENDING\",\r\n    CONFIRMED = \"CONFIRMED\",\r\n    FAILED = \"FAILED\",\r\n    REJECTED = \"REJECTED\",\r\n    MINED = \"MINED\",\r\n}\r\n\r\nexport enum Origin {\r\n    BACKGROUND = \"BLANK_BACKGROUND\",\r\n    EXTENSION = \"BLANK_EXTENSION\",\r\n    PROVIDER = \"BLANK_PROVIDER\",\r\n}\r\n\r\nexport enum HardwareWalletOpTypes {\r\n    SIGN_TRANSACTION = \"SIGN_TRANSACTION\",\r\n    SIGN_MESSAGE = \"SIGN_MESSAGE\",\r\n    APPROVE_ALLOWANCE = \"APPROVE_ALLOWANCE\",\r\n    SIGN_SPEEDUP = \"SIGN_SPEEDUP\",\r\n    SIGN_CANCEL = \"SIGN_CANCEL\",\r\n}\r\n\r\nexport enum BackgroundActions {\r\n    CLOSE_WINDOW = \"CLOSE_WINDOW\",\r\n}\r\n\r\n/**\r\n * The meta type of the transaction.\r\n * - `REGULAR`: A classic transaction\r\n * - `CANCEL`: A transaction sent to cancel another one\r\n * - `SPEED_UP`: A transaction sent to speed up another one\r\n * - `REGULAR_CANCELLING`: A transaction that we try to cancel\r\n * - `REGULAR_SPEEDING_UP`: A transaction that we try to speed up\r\n * - `REGULAR_NO_REPLACEMENT`: The purpose of this type is to have a way to block the feature if an error happen and speed up / cancel can't happen again (example: tx was already mined)\r\n */\r\nexport enum MetaType {\r\n    REGULAR = \"REGULAR\",\r\n    CANCEL = \"CANCEL\",\r\n    SPEED_UP = \"SPEED_UP\",\r\n    REGULAR_CANCELLING = \"REGULAR_CANCELLING\",\r\n    REGULAR_SPEEDING_UP = \"REGULAR_SPEEDING_UP\",\r\n    REGULAR_NO_REPLACEMENT = \"REGULAR_NO_REPLACEMENT\",\r\n}\r\n\r\n/**\r\n * Ethereum transaction types\r\n */\r\nexport enum TransactionType {\r\n    LEGACY = 0,\r\n    ACCESS_LIST_EIP2930 = 1,\r\n    FEE_MARKET_EIP1559 = 2,\r\n}\r\n\r\n/**\r\n * Exchange types\r\n */\r\nexport enum ExchangeType {\r\n    SWAP_1INCH = \"SWAP_1INCH\",\r\n    SWAP_COWSWAP = \"SWAP_COWSWAP\",\r\n    LIMIT_1INCH = \"LIMIT_1INCH\",\r\n}\r\n\r\n/**\r\n * Bridge implementation\r\n */\r\nexport enum BridgeImplementation {\r\n    LIFI_BRIDGE = \"LIFI_BRIDGE\",\r\n}\r\n\r\n/**\r\n * Allowance status for the bridged asset\r\n */\r\nexport enum BridgeAllowanceCheck {\r\n    NOT_CHECKED = \"NOT_CHECKED\",\r\n    ENOUGH_ALLOWANCE = \"ENOUGH_ALLOWANCE\",\r\n    INSUFFICIENT_ALLOWANCE = \"INSUFFICIENT_ALLOWANCE\",\r\n}\r\n\r\n/**\r\n * Hardware Wallet Devices Vendors\r\n */\r\nexport enum Devices {\r\n    LEDGER = \"LEDGER\",\r\n    TREZOR = \"TREZOR\",\r\n}\r\n\r\n/**\r\n * Hardware Wallet HD Paths\r\n */\r\n\r\ntype HDPath = {\r\n    name: string\r\n    path: string\r\n    default?: boolean\r\n}\r\ntype DevicesHDPath = {\r\n    [device in Devices]: HDPath[]\r\n}\r\n\r\nexport const BIP44_PATH = `m/44'/60'/0'/0`\r\nexport const HDPaths: DevicesHDPath = {\r\n    LEDGER: [\r\n        { name: \"BIP44 Standard\", path: BIP44_PATH },\r\n        { name: \"Legacy (MEW / MyCrypto)\", path: `m/44'/60'/0'` },\r\n        { name: \"Ledger Live\", path: `m/44'/60'/0'/0/0`, default: true },\r\n    ],\r\n    TREZOR: [\r\n        { name: \"BIP44 Standard\", path: BIP44_PATH, default: true },\r\n        // { name: \"Trezor Testnets\", path: `m/44'/1'/0'/0` },\r\n    ],\r\n}\r\n\r\n/**\r\n * The type of the added account\r\n */\r\nexport enum AccountType {\r\n    HD_ACCOUNT = \"HD Account\",\r\n    LEDGER = \"Ledger\",\r\n    TREZOR = \"Trezor\",\r\n    EXTERNAL = \"External\",\r\n}\r\n\r\n/**\r\n * The account status\r\n */\r\nexport enum AccountStatus {\r\n    ACTIVE = \"ACTIVE\",\r\n    HIDDEN = \"HIDDEN\",\r\n}\r\n\r\n//So far this statuses has been done using Li.Fi convention.\r\n//To learn how do they work, please refer to their documentation: https://docs.li.fi/products/more-integration-options/li.fi-api/checking-the-status-of-a-transaction\r\nexport enum BridgeStatus {\r\n    NOT_FOUND = \"NOT_FOUND\",\r\n    INVALID = \"INVALID\",\r\n    PENDING = \"PENDING\",\r\n    DONE = \"DONE\",\r\n    FAILED = \"FAILED\",\r\n}\r\n\r\nexport enum BridgeSubstatus {\r\n    //Substatus of Pending state\r\n    WAIT_SOURCE_CONFIRMATIONS = \"WAIT_SOURCE_CONFIRMATIONS\",\r\n    WAIT_DESTINATION_TRANSACTION = \"WAIT_DESTINATION_TRANSACTION\",\r\n    BRIDGE_NOT_AVAILABLE = \"BRIDGE_NOT_AVAILABLE\",\r\n    CHAIN_NOT_AVAILABLE = \"CHAIN_NOT_AVAILABLE\",\r\n    UNKNOWN_ERROR = \"UNKNOWN_ERROR\",\r\n    NOT_PROCESSABLE_REFUND_NEEDED = \"NOT_PROCESSABLE_REFUND_NEEDED\",\r\n    REFUND_IN_PROGRESS = \"REFUND_IN_PROGRESS\",\r\n\r\n    //Substatus of Done state\r\n    COMPLETED = \"COMPLETED\",\r\n    PARTIAL = \"PARTIAL\",\r\n    REFUNDED = \"REFUNDED\",\r\n}\r\n\r\nexport enum QuoteFeeStatus {\r\n    OK = \"OK\",\r\n    INSUFFICIENT_BALANCE_TO_COVER_FEES = \"INSUFFICIENT_BALANCE_TO_COVER_FEES\",\r\n}\r\n","import { createContext, useState } from \"react\"\r\n\r\ntype ModalState = {\r\n    isOpen: boolean\r\n    content?: React.ReactNode\r\n    open: (node: React.ReactNode) => void\r\n    close: () => void\r\n}\r\n\r\nexport const ModalContext = createContext<ModalState>({\r\n    isOpen: false,\r\n    content: undefined,\r\n    open: () => null,\r\n    close: () => null,\r\n})\r\n\r\nexport const ModalProvider = ({\r\n    children,\r\n}: {\r\n    children: React.ReactNode | undefined\r\n}) => {\r\n    const [isOpen, setIsOpen] = useState(false)\r\n    const [content, setContent] = useState<React.ReactNode>()\r\n    const open = (n: React.ReactNode) => {\r\n        setIsOpen(true)\r\n        setContent(n)\r\n    }\r\n    const close = () => {\r\n        setIsOpen(false)\r\n        setContent(undefined)\r\n    }\r\n    return (\r\n        <ModalContext.Provider value={{ isOpen, content, open, close }}>\r\n            {children}\r\n        </ModalContext.Provider>\r\n    )\r\n}\r\n","import { useContext } from \"react\"\r\nimport Modal from \"react-modal\"\r\nimport { ModalContext } from \"../context/ModalContext\"\r\n\r\nconst GlobalModal = () => {\r\n    const { isOpen, content, close } = useContext(ModalContext)\r\n    return (\r\n        <Modal isOpen={isOpen} onRequestClose={close}>\r\n            {content}\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default GlobalModal\r\n","import {\r\n    Handlers,\r\n    MessageTypes,\r\n    TransportResponseMessage,\r\n} from \"@block-wallet/background/utils/types/communication\"\r\nimport { Origin, BackgroundActions } from \"./commTypes\"\r\nimport { SiteMetadata } from \"@block-wallet/provider/types\"\r\nimport { checkRedraw } from \"./util/platform\"\r\nimport { isWindow } from \"./util/isWindow\"\r\nimport log from \"loglevel\"\r\n\r\nexport const handlers: Handlers = {}\r\nexport let port: chrome.runtime.Port\r\nexport let isPortConnected: boolean = false\r\nexport let session: { origin: string; data: SiteMetadata } | null = null\r\nexport let isAutomaticClose: boolean = false\r\n\r\n/**\r\n * Connect ports\r\n */\r\nconst initPort = () => {\r\n    // Open port\r\n    port = chrome.runtime.connect({ name: Origin.EXTENSION })\r\n\r\n    // Override postMessage function\r\n    // port.postMessage = postMessageWithRetry(port.postMessage)\r\n\r\n    // Check for error\r\n    port.onDisconnect.addListener(() => {\r\n        const error = chrome.runtime.lastError\r\n        if (error) {\r\n            log.error(\"Port disconnected\", error.message)\r\n        } else {\r\n            log.debug(\"Port disconnected\")\r\n        }\r\n    })\r\n\r\n    // Add port message listener\r\n    port.onMessage.addListener(\r\n        (data: TransportResponseMessage<MessageTypes>): void => {\r\n            const handler = handlers[data.id]\r\n\r\n            if (!handler) {\r\n                // Check for background actions\r\n                if (data.id === BackgroundActions.CLOSE_WINDOW) {\r\n                    isAutomaticClose = true\r\n                    window.close()\r\n                } else {\r\n                    log.error(\"Unknown response\", data)\r\n                }\r\n                return\r\n            }\r\n\r\n            if (!handler.subscriber) {\r\n                delete handlers[data.id]\r\n            }\r\n\r\n            if (data.subscription) {\r\n                ;(handler.subscriber as Function)(data.subscription)\r\n            } else if (\"error\" in data) {\r\n                // Deserialze error object\r\n                const parsedError = JSON.parse(data.error!)\r\n                const err = new Error(parsedError.message)\r\n                err.stack = parsedError.stack\r\n                err.name = parsedError.name\r\n\r\n                // Reject promise\r\n                handler.reject(err)\r\n            } else {\r\n                handler.resolve(data.response)\r\n            }\r\n        }\r\n    )\r\n\r\n    isPortConnected = true\r\n}\r\n\r\n/**\r\n * Initialization function\r\n * Checks if the background is running before connecting the port\r\n */\r\nexport const initialize = () => {\r\n    chrome.runtime &&\r\n        chrome.runtime.sendMessage(\r\n            { message: \"isBlankInitialized\" },\r\n            (response: any) => {\r\n                const error = chrome.runtime.lastError\r\n                if (!response || error) {\r\n                    setTimeout(initialize, 100)\r\n                } else {\r\n                    if (response.isBlankInitialized === true) {\r\n                        if (!isPortConnected) {\r\n                            initPort()\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        )\r\n}\r\n\r\n// Setup session\r\nchrome.tabs.query(\r\n    { active: true, currentWindow: true },\r\n    async (tabs: chrome.tabs.Tab[]) => {\r\n        const isWindowPopup = await isWindow()\r\n\r\n        if (!isWindowPopup || !tabs[0]) {\r\n            session = null\r\n            return\r\n        }\r\n\r\n        const { favIconUrl, url, title } = tabs[0]\r\n\r\n        if (!url) {\r\n            session = null\r\n        } else {\r\n            const { origin, hostname } = new URL(url)\r\n            session = {\r\n                origin,\r\n                data: {\r\n                    iconURL: favIconUrl || null,\r\n                    name: title || hostname,\r\n                },\r\n            }\r\n        }\r\n    }\r\n)\r\n\r\n// Run init function\r\ninitialize()\r\n\r\n// Run platform check\r\ncheckRedraw()\r\n","import { Messages } from \"../commTypes\"\r\nimport { BackgroundStateType } from \"./backgroundContext\"\r\nimport type { MessageTypes } from \"@block-wallet/background/utils/types/communication\"\r\n\r\ntype BackgroundAction = {\r\n    type: MessageTypes\r\n    payload?: any\r\n}\r\nconst BackgroundReducer = (\r\n    state: BackgroundStateType,\r\n    action: BackgroundAction\r\n) => {\r\n    switch (action.type) {\r\n        case Messages.STATE.SUBSCRIBE:\r\n            return {\r\n                ...state,\r\n                blankState: action.payload,\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default BackgroundReducer\r\n","/**\r\n * Checks if the instance is running on a browser window (e.g. permission request popup)\r\n */\r\nexport const isWindow = () => {\r\n    return new Promise<boolean>((resolve) => {\r\n        chrome.tabs.getCurrent((tab) => {\r\n            if (!tab) {\r\n                resolve(true)\r\n            } else {\r\n                resolve(false)\r\n            }\r\n        })\r\n    })\r\n}\r\n","/**\r\n * Temporary workaround for secondary monitors on MacOS where redraws don't happen\r\n * @See https://bugs.chromium.org/p/chromium/issues/detail?id=971701\r\n * @author https://stackoverflow.com/questions/56500742/why-is-my-google-chrome-extensions-popup-ui-laggy-on-external-monitors-but-not/64113061#64113061\r\n */\r\nexport const checkRedraw = () => {\r\n  if (\r\n    // The following conditions check if the popup was opened in the main display\r\n    window.screenLeft < 0 ||\r\n    window.screenTop < 0 ||\r\n    window.screenLeft > window.screen.width ||\r\n    window.screenTop > window.screen.height\r\n  ) {\r\n    chrome.runtime.getPlatformInfo((platformInfo) => {\r\n      if (platformInfo.os === 'mac') {\r\n        const style = document.createElement('style')\r\n        style.innerHTML =\r\n          '@-webkit-keyframes redraw{0%{opacity:1}to{opacity:.99}}@keyframes redraw{0%{opacity:1}to{opacity:.99}}html{-webkit-animation:redraw 1s linear infinite;animation:redraw 1s linear infinite}'\r\n        document.head.appendChild(style)\r\n      }\r\n    })\r\n  }\r\n}\r\n","import { useCallback, useReducer, useRef } from \"react\"\r\nimport { mergeReducer } from \"../reducerUtils\"\r\n\r\nexport enum Status {\r\n    IDLE = \"idle\",\r\n    PENDING = \"pending\",\r\n    SUCCESS = \"success\",\r\n    ERROR = \"error\",\r\n}\r\n\r\ninterface AsyncState<T> {\r\n    status?: Status\r\n    data?: T\r\n    error?: Error | null\r\n}\r\n\r\nconst defaultInitialState = {\r\n    status: Status.IDLE,\r\n    data: undefined,\r\n    error: null,\r\n}\r\n\r\n//\r\n\r\n/**\r\n * This hook aims to encapsulate async information such us the status,\r\n * response data and invocation error.\r\n *\r\n * @param initialState\r\n *\r\n * Example usage:\r\n * ```\r\n * const {data, error, status, run} = useAsyncInvoke()\r\n * const executeSave = (newData) => {\r\n *  run(saveData(newData))\r\n * }\r\n * ```\r\n */\r\nfunction useAsyncInvoke<T>(initialState: AsyncState<T> = {}) {\r\n    const initialStateRef = useRef<AsyncState<T>>({\r\n        ...defaultInitialState,\r\n        ...initialState,\r\n    })\r\n    const [{ status, data, error }, setState] = useReducer(\r\n        mergeReducer<AsyncState<T>, any>(),\r\n        initialStateRef.current\r\n    )\r\n\r\n    const setData = useCallback(\r\n        (data: any) => setState({ data, status: Status.SUCCESS }),\r\n        [setState]\r\n    )\r\n    const setError = useCallback(\r\n        (error: any) => setState({ error, status: Status.ERROR }),\r\n        [setState]\r\n    )\r\n    const reset = useCallback(() => setState(initialStateRef.current), [\r\n        setState,\r\n    ])\r\n\r\n    const run = useCallback(\r\n        (promise: Promise<any>) => {\r\n            if (!promise || !promise.then) {\r\n                throw new Error(\r\n                    `The argument passed to useAsyncInvoke().run must be a promise.`\r\n                )\r\n            }\r\n            setState({ status: Status.PENDING })\r\n            return promise.then(\r\n                (data: any) => {\r\n                    setData(data)\r\n                    return data\r\n                },\r\n                (error: Error) => {\r\n                    setError(error)\r\n                    return Promise.reject(error)\r\n                }\r\n            )\r\n        },\r\n        [setState, setData, setError]\r\n    )\r\n\r\n    return {\r\n        isIdle: status === Status.IDLE,\r\n        isLoading: status === Status.PENDING,\r\n        isError: status === Status.ERROR,\r\n        isSuccess: status === Status.SUCCESS,\r\n\r\n        setData,\r\n        setError,\r\n        error,\r\n        status,\r\n        data,\r\n        run,\r\n        reset,\r\n    }\r\n}\r\n\r\nexport default useAsyncInvoke\r\n","import { v4 as createUuid } from \"uuid\"\r\nimport { generatePhishingPrevention } from \"@block-wallet/phishing-prevention\"\r\n\r\n/**\r\n * generatePhishingPreventionBase64\r\n *\r\n * Generates and stores a deterministically generated\r\n * base64 image string to be used as an anti phishing measure.\r\n *\r\n * The function temporarly renders a canvas element in the DOM using a\r\n * generative art script and removes it immediately after the image data is obtained.\r\n *\r\n * @param uuid An uuid to be used as a seed for the anti phishing image generation.\r\n * Creates a random one if it isn't provided\r\n */\r\nexport const generatePhishingPreventionBase64 = async (\r\n    customUuid?: string\r\n): Promise<string> => {\r\n    const uuid = customUuid || createUuid()\r\n    try {\r\n        return generatePhishingPrevention(uuid, 175)\r\n    } catch (e) {\r\n        return Promise.reject(\"Error generating the phishing prevention image\")\r\n    }\r\n}\r\n","import { BigNumber } from \"@ethersproject/bignumber\"\r\nimport {\r\n    AccountInfo,\r\n    DeviceAccountInfo,\r\n} from \"@block-wallet/background/controllers/AccountTrackerController\"\r\nimport {\r\n    MessageTypes,\r\n    RequestTypes,\r\n    ResponseTypes,\r\n    ResponseGetState,\r\n    StateSubscription,\r\n    SubscriptionMessageTypes,\r\n    RequestAddNetwork,\r\n    RequestEditNetwork,\r\n    RequestEditNetworksOrder,\r\n} from \"@block-wallet/background/utils/types/communication\"\r\nimport { Devices, ExchangeType, Messages } from \"./commTypes\"\r\nimport {\r\n    IToken,\r\n    ITokens,\r\n    SearchTokensResponse,\r\n    Token,\r\n} from \"@block-wallet/background/controllers/erc-20/Token\"\r\nimport { SiteMetadata } from \"@block-wallet/provider/types\"\r\nimport {\r\n    TransactionAdvancedData,\r\n    TransactionMeta,\r\n} from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport {\r\n    FeeMarketEIP1559Values,\r\n    GasPriceValue,\r\n    TransactionGasEstimation,\r\n} from \"@block-wallet/background/controllers/transactions/TransactionController\"\r\nimport {\r\n    PopupTabs,\r\n    UserSettings,\r\n} from \"@block-wallet/background/controllers/PreferencesController\"\r\nimport {\r\n    DappReq,\r\n    DappRequestConfirmOptions,\r\n} from \"@block-wallet/background/utils/types/ethereum\"\r\nimport { TransactionFeeData } from \"@block-wallet/background/controllers/erc-20/transactions/SignedTransaction\"\r\nimport { handlers, port } from \"./setup\"\r\nimport { Currency } from \"@block-wallet/background/utils/currency\"\r\nimport {\r\n    SwapParameters,\r\n    SwapQuote,\r\n    SwapTransaction,\r\n} from \"@block-wallet/background/controllers/SwapController\"\r\nimport {\r\n    OneInchSwapQuoteParams,\r\n    OneInchSwapRequestParams,\r\n} from \"@block-wallet/background/utils/types/1inch\"\r\nimport { generatePhishingPreventionBase64 } from \"../util/phishingPrevention\"\r\nimport {\r\n    BridgeQuoteRequest,\r\n    BridgeRoutesRequest,\r\n    BridgeTransaction,\r\n    GetBridgeAvailableRoutesResponse,\r\n    GetBridgeQuoteResponse,\r\n    GetBridgeQuoteNotFoundResponse,\r\n} from \"@block-wallet/background/controllers/BridgeController\"\r\nimport { GasPriceData } from \"@block-wallet/background/controllers/GasPricesController\"\r\n\r\nlet requestId = 0\r\n\r\n/**\r\n * Send message generic\r\n *\r\n */\r\nconst sendMessage = <TMessageType extends MessageTypes>(\r\n    message: TMessageType,\r\n    request?: RequestTypes[TMessageType],\r\n    subscriber?: (data: SubscriptionMessageTypes[TMessageType]) => void\r\n): Promise<ResponseTypes[TMessageType]> => {\r\n    return new Promise((resolve, reject): void => {\r\n        const id = `${Date.now()}.${++requestId}`\r\n\r\n        handlers[id] = { reject, resolve, subscriber }\r\n\r\n        port.postMessage({ id, message, request: request || {} })\r\n    })\r\n}\r\n\r\n/**\r\n * Creates a new account on the current keyring\r\n */\r\nexport const createAccount = async (name: string): Promise<AccountInfo> => {\r\n    return sendMessage(Messages.ACCOUNT.CREATE, { name })\r\n}\r\n\r\n/**\r\n * Returns account json data to export\r\n * Encrypted with password\r\n *\r\n * @param address account address\r\n * @param password Encrypting password\r\n * @returns Exported account info on JSON format\r\n */\r\nexport const exportAccountJson = async (\r\n    address: string,\r\n    password: string,\r\n    encryptPassword: string\r\n): Promise<string> => {\r\n    return sendMessage(Messages.ACCOUNT.EXPORT_JSON, {\r\n        address,\r\n        password,\r\n        encryptPassword,\r\n    })\r\n}\r\n\r\n/**\r\n * Returns account private key data to export\r\n * Encrypted with password\r\n *\r\n * @param address account address\r\n * @param password vault password\r\n * @returns Exported account info on JSON format\r\n */\r\nexport const exportAccountPrivateKey = async (\r\n    address: string,\r\n    password: string\r\n): Promise<string> => {\r\n    return sendMessage(Messages.ACCOUNT.EXPORT_PRIVATE_KEY, {\r\n        address,\r\n        password,\r\n    })\r\n}\r\n\r\n/**\r\n * Imports an account using a json file\r\n *\r\n * @param importArgs Import data\r\n * @param name Imported account name\r\n * @returns Imported account info\r\n */\r\nexport const importAccountJson = async (\r\n    importArgs: { input: string; password: string },\r\n    name: string\r\n): Promise<AccountInfo> => {\r\n    return sendMessage(Messages.ACCOUNT.IMPORT_JSON, { importArgs, name })\r\n}\r\n\r\n/**\r\n * Imports an account using the private key\r\n *\r\n * @param importArgs Import data\r\n * @param name Imported account name\r\n * @returns Imported account info\r\n */\r\nexport const importAccountPrivateKey = async (\r\n    importArgs: { privateKey: string },\r\n    name: string\r\n): Promise<AccountInfo> => {\r\n    return sendMessage(Messages.ACCOUNT.IMPORT_PRIVATE_KEY, {\r\n        importArgs,\r\n        name,\r\n    })\r\n}\r\n\r\n/**\r\n * Hides the given account\r\n * It must be an internal account, otherwise the operation will not be performed.\r\n *\r\n * @param address account to be hidden\r\n */\r\nexport const hideAccount = async (address: string): Promise<boolean> => {\r\n    return sendMessage(Messages.ACCOUNT.HIDE, { address })\r\n}\r\n\r\n/**\r\n * Unhides the given account\r\n *\r\n * It must be a hidden account, otherwise the operation will not be\r\nperformed.\r\n *\r\n * @param address account to be unhidden\r\n */\r\nexport const unhideAccount = async (address: string): Promise<boolean> => {\r\n    return sendMessage(Messages.ACCOUNT.UNHIDE, { address })\r\n}\r\n\r\n/**\r\n * Deletes the selected account\r\n *\r\n * It must be the last account on the accountsIndex,\r\n * otherwise it will break when creating a new account\r\n *\r\n * @param address account to be deleted\r\n */\r\nexport const removeAccount = async (address: string): Promise<boolean> => {\r\n    return sendMessage(Messages.ACCOUNT.REMOVE, { address })\r\n}\r\n\r\n/**\r\n * Resets the selected account\r\n *\r\n *\r\n * @param address account to be deleted\r\n */\r\nexport const resetAccount = async (address: string): Promise<void> => {\r\n    return sendMessage(Messages.ACCOUNT.RESET, { address })\r\n}\r\n\r\n/**\r\n * Renames selected account\r\n *\r\n * @param address account address\r\n * @param name new name\r\n */\r\nexport const renameAccount = async (\r\n    address: string,\r\n    name: string\r\n): Promise<boolean> => {\r\n    return sendMessage(Messages.ACCOUNT.RENAME, { address, name })\r\n}\r\n\r\n/**\r\n * Updates selected account\r\n *\r\n * @param address address to be selected\r\n */\r\nexport const selectAccount = async (address: string): Promise<boolean> => {\r\n    return sendMessage(Messages.ACCOUNT.SELECT, { address })\r\n}\r\n\r\n/**\r\n * getAccountBalance\r\n *\r\n * It gets the specified account balance.\r\n *\r\n * @param address The account address\r\n * @returns The account balance.\r\n */\r\nexport const getAccountBalance = async (\r\n    address: string\r\n): Promise<BigNumber> => {\r\n    return sendMessage(Messages.ACCOUNT.GET_BALANCE, address)\r\n}\r\n\r\n/**\r\n * getAccountNativeTokenBalanceForChain\r\n *\r\n * It gets the native token balance for a specified chain using the selected account.\r\n *\r\n * @param chainId The chain id\r\n * @returns The account's native token balance.\r\n */\r\nexport const getAccountNativeTokenBalanceForChain = async (\r\n    chainId: number\r\n): Promise<BigNumber | undefined> => {\r\n    return sendMessage(Messages.ACCOUNT.GET_NATIVE_TOKEN_BALANCE, chainId)\r\n}\r\n\r\n/**\r\n * fetchLatestGasPriceForChain\r\n *\r\n * It fetches the latest gas price from the Fee service and/or the network for a specified chain\r\n *\r\n * @param chainId The chain id\r\n * @returns The gas price\r\n */\r\nexport const fetchLatestGasPriceForChain = async (\r\n    chainId: number\r\n): Promise<GasPriceData | undefined> => {\r\n    return sendMessage(Messages.TRANSACTION.FETCH_LATEST_GAS_PRICE, chainId)\r\n}\r\n/**\r\n * Update last user activity time\r\n *\r\n * @param lastUserActivtyTime the new timeout\r\n */\r\nexport const setLastUserActiveTime = async (): Promise<void> => {\r\n    return sendMessage(Messages.APP.SET_LAST_USER_ACTIVE_TIME)\r\n}\r\n\r\n/**\r\n * Set a custom time in minutes for the extension auto block\r\n *\r\n * @param idleTimeout the new timeout in minutes, should be greater than zero\r\n */\r\nexport const setIdleTimeout = async (idleTimeout: number): Promise<void> => {\r\n    return sendMessage(Messages.APP.SET_IDLE_TIMEOUT, { idleTimeout })\r\n}\r\n\r\n/**\r\n * Returns the time in minutes for the extension auto block\r\n *\r\n */\r\nexport const getIdleTimeout = async (): Promise<number> => {\r\n    return sendMessage(Messages.APP.GET_IDLE_TIMEOUT)\r\n}\r\n\r\n/**\r\n * Locks the current vault\r\n */\r\nexport const lockApp = async (): Promise<boolean> => {\r\n    return sendMessage(Messages.APP.LOCK)\r\n}\r\n\r\n/**\r\n * Unlocks the current vault\r\n *\r\n * @param password user password\r\n */\r\nexport const unlockApp = async (password: string): Promise<boolean> => {\r\n    return sendMessage(Messages.APP.UNLOCK, { password })\r\n}\r\n\r\n/**\r\n * Creates a new onboarding tab or focuses the current open one\r\n *\r\n */\r\nexport const returnToOnboarding = async (): Promise<void> => {\r\n    return sendMessage(Messages.APP.RETURN_TO_ONBOARDING)\r\n}\r\n\r\n/**\r\n * Rejects all open and unconfirmed requests\r\n */\r\nexport const rejectUnconfirmedRequests = async (): Promise<void> => {\r\n    return sendMessage(Messages.APP.REJECT_UNCONFIRMED_REQUESTS)\r\n}\r\n\r\n/**\r\n * It request the wallet seed phrase with the user password\r\n *\r\n * @returns The wallet seed phrase\r\n * @throws If the user password is invalid\r\n */\r\nexport const requestSeedPhrase = async (password: string): Promise<string> => {\r\n    return sendMessage(Messages.WALLET.REQUEST_SEED_PHRASE, {\r\n        password,\r\n    })\r\n}\r\n\r\n/**\r\n * Verifies if the user has correctly completed the seed phrase challenge\r\n *\r\n * @param seedPhrase\r\n */\r\nexport const verifySeedPhrase = async (\r\n    seedPhrase: string,\r\n    password: string\r\n): Promise<boolean> => {\r\n    return sendMessage(Messages.WALLET.VERIFY_SEED_PHRASE, {\r\n        password,\r\n        seedPhrase,\r\n    })\r\n}\r\n\r\n/**\r\n * Method to mark setup process as complete and to fire a notification.\r\n *\r\n */\r\nexport const completeSetup = async (\r\n    sendNotification: boolean = true\r\n): Promise<void> => {\r\n    return sendMessage(Messages.WALLET.SETUP_COMPLETE, { sendNotification })\r\n}\r\n\r\n/**\r\n * Opens the tab-view to reset the wallet using a seed phrase\r\n *\r\n */\r\nexport const openReset = async (): Promise<void> => {\r\n    return sendMessage(Messages.APP.OPEN_RESET)\r\n}\r\n\r\n/**\r\n * Verifies if the user's password is correct\r\n *\r\n * @param password user's password\r\n */\r\nexport const verifyPassword = async (password: string): Promise<boolean> => {\r\n    return sendMessage(Messages.PASSWORD.VERIFY, {\r\n        password,\r\n    })\r\n}\r\n\r\n/**\r\n * Gets the current blank app state\r\n *\r\n * @returns Background state\r\n */\r\nexport const getState = async (): Promise<ResponseGetState> => {\r\n    return sendMessage(Messages.STATE.GET)\r\n}\r\n\r\n/**\r\n * Resolves the address of an ENS name\r\n *\r\n * @returns address or null\r\n */\r\nexport const resolveEnsName = async (name: string): Promise<string | null> => {\r\n    return sendMessage(Messages.ENS.RESOLVE_NAME, {\r\n        name,\r\n    })\r\n}\r\n\r\n/**\r\n * Looks up the ENS name of an address\r\n *\r\n * @returns ens name or null\r\n */\r\nexport const lookupAddressEns = async (\r\n    address: string\r\n): Promise<string | null> => {\r\n    return sendMessage(Messages.ENS.LOOKUP_ADDRESS, {\r\n        address,\r\n    })\r\n}\r\n\r\n/**\r\n * Resolves the address of an UD name\r\n *\r\n * @returns address or null\r\n */\r\nexport const resolveUDName = async (name: string): Promise<string | null> => {\r\n    return sendMessage(Messages.UD.RESOLVE_NAME, {\r\n        name,\r\n    })\r\n}\r\n\r\n/**\r\n * Sends ethereum or the network native currency\r\n *\r\n * @param to recipient\r\n * @param feeData gas fee data\r\n * @param value amount\r\n */\r\nexport const sendEther = async (\r\n    to: string,\r\n    feeData: TransactionFeeData,\r\n    value: BigNumber,\r\n    advancedData: TransactionAdvancedData\r\n): Promise<string> => {\r\n    return sendMessage(Messages.TRANSACTION.SEND_ETHER, {\r\n        to,\r\n        feeData,\r\n        value,\r\n        advancedData,\r\n    })\r\n}\r\n\r\n/**\r\n * Adds a new unapproved send transaction\r\n *\r\n * @param address The token address (0x0 for the Network native currency)\r\n * @param to recipient\r\n * @param feeData gas fee data\r\n * @param value amount\r\n */\r\nexport const addNewSendTransaction = async (\r\n    address: string,\r\n    to: string,\r\n    feeData: TransactionFeeData,\r\n    value: BigNumber\r\n): Promise<TransactionMeta> => {\r\n    return sendMessage(Messages.TRANSACTION.ADD_NEW_SEND_TRANSACTION, {\r\n        address,\r\n        to,\r\n        value,\r\n        feeData,\r\n    })\r\n}\r\n\r\n/**\r\n * Updates the gas on an existing unapproved Send transaction\r\n *\r\n * @param transactionId The transaction id\r\n * @param feeData gas fee data to update\r\n */\r\nexport const updateSendTransactionGas = async (\r\n    transactionId: string,\r\n    feeData: TransactionFeeData\r\n): Promise<void> => {\r\n    return sendMessage(Messages.TRANSACTION.UPDATE_SEND_TRANSACTION_GAS, {\r\n        transactionId,\r\n        feeData,\r\n    })\r\n}\r\n\r\n/**\r\n * It approves an existing unapproved Send transaction\r\n *\r\n * @param transactionId The transaction id\r\n */\r\nexport const approveSendTransaction = async (\r\n    transactionId: string\r\n): Promise<void> => {\r\n    return sendMessage(Messages.TRANSACTION.APPROVE_SEND_TRANSACTION, {\r\n        transactionId,\r\n    })\r\n}\r\n\r\n/**\r\n * It awaits for an already submitted Send transaction result\r\n *\r\n * @param transactionId The transaction id\r\n * @returns The transaction hash\r\n */\r\nexport const getSendTransactionResult = async (\r\n    transactionId: string\r\n): Promise<string> => {\r\n    return sendMessage(Messages.TRANSACTION.GET_SEND_TRANSACTION_RESULT, {\r\n        transactionId,\r\n    })\r\n}\r\n\r\n/**\r\n * It calculates a Send transaction gas limit\r\n *\r\n * @param address The token contract address\r\n * @param to The `to` parameter\r\n * @param value The value to transfer\r\n * @returns The send estimated gas limit\r\n */\r\nexport const getSendTransactionGasLimit = async (\r\n    address: string,\r\n    to: string,\r\n    value: BigNumber\r\n): Promise<TransactionGasEstimation> => {\r\n    return sendMessage(\r\n        Messages.TRANSACTION.CALCULATE_SEND_TRANSACTION_GAS_LIMIT,\r\n        {\r\n            address,\r\n            to,\r\n            value,\r\n        }\r\n    )\r\n}\r\n\r\n/**\r\n * It obtains the current network latest gas price\r\n */\r\nexport const getLatestGasPrice = async (): Promise<BigNumber> => {\r\n    return sendMessage(Messages.TRANSACTION.GET_LATEST_GAS_PRICE)\r\n}\r\n\r\n/**\r\n * Get all the erc20 tokens method\r\n *\r\n */\r\nexport const getTokens = (): Promise<ITokens> => {\r\n    return sendMessage(Messages.TOKEN.GET_TOKENS, {})\r\n}\r\n\r\n/**\r\n * Get all the erc20 tokens that the user added method\r\n *\r\n */\r\nexport const getUserToken = (): Promise<ITokens> => {\r\n    return sendMessage(Messages.TOKEN.GET_USER_TOKENS, {})\r\n}\r\n\r\n/**\r\n * get erc20 token method\r\n *\r\n * @param tokenAddress erc20 token address\r\n */\r\nexport const getToken = (tokenAddress: string): Promise<Token> => {\r\n    return sendMessage(Messages.TOKEN.GET_TOKEN, {\r\n        tokenAddress,\r\n    })\r\n}\r\n\r\n/**\r\n * Get balance for a single token address\r\n *\r\n * @returns token balance for that account\r\n */\r\nexport const getTokenBalance = (\r\n    tokenAddress: string,\r\n    account: string\r\n): Promise<BigNumber> => {\r\n    return sendMessage(Messages.TOKEN.GET_BALANCE, {\r\n        tokenAddress,\r\n        account,\r\n    })\r\n}\r\n\r\n/**\r\n * Add custom erc20 token method\r\n *\r\n * @param address erc20 token address\r\n * @param name erc20 token name\r\n * @param symbol erc20 token symbol\r\n * @param decimals erc20 token decimals\r\n */\r\nexport const addCustomToken = async (\r\n    address: string,\r\n    name: string,\r\n    symbol: string,\r\n    decimals: number,\r\n    logo: string,\r\n    type: string\r\n): Promise<void | void[]> => {\r\n    return sendMessage(Messages.TOKEN.ADD_CUSTOM_TOKEN, {\r\n        address,\r\n        name,\r\n        symbol,\r\n        decimals,\r\n        logo,\r\n        type,\r\n    })\r\n}\r\n\r\n/**\r\n * Add custom erc20 tokens method\r\n *\r\n * @param tokens erc20 tokens array\r\n */\r\nexport const addCustomTokens = async (\r\n    tokens: Token[]\r\n): Promise<void | void[]> => {\r\n    return sendMessage(Messages.TOKEN.ADD_CUSTOM_TOKENS, { tokens })\r\n}\r\n\r\n/**\r\n * Delete a custom erc20 tokens method\r\n *\r\n * @param address of the ERC20 token to delete\r\n */\r\nexport const deleteCustomToken = async (address: string): Promise<void> => {\r\n    return sendMessage(Messages.TOKEN.DELETE_CUSTOM_TOKEN, { address })\r\n}\r\n\r\n/**\r\n * Sends erc20 token\r\n *\r\n * @param tokenAddress erc20 token address\r\n * @param to recipient\r\n * @param feeData gas fee data\r\n * @param value amount\r\n */\r\nexport const sendToken = async (\r\n    tokenAddress: string,\r\n    to: string,\r\n    feeData: TransactionFeeData,\r\n    value: BigNumber,\r\n    advancedData: TransactionAdvancedData\r\n): Promise<string> => {\r\n    return sendMessage(Messages.TOKEN.SEND_TOKEN, {\r\n        tokenAddress,\r\n        to,\r\n        value,\r\n        feeData,\r\n        advancedData,\r\n    })\r\n}\r\n\r\n/**\r\n * Searches inside the assets list for tokens that matches the criteria\r\n *\r\n * @param query The user input query to search for (address, name, symbol)\r\n */\r\nexport const searchTokenInAssetsList = async (\r\n    query: string,\r\n    exact?: boolean,\r\n): Promise<SearchTokensResponse> => {\r\n    return sendMessage(Messages.TOKEN.SEARCH_TOKEN, {\r\n        query,\r\n        exact,\r\n    })\r\n}\r\n\r\n/**\r\n * Search the token in the blockchain\r\n *\r\n * @param tokenAddress erc20 token address\r\n */\r\nexport const populateTokenData = async (\r\n    tokenAddress: string\r\n): Promise<Token> => {\r\n    return sendMessage(Messages.TOKEN.POPULATE_TOKEN_DATA, {\r\n        tokenAddress,\r\n    })\r\n}\r\n\r\n/**\r\n * Creates a new BlockWallet\r\n *\r\n * @param password user password\r\n * @returns vault seed phrase\r\n */\r\nexport const createWallet = async (password: string): Promise<void> => {\r\n    const antiPhishingImage = await generatePhishingPreventionBase64()\r\n    return sendMessage(Messages.WALLET.CREATE, { password, antiPhishingImage })\r\n}\r\n\r\n/**\r\n * Imports the user's wallet to blank\r\n *\r\n * @param password user password\r\n * @param seedPhrase vault seed phrase\r\n */\r\nexport const importWallet = async (\r\n    password: string,\r\n    seedPhrase: string,\r\n    defaultNetwork?: string\r\n): Promise<boolean> => {\r\n    const antiPhishingImage = await generatePhishingPreventionBase64()\r\n    return sendMessage(Messages.WALLET.IMPORT, {\r\n        password,\r\n        seedPhrase,\r\n        defaultNetwork,\r\n        antiPhishingImage,\r\n    })\r\n}\r\n\r\n/**\r\n * Reset the wallet with a seed phrase\r\n *\r\n * @param password user password\r\n * @param seedPhrase vault seed phrase\r\n */\r\nexport const resetWallet = async (\r\n    password: string,\r\n    seedPhrase: string\r\n): Promise<boolean> => {\r\n    const antiPhishingImage = await generatePhishingPreventionBase64()\r\n    return sendMessage(Messages.WALLET.RESET, {\r\n        password,\r\n        seedPhrase,\r\n        antiPhishingImage,\r\n    })\r\n}\r\n\r\n/**\r\n * Updates the popup tab to focus when opening the popup next time\r\n */\r\nexport const updatePopupTab = async (popupTab: PopupTabs): Promise<void> => {\r\n    return sendMessage(Messages.APP.UPDATE_POPUP_TAB, {\r\n        popupTab,\r\n    })\r\n}\r\n\r\n/**\r\n * Creates a new site with permissions\r\n *\r\n */\r\nexport const addNewSiteWithPermissions = (\r\n    accounts: string[],\r\n    origin: string,\r\n    siteMetadata: SiteMetadata\r\n) => {\r\n    return sendMessage(Messages.PERMISSION.ADD_NEW, {\r\n        accounts,\r\n        origin,\r\n        siteMetadata,\r\n    })\r\n}\r\n\r\n/**\r\n * Confirms a pending permission request\r\n *\r\n */\r\nexport const confirmPermission = (id: string, accounts: string[] | null) => {\r\n    return sendMessage(Messages.PERMISSION.CONFIRM, {\r\n        id,\r\n        accounts,\r\n    })\r\n}\r\n\r\n/**\r\n * Confirms or rejects the specified dapp request\r\n *\r\n */\r\nexport const confirmDappRequest = <RequestType extends DappReq>(\r\n    id: string,\r\n    isConfirmed: boolean,\r\n    confirmOptions?: DappRequestConfirmOptions[RequestType]\r\n): Promise<void> => {\r\n    return sendMessage(Messages.DAPP.CONFIRM_REQUEST, {\r\n        id,\r\n        isConfirmed,\r\n        confirmOptions,\r\n    })\r\n}\r\n\r\n/**\r\n * Attempts to reject the specified dapp request\r\n *\r\n */\r\nexport const attemptRejectDappRequest = (id: string): Promise<void> => {\r\n    return sendMessage(Messages.DAPP.ATTEMPT_REJECT_REQUEST, {\r\n        id,\r\n    })\r\n}\r\n\r\n/**\r\n * Returns the sites the account is allowed to connect to\r\n *\r\n */\r\nexport const getAccountPermissions = (account: string) => {\r\n    return sendMessage(Messages.PERMISSION.GET_ACCOUNT_PERMISSIONS, {\r\n        account,\r\n    })\r\n}\r\n\r\n/**\r\n * Remove account from a single site\r\n * If the site has no accounts left, then deletes the site\r\n *\r\n */\r\nexport const removeAccountFromSite = (origin: string, account: string) => {\r\n    return sendMessage(Messages.PERMISSION.REMOVE_ACCOUNT_FROM_SITE, {\r\n        origin,\r\n        account,\r\n    })\r\n}\r\n\r\n/**\r\n * Updates permissions for a specific site\r\n * If accounts is an empty array or null, deletes the site.\r\n *\r\n */\r\nexport const updateSitePermissions = (\r\n    origin: string,\r\n    accounts: string[] | null\r\n) => {\r\n    return sendMessage(Messages.PERMISSION.UPDATE_SITE_PERMISSIONS, {\r\n        origin,\r\n        accounts,\r\n    })\r\n}\r\n\r\n/**\r\n * It calculates an Approve transaction gas limit\r\n *\r\n * @returns The Approve estimated gas limit\r\n */\r\nexport const getApproveTransactionGasLimit = async (\r\n    tokenAddress: string,\r\n    spender: string = \"deposit\",\r\n    amount: BigNumber | \"UNLIMITED\" = \"UNLIMITED\"\r\n): Promise<TransactionGasEstimation> => {\r\n    return sendMessage(\r\n        Messages.TRANSACTION.CALCULATE_APPROVE_TRANSACTION_GAS_LIMIT,\r\n        {\r\n            tokenAddress,\r\n            spender,\r\n            amount,\r\n        }\r\n    )\r\n}\r\n\r\n/**\r\n * Subscribes to state updates\r\n *\r\n * @param cb state update handler\r\n */\r\nexport const subscribeState = async (\r\n    cb: (state: StateSubscription) => void\r\n): Promise<boolean> => {\r\n    return sendMessage(Messages.STATE.SUBSCRIBE, undefined, cb)\r\n}\r\n\r\n/**\r\n * Performs network change to the selected one.\r\n * @param networkName\r\n */\r\nexport const changeNetwork = async (networkName: string): Promise<boolean> => {\r\n    return sendMessage(Messages.NETWORK.CHANGE, { networkName })\r\n}\r\n\r\n/**\r\n * Performs network change to the selected one.\r\n * @param networkName\r\n */\r\nexport const setShowTestNetworks = async (\r\n    showTestNetworks: boolean\r\n): Promise<boolean> => {\r\n    return sendMessage(Messages.NETWORK.SET_SHOW_TEST_NETWORKS, {\r\n        showTestNetworks,\r\n    })\r\n}\r\n\r\n/**\r\n * Remove a network from the list of available networks\r\n *\r\n * @param chainId The chainId of the network to remove\r\n */\r\nexport const removeNetwork = async (chainId: number) => {\r\n    return sendMessage(Messages.NETWORK.REMOVE_NETWORK, { chainId })\r\n}\r\n\r\n/**\r\n * Obtains the details(name, rpc list, icon, etc) of the specified chain\r\n *\r\n * @param chainId The chainId of the network to fetch the details from\r\n */\r\nexport const getSpecificChainDetails = async (chainId: number) => {\r\n    return sendMessage(Messages.NETWORK.GET_SPECIFIC_CHAIN_DETAILS, { chainId })\r\n}\r\n\r\n/**\r\n * Adds a new network.\r\n *\r\n * @param networkInput The network information to be added.\r\n */\r\nexport const addNetwork = async (networkInput: RequestAddNetwork) => {\r\n    return sendMessage(Messages.NETWORK.ADD_NETWORK, networkInput)\r\n}\r\n\r\n/**\r\n * Edit an existing network. You can only change the rpcUrl and the blockExplorerUrl fields.\r\n *\r\n * @param networkInput The network information to be edited.\r\n */\r\nexport const editNetwork = async (editNetworkInput: RequestEditNetwork) => {\r\n    return sendMessage(Messages.NETWORK.EDIT_NETWORK, editNetworkInput)\r\n}\r\n\r\n/**\r\n * Edit networks order.\r\n *\r\n */\r\nexport const editNetworksOrder = async (\r\n    editNetworksOrder: RequestEditNetworksOrder\r\n) => {\r\n    return sendMessage(Messages.NETWORK.EDIT_NETWORKS_ORDER, editNetworksOrder)\r\n}\r\n\r\n/**\r\n * Fetches the chainId from the specified rpc url\r\n *\r\n * @param rpcUrl The url of the chain rpc\r\n */\r\nexport const getRpcChainId = async (rpcUrl: string) => {\r\n    return sendMessage(Messages.NETWORK.GET_RPC_CHAIN_ID, { rpcUrl })\r\n}\r\n\r\n/**\r\n * Performs transaction confirm with specific transaction meta.\r\n * @param transactionMeta\r\n */\r\nexport const confirmTransaction = async (\r\n    transactionId: string,\r\n    feeData: TransactionFeeData,\r\n    advancedData: TransactionAdvancedData\r\n) => {\r\n    return sendMessage(Messages.TRANSACTION.CONFIRM, {\r\n        id: transactionId,\r\n        feeData,\r\n        advancedData,\r\n    })\r\n}\r\n\r\n/**\r\n * Rejects the transaction specified by id.\r\n * @param transactionId\r\n */\r\nexport const rejectTransaction = async (transactionId: string) => {\r\n    return sendMessage(Messages.TRANSACTION.REJECT, { transactionId })\r\n}\r\n\r\n/**\r\n * Rejects an speedUp/cancel transaction\r\n * @param transactionId\r\n */\r\nexport const rejectReplacementTransaction = async (transactionId: string) => {\r\n    return sendMessage(Messages.TRANSACTION.REJECT_REPLACEMENT_TRANSACTION, {\r\n        transactionId,\r\n    })\r\n}\r\n\r\n/**\r\n * Allow to cancel a transaction. It does it by creating a **new transaction**\r\n * with a 0 amount, but higher gas fee.\r\n * @param transactionId\r\n */\r\nexport const cancelTransaction = async (\r\n    transactionId: string,\r\n    gasLimit?: BigNumber,\r\n    gasValues?: GasPriceValue | FeeMarketEIP1559Values\r\n) => {\r\n    return sendMessage(Messages.TRANSACTION.CANCEL_TRANSACTION, {\r\n        transactionId,\r\n        gasValues,\r\n        gasLimit,\r\n    })\r\n}\r\n\r\n/**\r\n * Allow to speed up a transaction. It does it by creating a **new transaction**\r\n * with the same amount, but higher gas fee.\r\n * @param transactionId\r\n */\r\nexport const speedUpTransaction = async (\r\n    transactionId: string,\r\n    gasLimit?: BigNumber,\r\n    gasValues?: GasPriceValue | FeeMarketEIP1559Values\r\n) => {\r\n    return sendMessage(Messages.TRANSACTION.SPEED_UP_TRANSACTION, {\r\n        transactionId,\r\n        gasValues,\r\n        gasLimit,\r\n    })\r\n}\r\n\r\n/**\r\n * Get the gas price of a cancel transaction\r\n * @param transactionId\r\n */\r\nexport const getCancelGasPrice = async (transactionId: string) => {\r\n    return sendMessage(Messages.TRANSACTION.GET_CANCEL_GAS_PRICE, {\r\n        transactionId,\r\n    })\r\n}\r\n\r\n/**\r\n * Get the gas price of a speed up transaction\r\n * @param transactionId\r\n */\r\nexport const getSpeedUpGasPrice = async (transactionId: string) => {\r\n    return sendMessage(Messages.TRANSACTION.GET_SPEED_UP_GAS_PRICE, {\r\n        transactionId,\r\n    })\r\n}\r\n\r\n/**\r\n * Remove all entries in the book\r\n *\r\n */\r\nexport const addressBookClear = async () => {\r\n    return sendMessage(Messages.ADDRESS_BOOK.CLEAR, {})\r\n}\r\n\r\n/**\r\n * Remove a contract entry by address\r\n *\r\n * @param address - Recipient address to delete\r\n */\r\nexport const addressBookDelete = async (address: string) => {\r\n    return sendMessage(Messages.ADDRESS_BOOK.DELETE, { address })\r\n}\r\n\r\n/**\r\n * Add or update a contact entry by address\r\n *\r\n * @param address - Recipient address to add or update\r\n * @param name - Nickname to associate with this address\r\n * @param note - User's note about address\r\n * @returns - Boolean indicating if the address was successfully set\r\n */\r\nexport const addressBookSet = async (\r\n    address: string,\r\n    name: string,\r\n    note: string\r\n) => {\r\n    return sendMessage(Messages.ADDRESS_BOOK.SET, { address, name, note })\r\n}\r\n\r\n/**\r\n * Get the contacts\r\n *\r\n * @returns - A map with the entries\r\n */\r\nexport const addressBookGet = async () => {\r\n    return sendMessage(Messages.ADDRESS_BOOK.GET, {})\r\n}\r\n\r\n/**\r\n * Get the contacts\r\n *\r\n * @param address - Recipient address to search\r\n *\r\n * @returns - A address book entry\r\n */\r\nexport const addressBookByAddress = async (address: string) => {\r\n    return sendMessage(Messages.ADDRESS_BOOK.GET_BY_ADDRESS, { address })\r\n}\r\n\r\n/**\r\n * Get the recent addresses with which the wallet has interacted\r\n *\r\n * @param limit - Optional. The maximun number of recent address to return.\r\n *\r\n * @returns - A map with the entries\r\n */\r\nexport const addressBookGetRecentAddresses = async (limit?: number) => {\r\n    return sendMessage(Messages.ADDRESS_BOOK.GET_RECENT_ADDRESSES, { limit })\r\n}\r\n\r\n/**\r\n * Stores the user settings.\r\n * @param settings Object containing settings and values to store.\r\n */\r\nexport const setUserSettings = async (settings: UserSettings) => {\r\n    return sendMessage(Messages.APP.SET_USER_SETTINGS, { settings })\r\n}\r\n\r\n/**\r\n * Get the contacts\r\n *\r\n * @param address - Recipient address to search\r\n *\r\n * @returns - A address book entry\r\n */\r\nexport const getNextNonce = async (address: string) => {\r\n    return sendMessage(Messages.TRANSACTION.GET_NEXT_NONCE, { address })\r\n}\r\n\r\n/**\r\n * Dismisses the welcome to the wallet message\r\n */\r\nexport const dismissWelcomeMessage = async (): Promise<boolean> => {\r\n    return sendMessage(Messages.WALLET.DISMISS_WELCOME_MESSAGE, {})\r\n}\r\n\r\n/**\r\n * Dismisses the default wallet preferences\r\n */\r\nexport const dismissDefaultWalletPreferences = async (): Promise<boolean> => {\r\n    return sendMessage(Messages.WALLET.DISMISS_DEFAULT_WALLET_PREFERENCES, {})\r\n}\r\n\r\n/**\r\n * Dismisses the release notes message\r\n */\r\nexport const dismissReleaseNotes = async (): Promise<boolean> => {\r\n    return sendMessage(Messages.WALLET.DISMISS_RELEASE_NOTES, {})\r\n}\r\n\r\n/**\r\n * Updates release notes subscription status\r\n * @param enabled Subscription to release notes status\r\n */\r\nexport const toggleReleaseNotesSubscription = async (\r\n    enabled: boolean\r\n): Promise<void> => {\r\n    return sendMessage(Messages.WALLET.TOGGLE_RELEASE_NOTES_SUBSCRIPTION, {\r\n        releaseNotesSubscriptionEnabled: enabled,\r\n    })\r\n}\r\n\r\n/**\r\n * Updates the default browser wallet\r\n * @param enabled default browser wallet status\r\n */\r\nexport const toggleDefaultBrowserWallet = async (\r\n    enabled: boolean\r\n): Promise<void> => {\r\n    return sendMessage(Messages.WALLET.TOGGLE_DEFAULT_BROWSER_WALLET, {\r\n        defaultBrowserWalletEnabled: enabled,\r\n    })\r\n}\r\n\r\n/**\r\n* Updates the default gas option preference\r\n* @param defaultGasOption default gas option\r\n*/\r\nexport const setDefaultGasPreference = async (\r\n    defaultGasOption: \"low\" | \"medium\" | \"high\"\r\n): Promise<void> => {\r\n    return sendMessage(Messages.WALLET.SET_DEFAULT_GAS, {\r\n        defaultGasOption,\r\n    })\r\n}\r\n\r\n/**\r\n * Sets the provided base64 image as the phishing protection picture\r\n * @param image the base64 image to be used for phishing protection\r\n */\r\nexport const updateAntiPhishingImage = async (image: string): Promise<void> => {\r\n    return sendMessage(Messages.WALLET.UPDATE_ANTI_PHISHING_IMAGE, {\r\n        antiPhishingImage: image,\r\n    })\r\n}\r\n\r\n/**\r\n * Updates phishing protection status\r\n * @param enabled Whether user wants to use the phishing protection feature or not.\r\n */\r\nexport const toggleAntiPhishingProtection = async (\r\n    enabled: boolean\r\n): Promise<void> => {\r\n    return sendMessage(Messages.WALLET.TOGGLE_ANTI_PHISHING_PROTECTION, {\r\n        antiPhishingProtectionEnabeld: enabled,\r\n    })\r\n}\r\n\r\n/**\r\n * Sets the user's native currency.\r\n * @param currencyCode A valid curency code.\r\n */\r\nexport const setNativeCurrency = async (\r\n    currencyCode: string\r\n): Promise<void> => {\r\n    return sendMessage(Messages.WALLET.SET_NATIVE_CURRENCY, {\r\n        currencyCode,\r\n    })\r\n}\r\n\r\n/**\r\n * Gets all the supported currencies\r\n * @returns a list of all the valid currencies\r\n */\r\nexport const getValidCurrencies = async (): Promise<Currency[]> => {\r\n    return sendMessage(Messages.WALLET.GET_VALID_CURRENCIES)\r\n}\r\n\r\n/**\r\n * Opens the extension tab (TODO: test window) to connect a hardware wallet\r\n *\r\n */\r\nexport const openHardwareConnect = async (): Promise<void> => {\r\n    return sendMessage(Messages.APP.OPEN_HW_CONNECT)\r\n}\r\n/**\r\n * Opens the extension tab (TODO: test window) to remove a hardware wallet\r\n *\r\n */\r\nexport const openHardwareRemove = async (): Promise<void> => {\r\n    return sendMessage(Messages.APP.OPEN_HW_REMOVE)\r\n}\r\n\r\n/**\r\n * Opens the extension tab (TODO: test window) to connect a hardware wallet\r\n *\r\n */\r\nexport const openHardwareReconnect = async (address: string): Promise<void> => {\r\n    return sendMessage(Messages.APP.OPEN_HW_RECONNECT, { address })\r\n}\r\n\r\n/**\r\n * It connects a hardware wallet to the extension\r\n */\r\nexport const connectHardwareWallet = async (\r\n    device: Devices\r\n): Promise<boolean> => {\r\n    return sendMessage(Messages.WALLET.HARDWARE_CONNECT, { device })\r\n}\r\n\r\n/**\r\n * It gets a paginated list of a connected hardware wallet device accounts\r\n */\r\nexport const getHardwareWalletAccounts = async (\r\n    device: Devices,\r\n    pageIndex: number = 0,\r\n    pageSize: number = 5\r\n): Promise<AccountInfo[]> => {\r\n    return sendMessage(Messages.WALLET.HARDWARE_GET_ACCOUNTS, {\r\n        device,\r\n        pageIndex,\r\n        pageSize,\r\n    })\r\n}\r\n\r\n/**\r\n * It imports a list of accounts from a hardware wallet to the extension\r\n */\r\nexport const importHardwareWalletAccounts = async (\r\n    deviceAccounts: DeviceAccountInfo[],\r\n    device: Devices\r\n): Promise<AccountInfo[]> => {\r\n    return sendMessage(Messages.WALLET.HARDWARE_IMPORT_ACCOUNTS, {\r\n        deviceAccounts,\r\n        device,\r\n    })\r\n}\r\n\r\n/**\r\n * setHardwareWalletHDPath\r\n *\r\n * It sets the HD path for a hardware wallet device\r\n *\r\n * @param device The device to set the HD path for\r\n * @param path The HD path to set\r\n */\r\nexport const setHardwareWalletHDPath = async (\r\n    device: Devices,\r\n    path: string\r\n): Promise<void> => {\r\n    return sendMessage(Messages.WALLET.HARDWARE_SET_HD_PATH, {\r\n        device,\r\n        path,\r\n    })\r\n}\r\n\r\n/**\r\n * getHardwareWalletHDPath\r\n *\r\n * It gets the HD path for a hardware wallet device\r\n *\r\n * @param device The device to get the HD path from\r\n * @returns The HD path for the device\r\n */\r\nexport const getHardwareWalletHDPath = async (\r\n    device: Devices\r\n): Promise<string> => {\r\n    return sendMessage(Messages.WALLET.HARDWARE_GET_HD_PATH, {\r\n        device,\r\n    })\r\n}\r\n\r\nexport const getWindowId = () => {\r\n    return sendMessage(Messages.BROWSER.GET_WINDOW_ID)\r\n}\r\n\r\nexport const searchChainsByTerm = async (term: string) => {\r\n    return sendMessage(Messages.NETWORK.SEARCH_CHAINS, {\r\n        term,\r\n    })\r\n}\r\n\r\n/**\r\n * Generates on demand release notes for the release-notes route.\r\n * @param version The version of the release notes\r\n */\r\nexport const generateOnDemandReleaseNotes = async (version: string) => {\r\n    return sendMessage(Messages.WALLET.GENERATE_ON_DEMAND_RELEASE_NOTES, {\r\n        version,\r\n    })\r\n}\r\n\r\n/**\r\n * Updates the account filters\r\n *\r\n * @param filters Array of account filters\r\n */\r\nexport const updateAccountFilters = async (\r\n    filters: string[]\r\n): Promise<void> => {\r\n    return sendMessage(Messages.FILTERS.SET_ACCOUNT_FILTERS, {\r\n        accountFilters: filters,\r\n    })\r\n}\r\n\r\n/**\r\n * isAccountDeviceLinked\r\n *\r\n * Checks if the current account device is connected.\r\n * This applies only to Ledger devices. Every other keyring type returns true.\r\n *\r\n * @param address The address of the account to check\r\n * @returns Whether the account device is connected or not\r\n */\r\nexport const isAccountDeviceLinked = async (\r\n    address: string\r\n): Promise<boolean> => {\r\n    return sendMessage(Messages.WALLET.HARDWARE_IS_LINKED, {\r\n        address,\r\n    })\r\n}\r\n\r\n/**\r\n * It removes a hardware from to the extension\r\n */\r\nexport const removeHardwareWallet = async (\r\n    device: Devices\r\n): Promise<boolean> => {\r\n    return sendMessage(Messages.WALLET.HARDWARE_REMOVE, { device })\r\n}\r\n\r\n/**\r\n * Checks if the given account has enough allowance to make the exchange\r\n *\r\n * @param account User account\r\n * @param amount Amount to be spended\r\n * @param exchangeType Exchange type\r\n * @param tokenAddress Asset to be spended address\r\n */\r\nexport const checkExchangeAllowance = async (\r\n    account: string,\r\n    amount: BigNumber,\r\n    exchangeType: ExchangeType,\r\n    tokenAddress: string\r\n): Promise<boolean> => {\r\n    return sendMessage(Messages.EXCHANGE.CHECK_ALLOWANCE, {\r\n        account,\r\n        amount,\r\n        exchangeType,\r\n        tokenAddress,\r\n    })\r\n}\r\n\r\n/**\r\n * Submits an approval transaction to setup asset allowance\r\n *\r\n * @param allowance User selected allowance\r\n * @param amount Exchange amount\r\n * @param exchangeType The exchange type\r\n * @param feeData Transaction gas fee data\r\n * @param tokenAddress Spended asset token address\r\n * @param customNonce Custom transaction nonce\r\n */\r\nexport const approveExchange = async (\r\n    allowance: BigNumber,\r\n    amount: BigNumber,\r\n    exchangeType: ExchangeType,\r\n    feeData: TransactionFeeData,\r\n    tokenAddress: string,\r\n    customNonce?: number\r\n): Promise<boolean> => {\r\n    return sendMessage(Messages.EXCHANGE.APPROVE, {\r\n        allowance,\r\n        amount,\r\n        exchangeType,\r\n        feeData,\r\n        tokenAddress,\r\n        customNonce,\r\n    })\r\n}\r\n\r\n/**\r\n * Gets a quote for the specified exchange type and parameters\r\n *\r\n * @param exchangeType Exchange type\r\n * @param quoteParams Quote parameters\r\n */\r\nexport const getExchangeQuote = async (\r\n    exchangeType: ExchangeType,\r\n    quoteParams: OneInchSwapQuoteParams\r\n): Promise<SwapQuote> => {\r\n    return sendMessage(Messages.EXCHANGE.GET_QUOTE, {\r\n        exchangeType,\r\n        quoteParams,\r\n    })\r\n}\r\n\r\n/**\r\n * Fetch the transaction parameters to make the exchange\r\n *\r\n * @param exchangeType Exchange type\r\n * @param exchangeParams Exchange parameters\r\n */\r\nexport const getExchangeParameters = async (\r\n    exchangeType: ExchangeType,\r\n    exchangeParams: OneInchSwapRequestParams\r\n): Promise<SwapParameters> => {\r\n    return sendMessage(Messages.EXCHANGE.GET_EXCHANGE, {\r\n        exchangeType,\r\n        exchangeParams,\r\n    })\r\n}\r\n\r\n/**\r\n * Executes the exchange\r\n *\r\n * @param exchangeType Exchange type\r\n * @param exchangeParams Exchange parameters\r\n */\r\nexport const executeExchange = async (\r\n    exchangeType: ExchangeType,\r\n    exchangeParams: SwapTransaction\r\n): Promise<string> => {\r\n    return sendMessage(Messages.EXCHANGE.EXECUTE, {\r\n        exchangeType,\r\n        exchangeParams,\r\n    })\r\n}\r\n\r\n/**\r\n * Sets the user's current network status\r\n *\r\n * @param networkStatus The current network status\r\n */\r\nexport const setNetworkStatus = async (\r\n    networkStatus: boolean\r\n): Promise<void> => {\r\n    return sendMessage(Messages.APP.SET_USER_ONLINE, { networkStatus })\r\n}\r\n\r\n/**\r\n * Subscribes to navigator network status\r\n */\r\nexport const subscribeNetworkStatus = () => {\r\n    if (window && window.navigator) {\r\n        window.addEventListener(\"online\", () => setNetworkStatus(true))\r\n        window.addEventListener(\"offline\", () => setNetworkStatus(false))\r\n    }\r\n}\r\n/**\r\n * Returns the available tokes for bridging in the current user's network\r\n */\r\nexport const getBridgeTokens = async (): Promise<IToken[]> => {\r\n    return sendMessage(Messages.BRIDGE.GET_BRIDGE_TOKENS)\r\n}\r\n\r\n/**\r\n * Returns all the available routes based on the parameters specified in the request.\r\n * The fromChainId value is automatically filled with the current user's network\r\n * @param fromTokenAddress Address of the token from which the user want to bridge\r\n * @param toChainId Optional destination chain Id\r\n * @param toTokenAddress Optional destination token address in the destination chain Id\r\n */\r\nexport const getBridgeAvailableRoutes = async (\r\n    routesRequest: BridgeRoutesRequest\r\n): Promise<GetBridgeAvailableRoutesResponse> => {\r\n    return sendMessage(Messages.BRIDGE.GET_BRIDGE_ROUTES, {\r\n        routesRequest,\r\n    })\r\n}\r\n\r\n//export const getBridgeRoute = async():\r\n\r\n/**\r\n * Submits an approval transaction to setup asset allowance\r\n *\r\n * @param allowance User selected allowance\r\n * @param amount Exchange amount\r\n * @param spenderAddress The spender address for the allowance\r\n * @param feeData Transaction gas fee data\r\n * @param tokenAddress Spended asset token address\r\n * @param customNonce Custom transaction nonce\r\n */\r\nexport const approveBridgeAllowance = async (\r\n    allowance: BigNumber,\r\n    amount: BigNumber,\r\n    spenderAddress: string,\r\n    feeData: TransactionFeeData,\r\n    tokenAddress: string,\r\n    customNonce?: number\r\n): Promise<boolean> => {\r\n    return sendMessage(Messages.BRIDGE.APPROVE_BRIDGE_ALLOWANCE, {\r\n        allowance,\r\n        amount,\r\n        spenderAddress,\r\n        feeData,\r\n        tokenAddress,\r\n        customNonce,\r\n    })\r\n}\r\n\r\n/**\r\n * Gets a bridge quote for the  parameters and optionally checks the allowance for the transaction sepender\r\n *\r\n * @param quoteParams Quote parameters\r\n */\r\nexport const getBridgeQuote = async (\r\n    quoteRequest: BridgeQuoteRequest,\r\n    checkAllowance: boolean = false\r\n): Promise<GetBridgeQuoteResponse | GetBridgeQuoteNotFoundResponse> => {\r\n    return sendMessage(Messages.BRIDGE.GET_BRIDGE_QUOTE, {\r\n        quoteRequest,\r\n        checkAllowance,\r\n    })\r\n}\r\n\r\n/**\r\n * Executes the specified bridge transaction\r\n *\r\n * @param bridgeTransaction Parameters got after requesting a quote and cusotm one specified by the user\r\n */\r\nexport const executeBridge = async (\r\n    bridgeTransaction: BridgeTransaction\r\n): Promise<string> => {\r\n    return sendMessage(Messages.BRIDGE.EXECUTE_BRIDGE, {\r\n        bridgeTransaction,\r\n    })\r\n}\r\n","import { createContext } from \"react\"\r\nimport type { ResponseGetState } from \"@block-wallet/background/utils/types/communication\"\r\n\r\nexport type BackgroundStateType = {\r\n    blankState?: ResponseGetState\r\n}\r\n\r\nexport const initBackgroundState: BackgroundStateType = {}\r\n\r\nconst BackgroundContext: React.Context<BackgroundStateType> =\r\n    createContext<BackgroundStateType>(initBackgroundState)\r\n\r\nexport default BackgroundContext\r\n","import { Messages } from \"../commTypes\"\r\nimport BackgroundReducer from \"./backgroundReducer\"\r\nimport { useReducer, useEffect } from \"react\"\r\nimport {\r\n    subscribeState,\r\n    getState,\r\n    subscribeNetworkStatus,\r\n} from \"../commActions\"\r\nimport BackgroundContext, { initBackgroundState } from \"./backgroundContext\"\r\nimport { isPortConnected } from \"../setup\"\r\n\r\nlet isContextInit = false\r\n\r\nconst BackgroundState = (props: any) => {\r\n    const [state, dispatch] = useReducer(BackgroundReducer, initBackgroundState)\r\n\r\n    useEffect(() => {\r\n        initContext()\r\n        // eslint-disable-next-line\r\n    }, [])\r\n\r\n    const initContext = async () => {\r\n        if (!isPortConnected) {\r\n            setTimeout(initContext, 100)\r\n        } else {\r\n            if (!isContextInit) {\r\n                // Get initial state and dispatch\r\n                const initialState = await getState()\r\n                dispatch({\r\n                    type: Messages.STATE.SUBSCRIBE,\r\n                    payload: initialState,\r\n                })\r\n\r\n                // Subscribe to state updates\r\n                subscribeState((state) => {\r\n                    dispatch({\r\n                        type: Messages.STATE.SUBSCRIBE,\r\n                        payload: state,\r\n                    })\r\n                })\r\n\r\n                // Subscribe to network status\r\n                subscribeNetworkStatus()\r\n\r\n                // Set context as initialized\r\n                isContextInit = true\r\n            }\r\n        }\r\n    }\r\n\r\n    return (\r\n        <BackgroundContext.Provider\r\n            value={{\r\n                blankState: state.blankState,\r\n            }}\r\n        >\r\n            {props.children}\r\n        </BackgroundContext.Provider>\r\n    )\r\n}\r\n\r\nexport default BackgroundState\r\n","import { FunctionComponent } from \"react\"\r\nimport { CgSpinner } from \"react-icons/cg\"\r\n\r\nconst Spinner: FunctionComponent<{\r\n    size?: string\r\n    text?: string\r\n    iconTextSeparation?: string\r\n    color?: string\r\n}> = ({ size = \"1rem\", text = \"\", iconTextSeparation = \"4px\", color = \"\" }) => (\r\n    <div\r\n        style={{ display: \"inline\" }}\r\n        role=\"alert\"\r\n        aria-busy=\"true\"\r\n        aria-label=\"loading\"\r\n    >\r\n        <CgSpinner\r\n            size={size}\r\n            className=\"animate-spin text-black opacity-50\"\r\n            style={{\r\n                display: \"inline\",\r\n                marginRight: text && iconTextSeparation,\r\n            }}\r\n            color={color}\r\n        />\r\n        {text}\r\n    </div>\r\n)\r\n\r\nexport default Spinner\r\n","import { useContext } from 'react'\r\nimport BackgroundContext from './backgroundContext'\r\n\r\nexport const useBlankState = () => useContext(BackgroundContext).blankState\r\n","import { useEffect } from \"react\"\r\n\r\n/**\r\n * This hook will perform the specified callback when the \"beforeunload\" event is triggered.\r\n *\r\n * @param handler callback\r\n * @param capture if true will trigger on capture phase\r\n */\r\nconst useBeforeunload = (\r\n    handler: (ev: BeforeUnloadEvent) => any,\r\n    capture = false\r\n) => {\r\n    useEffect(() => {\r\n        window.addEventListener(\"beforeunload\", handler, { capture: capture })\r\n\r\n        return () => {\r\n            window.removeEventListener(\"beforeunload\", handler, {\r\n                capture: capture,\r\n            })\r\n        }\r\n        // eslint-disable-next-line\r\n    }, [])\r\n}\r\n\r\nexport default useBeforeunload\r\n","import { useState } from \"react\"\r\n\r\ninterface Sizes {\r\n    width: number\r\n    height: number\r\n}\r\n\r\nconst usePreventWindowResize = (fixedSizes?: Sizes) => {\r\n    const [sizes] = useState<Sizes>(\r\n        fixedSizes || { width: window.innerWidth, height: window.innerHeight }\r\n    )\r\n    let time: NodeJS.Timeout\r\n    const preventResize = () => {\r\n        //doing this to wait until the last resize event and avoid some weird UX.\r\n        clearTimeout(time)\r\n        time = setTimeout(() => {\r\n            window.resizeBy(\r\n                sizes.width - window.innerWidth,\r\n                sizes.height - window.innerHeight\r\n            )\r\n        }, 100)\r\n    }\r\n    return {\r\n        preventResize: () => {\r\n            window.addEventListener(\"resize\", preventResize)\r\n        },\r\n        cancelPreventResize: () => {\r\n            window.removeEventListener(\"resize\", preventResize)\r\n        },\r\n    }\r\n}\r\n\r\nexport default usePreventWindowResize\r\n","import { Reducer } from \"react\"\r\n\r\n/**\r\n * Simple reducer that merges every new input to the state with the previous state.\r\n * @type S State type\r\n * @type A Action type\r\n * @returns a reducer function\r\n */\r\nconst mergeReducer = <S, A>(): Reducer<S, A> => {\r\n    return (s: S, a: A): S => ({ ...s, ...a })\r\n}\r\n\r\nexport { mergeReducer }\r\n","import log from \"loglevel\"\r\nimport { useEffect, useRef } from \"react\"\r\nimport useAsyncInvoke from \"./useAsyncInvoke\"\r\n\r\nexport interface submitOnEnterProps {\r\n    onSubmit?: () => Promise<any>,\r\n    isFormValid?: boolean,\r\n    isEnabled?: boolean\r\n}\r\n\r\n/**\r\n * Hook to submit the form when the user presses enter key.\r\n * It handles the case where the form is invalid both from the user and from the background, allowing to submit again in case it fail.\r\n * @param onSubmit function to trigger.\r\n * @param isFormValid flag that indicates if the form is valid, this applies when the form implements Yup client-side validations.\r\n * @param isEnabled flag that indicates if submit button is enabled according to page logic.\r\n */\r\nconst useSubmitOnEnter = ({ onSubmit = undefined, isFormValid = true, isEnabled = true }: submitOnEnterProps) => {\r\n    const canSubmit = useRef(isEnabled)\r\n    const { run, isError } = useAsyncInvoke()\r\n\r\n    useEffect(() => {\r\n        // Callback function\r\n        const cb = (e: KeyboardEvent) => {\r\n            if (!onSubmit || e.key !== \"Enter\") return\r\n\r\n            e.preventDefault()\r\n\r\n            if (!canSubmit.current) return\r\n\r\n            canSubmit.current = false\r\n            run(onSubmit().catch(err => log.error(err)))\r\n        }\r\n\r\n        // Event listener\r\n        window.addEventListener(\"keypress\", cb)\r\n\r\n        // Cleanup\r\n        return () => window.removeEventListener(\"keypress\", cb)\r\n\r\n        // Only re-creates the listener if the callback function changes due to some forms not implementing yup (gets values at submit time)\r\n        // and using a function that relies on state values so we should adjust the callback when that state changes.\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [onSubmit])\r\n\r\n    // This effect handles the case where the form is invalid \"client side\" after submitting, then the user corrects\r\n    // the values so we allow submitting again. useForm hook validations are triggered onSubmit and if the form was invalid\r\n    // the next time will be triggered onChange so we check if the form is valid and change the flag accordingly.\r\n    useEffect(() => {\r\n        if (isFormValid && !canSubmit.current) {\r\n            canSubmit.current = true\r\n        }\r\n\r\n    }, [isFormValid])\r\n\r\n\r\n    // This effect handles the case where the form is invalid in background and the promise is rejected, so we allow submitting again.\r\n    useEffect(() => {\r\n        if (isError && !canSubmit.current) {\r\n            canSubmit.current = true\r\n        }\r\n    }, [isError])\r\n\r\n\r\n    // Handle submit button being enabled according to page logic\r\n    useEffect(() => {\r\n        canSubmit.current = isEnabled\r\n    }, [isEnabled])\r\n}\r\n\r\nexport default useSubmitOnEnter\r\n","import _classnames from \"classnames\"\r\n\r\nexport const classnames = _classnames\r\n\r\nconst primaryButton =\r\n    \"text-white bg-primary-300 hover:bg-blue-600 border-primary-300 hover:border-blue-600\"\r\n\r\nexport class Classes {\r\n    static centered = classnames(\"flex flex-row items-center justify-center\")\r\n    static start = classnames(\"flex flex-row items-center justify-start \")\r\n    static animated = classnames(\"transition-all duration-300\")\r\n    static transform = classnames(\"transform active:scale-95\")\r\n\r\n    static iconButton = classnames(\r\n        Classes.start,\r\n        Classes.animated,\r\n        Classes.transform,\r\n        \"h-12 space-x-2 p-4 rounded-md text-sm font-bold text-black cursor-pointer disabled:pointer-events-none\"\r\n    )\r\n\r\n    static baseButton = classnames(\r\n        Classes.centered,\r\n        Classes.animated,\r\n        Classes.transform,\r\n        \"flex-1 h-12 px-6 py-3 font-normal font-title text-sm shadow-sm rounded-md\",\r\n        \"border-2\",\r\n        \"cursor-pointer disabled:pointer-events-none\"\r\n    )\r\n    static button = classnames(\r\n        Classes.centered,\r\n        Classes.baseButton,\r\n        primaryButton\r\n    )\r\n\r\n    static smallButton = classnames(\r\n        Classes.centered,\r\n        primaryButton,\r\n        \"text-xs shadow-sm rounded-md p-1 border-2 cursor-pointer disabled:pointer-events-none\"\r\n    )\r\n\r\n    static menuButton = classnames(\r\n        Classes.iconButton,\r\n        \"bg-primary-100 hover:bg-primary-200\"\r\n    )\r\n\r\n    static buttonIcon = classnames(\"w-5 h-5 mr-3\")\r\n\r\n    static actionButton = classnames(\r\n        Classes.iconButton,\r\n        \"bg-white border border-gray-200 hover:border-black\"\r\n    )\r\n\r\n    static logoutButton = classnames(\r\n        Classes.iconButton,\r\n        \"text-red-500 bg-red-100 border border-opacity-0 hover:border-red-600 hover:border-opacity-100\"\r\n    )\r\n    static disabledLogoutButton = classnames(\r\n        Classes.iconButton,\r\n        \"text-red-300 bg-red-50 border border-opacity-0 hover:border-red-400 hover:border-opacity-50\"\r\n    )\r\n\r\n    static redButton = classnames(\r\n        Classes.centered,\r\n        Classes.baseButton,\r\n        \"text-white bg-red-600 hover:bg-red-700 border-red-600 hover:border-red-700\"\r\n    )\r\n    static disabledButton = classnames(\r\n        Classes.centered,\r\n        Classes.baseButton,\r\n        \"text-white bg-blue-200 pointer-events-none border-blue-200\"\r\n    )\r\n    static darkButton = classnames(\r\n        Classes.centered,\r\n        Classes.baseButton,\r\n        \"bg-gray-900 text-white hover:bg-gray-800 border-gray-900 hover:border-gray-800\"\r\n    )\r\n    static disabledDarkButton = classnames(\r\n        Classes.centered,\r\n        Classes.baseButton,\r\n        \"bg-gray-700 border-gray-700 text-white pointer-events-none\"\r\n    )\r\n    static liteButton = classnames(\r\n        Classes.centered,\r\n        Classes.baseButton,\r\n        \"text-gray-900 border-gray-900 hover:text-white hover:bg-gray-900\"\r\n    )\r\n    static inputLabel = classnames(\"text-xs\")\r\n    static inputBordered = classnames(\r\n        \"text-sm rounded-md border-1 border-gray-200 placeholder-gray-400 focus:ring-0\"\r\n    )\r\n    static input = classnames(\r\n        \"w-full text-xs px-0 py-2 border-0 border-b-2 border-gray-800 placeholder-gray-400 focus:ring-0\"\r\n    )\r\n    static inputBorder = classnames(\r\n        \"w-full text-xs px-2 py-2 mt-1 rounded-md border-1 border-gray-200 placeholder-gray-400 focus:ring-0\"\r\n    )\r\n\r\n    static checkbox = classnames(\r\n        \"w-5 h-5 border-2 border-gray-800 rounded-md focus:ring-0\"\r\n    )\r\n    static checkboxAlt = classnames(\r\n        \"w-6 h-6 border-2 border-gray-200 rounded-md focus:ring-0 cursor-pointer\"\r\n    )\r\n    static placeholder = classnames(\"overflow-hidden relative placeholder\")\r\n\r\n    static blueSection = classnames(\r\n        \"p-4 border-opacity-0 border-transparent flex justify-between items-center flex-row w-full rounded-md bg-primary-100 border cursor-pointer hover:bg-primary-200\"\r\n    )\r\n\r\n    static blueSelectionDisabled = classnames(\r\n        \"cursor-not-allowed hover:bg-primary-100\"\r\n    )\r\n\r\n    static blueSectionActive = classnames(\"bg-primary-200\")\r\n    static blueSectionInput = classnames(\r\n        \"bg-transparent p-0 mb-1 border-none font-bold\"\r\n    )\r\n\r\n    static roundedIcon = classnames(\r\n        \"flex items-center justify-center w-9 h-9 p-1.5 bg-white border border-gray-200 rounded-full\"\r\n    )\r\n\r\n    static roundedFilledIcon = classnames(\r\n        \"flex items-center justify-center w-9 h-9 p-0 rounded-full\"\r\n    )\r\n\r\n    static clickableText = classnames(\r\n        \"rounded border-none bg-transparent text-primary-300 hover:underline\"\r\n    )\r\n    static selectBaseStyle = classnames(\r\n        \"relative flex flex-row justify-between items-center cursor-pointer select-none\"\r\n    )\r\n    static selectStyle = classnames(\r\n        this.selectBaseStyle,\r\n        \"text-gray-600 border rounded-md group border-primary-200 hover:border-primary-300 px-3 py-2\"\r\n    )\r\n    static selectStyleDisabled = classnames(\r\n        this.selectStyle,\r\n        \"opacity-50 cursor-not-allowed\"\r\n    )\r\n    static selectInlineStyle = classnames(\r\n        this.selectBaseStyle,\r\n        \"px-1 text-sky-600\"\r\n    )\r\n}\r\n","import { FunctionComponent } from \"react\"\r\n\r\nimport classnames from \"classnames\"\r\n\r\nconst FullCenterContainer: FunctionComponent<{\r\n    centered?: boolean\r\n    screen?: boolean\r\n    children: React.ReactNode\r\n}> = ({ children, centered = false, screen = false }) => (\r\n    <div\r\n        className=\"w-full min-h-full flex bg-primary-100\"\r\n        style={screen ? {} : { height: \"fit-content\" }}\r\n    >\r\n        <div\r\n            className={classnames(\r\n                \"flex flex-1 md:flex-0\",\r\n                !screen && \"px-2\",\r\n                \"mx-auto\",\r\n                centered ? \"my-auto\" : !screen ? \"mb-auto\" : \"\"\r\n            )}\r\n        >\r\n            {children}\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default FullCenterContainer\r\n","import classnames from \"classnames\"\r\nimport ThreeDotsIcon from \"../icons/ThreeDotsIcon\"\r\nimport GroupIcon from \"../icons/GroupIcon\"\r\nimport SearchIcon from \"../icons/SearchIcon\"\r\nimport CheckmarkIcon from \"../icons/CheckmarkIcon\"\r\nimport CrossedOutEyeIcon from \"../icons/CrossedOutEyeIcon\"\r\nimport EyeIcon from \"../icons/EyeIcon\"\r\nimport TrashBinIcon from \"../icons/TrashBinIcon\"\r\nimport PencilIcon from \"../icons/PencilIcon\"\r\nimport PlusIcon from \"../icons/PlusIcon\"\r\nimport EmptyDrawerIcon from \"../icons/EmptyDrawerIcon\"\r\nimport WalletIcon from \"../icons/WalletIcon\"\r\nimport UsbIcon from \"../icons/UsbIcon\"\r\nimport { RightChevronIcon } from \"../icons/RightChevronIcon\"\r\nimport ImportIcon from \"../icons/ImportIcon\"\r\nimport ClockIcon from \"../icons/ClockIcon\"\r\nimport SwitchIcon from \"../icons/SwitchIcon\"\r\nexport enum IconName {\r\n    PENCIL = \"PENCIL\",\r\n    GROUP = \"GROUP\",\r\n    THREE_DOTS = \"THREE_DOTS\",\r\n    SEARCH = \"SEARCH\",\r\n    CHECKMARK = \"CHECKMARK\",\r\n    CROSSED_OUT_EYE = \"CROSSED_OUT_EYE\",\r\n    EYE = \"EYE\",\r\n    TRASH_BIN = \"TRASH_BIN\",\r\n    PLUS = \"PLUS\",\r\n    EMPTY_DRAWER = \"EMPTY_DRAWER\",\r\n    WALLET = \"WALLET\",\r\n    USB = \"USB\",\r\n    RIGHT_CHEVRON = \"RIGHT_CHEVRON\",\r\n    IMPORT = \"IMPORT\",\r\n    CLOCK = \"CLOCK\",\r\n    SWITCH = \"SWITCH\",\r\n}\r\n\r\ntype ProfileType = \"default\" | \"selected\" | \"danger\" | \"disabled\"\r\n\r\ninterface IconProps {\r\n    name: IconName\r\n    profile?: ProfileType\r\n    size?: \"sm\" | \"md\" | \"lg\" | \"xl\"\r\n    className?: string\r\n}\r\n\r\nconst ICONS = {\r\n    [IconName.GROUP]: GroupIcon,\r\n    [IconName.THREE_DOTS]: ThreeDotsIcon,\r\n    [IconName.SEARCH]: SearchIcon,\r\n    [IconName.CHECKMARK]: CheckmarkIcon,\r\n    [IconName.CROSSED_OUT_EYE]: CrossedOutEyeIcon,\r\n    [IconName.EYE]: EyeIcon,\r\n    [IconName.TRASH_BIN]: TrashBinIcon,\r\n    [IconName.PENCIL]: PencilIcon,\r\n    [IconName.PLUS]: PlusIcon,\r\n    [IconName.EMPTY_DRAWER]: EmptyDrawerIcon,\r\n    [IconName.WALLET]: WalletIcon,\r\n    [IconName.USB]: UsbIcon,\r\n    [IconName.IMPORT]: ImportIcon,\r\n    [IconName.RIGHT_CHEVRON]: RightChevronIcon,\r\n    [IconName.CLOCK]: ClockIcon,\r\n    [IconName.SWITCH]: SwitchIcon,\r\n}\r\n\r\nconst STROKED_ICONS = [IconName.RIGHT_CHEVRON]\r\n\r\nconst PROFILE_STYLES = (\r\n    type: \"fill\" | \"stroke\"\r\n): { [key in ProfileType]: string } =>\r\n    // Can't use literals here because of tailwind\r\n    type === \"fill\"\r\n        ? {\r\n              default: \"\", //leaves every icon to define it's own color.\r\n              selected: `!fill-selected`,\r\n              danger: `!fill-danger`,\r\n              disabled: `!fill-gray`,\r\n          }\r\n        : {\r\n              default: \"\", //leaves every icon to define it's own color.\r\n              selected: `!stroke-selected`,\r\n              danger: `!stroke-danger`,\r\n              disabled: `!stroke-gray`,\r\n          }\r\n\r\nconst SIZES = {\r\n    sm: \"!w-3 !h-3\",\r\n    md: \"!w-4 !h-4\",\r\n    lg: \"!w-5 !h-5\",\r\n    xl: \"!w-20 !h-20\",\r\n}\r\n\r\nconst Icon: React.FC<IconProps> = ({ name, profile, size, className }) => {\r\n    const Icon = ICONS[name]\r\n    const sizeClasses = SIZES[size || \"md\"]\r\n    const iconType = STROKED_ICONS.includes(name) ? \"stroke\" : \"fill\"\r\n    return (\r\n        <div className={classnames(sizeClasses, className)}>\r\n            <Icon\r\n                className={classnames(\r\n                    PROFILE_STYLES(iconType)[profile || \"default\"],\r\n                    sizeClasses\r\n                )}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Icon\r\n","export default __webpack_public_path__ + \"static/media/logo.5c7f9030.svg\";","import logo from \"../assets/images/logo.svg\"\r\n\r\nconst LogoHeader = () => (\r\n    <div className=\"flex flex-row items-center space-x-1 text-black\">\r\n        <img src={logo} alt=\"logo\" className=\"w-6 h-6 rounded-md\" />\r\n        <span className=\"font-bold text-2xl\">BlockWallet</span>\r\n    </div>\r\n)\r\n\r\nexport default LogoHeader\r\n","import { FunctionComponent } from \"react\"\r\nimport { classnames } from \"../styles/classes\"\r\nimport FullCenterContainer from \"./FullCenterContainer\"\r\nimport LogoHeader from \"./LogoHeader\"\r\n\r\nconst PageLayout: FunctionComponent<{\r\n    centered?: boolean\r\n    header?: boolean\r\n    className?: string\r\n    maxWidth?: string\r\n    style?: React.CSSProperties\r\n    sideComponent?: React.ReactNode\r\n    children?: React.ReactNode\r\n    screen?: boolean\r\n}> = ({\r\n    children,\r\n    centered = false,\r\n    header = false,\r\n    className,\r\n    maxWidth,\r\n    style,\r\n    sideComponent,\r\n    screen = false,\r\n}) => (\r\n    <FullCenterContainer centered={centered} screen={screen}>\r\n        <div className=\"flex-1 flex flex-col items-center\">\r\n            {header ? (\r\n                <div className=\"mt-8 mb-4\">\r\n                    <LogoHeader />\r\n                </div>\r\n            ) : null}\r\n            <div\r\n                className={classnames(\r\n                    \"flex-1 flex flex-row w-full justify-center\",\r\n                    !screen && \"my-4\"\r\n                )}\r\n            >\r\n                <div\r\n                    className={classnames(\r\n                        \"flex-1 flex flex-col items-center shadow-lg bg-white\",\r\n                        screen ? \"\" : \"rounded-md\",\r\n                        maxWidth || \"max-w-2xl\",\r\n                        className\r\n                    )}\r\n                    style={style}\r\n                >\r\n                    {children}\r\n                </div>\r\n                {sideComponent}\r\n            </div>\r\n        </div>\r\n    </FullCenterContainer>\r\n)\r\n\r\nexport default PageLayout\r\n","import { FunctionComponent, useLayoutEffect } from \"react\"\r\n\r\nimport { rejectUnconfirmedRequests } from \"../../context/commActions\"\r\nimport useBeforeunload from \"../../context/hooks/useBeforeUnload\"\r\nimport usePreventWindowResize from \"../../context/hooks/usePreventWindowResize\"\r\nimport { isAutomaticClose } from \"../../context/setup\"\r\nimport useSubmitOnEnter, {\r\n    submitOnEnterProps,\r\n} from \"../../util/hooks/useSubmitOnEnter\"\r\nimport PageLayout from \"../PageLayout\"\r\n\r\nconst PopupLayout: FunctionComponent<{\r\n    header?: React.ReactNode\r\n    footer?: React.ReactNode\r\n    children: React.ReactNode | undefined\r\n    submitOnEnter?: submitOnEnterProps\r\n}> = ({ header, children, footer, submitOnEnter }) => {\r\n    const { preventResize, cancelPreventResize } = usePreventWindowResize()\r\n    const fullHeader = (\r\n        <>\r\n            {header}\r\n            <hr className=\"border-0.5 border-gray-200 w-full\" />\r\n        </>\r\n    )\r\n\r\n    useBeforeunload(() => {\r\n        if (!isAutomaticClose) {\r\n            rejectUnconfirmedRequests()\r\n        }\r\n    })\r\n\r\n    useLayoutEffect(() => {\r\n        preventResize()\r\n        return () => cancelPreventResize()\r\n    }, [preventResize, cancelPreventResize])\r\n\r\n    useSubmitOnEnter(submitOnEnter ?? {})\r\n\r\n    return (\r\n        <PageLayout screen className=\"max-h-screen popup-layout\">\r\n            <div className=\"absolute top-0 left-0 w-full popup-layout z-10\">\r\n                {fullHeader}\r\n            </div>\r\n            <div className=\"invisible w-full\">{fullHeader}</div>\r\n            <div className=\"flex-1 flex flex-col w-full h-0 max-h-screen overflow-auto main-content\">\r\n                {children}\r\n            </div>\r\n            {footer ? (\r\n                <>\r\n                    <hr className=\"border-0.5 border-gray-200 w-full\" />\r\n                    {footer}\r\n                </>\r\n            ) : null}\r\n        </PageLayout>\r\n    )\r\n}\r\n\r\nexport default PopupLayout\r\n","export default __webpack_public_path__ + \"static/media/cross.c3b42fab.svg\";","import PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport cross from \"../../assets/images/icons/cross.svg\"\r\nimport classnames from \"classnames\"\r\nimport { Classes } from \"../../styles/classes\"\r\nimport { returnToOnboarding } from \"../../context/commActions\"\r\n\r\nconst PendingSetupPage = () => {\r\n    return (\r\n        <PopupLayout>\r\n            <div className=\"flex flex-col items-center justify-center w-full h-full\">\r\n                <div className=\"flex flex-col items-center\">\r\n                    <div className=\"flex flex-col items-center space-y-4\">\r\n                        <img\r\n                            src={cross}\r\n                            alt=\"checkmark\"\r\n                            className=\"w-24 h-24\"\r\n                        />\r\n                        <span className=\"text-gray-900 font-bold text-2xl\">\r\n                            Oops...\r\n                        </span>\r\n                        <span className=\"text-gray-700 text-center text-sm w-64\">\r\n                            It seems you have not completed your wallet setup\r\n                            yet.\r\n                        </span>\r\n                    </div>\r\n                    <button\r\n                        onClick={() => returnToOnboarding()}\r\n                        className={classnames(Classes.button, \"mt-12\")}\r\n                    >\r\n                        Back to Onboarding\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default PendingSetupPage\r\n","const PopupFooter = ({ children }: { children: React.ReactNode }) => (\r\n    <div className=\"flex flex-row w-full items-center space-x-4 py-5 px-6 mt-auto\">\r\n        {children}\r\n    </div>\r\n)\r\n\r\nexport default PopupFooter\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport { useMemo } from 'react'\r\nimport { useHistory } from 'react-router'\r\nimport { useLocation } from 'react-router-dom'\r\nimport { useLastLocation } from 'react-router-last-location'\r\n\r\nexport const useOnMountHistory = <T = any>() => {\r\n    const history = useHistory<T>()\r\n    return useMemo(() => ({ ...history }), []) as typeof history\r\n}\r\n\r\nexport const useOnMountLocation = <T = any>() => {\r\n    const location = useLocation<T>()\r\n    return useMemo(() => ({ ...location }), []) as typeof location\r\n}\r\n\r\nexport const useOnMountLastLocation = () => {\r\n    const lastLocation = useLastLocation()\r\n    return useMemo(() => ({ ...lastLocation }), []) as typeof lastLocation\r\n}\r\n","export default __webpack_public_path__ + \"static/media/ETH.268fe659.svg\";","import { Network } from \"@block-wallet/background/utils/constants/networks\"\r\n\r\nexport const isFeatureEnabled = (\r\n    network: Network,\r\n    feature: string\r\n): boolean => {\r\n    return network.features.some((f) => f === feature)\r\n}\r\n","import { useBlankState } from \"../background/backgroundHooks\"\r\nimport ETH_LOGO from \"../../assets/images/icons/ETH.svg\"\r\nimport { isFeatureEnabled } from \"../util/isFeatureEnabled\"\r\n\r\nexport const useSelectedNetwork = () => {\r\n    const {\r\n        availableNetworks,\r\n        selectedNetwork,\r\n        isEIP1559Compatible,\r\n        isUserNetworkOnline,\r\n        availableBridgeChains,\r\n        availableSwapChainIds,\r\n    } = useBlankState()!\r\n\r\n    const network = availableNetworks[selectedNetwork.toUpperCase()]\r\n    const defaultNetworkLogo = network.iconUrls ? network.iconUrls[0] : ETH_LOGO\r\n    return {\r\n        ...network,\r\n        defaultNetworkLogo,\r\n        isEIP1559Compatible: isEIP1559Compatible[network.chainId] || false,\r\n        isSendEnabled:\r\n            isFeatureEnabled(network, \"sends\") && isUserNetworkOnline,\r\n        isTornadoEnabled: isFeatureEnabled(network, \"tornado\"),\r\n        isSwapEnabled: availableSwapChainIds.includes(network.chainId),\r\n        isBridgeEnabled: availableBridgeChains.find(\r\n            (chain) => chain.id === network.chainId\r\n        ),\r\n    }\r\n}\r\n","import ColorHash from 'color-hash'\r\n\r\n/*\r\nThere are 4 color ranges for account logo,\r\nthe chosen color range is based on the last digit from the hash\r\n*/\r\n\r\nexport const getAccountColor = (hash: string) => {\r\n    const regex = /\\d(?=\\D*$)/\r\n    const lastDigit = parseInt((hash.match(regex) || '0')[0], 10)\r\n    let hueMin = 0\r\n    let hueMax = 239\r\n    let saturation = 0.5\r\n    if (lastDigit > 7) {\r\n        // Green\r\n        hueMin = 155\r\n        hueMax = 155\r\n        saturation = 0.35\r\n    } else if (lastDigit > 4) {\r\n        // Blue range\r\n        hueMin = 216\r\n        hueMax = 217\r\n        saturation = 1\r\n    } else if (lastDigit > 2) {\r\n        // Dark blue\r\n        hueMin = 216\r\n        hueMax = 220\r\n        saturation = 0.1\r\n    } else {\r\n        // Grey range\r\n        hueMin = 216\r\n        hueMax = 240\r\n        saturation = 0.3\r\n    }\r\n    return new ColorHash({\r\n        hue: { min: hueMin, max: hueMax },\r\n        saturation,\r\n    }).hex(hash)\r\n}\r\n","import { Network } from \"@block-wallet/background/utils/constants/networks\"\r\nimport { keccak256 } from \"@ethersproject/keccak256\"\r\nimport { toUtf8Bytes } from \"@ethersproject/strings\"\r\nimport { getAccountColor } from \"./getAccountColor\"\r\n\r\n//We generate network color always with name, it is to unify criteria.\r\nexport const getNetworkColor = (network: Network) => {\r\n    const networkName = network.name\r\n\r\n    return getAccountColor(keccak256(toUtf8Bytes(networkName)))\r\n}\r\n","import classnames from \"classnames\"\r\nimport { FunctionComponent, useLayoutEffect, useRef, useState } from \"react\"\r\n\r\n/**\r\n * Generic tooltip component.\r\n * Easy to setup using the defaults, you can assign more than one.\r\n * The center props will align the children to the origin, which is the (right,down) corner of the parent div.\r\n * For more precise alignment use one (or none) along with the className prop.\r\n * For help with positioning see: https://tailwindcss.com/docs/top-right-bottom-left .\r\n * Make sure you don't create the classes dynamically due to purge css.\r\n *\r\n * @param content Displayed content\r\n * @param disabled If true it will just return the children\r\n * @param top.right.bottom.left Basic alignment defaults, you can choose more than one\r\n */\r\nconst GenericTooltip: FunctionComponent<{\r\n    content: string | React.ReactElement\r\n    disabled?: boolean\r\n    top?: boolean\r\n    right?: boolean\r\n    bottom?: boolean\r\n    left?: boolean\r\n    className?: string\r\n    divFull?: boolean\r\n    autoPositioning?: {\r\n        paddingFromRight: number\r\n    }\r\n    children?: React.ReactNode\r\n}> = ({\r\n    children,\r\n    content,\r\n    disabled = false,\r\n    top,\r\n    right,\r\n    bottom,\r\n    left,\r\n    className,\r\n    divFull,\r\n    autoPositioning = {\r\n        paddingFromRight: 40,\r\n    },\r\n}) => {\r\n    const ref = useRef<HTMLDivElement | null>(null)\r\n\r\n    useLayoutEffect(() => {\r\n        let paddingRight = autoPositioning.paddingFromRight ?? 14\r\n        if (ref.current) {\r\n            const placeholderRect = ref.current.getBoundingClientRect()\r\n            const { innerWidth } = window\r\n            const placeholderRightX = placeholderRect.x + placeholderRect.width\r\n            if (placeholderRightX > innerWidth) {\r\n                ref.current.style.transform = `translateX(${\r\n                    innerWidth - placeholderRightX - paddingRight\r\n                }px)`\r\n            }\r\n        }\r\n    }, [autoPositioning.paddingFromRight])\r\n\r\n    return disabled || !content ? (\r\n        <>{children}</>\r\n    ) : (\r\n        <div className={classnames(\"group relative\", divFull && \"w-full\")}>\r\n            {children}\r\n            <div\r\n                ref={ref}\r\n                className={classnames(\r\n                    \"absolute transform inline-block z-40\",\r\n                    \"invisible opacity-0 group-hover:visible group-hover:opacity-95\",\r\n                    \"pointer-events-none rounded-md bg-white shadow-md\",\r\n                    \"transition-all duration-300 ease-out\",\r\n                    \"p-1 text-xs\",\r\n                    top && `bottom-full mb-1.5`,\r\n                    right && \"left-full mr-1.5\",\r\n                    bottom && \"top-full mt-1.5\",\r\n                    left && \"right-full mr-1.5\",\r\n                    className && className\r\n                )}\r\n            >\r\n                {content}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default GenericTooltip\r\n","import { Network } from \"@block-wallet/background/utils/constants/networks\"\r\nimport { classnames } from \"../../styles\"\r\nimport { getNetworkColor } from \"../../util/getNetworkColor\"\r\nimport GenericTooltip from \"../label/GenericTooltip\"\r\n\r\nconst NetworkDisplayBadge = ({\r\n    network,\r\n    className,\r\n    fill = false,\r\n    truncate = false,\r\n}: {\r\n    network: Network\r\n    fill?: boolean\r\n    truncate?: boolean\r\n    className?: string\r\n}) => {\r\n    const networkDesc = network.desc\r\n    const networkColor = getNetworkColor(network)\r\n\r\n    // We limit the string chars here regardless of the truncate flag\r\n    // and the truncate class to prevent issues with the animated bullet size\r\n    // and to have a limit on huge network descriptions.\r\n    const formattedNetworkName = truncate\r\n        ? networkDesc.length > 42\r\n            ? `${networkDesc.slice(0, 42)}...`\r\n            : networkDesc\r\n        : networkDesc\r\n    return (\r\n        <div\r\n            className={classnames(\r\n                \"flex flex-row items-center py-1.5 px-1.5 text-gray-600 rounded-md group border border-primary-200 text-xs\",\r\n                fill && \"bg-green-100\",\r\n                \"w-auto\",\r\n                className\r\n            )}\r\n        >\r\n            <span\r\n                className={\r\n                    \"justify-end h-2 rounded-xl mr-2 ml-1 animate-pulse pointer-events-none\"\r\n                }\r\n                style={{ backgroundColor: networkColor, width: \"8px\" }}\r\n            />\r\n            <span\r\n                className={classnames(\r\n                    truncate\r\n                        ? \"flex justify-center truncate ...\"\r\n                        : \"flex justify-center whitespace-normal break-all flex-1\"\r\n                )}\r\n                style={truncate ? { maxWidth: 130 } : {}}\r\n            >\r\n                {formattedNetworkName}\r\n            </span>\r\n            <GenericTooltip\r\n                left\r\n                className=\"translate-y-5 translate-x-3 shadow-md min-w-max\"\r\n                content={<p className=\" p-1 text-left\">{networkDesc}</p>}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NetworkDisplayBadge\r\n","import classnames from \"classnames\"\r\n\r\ninterface AppIconProps {\r\n    size: number\r\n    iconURL: string\r\n    iconSize?: number\r\n    title?: string\r\n    background?: boolean\r\n}\r\n\r\nconst AppIcon = ({\r\n    size,\r\n    iconURL,\r\n    iconSize,\r\n    background = true,\r\n    title,\r\n}: AppIconProps) => (\r\n    <div\r\n        className={classnames(\r\n            \"flex flex-row items-center justify-center rounded-full\",\r\n            `w-${size} h-${size}`,\r\n            background && \"bg-primary-100\"\r\n        )}\r\n    >\r\n        {iconURL ? (\r\n            <img\r\n                alt=\"icon\"\r\n                src={iconURL}\r\n                draggable={false}\r\n                className={iconSize ? `max-h-${iconSize}` : `max-h-${size - 3}`}\r\n                title={title}\r\n            />\r\n        ) : null}\r\n    </div>\r\n)\r\n\r\nexport default AppIcon\r\n","const CloseIcon = (props: any) => (\r\n    <svg\r\n        width={props?.size ?? \"12\"}\r\n        height={props?.size ?? \"12\"}\r\n        viewBox=\"0 0 10 10\"\r\n        fill=\"none\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n        <path\r\n            d=\"M9.95005 1.46399L8.53605 0.0499878L5.00005 3.58599L1.46405 0.0499878L0.0500488 1.46399L3.58605 4.99999L0.0500488 8.53599L1.46405 9.94999L5.00005 6.41399L8.53605 9.94999L9.95005 8.53599L6.41405 4.99999L9.95005 1.46399Z\"\r\n            fill=\"currentColor\"\r\n        />\r\n    </svg>\r\n)\r\n\r\nexport default CloseIcon\r\n","const ArrowIcon = () => (\r\n    <svg\r\n        width=\"16\"\r\n        height=\"14\"\r\n        viewBox=\"0 0 16 14\"\r\n        fill=\"none\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n        <path\r\n            d=\"M6.7 13.7L8.1 12.3L3.8 8.00005H16V6.00005H3.8L8.1 1.70005L6.7 0.300049L0 7.00005L6.7 13.7Z\"\r\n            fill=\"currentColor\"\r\n        />\r\n    </svg>\r\n)\r\n\r\nexport default ArrowIcon\r\n","import classnames from \"classnames\"\r\nconst ThreeDotsIcon: React.FC<any> = ({ className }) => {\r\n    return (\r\n        <svg\r\n            width=\"16\"\r\n            height=\"4\"\r\n            viewBox=\"0 0 16 4\"\r\n            className={classnames(\"fill-black\", className)}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <path d=\"M8 4C9.10457 4 10 3.10457 10 2C10 0.89543 9.10457 0 8 0C6.89543 0 6 0.89543 6 2C6 3.10457 6.89543 4 8 4Z\" />\r\n            <path d=\"M2 4C3.10457 4 4 3.10457 4 2C4 0.89543 3.10457 0 2 0C0.89543 0 0 0.89543 0 2C0 3.10457 0.89543 4 2 4Z\" />\r\n            <path d=\"M14 4C15.1046 4 16 3.10457 16 2C16 0.89543 15.1046 0 14 0C12.8954 0 12 0.89543 12 2C12 3.10457 12.8954 4 14 4Z\" />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default ThreeDotsIcon\r\n","import classnames from \"classnames\"\r\n\r\nconst GroupIcon: React.FC<{ className: string }> = ({ className }) => {\r\n    return (\r\n        <svg\r\n            width=\"16\"\r\n            height=\"14\"\r\n            viewBox=\"0 0 16 14\"\r\n            className={classnames(\"fill-black\", className)}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <path d=\"M9 14H7C6.448 14 6 13.552 6 13C6 12.448 6.448 12 7 12H9C9.552 12 10 12.448 10 13C10 13.552 9.552 14 9 14Z\" />\r\n            <path d=\"M11 10H5C4.448 10 4 9.552 4 9C4 8.448 4.448 8 5 8H11C11.552 8 12 8.448 12 9C12 9.552 11.552 10 11 10Z\" />\r\n            <path d=\"M13 6H3C2.448 6 2 5.552 2 5C2 4.448 2.448 4 3 4H13C13.552 4 14 4.448 14 5C14 5.552 13.552 6 13 6Z\" />\r\n            <path d=\"M15 2H1C0.448 2 0 1.552 0 1C0 0.448 0.448 0 1 0H15C15.552 0 16 0.448 16 1C16 1.552 15.552 2 15 2Z\" />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default GroupIcon\r\n","import classnames from \"classnames\"\r\n\r\nconst SearchIcon: React.FC<{ className: string }> = ({ className }) => {\r\n    return (\r\n        <svg\r\n            width=\"16\"\r\n            height=\"16\"\r\n            viewBox=\"0 0 16 16\"\r\n            className={classnames(\"fill-black\", className)}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <path d=\"M12.7 11.3C13.6 10.1 14.1 8.7 14.1 7.1C14.1 3.2 11 0 7.1 0C3.2 0 0 3.2 0 7.1C0 11 3.2 14.2 7.1 14.2C8.7 14.2 10.2 13.7 11.3 12.8L14.3 15.8C14.5 16 14.8 16.1 15 16.1C15.2 16.1 15.5 16 15.7 15.8C16.1 15.4 16.1 14.8 15.7 14.4L12.7 11.3ZM7.1 12.1C4.3 12.1 2 9.9 2 7.1C2 4.3 4.3 2 7.1 2C9.9 2 12.2 4.3 12.2 7.1C12.2 9.9 9.9 12.1 7.1 12.1Z\" />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default SearchIcon\r\n","const CheckmarkIcon: React.FC<{ className?: string }> = (\r\n    { className } = { className: \"w-4 h-4\" }\r\n) => {\r\n    return (\r\n        <svg\r\n            viewBox=\"0 0 16 12\"\r\n            fill=\"current\"\r\n            className={className}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <path d=\"M6 10.9999C5.7348 10.9999 5.48049 10.8945 5.293 10.7069L0.585999 5.99994L2 4.58594L6 8.58594L14 0.585938L15.414 1.99994L6.707 10.7069C6.51951 10.8945 6.26519 10.9999 6 10.9999Z\" />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default CheckmarkIcon\r\n","import { FunctionComponent } from \"react\"\r\nimport classnames from \"classnames\"\r\n\r\nconst CrossedOutEyeIcon: FunctionComponent<{ className?: string }> = ({\r\n    className,\r\n}) => {\r\n    return (\r\n        <svg\r\n            width=\"16\"\r\n            height=\"16\"\r\n            viewBox=\"0 0 16 16\"\r\n            className={classnames(\"fill-black\", className)}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <path\r\n                d=\"M14.6 5.59961L6.40002 13.7996C6.90002 13.8996 7.50002 13.9996 8.00002 13.9996C11.6 13.9996 14.4 10.8996 15.6 9.09961C16.1 8.39961 16.1 7.49961 15.6 6.79961C15.4 6.49961 15 6.09961 14.6 5.59961Z\"\r\n                fill=\"#0A121E\"\r\n            />\r\n            <path\r\n                d=\"M14.3 0.3L11.6 3C10.5 2.4 9.3 2 8 2C4.4 2 1.6 5.1 0.4 6.9C-0.1 7.6 -0.1 8.5 0.4 9.1C0.9 9.9 1.8 10.9 2.8 11.8L0.3 14.3C-0.1 14.7 -0.1 15.3 0.3 15.7C0.5 15.9 0.7 16 1 16C1.3 16 1.5 15.9 1.7 15.7L15.7 1.7C16.1 1.3 16.1 0.7 15.7 0.3C15.3 -0.1 14.7 -0.1 14.3 0.3ZM5.3 9.3C5.1 8.9 5 8.5 5 8C5 6.3 6.3 5 8 5C8.5 5 8.9 5.1 9.3 5.3L5.3 9.3Z\"\r\n                fill=\"#0A121E\"\r\n            />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default CrossedOutEyeIcon\r\n","import { FunctionComponent } from \"react\"\r\nimport classnames from \"classnames\"\r\nconst EyeIcon: FunctionComponent<{ className?: string }> = ({ className }) => {\r\n    return (\r\n        <svg\r\n            viewBox=\"0 0 16 12\"\r\n            className={classnames(\"fill-black\", className)}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <path d=\"M8.00039 12C11.6004 12 14.4004 8.9 15.6004 7.1C16.1004 6.4 16.1004 5.5 15.6004 4.8C14.4004 3.1 11.6004 0 8.00039 0C4.40039 0 1.60039 3.1 0.400391 4.9C-0.0996094 5.6 -0.0996094 6.5 0.400391 7.1C1.60039 8.9 4.40039 12 8.00039 12ZM8.00039 3C9.70039 3 11.0004 4.3 11.0004 6C11.0004 7.7 9.70039 9 8.00039 9C6.30039 9 5.00039 7.7 5.00039 6C5.00039 4.3 6.30039 3 8.00039 3Z\" />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default EyeIcon\r\n","import { FunctionComponent } from \"react\"\r\n\r\nimport classnames from \"classnames\"\r\nconst TrashBinIcon: FunctionComponent<{ className?: string }> = ({\r\n    className,\r\n}) => {\r\n    return (\r\n        <svg\r\n            viewBox=\"0 0 16 16\"\r\n            className={classnames(\"fill-black\", className)}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <path d=\"M7 7H5V13H7V7Z\" />\r\n            <path d=\"M11 7H9V13H11V7Z\" />\r\n            <path d=\"M12 1C12 0.4 11.6 0 11 0H5C4.4 0 4 0.4 4 1V3H0V5H1V15C1 15.6 1.4 16 2 16H14C14.6 16 15 15.6 15 15V5H16V3H12V1ZM6 2H10V3H6V2ZM13 5V14H3V5H13Z\" />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default TrashBinIcon\r\n","import { FunctionComponent } from \"react\"\r\nimport classnames from \"classnames\"\r\nconst PencilIcon: FunctionComponent<{ className?: string }> = ({\r\n    className,\r\n}) => {\r\n    return (\r\n        <svg\r\n            viewBox=\"0 0 16 16\"\r\n            className={classnames(\"fill-black\", className)}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <path d=\"M8.1 3.5L0.3 11.3C0.1 11.5 0 11.7 0 12V15C0 15.6 0.4 16 1 16H4C4.3 16 4.5 15.9 4.7 15.7L12.5 7.9L8.1 3.5Z\" />\r\n            <path d=\"M15.7 3.3L12.7 0.3C12.3 -0.1 11.7 -0.1 11.3 0.3L9.5 2.1L13.9 6.5L15.7 4.7C16.1 4.3 16.1 3.7 15.7 3.3Z\" />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default PencilIcon\r\n","import { FunctionComponent } from \"react\"\r\nimport classnames from \"classnames\"\r\n\r\nconst PlusIcon: FunctionComponent<{ className?: string }> = ({ className }) => {\r\n    return (\r\n        <svg\r\n            viewBox=\"0 0 16 16\"\r\n            className={classnames(\"fill-black\", className)}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <path d=\"M15 7H9V1C9 0.4 8.6 0 8 0C7.4 0 7 0.4 7 1V7H1C0.4 7 0 7.4 0 8C0 8.6 0.4 9 1 9H7V15C7 15.6 7.4 16 8 16C8.6 16 9 15.6 9 15V9H15C15.6 9 16 8.6 16 8C16 7.4 15.6 7 15 7Z\" />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default PlusIcon\r\n","import classnames from \"classnames\"\r\n\r\nconst EmptyDrawer: React.FC<{ className: string }> = ({ className }) => {\r\n    return (\r\n        <svg\r\n            viewBox=\"0 0 88 88\"\r\n            fill=\"none\"\r\n            className={classnames(\"w-20 h-20\", className)}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <path\r\n                d=\"M21 19H12.5L2 51H86L75.5 19H67\"\r\n                stroke=\"black\"\r\n                strokeWidth=\"4\"\r\n            />\r\n            <path d=\"M86 51H2V86H86V51Z\" stroke=\"black\" strokeWidth=\"4\" />\r\n            <path d=\"M65 64H24V74H65V64Z\" fill=\"#1673FF\" />\r\n            <path\r\n                d=\"M69 51.5V2H19V51.5\"\r\n                stroke=\"black\"\r\n                strokeWidth=\"4\"\r\n                strokeDasharray=\"5 5\"\r\n            />\r\n            <path d=\"M44 11V29.5\" stroke=\"black\" strokeWidth=\"4\" />\r\n            <path d=\"M44 36V41\" stroke=\"black\" strokeWidth=\"4\" />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default EmptyDrawer\r\n","import classnames from \"classnames\"\r\n\r\nconst WalletIcon: React.FC<{ className?: string }> = ({ className }) => {\r\n    return (\r\n        <svg\r\n            className={classnames(\"w-5 h-5\", className)}\r\n            viewBox=\"0 0 20 20\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <g clipPath=\"url(#clip0_6587_220)\">\r\n                <path\r\n                    d=\"M5.00004 2.5H2.50004C1.57921 2.5 0.833374 3.24583 0.833374 4.16667C0.833374 5.0875 1.57921 5.83333 2.50004 5.83333\"\r\n                    stroke=\"#0A121E\"\r\n                    strokeWidth=\"2\"\r\n                    strokeMiterlimit=\"10\"\r\n                    strokeLinecap=\"square\"\r\n                />\r\n                <path\r\n                    d=\"M5 5.83398V0.833984H16.6667V5.83398\"\r\n                    stroke=\"#0A121E\"\r\n                    strokeWidth=\"2\"\r\n                    strokeMiterlimit=\"10\"\r\n                    strokeLinecap=\"square\"\r\n                />\r\n                <path\r\n                    d=\"M19.1667 5.83464H2.50004C1.57921 5.83464 0.833374 5.0888 0.833374 4.16797V16.668C0.833374 18.0488 1.95254 19.168 3.33337 19.168H19.1667V5.83464Z\"\r\n                    stroke=\"#0A121E\"\r\n                    strokeWidth=\"2\"\r\n                    strokeMiterlimit=\"10\"\r\n                    strokeLinecap=\"square\"\r\n                />\r\n                <path\r\n                    d=\"M14.1667 14.1673C15.0871 14.1673 15.8333 13.4211 15.8333 12.5007C15.8333 11.5802 15.0871 10.834 14.1667 10.834C13.2462 10.834 12.5 11.5802 12.5 12.5007C12.5 13.4211 13.2462 14.1673 14.1667 14.1673Z\"\r\n                    stroke=\"#1673FF\"\r\n                    strokeWidth=\"2\"\r\n                    strokeMiterlimit=\"10\"\r\n                    strokeLinecap=\"square\"\r\n                />\r\n            </g>\r\n            <defs>\r\n                <clipPath id=\"clip0_6587_220\">\r\n                    <rect width=\"20\" height=\"20\" fill=\"white\" />\r\n                </clipPath>\r\n            </defs>\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default WalletIcon\r\n","import classnames from \"classnames\"\r\n\r\nconst UsbIcon: React.FC<{ className?: string }> = ({ className }) => {\r\n    return (\r\n        <svg\r\n            className={classnames(\"w-5 h-5\", className)}\r\n            viewBox=\"0 0 20 20\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <path\r\n                d=\"M10 19.166V1.66602\"\r\n                stroke=\"black\"\r\n                strokeWidth=\"1.5\"\r\n                strokeMiterlimit=\"10\"\r\n            />\r\n            <path\r\n                d=\"M7.5 4.16602L10 1.66602L12.5 4.16602\"\r\n                stroke=\"black\"\r\n                strokeWidth=\"1.5\"\r\n                strokeMiterlimit=\"10\"\r\n                strokeLinecap=\"square\"\r\n            />\r\n            <path\r\n                d=\"M15 11.666V14.166L10 17.4993\"\r\n                stroke=\"black\"\r\n                strokeWidth=\"1.5\"\r\n                strokeMiterlimit=\"10\"\r\n            />\r\n            <path\r\n                d=\"M5 10V13.3333L10 16.6667\"\r\n                stroke=\"black\"\r\n                strokeWidth=\"1.5\"\r\n                strokeMiterlimit=\"10\"\r\n            />\r\n            <path\r\n                d=\"M16.6666 8.33203H13.3333V11.6654H16.6666V8.33203Z\"\r\n                stroke=\"#1673FF\"\r\n                strokeWidth=\"1.5\"\r\n                strokeMiterlimit=\"10\"\r\n                strokeLinecap=\"square\"\r\n            />\r\n            <path\r\n                d=\"M4.99992 9.99935C5.92039 9.99935 6.66659 9.25316 6.66659 8.33268C6.66659 7.41221 5.92039 6.66602 4.99992 6.66602C4.07944 6.66602 3.33325 7.41221 3.33325 8.33268C3.33325 9.25316 4.07944 9.99935 4.99992 9.99935Z\"\r\n                stroke=\"#1673FF\"\r\n                strokeWidth=\"1.5\"\r\n                strokeMiterlimit=\"10\"\r\n                strokeLinecap=\"square\"\r\n            />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default UsbIcon\r\n","import classnames from \"classnames\"\r\n\r\nconst ImportIcon: React.FC<{ className?: string }> = ({ className }) => {\r\n    return (\r\n        <svg\r\n            className={classnames(\"w-5 h-5\", className)}\r\n            viewBox=\"0 0 20 20\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <path\r\n                d=\"M1.66663 13.332V18.332H18.3333V13.332\"\r\n                stroke=\"#0A121E\"\r\n                strokeWidth=\"2\"\r\n                strokeMiterlimit=\"10\"\r\n                strokeLinecap=\"square\"\r\n            />\r\n            <path\r\n                d=\"M10 1.66602V14.166\"\r\n                stroke=\"#1673FF\"\r\n                strokeWidth=\"2\"\r\n                strokeMiterlimit=\"10\"\r\n            />\r\n            <path\r\n                d=\"M15 9.16602L10 14.166L5 9.16602\"\r\n                stroke=\"#1673FF\"\r\n                strokeWidth=\"2\"\r\n                strokeMiterlimit=\"10\"\r\n                strokeLinecap=\"square\"\r\n            />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default ImportIcon\r\n","import React, { FunctionComponent } from \"react\"\r\nimport classnames from \"classnames\"\r\nconst ClockIcon: FunctionComponent<{ className?: string }> = ({\r\n    className,\r\n}) => {\r\n    return (\r\n        <svg\r\n            viewBox=\"0 0 16 16\"\r\n            className={classnames(className)}\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <path\r\n                d=\"M8 0C6.41775 0 4.87103 0.469192 3.55544 1.34824C2.23985 2.22729 1.21447 3.47672 0.608967 4.93853C0.00346625 6.40034 -0.15496 8.00887 0.153721 9.56072C0.462403 11.1126 1.22433 12.538 2.34315 13.6569C3.46197 14.7757 4.88743 15.5376 6.43928 15.8463C7.99113 16.155 9.59966 15.9965 11.0615 15.391C12.5233 14.7855 13.7727 13.7602 14.6518 12.4446C15.5308 11.129 16 9.58225 16 8C15.9937 5.88022 15.1488 3.84906 13.6499 2.35014C12.1509 0.851219 10.1198 0.00633091 8 0V0ZM8 14C6.81332 14 5.65328 13.6481 4.66658 12.9888C3.67989 12.3295 2.91085 11.3925 2.45673 10.2961C2.0026 9.19974 1.88378 7.99334 2.11529 6.82946C2.3468 5.66557 2.91825 4.59647 3.75736 3.75736C4.59648 2.91824 5.66558 2.3468 6.82946 2.11529C7.99335 1.88378 9.19975 2.0026 10.2961 2.45672C11.3925 2.91085 12.3295 3.67988 12.9888 4.66658C13.6481 5.65327 14 6.81331 14 8C13.9953 9.58984 13.3616 11.1132 12.2374 12.2374C11.1132 13.3616 9.58984 13.9953 8 14Z\"\r\n                fill=\"#455A74\"\r\n            />\r\n            <path\r\n                d=\"M11.5 7H9V4.5C9 4.23478 8.89464 3.98043 8.70711 3.79289C8.51957 3.60536 8.26522 3.5 8 3.5C7.73478 3.5 7.48043 3.60536 7.29289 3.79289C7.10536 3.98043 7 4.23478 7 4.5V8C7 8.26522 7.10536 8.51957 7.29289 8.70711C7.48043 8.89464 7.73478 9 8 9H11.5C11.7652 9 12.0196 8.89464 12.2071 8.70711C12.3946 8.51957 12.5 8.26522 12.5 8C12.5 7.73478 12.3946 7.48043 12.2071 7.29289C12.0196 7.10536 11.7652 7 11.5 7Z\"\r\n                fill=\"#455A74\"\r\n            />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default ClockIcon\r\n","const SwitchIcon: React.FC<{ className?: string }> = (\r\n    { className } = { className: \"w-4 h-4\" }\r\n) => {\r\n    return (\r\n        <svg\r\n            width=\"16\"\r\n            height=\"16\"\r\n            viewBox=\"0 0 16 16\"\r\n            fill=\"currentColor\"\r\n            className={className}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <g clip-path=\"url(#clip0_265_2)\">\r\n                <path\r\n                    fill-rule=\"evenodd\"\r\n                    clip-rule=\"evenodd\"\r\n                    d=\"M11.1677 11.9997L7.14648 16.0137H9.96283L15.9961 9.99965H-3.91006e-05V11.9997H11.1677Z\"\r\n                />\r\n                <path\r\n                    fill-rule=\"evenodd\"\r\n                    clip-rule=\"evenodd\"\r\n                    d=\"M4.82843 4.01402L8.84961 0H6.03327L0 6.01402H15.9961V4.01402H4.82843Z\"\r\n                />\r\n            </g>\r\n            <defs>\r\n                <clipPath id=\"clip0_265_2\">\r\n                    <rect width=\"16\" height=\"16\" fill=\"white\" />\r\n                </clipPath>\r\n            </defs>\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default SwitchIcon\r\n","import classnames from \"classnames\"\r\n\r\nconst RightChevronIcon: React.FC<{ className?: string }> = ({ className }) => {\r\n    return (\r\n        <svg\r\n            className={classnames(\"w-3 h-3 stroke-black\", className)}\r\n            viewBox=\"0 0 8 12\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <path\r\n                d=\"M2 2L6 6L2 10\"\r\n                strokeWidth=\"2\"\r\n                strokeMiterlimit=\"10\"\r\n                strokeLinecap=\"square\"\r\n            />\r\n        </svg>\r\n    )\r\n}\r\n\r\n//exported as named to enable other implementations such as \"LeftChevron\"\r\nexport { RightChevronIcon }\r\n","import { useEffect } from \"react\"\r\n\r\nexport const useOnClickOutside = (ref: any, onClickOutsideFunction: Function) => {\r\n    useEffect(\r\n        () => {\r\n            const listener = (event: any) => {\r\n                // Do nothing if clicking ref's element or descendent elements\r\n                if (!ref.current || ref.current.contains(event.target)) {\r\n                    return;\r\n                }\r\n                onClickOutsideFunction(event);\r\n            };\r\n            document.addEventListener(\"mousedown\", listener);\r\n            document.addEventListener(\"touchstart\", listener);\r\n            return () => {\r\n                document.removeEventListener(\"mousedown\", listener);\r\n                document.removeEventListener(\"touchstart\", listener);\r\n            };\r\n        }, [ref, onClickOutsideFunction]\r\n    );\r\n}","import { useState } from \"react\"\r\n\r\nconst useIsHovering = () => {\r\n    const [isHovering, setIsHovering] = useState(false)\r\n    return {\r\n        getIsHoveringProps: () => ({\r\n            onMouseEnter: () => setIsHovering(true),\r\n            onMouseLeave: () => setIsHovering(false),\r\n        }),\r\n        isHovering,\r\n    }\r\n}\r\n\r\nexport default useIsHovering\r\n","import { FC, PropsWithChildren } from \"react\"\r\nimport classnames from \"classnames\"\r\ninterface OutlinedButtonProps {\r\n    onClick?: (e: any) => void\r\n    className?: string\r\n}\r\nconst OutlinedButton: FC<PropsWithChildren<OutlinedButtonProps>> = ({\r\n    onClick,\r\n    className = \"\",\r\n    children,\r\n}) => {\r\n    return (\r\n        <button\r\n            className={classnames(\r\n                \"flex flex-row items-center bg-white border border-gray-200 hover:border-black justify-between\",\r\n                \"h-12 space-x-2 p-4 rounded-md text-sm font-bold text-black w-full\",\r\n                onClick && \"cursor-pointer\",\r\n                className\r\n            )}\r\n            onClick={onClick}\r\n        >\r\n            {children}\r\n        </button>\r\n    )\r\n}\r\nexport default OutlinedButton\r\n","import { createContext, useContext } from \"react\"\r\n\r\ninterface DropdownContextData {\r\n    isShowingMenu: boolean\r\n    toggleMenu: (e: Event) => void //Callback for toggling the isShwoingMenu boolean\r\n    onClickItem?: (value: any) => void //Callback invoked when the user clicks one item of the Menu\r\n}\r\n\r\nconst DropdownContext = createContext<DropdownContextData>({\r\n    isShowingMenu: false,\r\n    toggleMenu: (e: Event) => {},\r\n    onClickItem: (value: any) => {},\r\n})\r\n\r\nexport const useDropdownContext = () => useContext(DropdownContext)\r\n\r\nexport default DropdownContext\r\n","import classnames from \"classnames\"\r\nimport { DropdownCompoundMember } from \"./Dropdown\"\r\nimport useIsHovering from \"../../../util/hooks/useIsHovering\"\r\nimport OutlinedButton from \"../OutlinedButton\"\r\nimport Icon, { IconName } from \"../Icon\"\r\nimport { useDropdownContext } from \"./DropdownContext\"\r\nimport { Children, cloneElement, FC, PropsWithChildren } from \"react\"\r\n\r\n//Button\r\nexport interface DropdownButtonBaseProps {\r\n    onClick?: (e: any) => void\r\n    isShowingMenu?: boolean\r\n}\r\n\r\ninterface DropdownIconButtonProps extends DropdownButtonBaseProps {\r\n    iconName: IconName\r\n}\r\n\r\nexport const DropdownButton: FC<PropsWithChildren<{}>> &\r\n    DropdownCompoundMember = ({ children }) => {\r\n    const { isShowingMenu, toggleMenu } = useDropdownContext()\r\n    return (\r\n        <>\r\n            {Children.map(children, (child) => {\r\n                if (!child) return null\r\n                const childNode = child as React.ReactElement<any>\r\n                return cloneElement(child as React.ReactElement<any>, {\r\n                    ...childNode.props,\r\n                    onClick: (e: any) => {\r\n                        if (childNode.props.onClick) {\r\n                            childNode.props.onClick(e)\r\n                        }\r\n                        return toggleMenu(e)\r\n                    },\r\n                    isShowingMenu,\r\n                })\r\n            })}\r\n        </>\r\n    )\r\n}\r\n\r\nexport const DropdownIconButton: React.FC<DropdownIconButtonProps> = ({\r\n    iconName,\r\n    onClick,\r\n    isShowingMenu,\r\n}) => {\r\n    const { isHovering, getIsHoveringProps } = useIsHovering()\r\n    return (\r\n        <div\r\n            {...getIsHoveringProps()}\r\n            className={classnames(\r\n                \"p-2 transition duration-300 rounded-full hover:bg-primary-100 cursor-pointer select-none\",\r\n                isShowingMenu && \"bg-primary-100\"\r\n            )}\r\n            onClick={onClick}\r\n        >\r\n            <div className=\"w-4 h-4 flex items-center justify-center\">\r\n                <Icon\r\n                    name={iconName || IconName.THREE_DOTS}\r\n                    profile={\r\n                        isHovering || isShowingMenu ? \"selected\" : \"default\"\r\n                    }\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const DropdownOutlinedIconButton: React.FC<DropdownIconButtonProps> = ({\r\n    onClick,\r\n    iconName,\r\n    isShowingMenu,\r\n}) => {\r\n    return (\r\n        <OutlinedButton\r\n            className={isShowingMenu ? \"!bg-primary-100\" : \"\"}\r\n            onClick={onClick}\r\n        >\r\n            <Icon\r\n                name={iconName}\r\n                profile={isShowingMenu ? \"selected\" : \"default\"}\r\n            />\r\n        </OutlinedButton>\r\n    )\r\n}\r\n","import classnames from \"classnames\"\r\nimport { PropsWithChildren } from \"react\"\r\nimport Icon, { IconName } from \"../Icon\"\r\nimport { DropdownCompoundMember } from \"./Dropdown\"\r\nimport { useDropdownContext } from \"./DropdownContext\"\r\n\r\nexport interface DropdownMenuProps {\r\n    id: string\r\n    onClick?: () => void\r\n    className?: string\r\n}\r\n\r\nexport interface DropdownMenuItemProps {\r\n    onClick?: () => void\r\n    className?: string\r\n    value?: any\r\n    selected?: boolean\r\n}\r\n\r\nexport const DropdownMenu: React.FC<PropsWithChildren<DropdownMenuProps>> &\r\n    DropdownCompoundMember = ({\r\n    children,\r\n    id = \"dropdownMenu\",\r\n    onClick,\r\n    className,\r\n}) => {\r\n    const { isShowingMenu } = useDropdownContext()\r\n    return (\r\n        <ul\r\n            className={classnames(\r\n                \"dropdown-menu\", //defines styles for the first and last children\r\n                \"absolute shadow-md bg-white mt-2 right-0 select-none rounded-md z-50 font-semibold list-none\",\r\n                !isShowingMenu && \"hidden\",\r\n                className\r\n            )}\r\n            role=\"menu\"\r\n            id={id}\r\n            onClick={(e) => {\r\n                e.stopPropagation()\r\n                onClick && onClick()\r\n            }}\r\n        >\r\n            {children}\r\n        </ul>\r\n    )\r\n}\r\n\r\nexport const DropdownMenuItem: React.FC<\r\n    PropsWithChildren<DropdownMenuItemProps>\r\n> = ({ onClick, children, className, value, selected }) => {\r\n    const { onClickItem, toggleMenu } = useDropdownContext()\r\n    return (\r\n        <li\r\n            onClick={(e) => {\r\n                e.stopPropagation()\r\n                if (onClickItem) {\r\n                    onClickItem(value)\r\n                }\r\n                if (onClick) {\r\n                    onClick()\r\n                }\r\n\r\n                toggleMenu(e.nativeEvent) // Close the menu after an item is clicked\r\n            }}\r\n            className={classnames(\r\n                \"flex flex-row justify-between items-center w-full cursor-pointer hover:bg-gray-100\",\r\n                className || \"\",\r\n                selected && \"text-primary-300\"\r\n            )}\r\n        >\r\n            {children}\r\n            {selected && (\r\n                <Icon size=\"sm\" name={IconName.CHECKMARK} profile=\"selected\" />\r\n            )}\r\n        </li>\r\n    )\r\n}\r\n","import {\r\n    useRef,\r\n    useState,\r\n    FC,\r\n    PropsWithChildren,\r\n    Children,\r\n    ReactElement,\r\n} from \"react\"\r\nimport { IconName } from \"../Icon\"\r\nimport { useOnClickOutside } from \"../../../util/useOnClickOutside\"\r\nimport {\r\n    DropdownButton,\r\n    DropdownButtonBaseProps,\r\n    DropdownIconButton,\r\n} from \"./DropdownButton\"\r\nimport DropdownContext from \"./DropdownContext\"\r\nimport {\r\n    DropdownMenu,\r\n    DropdownMenuItem,\r\n    DropdownMenuItemProps,\r\n    DropdownMenuProps,\r\n} from \"./DropdownMenu\"\r\n\r\n//Dropdown\r\ninterface DropdownProps {\r\n    onClickItem?: (value: any) => void\r\n}\r\n\r\nexport interface DropdownCompoundMember {\r\n    compoundName?: string\r\n}\r\n\r\ninterface CompoundProps {\r\n    Menu: React.FC<PropsWithChildren<DropdownMenuProps>> &\r\n        DropdownCompoundMember\r\n    Button: React.FC<PropsWithChildren<DropdownButtonBaseProps>> &\r\n        DropdownCompoundMember\r\n    MenuItem: React.FC<PropsWithChildren<DropdownMenuItemProps>>\r\n}\r\n\r\nconst Dropdown: FC<PropsWithChildren<DropdownProps>> & CompoundProps = ({\r\n    children,\r\n    onClickItem,\r\n}) => {\r\n    const [isShowingMenu, setIsShowingMenu] = useState<boolean>(false)\r\n    const ref = useRef(null)\r\n    useOnClickOutside(ref, () => setIsShowingMenu(false))\r\n    let menuRender = null\r\n    let buttonRender = null\r\n    Children.forEach(children, (child) => {\r\n        const { type } = child as ReactElement<any>\r\n        const compundMember = (type as DropdownCompoundMember).compoundName\r\n        if (compundMember === \"DropdownMenu\") {\r\n            menuRender = child\r\n        }\r\n        if (compundMember === \"DropdownButton\") {\r\n            buttonRender = child\r\n        }\r\n    })\r\n\r\n    const toggleMenu = (e: Event) => {\r\n        e.stopPropagation()\r\n        setIsShowingMenu((prev) => !prev)\r\n    }\r\n    return (\r\n        <DropdownContext.Provider\r\n            value={{\r\n                toggleMenu,\r\n                isShowingMenu,\r\n                onClickItem,\r\n            }}\r\n        >\r\n            <div className=\"relative\" ref={ref}>\r\n                {buttonRender || (\r\n                    <DropdownButton>\r\n                        <DropdownIconButton iconName={IconName.THREE_DOTS} />\r\n                    </DropdownButton>\r\n                )}\r\n                {menuRender}\r\n            </div>\r\n        </DropdownContext.Provider>\r\n    )\r\n}\r\n\r\nDropdownButton.compoundName = \"DropdownButton\"\r\nDropdownMenu.compoundName = \"DropdownMenu\"\r\n\r\nDropdown.Menu = DropdownMenu\r\nDropdown.Button = DropdownButton\r\nDropdown.MenuItem = DropdownMenuItem\r\n\r\nexport default Dropdown\r\n","import { useBlankState } from \"../background/backgroundHooks\"\r\n\r\n// Type of dapp request\r\nexport enum DappReq {\r\n    ASSET = \"ASSET\",\r\n    SIGNING = \"SIGNING\",\r\n    SWITCH_NETWORK = \"SWITCH_NETWORK\",\r\n    ADD_ETHEREUM_CHAIN = \"ADD_ETHEREUM_CHAIN\",\r\n}\r\n\r\n// Dapp request optional status type\r\n\r\nexport enum DappRequestSigningStatus {\r\n    PENDING = \"DAPP_PENDING\",\r\n    APPROVED = \"DAPP_APPROVED\",\r\n    REJECTED = \"DAPP_REJECTED\",\r\n    FAILED = \"DAPP_FAILED\",\r\n    SIGNED = \"DAPP_SIGNED\",\r\n}\r\n\r\nexport const useDappRequest = () => {\r\n    const { dappRequests } = useBlankState()!\r\n\r\n    // If no requests left, return undefined\r\n    if (\r\n        typeof dappRequests === \"undefined\" ||\r\n        (typeof dappRequests === \"object\" &&\r\n            Object.keys(dappRequests).length === 0)\r\n    ) {\r\n        return undefined\r\n    }\r\n\r\n    // Get the object entries ordered by submission time\r\n    const requests = Object.entries(dappRequests).sort(\r\n        ([_id, { time: timeA }], [_id2, { time: timeB }]) => timeA - timeB\r\n    )\r\n\r\n    // Get first dApp request (origin, site data and parameters)\r\n    const [\r\n        requestId,\r\n        {\r\n            origin,\r\n            siteMetadata,\r\n            params: dappReqData,\r\n            type,\r\n            status,\r\n            error,\r\n            approveTime,\r\n        },\r\n    ] = requests[0]\r\n\r\n    // Get requests count\r\n    const requestCount = requests.length\r\n\r\n    return {\r\n        dappReqData,\r\n        requestCount,\r\n        requestId,\r\n        origin,\r\n        siteMetadata,\r\n        approveTime,\r\n        status,\r\n        error,\r\n        type,\r\n    }\r\n}\r\n","import classnames from \"classnames\"\r\nimport { FunctionComponent, useEffect, useState } from \"react\"\r\n\r\nimport {\r\n    useOnMountHistory,\r\n    useOnMountLastLocation,\r\n} from \"../../context/hooks/useOnMount\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport NetworkDisplayBadge from \"../chain/NetworkDisplayBadge\"\r\n\r\nimport AppIcon from \"../icons/AppIcon\"\r\n\r\nimport CloseIcon from \"../icons/CloseIcon\"\r\nimport ArrowIcon from \"../icons/ArrowIcon\"\r\nimport Dropdown from \"../ui/Dropdown/Dropdown\"\r\nimport { DropdownMenuItem } from \"../ui/Dropdown/DropdownMenu\"\r\n\r\nexport interface PopupHeaderProps {\r\n    title: string\r\n    backButton?: boolean\r\n    keepState?: boolean // if true, keeps the previous state while going back using the back button\r\n    networkIndicator?: boolean\r\n    close?: string | boolean\r\n    icon?: string | null\r\n    disabled?: boolean // used to disable back or close buttons\r\n    onClose?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void\r\n    onBack?: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void // in case we want to replace default back behavior\r\n    actions?: React.ReactNode[]\r\n    children?: React.ReactNode | undefined\r\n    className?: string\r\n    goBackState?: object\r\n}\r\n\r\nconst PopupHeader: FunctionComponent<PopupHeaderProps> = ({\r\n    title,\r\n    backButton = true,\r\n    keepState = false,\r\n    networkIndicator = false,\r\n    close = \"/home\",\r\n    icon,\r\n    children,\r\n    disabled = false,\r\n    onClose,\r\n    onBack,\r\n    actions,\r\n    className,\r\n    goBackState,\r\n}) => {\r\n    const history = useOnMountHistory()\r\n    const lastLocation = useOnMountLastLocation()\r\n    const network = useSelectedNetwork()\r\n\r\n    const [fromAction, setFromAction] = useState(false)\r\n\r\n    const [mounted, setMounted] = useState(false)\r\n\r\n    useEffect(() => {\r\n        setFromAction(history.location.state?.fromAction)\r\n        setMounted(true)\r\n\r\n        return () => setMounted(false)\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    return (\r\n        <div\r\n            className={classnames(\r\n                \"z-10 flex flex-row items-center p-6 bg-white bg-opacity-75 max-w-full\",\r\n                className\r\n            )}\r\n            style={{ backdropFilter: \"blur(4px)\", minHeight: \"76px\" }}\r\n        >\r\n            {backButton && (\r\n                <button\r\n                    type=\"button\"\r\n                    onClick={(e) => {\r\n                        if (onBack) return onBack(e)\r\n\r\n                        //means there is no stack at all and we don't were to go\r\n                        //as the history hasn't been restored.\r\n                        //Also, we don't have the lastLocation as the extension may have been closed\r\n                        //and restored using the localStorage (useLocationRecovery).\r\n                        //Therefore, we return to home.\r\n                        if (history.length <= 1) {\r\n                            return history.replace(\"/\")\r\n                        }\r\n\r\n                        if (keepState || goBackState) {\r\n                            let newState = {}\r\n                            if (keepState) {\r\n                                newState = lastLocation?.state\r\n                                    ? (lastLocation?.state as any & {\r\n                                          keepState: true\r\n                                      })\r\n                                    : {}\r\n                            }\r\n                            if (goBackState) {\r\n                                newState = {\r\n                                    ...newState,\r\n                                    ...goBackState,\r\n                                }\r\n                            }\r\n                            return history.replace({\r\n                                pathname: lastLocation?.pathname,\r\n                                state: newState,\r\n                            })\r\n                        }\r\n                        fromAction ? history.go(-3) : history.goBack()\r\n                    }}\r\n                    disabled={disabled || !mounted}\r\n                    className={classnames(\r\n                        \"p-2 -ml-2 mr-1 cursor-pointer transition duration-300 rounded-full hover:bg-primary-100 hover:text-primary-300\",\r\n                        disabled && \"pointer-events-none text-gray-300\"\r\n                    )}\r\n                >\r\n                    <ArrowIcon />\r\n                </button>\r\n            )}\r\n            {icon && (\r\n                <div className=\"pr-3\">\r\n                    <AppIcon iconURL={icon} size={10} />\r\n                </div>\r\n            )}\r\n            <span\r\n                title={title}\r\n                className={classnames(\"text-base font-bold\", icon && \"w-56\")}\r\n            >\r\n                {title}\r\n            </span>\r\n            <div className=\"ml-auto flex space-x-1\">\r\n                {actions && (\r\n                    <Dropdown>\r\n                        <Dropdown.Menu id=\"popup-actions\">\r\n                            {actions.map((action, idx) => {\r\n                                return (\r\n                                    <DropdownMenuItem key={idx}>\r\n                                        {action}\r\n                                    </DropdownMenuItem>\r\n                                )\r\n                            })}\r\n                        </Dropdown.Menu>\r\n                    </Dropdown>\r\n                )}\r\n                {networkIndicator && (\r\n                    <NetworkDisplayBadge truncate network={network} />\r\n                )}\r\n                {close && (\r\n                    <button\r\n                        onClick={(e) => {\r\n                            if (onClose) return onClose(e)\r\n                            history.push(\r\n                                typeof close === \"string\" ? close : \"/home\"\r\n                            )\r\n                        }}\r\n                        disabled={disabled}\r\n                        className={classnames(\r\n                            \"p-2 -mr-2 transition duration-300 rounded-full hover:bg-primary-100 hover:text-primary-300\",\r\n                            disabled && \"pointer-events-none text-gray-300\"\r\n                        )}\r\n                        type=\"button\"\r\n                    >\r\n                        <CloseIcon />\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PopupHeader\r\n","import { useState, useEffect } from \"react\"\r\n\r\ntype ChildrenParams = {\r\n    isCapsLock: boolean\r\n}\r\n\r\ntype CapsLockDetectorProps = {\r\n    children: (params: ChildrenParams) => React.ReactNode\r\n}\r\n\r\nconst CapsLockDetector = ({ children }: CapsLockDetectorProps) => {\r\n    const [isCapsLock, setIsCapsLock] = useState(false)\r\n\r\n    useEffect(() => {\r\n        const cbUp = (e: KeyboardEvent) => {\r\n            // It can return undefined so we have to make sure it's the correct value\r\n            if (e.getModifierState(\"CapsLock\") === false) {\r\n                setIsCapsLock(false)\r\n            }\r\n        }\r\n        const cbDown = (e: KeyboardEvent) => {\r\n            if (e.getModifierState(\"CapsLock\")) {\r\n                setIsCapsLock(true)\r\n            }\r\n        }\r\n\r\n        window.addEventListener(\"keydown\", cbDown)\r\n        window.addEventListener(\"keyup\", cbUp)\r\n\r\n        return () => {\r\n            window.removeEventListener(\"keydown\", cbDown)\r\n            window.removeEventListener(\"keyup\", cbUp)\r\n        }\r\n    }, [])\r\n\r\n    return <div>{children({ isCapsLock })}</div>\r\n}\r\n\r\nexport default CapsLockDetector\r\n","export default __webpack_public_path__ + \"static/media/eye_open.b80ef2a2.svg\";","export default __webpack_public_path__ + \"static/media/eye_close.acb09c16.svg\";","import { forwardRef, useState } from \"react\"\r\nimport PasswordStrengthBar from \"react-password-strength-bar\"\r\n\r\nimport { BsCapslockFill } from \"react-icons/bs\"\r\nimport CapsLockDetector from \"./CapsLockDetector\"\r\n\r\n// Style\r\nimport { Classes } from \"../../styles/classes\"\r\nimport classNames from \"classnames\"\r\n\r\n// Assets\r\nimport eyeOpen from \"../../assets/images/icons/eye_open.svg\"\r\nimport eyeClose from \"../../assets/images/icons/eye_close.svg\"\r\n\r\n// Types\r\ntype PasswordInputProps = {\r\n    label?: string\r\n    placeholder?: string\r\n    name?: string\r\n    error?: string\r\n    autoFocus?: boolean\r\n    autoComplete?: string\r\n    strengthBar?: boolean\r\n    value?: string\r\n    onChange?: (value: any) => void\r\n    onPaste?: (value: any) => void\r\n    setPasswordScore?: (value: number) => void\r\n    onKeyDown?: React.KeyboardEventHandler<HTMLInputElement>\r\n}\r\n\r\n/**\r\n * TextInput:\r\n * Creates a password input with a visible / hidden status.\r\n *\r\n * @param label - Display label above input.\r\n * @param placeholder - Placeholder for the input.\r\n * @param name - Name of the input, for yup validation.\r\n * @param register - Yup reference.\r\n * @param error - Yup error or message to display as red error under input.\r\n * @param autoFocus - Auto focus input when entering page if true.\r\n * @param autoComplete - Enable browser autocomplete suggestions if true.\r\n * @param strengthBar - Show the strength of the input password.\r\n * @param value - Write a value in the input from the outside.\r\n * @param onChange - Function to execute on input change.\r\n * @param onPaste - Function to execute on input paste.\r\n * @param setPasswordScore - Function to execute on password score change (if it has strengthBar).\r\n * @param onKeyDown - Function to execute on key down.\r\n */\r\nconst PasswordInput = forwardRef<HTMLInputElement, PasswordInputProps>(\r\n    (props: PasswordInputProps, ref) => {\r\n        const {\r\n            label,\r\n            placeholder,\r\n            name = \"password\",\r\n            error = \"\",\r\n            autoFocus,\r\n            autoComplete,\r\n            strengthBar,\r\n            value = \"\",\r\n            onChange,\r\n            onPaste,\r\n            setPasswordScore,\r\n            onKeyDown,\r\n        } = props\r\n\r\n        // State\r\n        const [passwordValue, setPasswordValue] = useState<string>(\"\")\r\n        const [showPassword, setShowPassword] = useState<boolean>(false)\r\n        const [showStrengthBar, setShowStrengthBar] = useState<boolean>(false)\r\n\r\n        // Handlers\r\n        const handlePasswordChange = (e: any) => {\r\n            setPasswordValue(e.target.value)\r\n            if (strengthBar) setShowStrengthBar(e.target.value.length > 0)\r\n            if (onChange) onChange(e)\r\n        }\r\n\r\n        return (\r\n            <CapsLockDetector>\r\n                {({ isCapsLock }) => (\r\n                    <>\r\n                        {/* LABEL */}\r\n                        {label ? (\r\n                            <label\r\n                                htmlFor=\"accountName\"\r\n                                className={Classes.inputLabel}\r\n                            >\r\n                                {label}\r\n                            </label>\r\n                        ) : null}\r\n\r\n                        {/* INPUT */}\r\n                        <div className=\"flex items-center flex-row relative\">\r\n                            <input\r\n                                name={name}\r\n                                type={showPassword ? \"text\" : \"password\"}\r\n                                ref={ref}\r\n                                className={classNames(\r\n                                    Classes.input,\r\n                                    \"w-full\",\r\n                                    error !== \"\"\r\n                                        ? \"border-red-400 focus:border-red-400\"\r\n                                        : \"\"\r\n                                )}\r\n                                value={value || passwordValue}\r\n                                placeholder={placeholder ? placeholder : \"\"}\r\n                                autoComplete={\r\n                                    autoComplete ? autoComplete : \"off\"\r\n                                }\r\n                                autoFocus={autoFocus ? autoFocus : false}\r\n                                onChange={(e) => handlePasswordChange(e)}\r\n                                onPaste={onPaste}\r\n                                onKeyDown={onKeyDown}\r\n                            />\r\n                            <img\r\n                                className={classNames(\r\n                                    \"w-6 h-6 p-1 absolute right-0 transition-all duration-300 cursor-pointer hover:bg-primary-100 rounded-full\",\r\n                                    showPassword === false\r\n                                        ? \"opacity-100 z-10\"\r\n                                        : \"opacity-0 pointer-event-none z-0\"\r\n                                )}\r\n                                src={eyeClose}\r\n                                alt=\"show password\"\r\n                                onClick={() => setShowPassword(true)}\r\n                            />\r\n                            <img\r\n                                className={classNames(\r\n                                    \"w-6 h-6 p-1 absolute right-0 transition-all duration-300 cursor-pointer hover:bg-primary-100 rounded-full\",\r\n                                    showPassword === true\r\n                                        ? \"opacity-100 z-10\"\r\n                                        : \"opacity-0 pointer-event-none z-0\"\r\n                                )}\r\n                                src={eyeOpen}\r\n                                alt=\"hide password\"\r\n                                onClick={() => setShowPassword(false)}\r\n                            />\r\n                            {isCapsLock && (\r\n                                <BsCapslockFill\r\n                                    className=\"w-4 h-4 absolute right-6\"\r\n                                    color=\"#8093AB\"\r\n                                />\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* STRENGTH */}\r\n                        {strengthBar ? (\r\n                            <PasswordStrengthBar\r\n                                password={passwordValue}\r\n                                className={classNames(\r\n                                    \"m-0\",\r\n                                    showStrengthBar ? \"\" : \"hidden\"\r\n                                )}\r\n                                onChangeScore={(s) => {\r\n                                    if (setPasswordScore) {\r\n                                        setPasswordScore(s)\r\n                                    }\r\n                                }}\r\n                            />\r\n                        ) : null}\r\n\r\n                        {/* ERROR */}\r\n                        <span\r\n                            className={classNames(\r\n                                \"text-xs text-red-500\",\r\n                                error === \"\"\r\n                                    ? \"m-0 h-0\"\r\n                                    : showStrengthBar && \"block -mt-5 w-5/6\"\r\n                            )}\r\n                        >\r\n                            {error || \"\"}\r\n                        </span>\r\n                    </>\r\n                )}\r\n            </CapsLockDetector>\r\n        )\r\n    }\r\n)\r\n\r\nexport default PasswordInput\r\n","import { FunctionComponent, useRef } from \"react\"\r\nimport { useOnClickOutside } from \"../../util/useOnClickOutside\"\r\nimport { CSSTransition } from \"react-transition-group\"\r\nimport \"../../router/routeTransitions.css\"\r\nimport { classnames } from \"../../styles\"\r\n\r\nconst Dialog: FunctionComponent<{\r\n    children: React.ReactNode\r\n    open: boolean\r\n    className?: string\r\n    onClickOutside?: () => void\r\n}> = ({ open, children, className = \"px-3\", onClickOutside }) => {\r\n    const nodeRef = useRef(null)\r\n    const ref = useRef(null)\r\n    useOnClickOutside(ref, () => onClickOutside?.())\r\n\r\n    return (\r\n        <CSSTransition\r\n            in={open}\r\n            timeout={200}\r\n            unmountOnExit\r\n            classNames={\"appear\"}\r\n            nodeRef={nodeRef}\r\n        >\r\n            <div\r\n                ref={nodeRef}\r\n                className={classnames(\r\n                    \"bg-gray-100 bg-opacity-50 fixed inset-0 w-full h-screen z-50 overflow-hidden flex flex-col items-center justify-center px-6\"\r\n                )}\r\n                style={{\r\n                    maxWidth: \"390px\",\r\n                    maxHeight: \"600px\",\r\n                    marginTop: \"0px\",\r\n                }}\r\n                onClick={(e) => e.stopPropagation()}\r\n            >\r\n                <div\r\n                    ref={ref}\r\n                    className={classnames(\r\n                        \"relative py-6 opacity-100 w-full bg-white shadow-md rounded-md flex-col flex\",\r\n                        className\r\n                    )}\r\n                >\r\n                    {children}\r\n                </div>\r\n            </div>\r\n        </CSSTransition>\r\n    )\r\n}\r\n\r\nexport default Dialog\r\n","import classnames from \"classnames\"\r\nimport { FunctionComponent } from \"react\"\r\nimport { Classes } from \"../../styles\"\r\nimport CloseIcon from \"../icons/CloseIcon\"\r\nimport Dialog from \"./Dialog\"\r\n\r\nconst ConfirmDialog: FunctionComponent<{\r\n    title: string\r\n    message: string\r\n    open: boolean\r\n    onClose: () => void\r\n    onConfirm: () => void\r\n}> = ({ title, message, open, onClose, onConfirm }) => {\r\n    return (\r\n        <Dialog open={open} onClickOutside={onClose} className=\"px-6\">\r\n            <div>\r\n                <h2 className=\"text-lg font-bold text-black text-left\">\r\n                    {title}\r\n                </h2>\r\n                <div className=\"py-5 text-left\">\r\n                    <span className=\"text-sm\">{message}</span>\r\n                </div>\r\n                <span className=\"absolute top-0 right-0 p-4\">\r\n                    <div\r\n                        onClick={(e) => {\r\n                            e.stopPropagation()\r\n                            onClose()\r\n                        }}\r\n                        className=\"cursor-pointer p-2 ml-auto -mr-2 text-gray-900 transition duration-300 rounded-full hover:bg-primary-100 hover:text-primary-300\"\r\n                    >\r\n                        <CloseIcon size=\"10\" />\r\n                    </div>\r\n                </span>\r\n                <div className=\"\">\r\n                    <hr className=\"absolute left-0 border-0.5 border-gray-200 w-full\" />\r\n                    <div className=\"flex flex-row w-full items-center pt-5 justify-between space-x-4 mt-auto\">\r\n                        <button\r\n                            className={classnames(Classes.liteButton)}\r\n                            onClick={(e) => {\r\n                                e.stopPropagation()\r\n                                onClose()\r\n                            }}\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                        <button\r\n                            onClick={(e) => {\r\n                                e.stopPropagation()\r\n                                onConfirm()\r\n                                onClose()\r\n                            }}\r\n                            className={classnames(Classes.button)}\r\n                        >\r\n                            Confirm\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default ConfirmDialog\r\n","import { FunctionComponent } from \"react\"\r\nimport { Classes, classnames } from \"../../styles/classes\"\r\ntype ClickableTextProps = {\r\n    children: string | React.ReactNode\r\n    onClick: React.MouseEventHandler\r\n    className?: string\r\n}\r\n\r\nconst ClickableText: FunctionComponent<ClickableTextProps> = ({\r\n    children,\r\n    className,\r\n    onClick,\r\n}) => {\r\n    return (\r\n        <button\r\n            type=\"button\"\r\n            className={classnames(Classes.clickableText, className)}\r\n            onClick={onClick}\r\n        >\r\n            {children}\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default ClickableText\r\n","/* Wrapper element that contains this component should have class \"group relative\" */\r\n\r\nimport classnames from \"classnames\"\r\nimport { FunctionComponent } from \"react\"\r\n\r\nconst Tooltip: FunctionComponent<{\r\n    content: string | React.ReactElement\r\n    className?: string\r\n}> = ({ content, className }) => (\r\n    <div\r\n        className={classnames(\r\n            className || \"\",\r\n            \"pointer-events-none absolute bottom-0 -mb-2 transform -translate-x-1/3 translate-y-3/4 p-2 text-xs shadow-md rounded-md bg-white whitespace-nowrap\",\r\n            \"invisible opacity-0 group-hover:visible group-hover:opacity-100 transition-all duration-200 z-50 w-fit h-fit\"\r\n        )}\r\n    >\r\n        <div className=\"relative\">\r\n            <span className=\"flex flex-row items-center\">{content}</span>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default Tooltip\r\n","import { FunctionComponent } from \"react\"\r\nimport { classnames } from \"../../styles\"\r\nimport Tooltip from \"../label/Tooltip\"\r\n\r\nconst SIZES = {\r\n    sm: 110,\r\n    normal: 175,\r\n}\r\n\r\nconst TRANSLATE = {\r\n    sm: \"-translate-y-20 translate-x-1/4\",\r\n    normal: \"-translate-y-40 translate-x-3/4\",\r\n}\r\n\r\nconst AntiPhishing: FunctionComponent<{\r\n    image: string | undefined\r\n    size?: \"sm\" | \"normal\"\r\n}> = ({ image = \"\", size = \"normal\" }) => {\r\n    if (!image) return <></>\r\n\r\n    const imgSize = SIZES[size] ?? SIZES[\"normal\"]\r\n    const translateTooltip = TRANSLATE[size] ?? TRANSLATE[\"normal\"]\r\n    return (\r\n        <div className=\"flex flex-col items-center\">\r\n            <div className=\"flex flex-col space-y-2 items-end justify-end select-none\">\r\n                <div className={classnames(\"group relative\")}>\r\n                    <a\r\n                        target=\"_blank\"\r\n                        rel=\"noreferrer\"\r\n                        href=\"https://help.blockwallet.io/hc/en-us/articles/4756464544657\"\r\n                    >\r\n                        <img\r\n                            src={image}\r\n                            className=\"rounded-lg border border-primary-200 hover:border-primary-300\"\r\n                            alt=\"anti-phishing\"\r\n                            width={imgSize}\r\n                            height={imgSize}\r\n                        />\r\n                    </a>\r\n                    <Tooltip\r\n                        className={translateTooltip}\r\n                        content={\r\n                            <div className=\"flex flex-col font-normal items-start text-xs text-white-500 font-bold p-1\">\r\n                                <div className=\"flex flex-row items-end space-x-7\">\r\n                                    <span>Phishing Protection</span>{\" \"}\r\n                                </div>\r\n                                <div className=\"flex flex-row items-end space-x-4\">\r\n                                    <span>Click to learn more.</span>{\" \"}\r\n                                </div>\r\n                            </div>\r\n                        }\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AntiPhishing\r\n","import { FunctionComponent } from \"react\"\r\nimport { Classes, classnames } from \"../../styles\"\r\nimport Spinner from \"../spinner/Spinner\"\r\n\r\nexport const ButtonWithLoading: FunctionComponent<{\r\n    type?: \"submit\" | \"reset\" | \"button\"\r\n    onClick?: React.MouseEventHandler<HTMLButtonElement>\r\n    isLoading?: boolean\r\n    disabled?: boolean\r\n    label: string\r\n    to?: string\r\n    buttonClass?: string\r\n    formId?: string\r\n}> = ({\r\n    type,\r\n    onClick,\r\n    isLoading,\r\n    disabled,\r\n    label,\r\n    to,\r\n    buttonClass,\r\n    formId = undefined,\r\n}) => {\r\n    const children = (\r\n        <>\r\n            {!isLoading ? (\r\n                label\r\n            ) : (\r\n                <Spinner color={buttonClass ? \"black\" : \"white\"} size=\"24\" />\r\n            )}\r\n        </>\r\n    )\r\n\r\n    return (\r\n        <button\r\n            type={type}\r\n            disabled={disabled || isLoading}\r\n            className={classnames(\r\n                buttonClass || Classes.darkButton,\r\n                \"w-full\",\r\n                (isLoading || disabled) && \"opacity-50 pointer-events-none\"\r\n            )}\r\n            onClick={onClick}\r\n            {...(formId ? { form: formId } : {})}\r\n        >\r\n            {to?.includes(\"https://\") ? (\r\n                <a\r\n                    className=\"flex flex-row space-x-3 items-center text-gray-900\"\r\n                    href={to}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                >\r\n                    {children}\r\n                </a>\r\n            ) : (\r\n                children\r\n            )}\r\n        </button>\r\n    )\r\n}\r\n","import { BigNumber } from \"@ethersproject/bignumber\"\r\n\r\nexport const SEND_GAS_COST = BigNumber.from(\"0x5208\") // Hex for 21000, cost of a simple send.\r\nexport const APPROVE_GAS_COST = BigNumber.from(\"0xcb34\") // Hex for 52020, default cost of approve.\r\n\r\n/**\r\n * Decimal places to default in case an error looking up for them occurred\r\n */\r\nexport const DEFAULT_DECIMALS = 18\r\n\r\n/**\r\n * Percentage of the estimated gas to define a lower and higher threshold to calculate a gas warning\r\n */\r\nexport const DEFAULT_TRANSACTION_GAS_PERCENTAGE_THRESHOLD = 20\r\n\r\n/**\r\n * Time before transitioning to next DApp request\r\n */\r\nexport const DAPP_FEEDBACK_WINDOW_TIMEOUT = 3000\r\n\r\n/**\r\n * Timeout before cancelling a signing request\r\n */\r\nexport const SIGN_TRANSACTION_TIMEOUT = 180000\r\n\r\n/**\r\n * Default swap fee for users without fee discount\r\n */\r\nexport const BASE_SWAP_FEE = 0.5\r\n\r\n/**\r\n * Default bridge fee for users without fee discount\r\n */\r\nexport const BASE_BRIDGE_FEE = 0.005\r\n\r\n/**\r\n * Time ellapsed before refreshing the swap quote\r\n */\r\nexport const SWAP_QUOTE_REFRESH_TIMEOUT = 1000 * 15\r\n\r\nexport const LINKS = {\r\n    WEBSITE: \"https://blockwallet.io/\",\r\n    TELEGRAM: \"https://t.me/blockwallet\",\r\n    GITHUB: \"https://github.com/block-wallet/\",\r\n    TWITTER: \"https://twitter.com/GetBlockWallet\",\r\n    WEBSITE_BUG_REPORT: \"https://blockwallet.io/bug-report.html\",\r\n    GITHUB_BUG_REPORT:\r\n        \"https://github.com/block-wallet/extension/issues/new?assignees=&labels=&template=bug_report.md&title=\",\r\n    ARTICLES: {\r\n        HD_PATH:\r\n            \"https://help.blockwallet.io/hc/en-us/articles/6670471581841-What-is-an-HD-Path-\",\r\n        LOCK_TIMEOUT:\r\n            \"https://help.blockwallet.io/hc/en-us/articles/6815376575249\",\r\n        CUSTOM_NETWORK_RISKS:\r\n            \"https://help.blockwallet.io/hc/en-us/articles/7786071253649-How-to-Add-a-Custom-Network-RPC\",\r\n        MALICIOUS_DAPPS:\r\n            \"https://help.blockwallet.io/hc/en-us/articles/10374731466769\",\r\n        BRIDGES: \"https://help.blockwallet.io/hc/en-us/articles/10669678195473\",\r\n        CHANGELOG: \"https://bit.ly/bw-release\",\r\n    },\r\n}\r\n","import { useState } from \"react\"\r\nimport { useHistory } from \"react-router-dom\"\r\n\r\nimport PopupFooter from \"../components/popup/PopupFooter\"\r\nimport PopupHeader from \"../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../components/popup/PopupLayout\"\r\nimport PasswordInput from \"../components/input/PasswordInput\"\r\n\r\nimport ConfirmDialog from \"../components/dialog/ConfirmDialog\"\r\nimport ClickableText from \"../components/button/ClickableText\"\r\nimport AntiPhishing from \"../components/phishing/AntiPhishing\"\r\n\r\nimport * as yup from \"yup\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport logo from \"../assets/images/logo.svg\"\r\n\r\nimport { unlockApp, requestSeedPhrase } from \"../context/commActions\"\r\nimport { openReset } from \"../context/commActions\"\r\nimport { useBlankState } from \"../context/background/backgroundHooks\"\r\nimport { ButtonWithLoading } from \"../components/button/ButtonWithLoading\"\r\nimport { AiFillInfoCircle } from \"react-icons/ai\"\r\nimport Tooltip from \"../components/label/Tooltip\"\r\nimport { LINKS } from \"../util/constants\"\r\n\r\nconst schema = yup.object().shape({\r\n    password: yup.string().required(\"Password required.\"),\r\n})\r\ntype PasswordFormData = { password: string }\r\n\r\nconst UnlockPage = () => {\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        formState: { errors },\r\n        setError,\r\n    } = useForm<PasswordFormData>({\r\n        resolver: yupResolver(schema),\r\n    })\r\n    const history = useHistory()\r\n    const {\r\n        isSeedPhraseBackedUp,\r\n        isUserNetworkOnline,\r\n        settings,\r\n        antiPhishingImage,\r\n        lockedByTimeout,\r\n    } = useBlankState()!\r\n    const [hasDialog, setHasDialog] = useState(false)\r\n    const [isLoading, setIsLoading] = useState(false)\r\n\r\n    const getSeedPhrase = async (password: any) => {\r\n        try {\r\n            const phrase = await requestSeedPhrase(password)\r\n            return phrase\r\n        } catch {\r\n            history.replace({\r\n                pathname: \"/\",\r\n            })\r\n        }\r\n    }\r\n    const onSubmit = handleSubmit(async (data: PasswordFormData) => {\r\n        try {\r\n            setIsLoading(true)\r\n            if (await unlockApp(data.password)) {\r\n                if (!isSeedPhraseBackedUp) {\r\n                    const seedPhrase = await getSeedPhrase(data.password)\r\n\r\n                    return history.replace({\r\n                        pathname: \"/reminder\",\r\n                        state: {\r\n                            seedPhrase,\r\n                            password: data.password,\r\n                            hasBack: false,\r\n                        },\r\n                    })\r\n                } else {\r\n                    return history.replace({\r\n                        pathname: \"/\",\r\n                    })\r\n                }\r\n            } else {\r\n                setError(\r\n                    \"password\",\r\n                    {\r\n                        message: \"Incorrect password\",\r\n                    },\r\n                    { shouldFocus: true }\r\n                )\r\n            }\r\n            setIsLoading(false)\r\n        } catch (e: any) {\r\n            setError(\r\n                \"password\",\r\n                {\r\n                    message: \"Error unlocking the extension\",\r\n                },\r\n                {\r\n                    shouldFocus: true,\r\n                }\r\n            )\r\n        }\r\n    })\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    title=\"Unlock Appasdfasdfasdf\"\r\n                    close={false}\r\n                    backButton={false}\r\n                >\r\n                    {lockedByTimeout && (\r\n                        <div className=\"group relative\">\r\n                            <a\r\n                                href={LINKS.ARTICLES.LOCK_TIMEOUT}\r\n                                target=\"_blank\"\r\n                                rel=\"noreferrer\"\r\n                            >\r\n                                <AiFillInfoCircle\r\n                                    size={26}\r\n                                    className=\"pl-2 text-primary-200 cursor-pointer hover:text-primary-300\"\r\n                                />\r\n                                <Tooltip\r\n                                    className=\"!w-52 !break-word !whitespace-normal  border boder-gray-300\"\r\n                                    content=\"Locked too soon? Click to learn how to increase the lock timeout.\"\r\n                                />\r\n                            </a>\r\n                        </div>\r\n                    )}\r\n                </PopupHeader>\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        label=\"Confirm\"\r\n                        isLoading={isLoading}\r\n                        onClick={onSubmit}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n            submitOnEnter={{\r\n                onSubmit,\r\n                isFormValid: Object.keys(errors).length === 0,\r\n            }}\r\n        >\r\n            <ConfirmDialog\r\n                title=\"Confirmation\"\r\n                message=\"Are you sure you want to reset your wallet? This action can not be undone.\"\r\n                open={hasDialog}\r\n                onClose={() => setHasDialog(false)}\r\n                onConfirm={() => openReset()}\r\n            />\r\n            <div className=\"p-6 pb-0 flex flex-col space-y-8\">\r\n                <div className=\"flex flex-col space-y-2\">\r\n                    <img src={logo} alt=\"logo\" className=\"w-12 h-12 mx-auto\" />\r\n                    <span className=\"text-center text-base font-bold font-title\">\r\n                        Enter your password to continue.\r\n                    </span>\r\n                </div>\r\n                <div className=\"flex flex-col space-y-2\">\r\n                    <PasswordInput\r\n                        label=\"Password\"\r\n                        placeholder=\"Enter Password\"\r\n                        {...register(\"password\")}\r\n                        error={errors.password?.message}\r\n                        autoFocus={isUserNetworkOnline}\r\n                    />\r\n                    <div>\r\n                        or&nbsp;\r\n                        <ClickableText onClick={() => setHasDialog(true)}>\r\n                            reset wallet using seed phrase\r\n                        </ClickableText>\r\n                    </div>\r\n\r\n                    {settings.useAntiPhishingProtection && (\r\n                        <div className=\"pt-3\">\r\n                            <AntiPhishing image={antiPhishingImage} />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default UnlockPage\r\n","export const getPathDepth = (path: string | undefined): number => {\r\n    if (!path)\r\n        return 0\r\n    return path.split('/').filter(p => p !== '').length\r\n}","import { useRef } from \"react\"\r\nimport { useMemo } from \"react\"\r\nimport { FunctionComponent } from \"react\"\r\nimport { Route, RouteProps, useLocation } from \"react-router-dom\"\r\nimport { useLastLocation } from \"react-router-last-location\"\r\nimport { CSSTransition } from \"react-transition-group\"\r\nimport { getPathDepth } from \"../util/getPathDepth\"\r\n\r\nexport type TransitionRouteProps = {\r\n    transition?: string\r\n    component: any\r\n\r\n    //Use this prop to indicate that this route should not be tracked\r\n    //for recovering when the user closes the extension.\r\n    //\r\n    //Mostly used for \"Confirm\" pages where you don't want to keep the user there\r\n    //because it may be very complicated to properly manage the async behaviours\r\n    blockListedForRecovery?: boolean\r\n} & RouteProps\r\n\r\nexport type TransitionDirection = \"up\" | \"right\" | \"down\" | \"left\"\r\n\r\nconst TransitionClass = {\r\n    up: \"slide-up\",\r\n    right: \"slide-right\",\r\n    down: \"slide\",\r\n    left: \"slide-left\",\r\n}\r\n\r\nexport const TransitionRoute: FunctionComponent<TransitionRouteProps> = ({\r\n    transition,\r\n    component: Component,\r\n    ...rest\r\n}) => {\r\n    const location = useLocation()\r\n    const lastLocation = useLastLocation()\r\n    const pathName = location.pathname === \"/home\" ? \"/\" : location.pathname\r\n    const lastPathName =\r\n        lastLocation?.pathname === \"/home\" ? \"/\" : lastLocation?.pathname\r\n\r\n    // If specified in state by the name of TransitionDirection, this will overpass the logic depending on path depth and apply the received transition direction.\r\n    const transitionDirection = (location.state as any)\r\n        ?.transitionDirection as TransitionDirection\r\n\r\n    const nodeRef = useRef(null)\r\n    // Transition logic:\r\n    // -> to root \"/\" --> slide-up\r\n    // -> from root to any module --> slide-down\r\n    // -> from a level 1 page (for ex: /deposit) to any level 2 or same level subpage (for ex: /deposit/confirm) --> slide-left\r\n    // -> from a level 2 page (for ex: /deposit/confirm) to a minor level page (for ex: /deposit) --> slide-right\r\n\r\n    transition = useMemo(() => {\r\n        if (transitionDirection) {\r\n            return TransitionClass[transitionDirection]\r\n        }\r\n\r\n        if (\r\n            lastPathName &&\r\n            lastPathName !== \"/\" &&\r\n            pathName !== \"/\" &&\r\n            pathName !== \"/unlock\"\r\n        ) {\r\n            const currentDepth = getPathDepth(pathName)\r\n            const lastDepth = getPathDepth(lastPathName)\r\n            return lastDepth > currentDepth\r\n                ? TransitionClass[\"right\"]\r\n                : TransitionClass[\"left\"]\r\n        } else {\r\n            return pathName === \"/\"\r\n                ? TransitionClass[\"up\"]\r\n                : TransitionClass[\"down\"]\r\n        }\r\n    }, [lastPathName, pathName, transitionDirection])\r\n\r\n    return (\r\n        <Route {...rest} component={transition ? undefined : Component}>\r\n            {transition\r\n                ? ({ match }) => (\r\n                      <CSSTransition\r\n                          in={match != null}\r\n                          timeout={400}\r\n                          classNames={transition}\r\n                          unmountOnExit\r\n                          nodeRef={nodeRef}\r\n                      >\r\n                          <div className=\"w-full h-full\" ref={nodeRef}>\r\n                              <Component />\r\n                          </div>\r\n                      </CSSTransition>\r\n                  )\r\n                : undefined}\r\n        </Route>\r\n    )\r\n}\r\n","import {\r\n    TransitionRoute,\r\n    TransitionRouteProps,\r\n} from \"../router/TransitionRoute\"\r\n\r\nexport const makeRoutes = (routes: TransitionRouteProps[]) =>\r\n    routes.map((route, i) => <TransitionRoute {...route} key={i} />)\r\n","import classnames from \"classnames\"\r\n\r\nconst Divider = ({ className }: { className?: string }) => (\r\n    <hr\r\n        className={classnames(\r\n            className,\r\n            \"w-full border-b-1 border-primary-100\"\r\n        )}\r\n    />\r\n)\r\n\r\nexport default Divider\r\n","const WALLET_ADDRESS_DEFAULT_LENGTH = 40\r\n\r\nexport const formatHash = (hash: string, chars: number = 4) => {\r\n    if (hash.length < WALLET_ADDRESS_DEFAULT_LENGTH || hash.length === chars) {\r\n        return hash\r\n    } else {\r\n        return `${hash.slice(0, chars + 2)}...${hash.slice(-chars)}`\r\n    }\r\n}\r\n\r\nexport const formatName = (\r\n    accountName: string | undefined,\r\n    maxLength: number = 13\r\n): string => {\r\n    if (!accountName) {\r\n        return 'Account'\r\n    } else {\r\n        if (accountName.length < maxLength) {\r\n            return accountName\r\n        } else {\r\n            return `${accountName.slice(0, maxLength - 3)}...`\r\n        }\r\n    }\r\n}\r\n\r\nexport const formatHashLastChars = (hash: string, chars: number = 4) => {\r\n\r\n    return `(...${hash.slice(-chars)})`\r\n}","const AccountIcon = (props: any) => (\r\n    <svg\r\n        viewBox=\"0 0 30 30\"\r\n        fill=\"none\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        className={props.className}\r\n    >\r\n        <path\r\n            fillRule=\"evenodd\"\r\n            clipRule=\"evenodd\"\r\n            d=\"M15 30C23.2843 30 30 23.2843 30 15C30 6.71573 23.2843 0 15 0C6.71573 0 0 6.71573 0 15C0 23.2843 6.71573 30 15 30ZM23.125 6.875H6.875V23.125H23.125V6.875Z\"\r\n            fill={props.fill}\r\n        />\r\n    </svg>\r\n)\r\n\r\nexport default AccountIcon\r\n","export const formatNumberLength = (\r\n    display: string,\r\n    maxDigits: number,\r\n    ellipsis = true\r\n) => {\r\n    const [whole, decimal] = display.split(\".\")\r\n    const displayDecimal = decimal?.slice(\r\n        0,\r\n        Math.max(maxDigits - whole.length, 0)\r\n    )\r\n    const displayEllipsis =\r\n        ellipsis && whole.length + (displayDecimal?.length || 0) >= maxDigits\r\n    return `${\r\n        displayDecimal\r\n            ? [whole.slice(0, maxDigits), displayDecimal].join(\".\")\r\n            : whole\r\n    }${displayEllipsis ? \"...\" : \"\"}`\r\n}\r\n","/* Wrapper element that contains this component should have class \"group relative\" */\r\n\r\nimport classnames from \"classnames\"\r\nimport { FunctionComponent } from \"react\"\r\nimport { ImCheckmark } from \"react-icons/im\"\r\n\r\nconst CopyTooltip: FunctionComponent<{\r\n    copied: boolean\r\n    text?: string\r\n}> = ({ copied = false, text }) => (\r\n    <div\r\n        className={classnames(\r\n            \"pointer-events-none absolute bottom-0 -mb-4 left-1/2 transform -translate-x-1/2 translate-y-full p-2 rounded-md text-xs font-bold bg-gray-900 text-white whitespace-nowrap\",\r\n            \"invisible opacity-0 group-hover:visible group-hover:opacity-100 transition-all duration-200\"\r\n        )}\r\n        style={{ width: \"fit-content\", height: \"fit-content\", zIndex: 100 }}\r\n    >\r\n        <div className=\"relative\">\r\n            <div className=\"border-t-4 border-r-4 border-gray-900 absolute top-0 left-1/2 w-2 h-2 -mt-2.5 transform -rotate-45 -translate-x-1/2\" />\r\n            {copied ? (\r\n                <span className=\"flex flex-row items-center\">\r\n                    <ImCheckmark\r\n                        className=\"mr-2\"\r\n                        style={{ fontSize: \"0.6rem\" }}\r\n                    />\r\n                    Copied!\r\n                </span>\r\n            ) : (\r\n                <span>{text ? text : \"Copy to clipboard\"}</span>\r\n            )}\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default CopyTooltip\r\n","import { AccountInfo } from \"@block-wallet/background/controllers/AccountTrackerController\"\r\nimport { useBlankState } from \"../background/backgroundHooks\"\r\n\r\nexport const useSelectedAccount = (): AccountInfo => {\r\n    const { accounts, selectedAddress } = useBlankState()!\r\n    return accounts[selectedAddress]\r\n}\r\n","import { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { Token } from \"@block-wallet/background/controllers/erc-20/Token\"\r\n\r\nimport { useSelectedAccount } from \"./useSelectedAccount\"\r\nimport { useSelectedNetwork } from \"./useSelectedNetwork\"\r\n\r\nexport type TokenWithBalance = { token: Token; balance: BigNumber }\r\n\r\nexport type TokenList = TokenWithBalance[]\r\n\r\ninterface TokenListInfo {\r\n    nativeToken: TokenWithBalance\r\n    currentNetworkTokens: TokenWithBalance[]\r\n}\r\n\r\nexport const useTokensList = (): TokenListInfo => {\r\n    const { balances } = useSelectedAccount()\r\n    const { nativeCurrency, defaultNetworkLogo, chainId } = useSelectedNetwork()\r\n\r\n    const nativeToken = {\r\n        address: \"0x0\",\r\n        decimals: nativeCurrency.decimals,\r\n        name: nativeCurrency.name,\r\n        symbol: nativeCurrency.symbol,\r\n        logo: defaultNetworkLogo,\r\n    }\r\n\r\n    if (chainId in balances) {\r\n        const { nativeTokenBalance, tokens } = balances[chainId]\r\n\r\n        // Place tokens with balance on top\r\n        const currentNetworkTokens = Object.values(tokens)\r\n            .filter((token) => {\r\n                return ![\r\n                    \"0x0000000000000000000000000000000000000000\",\r\n                    \"0x0\",\r\n                ].includes(token.token.address)\r\n            })\r\n            .sort((a, b) => {\r\n                const firstNumber = BigNumber.from(b.balance)\r\n                return firstNumber.gt(a.balance)\r\n                    ? 1\r\n                    : firstNumber.eq(a.balance)\r\n                    ? 0\r\n                    : -1\r\n            })\r\n\r\n        return {\r\n            nativeToken: {\r\n                token: nativeToken,\r\n                balance: nativeTokenBalance,\r\n            } as TokenWithBalance,\r\n            currentNetworkTokens,\r\n        }\r\n    } else {\r\n        return {\r\n            nativeToken: {\r\n                token: nativeToken,\r\n                balance: BigNumber.from(\"0\"),\r\n            } as TokenWithBalance,\r\n            currentNetworkTokens: [],\r\n        }\r\n    }\r\n}\r\n","import { TransactionMeta } from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport { TransactionStatus } from \"../context/commTypes\"\r\n\r\nexport const getNonSubmittedTransactions = (\r\n    transactions: TransactionMeta[],\r\n    external = true\r\n) => {\r\n    const validStates = [\r\n        TransactionStatus.UNAPPROVED,\r\n        TransactionStatus.APPROVED,\r\n        TransactionStatus.SIGNED,\r\n    ]\r\n    const filteredTransactions = transactions.filter(\r\n        (t) =>\r\n            (external ? t.origin !== \"blank\" : t.origin === \"blank\") &&\r\n            validStates.includes(t.status)\r\n    )\r\n\r\n    const nonSubmittedTransactions = filteredTransactions.reduce(\r\n        (result, transaction) => {\r\n            result[transaction.id] = transaction\r\n            return result\r\n        },\r\n        {} as { [key: string]: TransactionMeta }\r\n    )\r\n\r\n    return nonSubmittedTransactions\r\n}\r\n","import { PermissionRequest } from \"@block-wallet/background/controllers/PermissionsController\"\r\nimport { TransactionMeta } from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport {\r\n    DappRequest,\r\n    DappRequestParams,\r\n} from \"@block-wallet/background/utils/types/ethereum\"\r\nimport { TransactionCategories } from \"../commTypes\"\r\nimport { DappReq } from \"../hooks/useDappRequest\"\r\n\r\nconst getRequestRouteAndStatus = (\r\n    permissionRequests: {\r\n        [id: string]: PermissionRequest\r\n    },\r\n    unapprovedTransactions: {\r\n        [id: string]: TransactionMeta\r\n    },\r\n    dappRequests: {\r\n        [id: string]: DappRequest<keyof DappRequestParams>\r\n    }\r\n): [boolean, string] => {\r\n    // Filter permission requests\r\n    const permissionsReqs = Object.entries(\r\n        permissionRequests\r\n    ).map(([, { time }]) => ({ time, route: \"/connect\" }))\r\n\r\n    // Filter tx requests\r\n    const transactionReqs = Object.entries(unapprovedTransactions).map(\r\n        ([, { time, transactionCategory, advancedData }]) => ({\r\n            time,\r\n            route:\r\n                transactionCategory !==\r\n                TransactionCategories.TOKEN_METHOD_APPROVE\r\n                    ? \"/transaction/confirm\"\r\n                    : advancedData?.tokenId\r\n                    ? \"/approveNFT\"\r\n                    : \"/approveAsset\",\r\n        })\r\n    )\r\n\r\n    // Filter DApp requests\r\n    const dappReqs = Object.entries(dappRequests).map(([, { time, type }]) => ({\r\n        time,\r\n        route:\r\n            type === DappReq.SIGNING\r\n                ? \"/sign\"\r\n                : type === DappReq.ASSET\r\n                ? \"/asset\"\r\n                : type === DappReq.SWITCH_NETWORK\r\n                ? \"/chain/switch\"\r\n                : type === DappReq.ADD_ETHEREUM_CHAIN\r\n                ? \"/chain/add\"\r\n                : \"\",\r\n    }))\r\n\r\n    // Get the older one, and if the list is empty\r\n    const sortedList = [\r\n        ...permissionsReqs,\r\n        ...transactionReqs,\r\n        ...dappReqs,\r\n    ].sort(({ time: timeA }, { time: timeB }) => timeA - timeB)\r\n\r\n    const isEmpty = sortedList.length === 0\r\n\r\n    return [!isEmpty, !isEmpty ? sortedList[0].route : \"\"]\r\n}\r\n\r\nexport default getRequestRouteAndStatus\r\n","import { getNonSubmittedTransactions } from \"../../util/getNonSubmittedTransactions\"\r\nimport { useBlankState } from \"../background/backgroundHooks\"\r\nimport getRequestRouteAndStatus from \"../util/getRequestRouteAndStatus\"\r\n\r\n/**\r\n * It returns the next pending request route\r\n *\r\n * @returns The route to the next pending request view\r\n */\r\nconst useNextRequestRoute = () => {\r\n    const { permissionRequests, transactions, dappRequests } = useBlankState()!\r\n\r\n    const nonSubmittedTransactions = getNonSubmittedTransactions(\r\n        transactions,\r\n        true\r\n    )\r\n\r\n    const [isNotEmpty, route] = getRequestRouteAndStatus(\r\n        permissionRequests,\r\n        nonSubmittedTransactions,\r\n        dappRequests\r\n    )\r\n\r\n    return isNotEmpty ? route : \"/home\"\r\n}\r\n\r\nexport default useNextRequestRoute\r\n","import { useState, useRef, useEffect, useCallback } from \"react\"\r\nimport { DAPP_FEEDBACK_WINDOW_TIMEOUT } from \"../constants\"\r\n\r\nconst removeTiemout = (timeoutId?: NodeJS.Timeout) => {\r\n    if (timeoutId) {\r\n        clearTimeout(timeoutId)\r\n    }\r\n}\r\n\r\n/**\r\n * `useDebouncedState` wraps the `React.useState` by delaying the state update function execution the\r\n * milliseconds indicated through the `timeout` parameter.\r\n * @param {T} initialState state initial value\r\n * @param {number} timeout time in millis to debounce the state update\r\n * @returns [state,setState] a stateful value, and a function to update it.\r\n */\r\nfunction useDebouncedState<T>(\r\n    initialState: T,\r\n    timeout = DAPP_FEEDBACK_WINDOW_TIMEOUT\r\n): [T, (nextState: T | ((prevState: T) => T), debounce?: boolean) => void] {\r\n    const [state, setState] = useState<T>(initialState)\r\n    const timeoutRef = useRef<NodeJS.Timeout | undefined>(undefined)\r\n    useEffect(() => {\r\n        return () => removeTiemout(timeoutRef.current)\r\n    }, [])\r\n\r\n    const setDebouncedState = useCallback(\r\n        (nextState: T | ((prevState: T) => T), debounce = true) => {\r\n            removeTiemout(timeoutRef.current)\r\n            if (debounce) {\r\n                timeoutRef.current = setTimeout(() => {\r\n                    setState(nextState)\r\n                }, timeout)\r\n            } else {\r\n                setState(nextState)\r\n            }\r\n        },\r\n        [setState, timeout]\r\n    )\r\n\r\n    return [state, setDebouncedState]\r\n}\r\n\r\nexport default useDebouncedState\r\n","import type {\r\n    DappRequestSigningStatus,\r\n    DappSignatureReq,\r\n    NormalizedSwitchEthereumChainParameters,\r\n    RawSignatureData,\r\n    WatchAssetReq,\r\n} from \"@block-wallet/background/utils/types/ethereum\"\r\nimport { FunctionComponent, useEffect } from \"react\"\r\n\r\nimport useNextRequestRoute from \"../../context/hooks/useNextRequestRoute\"\r\nimport { DappReq, useDappRequest } from \"../../context/hooks/useDappRequest\"\r\nimport { Redirect } from \"react-router\"\r\nimport { SiteMetadata } from \"@block-wallet/provider/types\"\r\nimport useDebouncedState from \"../../util/hooks/useDebouncedState\"\r\nimport { DAPP_FEEDBACK_WINDOW_TIMEOUT } from \"../../util/constants\"\r\n\r\nexport interface DappRequestProps {\r\n    dappReqData:\r\n        | DappSignatureReq<keyof RawSignatureData>\r\n        | NormalizedSwitchEthereumChainParameters\r\n        | Record<string, unknown>\r\n        | WatchAssetReq\r\n    origin: string\r\n    requestCount: number\r\n    requestId: string\r\n    status?: DappRequestSigningStatus\r\n    approveTime?: number\r\n    error?: Error\r\n    siteMetadata: SiteMetadata\r\n}\r\n\r\nexport const DappRequest: FunctionComponent<{\r\n    requestType: DappReq\r\n    layoutRender: React.FunctionComponent<DappRequestProps>\r\n}> = ({ requestType, layoutRender }) => {\r\n    const latestDappRequest = useDappRequest()\r\n    const route = useNextRequestRoute()\r\n\r\n    const [nextRequest, setNextRequest] = useDebouncedState(\r\n        latestDappRequest,\r\n        DAPP_FEEDBACK_WINDOW_TIMEOUT\r\n    )\r\n    useEffect(() => {\r\n        setNextRequest(\r\n            latestDappRequest,\r\n            typeof latestDappRequest === \"undefined\" ||\r\n                latestDappRequest.requestId !== nextRequest?.requestId\r\n        )\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [\r\n        latestDappRequest?.status,\r\n        latestDappRequest?.requestId,\r\n        setNextRequest,\r\n    ])\r\n\r\n    if (\r\n        typeof nextRequest === \"undefined\" ||\r\n        nextRequest.type !== requestType\r\n    ) {\r\n        return <Redirect to={route} />\r\n    }\r\n    return layoutRender({\r\n        dappReqData: nextRequest.dappReqData,\r\n        origin: nextRequest.origin,\r\n        requestCount: latestDappRequest?.requestCount ?? 1,\r\n        requestId: nextRequest.requestId,\r\n        siteMetadata: nextRequest.siteMetadata,\r\n        status: nextRequest.status,\r\n        approveTime: nextRequest.approveTime,\r\n        error: nextRequest.error,\r\n    })\r\n}\r\n","import classnames from \"classnames\"\r\nimport { FunctionComponent, useRef, useState } from \"react\"\r\nimport { Classes } from \"../../styles\"\r\nimport { useOnClickOutside } from \"../../util/useOnClickOutside\"\r\nimport CloseIcon from \"../icons/CloseIcon\"\r\nimport Dialog from \"./Dialog\"\r\n\r\nconst CheckBoxDialog: FunctionComponent<{\r\n    title: string\r\n    message: string\r\n    open: boolean\r\n    showCheckbox?: boolean\r\n    checkboxText?: string\r\n    closeText?: string\r\n    confirmText?: string\r\n    showCloseButton?: boolean\r\n    onClose: () => void\r\n    onCancel?: () => void\r\n    onConfirm: (option?: boolean) => void\r\n}> = ({\r\n    title,\r\n    message,\r\n    open,\r\n    showCheckbox = false,\r\n    checkboxText = \"\",\r\n    closeText = \"Cancel\",\r\n    showCloseButton = true,\r\n    confirmText = \"Confirm\",\r\n    onClose,\r\n    onCancel,\r\n    onConfirm,\r\n}) => {\r\n    const [checked, setChecked] = useState(false)\r\n    const ref = useRef(null)\r\n    useOnClickOutside(ref, () => onClose())\r\n\r\n    return (\r\n        <Dialog open={open} onClickOutside={onClose}>\r\n            <div className=\"px-3\">\r\n                <h2 className=\"text-lg font-bold\">{title}</h2>\r\n                <div className=\"py-5\">\r\n                    <span className=\"text-sm whitespace-pre-line\">\r\n                        {message}\r\n                    </span>\r\n                    {showCheckbox && (\r\n                        <div className=\"pt-4 flex flex-row items-center\">\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                className={Classes.checkbox}\r\n                                onChange={() => {\r\n                                    setChecked(!checked)\r\n                                }}\r\n                                id=\"checkbox\"\r\n                            />\r\n                            <label htmlFor=\"checkbox\" className=\"text-xs pl-2\">\r\n                                {checkboxText}\r\n                            </label>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                <span className=\"absolute top-0 right-0 p-4\">\r\n                    <div\r\n                        onClick={() => onClose()}\r\n                        className=\" cursor-pointer p-2 ml-auto -mr-2 text-gray-900 transition duration-300 rounded-full hover:bg-primary-100 hover:text-primary-300\"\r\n                    >\r\n                        <CloseIcon size=\"10\" />\r\n                    </div>\r\n                </span>\r\n                <div className=\"\">\r\n                    <hr className=\"absolute left-0 border-0.5 border-gray-200 w-full\" />\r\n                    <div className=\"flex flex-row w-full items-center pt-5 justify-between space-x-4 mt-auto\">\r\n                        {showCloseButton && (\r\n                            <button\r\n                                className={classnames(Classes.liteButton)}\r\n                                onClick={() => {\r\n                                    onCancel && onCancel()\r\n                                    onClose()\r\n                                }}\r\n                            >\r\n                                {closeText}\r\n                            </button>\r\n                        )}\r\n                        <button\r\n                            onClick={() => {\r\n                                onConfirm(checked)\r\n                                onClose()\r\n                            }}\r\n                            className={classnames(Classes.button)}\r\n                        >\r\n                            {confirmText}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default CheckBoxDialog\r\n","import { useBlankState } from '../background/backgroundHooks'\r\n\r\nexport const useUserSettings = () => {\r\n    const { settings } = useBlankState()!\r\n    return { ...settings }\r\n}","import { FunctionComponent, PropsWithChildren, useRef } from \"react\"\r\nimport { CSSTransition } from \"react-transition-group\"\r\nimport \"../../router/routeTransitions.css\"\r\nimport { classnames } from \"../../styles\"\r\nimport { useOnClickOutside } from \"../../util/useOnClickOutside\"\r\n\r\nconst FullScreenDialog: FunctionComponent<\r\n    PropsWithChildren<{\r\n        open: boolean\r\n        onClickOutside?: () => void\r\n    }>\r\n> = ({ children, open, onClickOutside }) => {\r\n    const nodeRef = useRef(null)\r\n    const ref = useRef(null)\r\n    useOnClickOutside(ref, () => onClickOutside?.())\r\n\r\n    return (\r\n        <CSSTransition\r\n            in={open}\r\n            timeout={200}\r\n            unmountOnExit\r\n            classNames={\"appear\"}\r\n            nodeRef={nodeRef}\r\n        >\r\n            <div\r\n                ref={nodeRef}\r\n                className={classnames(\r\n                    \"bg-gray-100 bg-opacity-60 fixed inset-0 w-full h-screen z-50 overflow-hidden flex flex-col items-center justify-center px-6 \"\r\n                )}\r\n            >\r\n                <div\r\n                    ref={ref}\r\n                    className=\"relative py-6 opacity-100 max-w-md w-3/6 bg-white shadow-md rounded-md flex-col flex\"\r\n                >\r\n                    {children}\r\n                </div>\r\n            </div>\r\n        </CSSTransition>\r\n    )\r\n}\r\n\r\nexport default FullScreenDialog\r\n","import { FunctionComponent } from \"react\"\r\nimport { classnames } from \"../../styles\"\r\nimport Dialog from \"./Dialog\"\r\nimport FullScreenDialog from \"./FullScreenDialog\"\r\n\r\nexport type messageDialogProps = {\r\n    title: React.ReactElement | string\r\n    message: React.ReactElement | string\r\n    open: boolean\r\n    header?: React.ReactNode\r\n    footer?: React.ReactNode\r\n    onClickOutside?: () => void\r\n    fullScreen?: boolean\r\n    wideMargins?: boolean\r\n}\r\n\r\nconst MessageDialog: FunctionComponent<messageDialogProps> = ({\r\n    title,\r\n    message,\r\n    open,\r\n    header,\r\n    footer,\r\n    onClickOutside,\r\n    wideMargins = true,\r\n    fullScreen = false,\r\n}) => {\r\n    const DialogComponent = fullScreen ? FullScreenDialog : Dialog\r\n    return (\r\n        <DialogComponent\r\n            open={open}\r\n            onClickOutside={onClickOutside}\r\n            className={wideMargins ? \"px-6\" : \"px-3\"}\r\n        >\r\n            <>\r\n                {header}\r\n                <h2 className=\"text-lg font-bold text-center mt-4\">{title}</h2>\r\n                <div\r\n                    className={classnames(\r\n                        \"flex mt-2 mb-4\",\r\n                        wideMargins ? \"px-5 \" : \"px-1\"\r\n                    )}\r\n                >\r\n                    <span className=\"text-sm text-center w-full text-gray-500\">\r\n                        {message}\r\n                    </span>\r\n                </div>\r\n                {footer}\r\n            </>\r\n        </DialogComponent>\r\n    )\r\n}\r\n\r\nexport default MessageDialog\r\n","import classnames from \"classnames\"\r\nimport { FunctionComponent } from \"react\"\r\nimport { AiOutlineWarning } from \"react-icons/ai\"\r\nimport { Classes } from \"../../styles\"\r\nimport Divider from \"../Divider\"\r\nimport MessageDialog from \"./MessageDialog\"\r\n\r\nconst WarningDialog: FunctionComponent<{\r\n    open: boolean\r\n    title: string\r\n    message: React.ReactElement | string\r\n    onDone: () => void\r\n    buttonLabel?: string\r\n    iconColor?: string\r\n    useClickOutside?: boolean\r\n    wideMargins?: boolean\r\n    fullScreen?: boolean\r\n    cancelButton?: boolean\r\n    onCancel?: () => void\r\n}> = ({\r\n    open,\r\n    title,\r\n    message,\r\n    onDone,\r\n    buttonLabel = \"OK\",\r\n    iconColor = \"text-yellow-500\",\r\n    useClickOutside = true,\r\n    wideMargins = true,\r\n    fullScreen = false,\r\n    cancelButton = false,\r\n    onCancel,\r\n}) => {\r\n    return (\r\n        <MessageDialog\r\n            header={\r\n                <AiOutlineWarning\r\n                    className={classnames(\r\n                        \"w-16 h-16 mb-2 block m-auto\",\r\n                        iconColor\r\n                    )}\r\n                />\r\n            }\r\n            footer={\r\n                <>\r\n                    <div\r\n                        className={\r\n                            !fullScreen ? (wideMargins ? \"-mx-6\" : \"-mx-3\") : \"\"\r\n                        }\r\n                    >\r\n                        <Divider />\r\n                    </div>\r\n                    <div className=\"p-1 w-full flex\">\r\n                        {cancelButton && onCancel && (\r\n                            <button\r\n                                className={classnames(\r\n                                    Classes.liteButton,\r\n                                    \"w-3/6 mt-4\",\r\n                                    fullScreen && \"mx-4\"\r\n                                )}\r\n                                onClick={onCancel}\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                        )}\r\n                        <button\r\n                            className={classnames(\r\n                                Classes.liteButton,\r\n                                \"mt-4\",\r\n                                fullScreen && \"mx-4\",\r\n                                cancelButton && onCancel && \"w-3/6\"\r\n                            )}\r\n                            onClick={onDone}\r\n                        >\r\n                            {buttonLabel}\r\n                        </button>\r\n                    </div>\r\n                </>\r\n            }\r\n            onClickOutside={useClickOutside ? onDone : undefined}\r\n            title={title}\r\n            message={message}\r\n            open={open}\r\n            wideMargins={wideMargins}\r\n            fullScreen={fullScreen}\r\n        />\r\n    )\r\n}\r\n\r\nexport default WarningDialog\r\n","import { Devices } from \"../context/commTypes\"\r\nexport interface ConnectionSeptInfo {\r\n    label: string | string[] | React.ReactElement[]\r\n    info?: string\r\n}\r\nexport type StepData = {\r\n    [device in Devices]: ConnectionSeptInfo[]\r\n}\r\n\r\nexport const DEVICE_RECONNECTION_WARNING_STEPS: StepData = {\r\n    LEDGER: [\r\n        { label: \"Only a single Ledger is plugged in\" },\r\n        { label: \"Your device is unlocked\" },\r\n        {\r\n            label: \"The Ethereum App is open\",\r\n            info: \"Always use the Ledger Ethereum App in combination with BlockWallet\",\r\n        },\r\n    ],\r\n    TREZOR: [\r\n        { label: \"Only a single Trezor is plugged in\" },\r\n        { label: \"You have followed the steps on Trezor Connect page\" },\r\n    ],\r\n}\r\n\r\nexport const DEVICE_CONNECTION_STEPS: StepData = {\r\n    LEDGER: [\r\n        { label: \"Plug in a your Ledger device\" },\r\n        { label: \"Enter Ledger pin to unlock\" },\r\n        {\r\n            label: \"Open the Ethereum App\",\r\n            info: \"Always use the Ledger Ethereum App in combination with BlockWallet\",\r\n        },\r\n        { label: 'Click \"Continue\" below and select your Ledger' },\r\n    ],\r\n    TREZOR: [\r\n        { label: \"Plug in a your Trezor device\" },\r\n        { label: 'Click \"Continue\" below' },\r\n        { label: \"Follow steps on Trezor Connect page\" },\r\n    ],\r\n}\r\n","\r\nimport log from \"loglevel\"\r\n\r\nconst LEDGER_USB_VENDOR_ID = 0x2c97\r\n\r\n/**\r\n * User gesture to request access to connected devices filtered by vendor\r\n * @returns boolean if user granted permissions to a device\r\n */\r\nexport const requestConnectDevice = async () => {\r\n    try {\r\n        //LEDGER vendorId 0x2c97\r\n        const connectedDevices = await navigator.hid.requestDevice({\r\n            filters: [{ vendorId: LEDGER_USB_VENDOR_ID }],\r\n        });\r\n\r\n        const approvedDevices = connectedDevices.some(\r\n            (device) => device.vendorId === LEDGER_USB_VENDOR_ID,\r\n        );\r\n\r\n\r\n        if (!approvedDevices) {\r\n            log.error('LEDGER > No device selected')\r\n            return false\r\n        }\r\n\r\n        return true\r\n    }\r\n    catch (error) {\r\n        log.error('error ', error)\r\n    }\r\n}","import { CgSpinner } from \"react-icons/cg\"\r\n\r\nconst LoadingOverlay = () => (\r\n    <div className=\"fixed inset-0 w-full h-screen z-50 overflow-hidden bg-gray-100 opacity-75 flex flex-col items-center justify-center\">\r\n        <CgSpinner\r\n            size={\"5em\"}\r\n            className=\"animate-spin text-primary-300 opacity-50\"\r\n        />\r\n    </div>\r\n)\r\n\r\nexport default LoadingOverlay\r\n","import { createContext, useContext, useEffect, useState } from \"react\"\r\nimport LoadingOverlay from \"../../components/loading/LoadingOverlay\"\r\nimport { getWindowId } from \"../commActions\"\r\n\r\nexport const WindowIdContext = createContext({\r\n    windowId: \"\",\r\n})\r\n\r\nconst WindowIdProvider = ({\r\n    children,\r\n}: {\r\n    children: React.ReactNode | undefined\r\n}) => {\r\n    const [windowId, setWindowId] = useState(\"\")\r\n\r\n    useEffect(() => {\r\n        async function get() {\r\n            const wId = await getWindowId()\r\n            setWindowId(wId)\r\n        }\r\n        get()\r\n    }, [])\r\n\r\n    return (\r\n        <WindowIdContext.Provider value={{ windowId }}>\r\n            {!windowId ? <LoadingOverlay /> : children}\r\n        </WindowIdContext.Provider>\r\n    )\r\n}\r\n\r\nconst useWindowId = () => useContext(WindowIdContext)\r\n\r\nexport { WindowIdProvider }\r\nexport default useWindowId\r\n","export function timeExceedsTTL(lastTime: number, ttl: number): boolean {\r\n    const now = new Date().getTime()\r\n    return now - lastTime > ttl\r\n}\r\n\r\nexport const calculateRemainingSeconds = (\r\n    startTime: number | undefined,\r\n    timeout: number | undefined,\r\n    minValue: number = 0\r\n) => {\r\n    if (startTime && timeout) {\r\n        const now = new Date()\r\n        const timeEllapsed = now.getTime() - startTime\r\n        const remainingTime = Math.max(timeout - timeEllapsed, 0)\r\n        const remainingSeconds = Math.abs(remainingTime / 1000)\r\n        return Math.max(remainingSeconds, minValue)\r\n    }\r\n    return undefined\r\n}\r\n\r\nconst twoDigits = (value: number) => {\r\n    return value.toLocaleString(\"en-US\", {\r\n        minimumIntegerDigits: 2,\r\n        useGrouping: false,\r\n    })\r\n}\r\n\r\nexport const secondsToMMSS = (seconds: number) => {\r\n    const minutes = Math.floor(seconds / 60)\r\n    let remainingSeconds = seconds\r\n    if (minutes > 0) {\r\n        remainingSeconds = Math.floor(seconds % 60)\r\n    }\r\n\r\n    return `${minutes ? twoDigits(minutes).concat(\":\") : \"\"}${twoDigits(\r\n        Number(remainingSeconds.toLocaleString().split(\".\")[0])\r\n    )} ${minutes > 0 ? \"minutes\" : \"seconds\"}`\r\n}\r\n\r\nexport const secondsToEstimatedMinutes = (seconds: number) => {\r\n    const minutes = Math.floor(seconds / 60)\r\n    let legend = \"minutes\"\r\n    if (minutes <= 0) {\r\n        legend = \"minute\"\r\n    }\r\n\r\n    return `< ${minutes + 1} ${legend}`\r\n}\r\n","import { timeExceedsTTL } from \"./time\"\r\n\r\nconst VOLATILE_LOCAL_STORAGE_PREFIX = \"volatile\"\r\nconst VOLATILE_ITEMS_REGEX = new RegExp(`^${VOLATILE_LOCAL_STORAGE_PREFIX}\\\\.`)\r\n\r\nfunction saveLocalStorageItem(\r\n    key: string,\r\n    data: any,\r\n    windowId?: string | number\r\n) {\r\n    if (typeof window === \"undefined\") {\r\n        return undefined\r\n    }\r\n\r\n    if (!data) {\r\n        return window.localStorage.removeItem(key)\r\n    }\r\n\r\n    let toStore = {\r\n        value: data,\r\n        windowId,\r\n        updateTime: new Date().getTime(),\r\n    }\r\n    window.localStorage.setItem(key, JSON.stringify(toStore))\r\n}\r\n\r\nfunction retrieveLocalStorageItem(\r\n    key: string,\r\n    windowId?: string | number,\r\n    ttl?: number\r\n) {\r\n    if (typeof window === \"undefined\") {\r\n        return undefined\r\n    }\r\n\r\n    const storedData = window.localStorage.getItem(key)\r\n    if (!storedData) {\r\n        return null\r\n    }\r\n    try {\r\n        const parsedData = JSON.parse(storedData)\r\n        if (windowId && parsedData.windowId) {\r\n            if (parsedData.windowId !== windowId) {\r\n                return null\r\n            }\r\n        }\r\n        if (ttl && parsedData.updateTime) {\r\n            const lastUpdateTime = new Date(parsedData.updateTime).getTime()\r\n            if (timeExceedsTTL(lastUpdateTime, ttl)) {\r\n                window.localStorage.removeItem(key)\r\n                return null\r\n            }\r\n        }\r\n        return parsedData.value\r\n    } catch (e) {\r\n        return storedData\r\n    }\r\n}\r\n\r\nfunction findLocalStorageItems(query: RegExp | string = \"\") {\r\n    const results = []\r\n    for (let item in window.localStorage) {\r\n        if (window.localStorage.hasOwnProperty(item)) {\r\n            if (item.match(query) || (!query && typeof item === \"string\")) {\r\n                results.push({\r\n                    key: item,\r\n                    value: JSON.parse(window.localStorage.getItem(item) ?? \"\"),\r\n                })\r\n            }\r\n        }\r\n    }\r\n    return results\r\n}\r\n\r\n/**\r\n * Erases all the `window.localSotrage` keys that matches the provided query.\r\n * If the query is not specified, then all the items are going to be erased\r\n * @param query Regex or string that matches the window.localStorage keys to delete.\r\n */\r\nfunction clearLocalStorageItems(query: RegExp | string = \"\") {\r\n    const items = findLocalStorageItems(query)\r\n    items.forEach(({ key }) => {\r\n        window.localStorage.removeItem(key)\r\n    })\r\n}\r\n\r\nfunction clearVolatileLocalStorageItems() {\r\n    return clearLocalStorageItems(VOLATILE_ITEMS_REGEX)\r\n}\r\n\r\nfunction generateVolatileLocalStorageKey(key: string): string {\r\n    if (key.match(new RegExp(VOLATILE_ITEMS_REGEX))) {\r\n        return key\r\n    }\r\n    return `${VOLATILE_LOCAL_STORAGE_PREFIX}.${key}`\r\n}\r\n\r\nexport {\r\n    clearLocalStorageItems,\r\n    generateVolatileLocalStorageKey,\r\n    clearVolatileLocalStorageItems,\r\n    saveLocalStorageItem,\r\n    retrieveLocalStorageItem,\r\n}\r\n","import { Dispatch, SetStateAction, useEffect, useState } from \"react\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport useWindowId from \"../../context/hooks/useWindowId\"\r\nimport {\r\n    clearVolatileLocalStorageItems,\r\n    generateVolatileLocalStorageKey,\r\n    retrieveLocalStorageItem,\r\n    saveLocalStorageItem,\r\n} from \"../localSotrage\"\r\n\r\nexport interface useLocalStorageStateOptions<T> {\r\n    initialValue: T | undefined\r\n    volatile?: boolean\r\n    ttl?: number //in millis\r\n    deserializer?: (rawData: any) => T //must be memoized\r\n}\r\n\r\nconst defaultOptions: useLocalStorageStateOptions<any> = {\r\n    initialValue: {},\r\n    volatile: true,\r\n}\r\n\r\n/**\r\n * This hook persist the state in the window.localStorage and takes care of keeping that synchronization.\r\n * Every window.localStorage item is going to be tied to the current windowId where the wallet is currently running.\r\n *\r\n * By default, we will asume that you want to sotre volatile data here, so that a prefix a `volatile.`\r\n * will be appended to the key. You can turn it off by specifying the option `volatile: false`.\r\n * Volatile keys are erased once you change the `history.location`.\r\n *\r\n *\r\n * @param key the key you want to use to store the info in the window.localStorage. This value can be modified depending on the blockWalletState option value.\r\n * @param stateOptions\r\n * @returns [state,setState]\r\n */\r\nfunction useLocalStorageState<T>(\r\n    key: string,\r\n    stateOptions: useLocalStorageStateOptions<T>\r\n): [T, Dispatch<SetStateAction<T>>] {\r\n    const { initialValue, volatile, ttl } = {\r\n        ...defaultOptions,\r\n        ...stateOptions,\r\n    }\r\n    const { windowId } = useWindowId()\r\n    const history = useHistory()\r\n\r\n    const storageKey = volatile ? generateVolatileLocalStorageKey(key) : key\r\n\r\n    // State to store our value\r\n    // Pass initial state function to useState so logic is only executed once\r\n    const [state, setState] = useState<T>(() => {\r\n        const data = retrieveLocalStorageItem(storageKey, windowId, ttl)\r\n        if (!data) {\r\n            saveLocalStorageItem(storageKey, initialValue, windowId)\r\n            return initialValue\r\n        }\r\n        return stateOptions.deserializer\r\n            ? stateOptions.deserializer(data)\r\n            : data\r\n    })\r\n\r\n    useEffect(() => {\r\n        saveLocalStorageItem(storageKey, state, windowId)\r\n    }, [state, storageKey, windowId])\r\n\r\n    useEffect(() => {\r\n        let unlisten: any = null\r\n        if (volatile) {\r\n            unlisten = history.listen(() => {\r\n                clearVolatileLocalStorageItems()\r\n            })\r\n        }\r\n        return () => {\r\n            if (unlisten) {\r\n                unlisten()\r\n            }\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n    return [state, setState]\r\n}\r\n\r\nexport default useLocalStorageState\r\n","import bridgeIcon from \"../assets/images/icons/bridge.json\"\r\nimport confirmationCheck from \"../assets/images/icons/confirmation_check.json\"\r\nimport deviceInteraction from \"../assets/images/icons/device_interaction.json\"\r\nimport blueLineLoadingSkeleton from \"../assets/images/icons/blueline_skeleton.json\"\r\nimport greyLineLoadingSkeleton from \"../assets/images/icons/greyline_skeleton.json\"\r\nimport greyCircleLoadingSkeleton from \"../assets/images/icons/greycircle_skeleton.json\"\r\nimport blueCircleLoadingSkeleton from \"../assets/images/icons/bluecircle_skeleton.json\"\r\nimport lottie, { AnimationItem } from \"lottie-web\"\r\nimport successAnim from \"../assets/images/icons/checkmark_notes.json\"\r\nimport { useEffect, useRef, FunctionComponent } from \"react\"\r\nimport classNames from \"classnames\"\r\n\r\nexport enum AnimatedIconName {\r\n    Bridge,\r\n    ConfirmationCheck,\r\n    DeviceInteraction,\r\n    Success,\r\n    BlueLineLoadingSkeleton,\r\n    GreyLineLoadingSkeleton,\r\n    GreyCircleLoadingSkeleton,\r\n    BlueCircleLoadingSkeleton,\r\n}\r\n\r\ntype AnimationType = {\r\n    data: any\r\n    autoplay?: boolean\r\n    hover?: boolean\r\n    loop?: boolean\r\n}\r\n\r\nconst Animations: { [anim: number]: AnimationType } = {\r\n    [AnimatedIconName.Bridge]: {\r\n        autoplay: false,\r\n        data: bridgeIcon,\r\n        hover: true,\r\n    },\r\n    [AnimatedIconName.ConfirmationCheck]: {\r\n        data: confirmationCheck,\r\n    },\r\n    [AnimatedIconName.DeviceInteraction]: {\r\n        data: deviceInteraction,\r\n        loop: true,\r\n    },\r\n    [AnimatedIconName.Success]: {\r\n        data: successAnim,\r\n    },\r\n    [AnimatedIconName.BlueLineLoadingSkeleton]: {\r\n        data: blueLineLoadingSkeleton,\r\n        loop: true,\r\n    },\r\n    [AnimatedIconName.GreyLineLoadingSkeleton]: {\r\n        data: greyLineLoadingSkeleton,\r\n        loop: true,\r\n    },\r\n    [AnimatedIconName.GreyCircleLoadingSkeleton]: {\r\n        data: greyCircleLoadingSkeleton,\r\n        loop: true,\r\n    },\r\n    [AnimatedIconName.BlueCircleLoadingSkeleton]: {\r\n        data: blueCircleLoadingSkeleton,\r\n        loop: true,\r\n    },\r\n}\r\n\r\ninterface AnimationProps {\r\n    icon: AnimatedIconName\r\n    className?: string\r\n    svgClassName?: string\r\n}\r\n\r\nconst AnimatedIcon: FunctionComponent<AnimationProps> = ({\r\n    icon,\r\n    className,\r\n    svgClassName,\r\n}: AnimationProps) => {\r\n    const element = useRef<HTMLDivElement>(null)\r\n    const lottieInstance = useRef<AnimationItem>()\r\n\r\n    const animationData = Animations[icon]\r\n\r\n    useEffect(() => {\r\n        if (element.current) {\r\n            const instance = lottie.loadAnimation({\r\n                animationData: animationData.data,\r\n                autoplay: animationData.autoplay ?? true,\r\n                rendererSettings: {\r\n                    preserveAspectRatio: \"xMidYMid slice\",\r\n                    className: svgClassName,\r\n                },\r\n                loop: animationData.loop ?? false,\r\n                container: element.current,\r\n            })\r\n\r\n            instance.addEventListener(\"complete\", () => {\r\n                if (animationData.hover && !animationData.loop) {\r\n                    instance.stop()\r\n                }\r\n            })\r\n\r\n            lottieInstance.current = instance\r\n        }\r\n\r\n        return () => lottieInstance.current && lottieInstance.current.destroy()\r\n    }, [animationData])\r\n\r\n    return (\r\n        <div\r\n            className={classNames(className, \"w-full h-full\")}\r\n            onMouseEnter={() => {\r\n                if (animationData.hover) {\r\n                    lottieInstance.current?.play()\r\n                }\r\n            }}\r\n            ref={element}\r\n        ></div>\r\n    )\r\n}\r\n\r\nexport default AnimatedIcon\r\n","import { useEffect } from \"react\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport useLocalStorageState from \"./useLocalStorageState\"\r\n\r\nconst LAST_LOCATION_KEY = \"lastLocation\"\r\n\r\nconst useLocationRecovery = () => {\r\n    const [lastLocation, setLastLocation] = useLocalStorageState<any>(\r\n        LAST_LOCATION_KEY,\r\n        {\r\n            initialValue: undefined,\r\n            volatile: false,\r\n        }\r\n    )\r\n    return {\r\n        clear: () => setLastLocation(undefined),\r\n        lastLocation,\r\n        persist: setLastLocation,\r\n    }\r\n}\r\n\r\nconst useLocationRecoveryListener = (blockList: string[] = []) => {\r\n    const { location } = useHistory()\r\n    const { persist, clear } = useLocationRecovery()\r\n    useEffect(() => {\r\n        async function store() {\r\n            if (!blockList.includes(location.pathname)) {\r\n                persist(location)\r\n            } else {\r\n                clear()\r\n            }\r\n        }\r\n        store()\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [location, blockList])\r\n}\r\n\r\nexport { useLocationRecovery, useLocationRecoveryListener }\r\n","import { useLocationRecovery } from \"../../util/hooks/useLocationRecovery\"\r\nimport { clearVolatileLocalStorageItems } from \"../../util/localSotrage\"\r\n\r\nconst useClearStickyStorage = () => {\r\n    const { clear: clearLocationRecovery } = useLocationRecovery()\r\n    return {\r\n        clear: () => {\r\n            //By doing this, we clean the local variable that indicates where to recover the location\r\n            clearLocationRecovery()\r\n            //By doing this, we clean all the localStorage data used for forms like deposits and send.\r\n            clearVolatileLocalStorageItems()\r\n        },\r\n    }\r\n}\r\nexport default useClearStickyStorage\r\n","import { connectHardwareWallet } from \"../../context/commActions\"\r\nimport { Devices } from \"../../context/commTypes\"\r\nimport { requestConnectDevice } from \"../../context/util/requestConnectDevice\"\r\nimport useAsyncInvoke from \"./useAsyncInvoke\"\r\nimport log from \"loglevel\"\r\nimport useClearStickyStorage from \"../../context/hooks/useClearStickyStorage\"\r\n\r\nconst executeConnect = async (vendor: Devices): Promise<boolean> => {\r\n    // If we add transport type selection, here we should validate if it's WebHID\r\n    if (vendor === Devices.LEDGER) {\r\n        const connectionOk = await requestConnectDevice()\r\n        if (!connectionOk) {\r\n            return Promise.resolve(false)\r\n        }\r\n    }\r\n    try {\r\n        return await connectHardwareWallet(vendor)\r\n    } catch (e) {\r\n        log.error(e)\r\n    }\r\n    return Promise.resolve(false)\r\n}\r\n\r\nconst useHardwareWalletConnect = (isReconnecting = false) => {\r\n    const { run, isLoading, isError, isSuccess } = useAsyncInvoke()\r\n    const { clear: clearStickyStorage } = useClearStickyStorage()\r\n\r\n    return {\r\n        connect: async (vendor: Devices) => {\r\n            // Get rid of the sticky storage data\r\n            // as the user should see the home page after the connection\r\n            // when opening the extension again.\r\n            if (!isReconnecting) {\r\n                clearStickyStorage()\r\n            }\r\n            return run(executeConnect(vendor))\r\n        },\r\n        isLoading,\r\n        isError,\r\n        isSuccess,\r\n    }\r\n}\r\n\r\nexport default useHardwareWalletConnect\r\n","import { openHardwareReconnect } from \"../../context/commActions\"\r\nimport { DEVICE_RECONNECTION_WARNING_STEPS } from \"../../util/connectionStepUtils\"\r\nimport WarningDialog from \"./WarningDialog\"\r\nimport ClickableText from \"../../components/button/ClickableText\"\r\nimport Divider from \"../Divider\"\r\nimport { Devices } from \"../../context/commTypes\"\r\nimport useHardwareWalletConnect from \"../../util/hooks/useHardwareWalletConnect\"\r\nimport { classnames } from \"../../styles\"\r\nimport { AiFillInfoCircle } from \"react-icons/ai\"\r\nimport Tooltip from \"../label/Tooltip\"\r\n\r\nconst HardwareDeviceNotLinkedDialog: React.FC<{\r\n    isOpen: boolean\r\n    onDone: () => void\r\n    vendor?: Devices\r\n    fullScreen?: boolean\r\n    showReconnect?: boolean\r\n    address?: string\r\n    useClickOutside?: boolean\r\n    cancelButton?: boolean\r\n    onCancel?: () => void\r\n}> = ({\r\n    isOpen,\r\n    onDone,\r\n    vendor,\r\n    address,\r\n    showReconnect = true,\r\n    fullScreen = false,\r\n    useClickOutside = true,\r\n    cancelButton = false,\r\n    onCancel,\r\n}) => {\r\n    const steps = vendor ? DEVICE_RECONNECTION_WARNING_STEPS[vendor] : []\r\n    const { connect } = useHardwareWalletConnect()\r\n    const connectAndClose = async () => {\r\n        try {\r\n            const resultOk = await connect(vendor!)\r\n            if (resultOk) {\r\n                onDone()\r\n            }\r\n        } catch (error) {}\r\n    }\r\n    return (\r\n        <WarningDialog\r\n            open={isOpen}\r\n            onDone={onDone}\r\n            title=\"Hardware device is not detected\"\r\n            fullScreen={fullScreen}\r\n            wideMargins={fullScreen}\r\n            message={\r\n                <div>\r\n                    <p className=\"pb-3\">\r\n                        We're having trouble connecting with your hardware\r\n                        device.\r\n                    </p>\r\n                    <Divider />\r\n                    <div className=\"text-left\">\r\n                        <p className={!fullScreen ? \"pt-3\" : \"pt-4\"}>\r\n                            Please ensure that you have:\r\n                        </p>\r\n                        <div\r\n                            className={classnames(\r\n                                \"w-full px-2\",\r\n                                !fullScreen\r\n                                    ? \"py-2 pb-1 space-y-1\"\r\n                                    : \"py-4 space-y-2\"\r\n                            )}\r\n                        >\r\n                            {steps.map((step, index) => (\r\n                                <div\r\n                                    className=\"flex flex-row items-center h-7\"\r\n                                    key={index}\r\n                                >\r\n                                    <span className=\"text-sm\">\r\n                                        {index + 1}.&nbsp;{step.label}\r\n                                    </span>\r\n                                    {step.info && (\r\n                                        <div className=\"group relative\">\r\n                                            <AiFillInfoCircle\r\n                                                size={26}\r\n                                                className=\"pl-2 text-primary-200 cursor-pointer hover:text-primary-300\"\r\n                                            />\r\n                                            <Tooltip\r\n                                                className=\"!-translate-x-48 !w-60 !break-word !whitespace-normal border boder-gray-300\"\r\n                                                content={step.info}\r\n                                            />\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                        {showReconnect && (\r\n                            <span className=\"text-xs\">\r\n                                Issue persists?{\" \"}\r\n                                <ClickableText\r\n                                    onClick={() =>\r\n                                        address\r\n                                            ? openHardwareReconnect(address)\r\n                                            : connectAndClose()\r\n                                    }\r\n                                >\r\n                                    reconnect your device\r\n                                </ClickableText>\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            }\r\n            buttonLabel={\"Try again\"}\r\n            useClickOutside={useClickOutside}\r\n            cancelButton={cancelButton}\r\n            onCancel={onCancel}\r\n        />\r\n    )\r\n}\r\n\r\nexport default HardwareDeviceNotLinkedDialog\r\n","import { useState } from \"react\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport log from \"loglevel\"\r\nimport { isAccountDeviceLinked } from \"../../context/commActions\"\r\nconst useCheckAccountDeviceLinked = () => {\r\n    const [isDeviceUnlinked, setIsDeviceUnlinked] = useState<boolean>(false)\r\n    const { selectedAddress } = useBlankState()!\r\n    const check = async () => {\r\n        try {\r\n            const deviceLinked = await isAccountDeviceLinked(selectedAddress)\r\n            if (!deviceLinked) {\r\n                setIsDeviceUnlinked(true)\r\n                return false\r\n            }\r\n        } catch (e) {\r\n            log.error(e)\r\n        }\r\n        return true\r\n    }\r\n\r\n    return {\r\n        isDeviceUnlinked,\r\n        checkDeviceIsLinked: check,\r\n        resetDeviceLinkStatus: () => setIsDeviceUnlinked(false),\r\n        //Wraps a function and checks whether the device is linked or not.\r\n        //If the device is linked, executes the wrapped function. If not, then the function ins not executed.\r\n        checkDeviceIsLinkedWrapper: (\r\n            wrappedFn: (...args: any) => any\r\n        ) => async (...args: any) => {\r\n            const ok = await check()\r\n            if (ok) {\r\n                return wrappedFn(...args)\r\n            }\r\n            return false\r\n        },\r\n    }\r\n}\r\n\r\nexport default useCheckAccountDeviceLinked\r\n","import { FunctionComponent } from \"react\"\r\nimport { classnames } from \"../../styles\"\r\n\r\n/**\r\n * # â ï¸\r\n * The `color` props expects a text color: `text-white`, `text-primary-300`, etc...\r\n */\r\nconst Spinner: FunctionComponent<{\r\n    size?: string\r\n    text?: string\r\n    iconTextSeparation?: string\r\n    color?: string\r\n}> = ({\r\n    size = \"1rem\",\r\n    text = \"\",\r\n    iconTextSeparation = \"4px\",\r\n    color = \"text-primary-100\",\r\n}) => (\r\n    <div\r\n        style={{ display: \"inline\" }}\r\n        role=\"alert\"\r\n        aria-busy=\"true\"\r\n        aria-label=\"loading\"\r\n    >\r\n        <svg\r\n            className=\"animate-spinner-rotate inline\"\r\n            style={{\r\n                marginRight: text && iconTextSeparation,\r\n            }}\r\n            viewBox=\"0 0 50 50\"\r\n            width={size}\r\n            height={size}\r\n        >\r\n            <circle\r\n                cx=\"25\"\r\n                cy=\"25\"\r\n                r=\"20\"\r\n                fill=\"none\"\r\n                className={classnames(\"stroke-current\", color)}\r\n                strokeWidth=\"2\"\r\n            ></circle>\r\n            <circle\r\n                cx=\"25\"\r\n                cy=\"25\"\r\n                r=\"20\"\r\n                fill=\"none\"\r\n                strokeWidth=\"2\"\r\n                className=\"animate-spinner-dash stroke-primary-300 linecap-round\"\r\n            ></circle>\r\n        </svg>\r\n        {text}\r\n    </div>\r\n)\r\n\r\nexport default Spinner\r\n","import MessageDialog from \"./MessageDialog\"\r\nimport Spinner from \"../spinner/ThinSpinner\"\r\n\r\nexport type loadingDialogProps = {\r\n    open: boolean\r\n    title: React.ReactElement | string\r\n    message: React.ReactElement | string\r\n    customSpinner?: React.ReactNode\r\n}\r\n\r\nconst LoadingDialog = ({\r\n    open,\r\n    title,\r\n    message,\r\n    customSpinner,\r\n}: loadingDialogProps) => {\r\n    return (\r\n        <MessageDialog\r\n            open={open}\r\n            onClickOutside={() => {}}\r\n            title={title}\r\n            message={message}\r\n            header={\r\n                <>\r\n                    {customSpinner ? (\r\n                        customSpinner\r\n                    ) : (\r\n                        <div className=\"flex justify-center items-center\">\r\n                            <Spinner size=\"48px\" />\r\n                        </div>\r\n                    )}\r\n                </>\r\n            }\r\n        />\r\n    )\r\n}\r\n\r\nexport default LoadingDialog\r\n","import { FunctionComponent, useEffect } from \"react\"\r\nimport { CgDanger } from \"react-icons/cg\"\r\nimport classnames from \"classnames\"\r\n\r\nimport MessageDialog, { messageDialogProps } from \"./MessageDialog\"\r\nimport Divider from \"../Divider\"\r\n\r\nimport { Classes } from \"../../styles\"\r\n\r\ntype ErrorDialogProps = messageDialogProps & {\r\n    onDone: React.MouseEventHandler<HTMLButtonElement> | (() => void)\r\n    timeout?: number // If setted, it will trigger onClickButton() after timeout value\r\n    hideButton?: boolean\r\n}\r\n\r\nconst ErrorDialog: FunctionComponent<ErrorDialogProps> = ({\r\n    title,\r\n    message,\r\n    open,\r\n    hideButton,\r\n    onClickOutside,\r\n    onDone,\r\n    timeout,\r\n}) => {\r\n    useEffect(() => {\r\n        if (timeout && open) {\r\n            const timer = setTimeout(onDone, timeout)\r\n            return () => clearTimeout(timer)\r\n        }\r\n    }, [onDone, open, timeout])\r\n\r\n    return (\r\n        <MessageDialog\r\n            title={title}\r\n            message={message}\r\n            open={open}\r\n            onClickOutside={onClickOutside}\r\n            header={\r\n                <CgDanger className=\"text-red-500 w-20 h-20 block m-auto\" />\r\n            }\r\n            footer={\r\n                !timeout &&\r\n                !hideButton && (\r\n                    <>\r\n                        <div className=\"-mx-6\">\r\n                            <Divider />\r\n                        </div>\r\n\r\n                        <button\r\n                            className={classnames(Classes.liteButton, \"mt-4\")}\r\n                            onClick={onDone}\r\n                        >\r\n                            OK\r\n                        </button>\r\n                    </>\r\n                )\r\n            }\r\n        />\r\n    )\r\n}\r\n\r\nexport default ErrorDialog\r\n","import {\r\n    Network,\r\n    Networks,\r\n} from \"@block-wallet/background/utils/constants/networks\"\r\nimport {\r\n    createCustomExplorerLink,\r\n    createCustomAccountLink,\r\n} from \"@block-wallet/explorer-link\"\r\nimport { capitalize } from \"./capitalize\"\r\n\r\nexport const getChainIdFromNetwork = (networks: Networks, network?: String) => {\r\n    if (!network) {\r\n        return undefined\r\n    }\r\n\r\n    return Object.values(networks).find((i) => i.name === network)?.chainId\r\n}\r\n\r\nexport const getNetworkFromChainId = (\r\n    networks: Networks,\r\n    chainId: number\r\n): Network | undefined => {\r\n    return Object.values(networks).find((i) => i.chainId === chainId)\r\n}\r\n\r\n/**\r\n * Util to return a formatted network name from a given chain id\r\n *\r\n * @param chainId - Chain id hex string\r\n * @returns Chain name or 'Unknown'\r\n */\r\nexport const getNetworkNameFromChainId = (\r\n    networks: Networks,\r\n    chainId: number,\r\n    nameOrDesc: \"name\" | \"desc\" = \"name\"\r\n): string => {\r\n    const network = Object.values(networks).find((i) => i.chainId === chainId)\r\n\r\n    const networkName = network !== undefined ? network[nameOrDesc] : undefined\r\n\r\n    if (networkName) {\r\n        return networkName\r\n    } else {\r\n        return \"Unknown\"\r\n    }\r\n}\r\n\r\nexport const generateExplorerLink = (\r\n    networks: Networks,\r\n    networkName: string,\r\n    value: string,\r\n    type: \"tx\" | \"address\"\r\n) => {\r\n    const chainId = getChainIdFromNetwork(networks, networkName)\r\n    if (!chainId) {\r\n        return undefined\r\n    }\r\n\r\n    const network = getNetworkFromChainId(networks, chainId)\r\n    if (!network) {\r\n        return undefined\r\n    }\r\n\r\n    if (!network.blockExplorerUrls || network.blockExplorerUrls.length < 1) {\r\n        return undefined\r\n    }\r\n\r\n    if (type === \"tx\") {\r\n        return createCustomExplorerLink(value, network.blockExplorerUrls[0])\r\n    } else if (type === \"address\") {\r\n        return createCustomAccountLink(value, network.blockExplorerUrls[0])\r\n    }\r\n}\r\n\r\nexport const getExplorerTitle = (networks: Networks, networkName: string) => {\r\n    const chainId = getChainIdFromNetwork(networks, networkName)\r\n\r\n    if (!chainId) {\r\n        return \"Explorer\"\r\n    }\r\n\r\n    const network = getNetworkFromChainId(networks, chainId)\r\n    if (!networkName) {\r\n        return \"Explorer\"\r\n    }\r\n\r\n    return network?.blockExplorerName || \"Explorer\"\r\n}\r\n","import classnames from \"classnames\"\r\nimport { AccountInfo } from \"@block-wallet/background/controllers/AccountTrackerController\"\r\nimport { isHardwareWallet } from \"../../util/account\"\r\nimport Icon, { IconName } from \"../ui/Icon\"\r\n\r\nexport enum AccountMenuOptionType {\r\n    REMOVE_ACCOUNT = \"REMOVE_ACCOUNT\",\r\n    REMOVE_CONTACT = \"REMOVE_CONTACT\",\r\n    EDIT = \"EDIT\",\r\n    HIDE_ACCOUNT = \"HIDE_ACCOUNT\",\r\n    UNHIDE_ACCOUNT = \"UNHIDE_ACCOUNT\",\r\n    CUSTOM = \"CUSTOM\",\r\n}\r\n\r\nexport interface AccountDisplayMenuOption {\r\n    optionType: AccountMenuOptionType\r\n    handler?: (accountAddress: string) => void\r\n    component?: React.ComponentType<any>\r\n    disabled?: boolean\r\n}\r\n\r\nconst RemoveOption: React.FC<any> = ({ onClick }) => {\r\n    return (\r\n        <div\r\n            onClick={onClick}\r\n            className=\"flex flex-row space-x-2 items-center text-red-500\"\r\n        >\r\n            <Icon name={IconName.TRASH_BIN} profile=\"danger\" />\r\n            <span>Remove</span>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst EditOption: React.FC<any> = ({ onClick }) => {\r\n    return (\r\n        <div\r\n            className=\"flex flex-row space-x-2 items-center text-black\"\r\n            onClick={onClick}\r\n        >\r\n            <div className=\"pr-3\">\r\n                <Icon name={IconName.PENCIL} />\r\n            </div>\r\n            <span>Edit</span>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst HideAccountOption: React.FC<any> = ({ onClick, disabled }) => {\r\n    return (\r\n        <div\r\n            className={classnames(\r\n                \"flex flex-row space-x-2 items-center text-black\",\r\n                disabled && \"opacity-50 pointer-events-none\"\r\n            )}\r\n            onClick={onClick}\r\n        >\r\n            <Icon name={IconName.CROSSED_OUT_EYE} />\r\n            <span>Hide</span>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst UnHideAccountOption: React.FC<any> = ({ onClick, disabled }) => {\r\n    return (\r\n        <div\r\n            className={classnames(\r\n                \"flex flex-row space-x-2 items-center text-black\",\r\n                disabled && \"opacity-50 pointer-events-none\"\r\n            )}\r\n            onClick={onClick}\r\n        >\r\n            <Icon name={IconName.EYE} />\r\n            <span>Unhide</span>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst MENU_ITEM_BY_OPTION = {\r\n    [AccountMenuOptionType.CUSTOM]: null,\r\n    [AccountMenuOptionType.REMOVE_CONTACT]: RemoveOption,\r\n    [AccountMenuOptionType.REMOVE_ACCOUNT]: RemoveOption,\r\n    [AccountMenuOptionType.EDIT]: EditOption,\r\n    [AccountMenuOptionType.HIDE_ACCOUNT]: HideAccountOption,\r\n    [AccountMenuOptionType.UNHIDE_ACCOUNT]: UnHideAccountOption,\r\n}\r\n\r\nexport interface AccountMenuOptionMetadata {\r\n    requiresConfirmation: boolean\r\n    Component: React.ComponentType<any>\r\n    handler: (accountAddress: string) => void\r\n    confirmationTitle?: string\r\n    confirmationMessage?: string\r\n}\r\n\r\nexport const getAccountMenuOptionMetadata = (\r\n    menuItem: AccountDisplayMenuOption,\r\n    account: AccountInfo\r\n): AccountMenuOptionMetadata => {\r\n    let defaultConfig = {\r\n        Component:\r\n            MENU_ITEM_BY_OPTION[menuItem.optionType] || menuItem.component!,\r\n        handler: menuItem.handler!,\r\n        requiresConfirmation: false,\r\n    }\r\n    switch (menuItem.optionType) {\r\n        case AccountMenuOptionType.REMOVE_CONTACT: {\r\n            return {\r\n                ...defaultConfig,\r\n                requiresConfirmation: true,\r\n                confirmationTitle: \"Remove contact\",\r\n                confirmationMessage: `Are you sure you want to remove this contact: ${account.name}?`,\r\n            }\r\n        }\r\n        case AccountMenuOptionType.HIDE_ACCOUNT: {\r\n            return {\r\n                ...defaultConfig,\r\n                requiresConfirmation: true,\r\n                confirmationTitle: \"Hide Account\",\r\n                confirmationMessage: `Hiding this account will remove it from your account list. All data, including assets and activities, will be deleted. You can access or re-add this account in the âMy Accountsâ page at any time.`,\r\n            }\r\n        }\r\n        case AccountMenuOptionType.REMOVE_ACCOUNT: {\r\n            return {\r\n                ...defaultConfig,\r\n                requiresConfirmation: true,\r\n                confirmationTitle: \"Remove External Account\",\r\n                confirmationMessage: isHardwareWallet(account.accountType)\r\n                    ? \"Removing an external account deletes all connected data from BlockWallet. You can re-connect your hardware wallet account at any time. Are you sure you want to remove this hardware wallet account?\"\r\n                    : \"Removing an external account deletes all connected data from BlockWallet. You can re-add your external account at any time using your private key. Are you sure you want to remove this external account?\",\r\n            }\r\n        }\r\n    }\r\n    return defaultConfig\r\n}\r\n","export default __webpack_public_path__ + \"static/media/arrow_right.f5e42c9a.svg\";","import { FunctionComponent, useEffect } from \"react\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { generateExplorerLink, getExplorerTitle } from \"../../util/getExplorer\"\r\nimport Divider from \"../Divider\"\r\nimport AnimatedIcon, { AnimatedIconName } from \"../AnimatedIcon\"\r\nimport arrow from \"../../assets/images/icons/arrow_right.svg\"\r\nimport classnames from \"classnames\"\r\nimport { Classes } from \"../../styles\"\r\nimport MessageDialog, { messageDialogProps } from \"./MessageDialog\"\r\n\r\nconst SuccessDialog: FunctionComponent<\r\n    messageDialogProps & {\r\n        open: boolean\r\n        title: React.ReactElement | string\r\n        message: React.ReactElement | string\r\n        hideButton?: boolean\r\n        timeout?: number // If setted, it will trigger onDone() after timeout value\r\n        txHash?: string // If valid hash, shows explorer link i.e. View on Etherscan\r\n        onDone: () => void\r\n    }\r\n> = ({\r\n    open,\r\n    title,\r\n    message,\r\n    timeout,\r\n    txHash,\r\n    hideButton,\r\n    onDone,\r\n    onClickOutside,\r\n}) => {\r\n    const { selectedNetwork, availableNetworks } = useBlankState()!\r\n\r\n    const explorerName = getExplorerTitle(availableNetworks, selectedNetwork)\r\n\r\n    useEffect(() => {\r\n        if (timeout && open) {\r\n            const timer = setTimeout(() => onDone(), timeout)\r\n            return () => clearTimeout(timer)\r\n        }\r\n    }, [onDone, open, timeout])\r\n\r\n    return (\r\n        <MessageDialog\r\n            title={title}\r\n            message={message}\r\n            open={open}\r\n            onClickOutside={onClickOutside || onDone}\r\n            header={\r\n                <div className=\"flex justify-center\">\r\n                    <AnimatedIcon\r\n                        icon={AnimatedIconName.ConfirmationCheck}\r\n                        className=\"w-12 h-12 pointer-events-none\"\r\n                    />\r\n                </div>\r\n            }\r\n            footer={\r\n                <>\r\n                    {txHash && (\r\n                        <div className=\"flex w-full items-center justify-center -mt-2 mb-4\">\r\n                            <a\r\n                                href={generateExplorerLink(\r\n                                    availableNetworks,\r\n                                    selectedNetwork,\r\n                                    txHash,\r\n                                    \"tx\"\r\n                                )}\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"flex flex-row items-center space-x-2 text-sm font-bold text-primary-300\"\r\n                            >\r\n                                <span>View on {explorerName}</span>\r\n                                <img\r\n                                    src={arrow}\r\n                                    alt=\"arrow\"\r\n                                    className=\"w-3 h-3\"\r\n                                />\r\n                            </a>\r\n                        </div>\r\n                    )}\r\n\r\n                    {!timeout && !hideButton && (\r\n                        <>\r\n                            <div className=\"-mx-6\">\r\n                                <Divider />\r\n                            </div>\r\n                            <button\r\n                                onClick={onDone}\r\n                                className={classnames(\r\n                                    Classes.liteButton,\r\n                                    \"mt-4\"\r\n                                )}\r\n                                type=\"button\"\r\n                            >\r\n                                Done\r\n                            </button>\r\n                        </>\r\n                    )}\r\n                </>\r\n            }\r\n        />\r\n    )\r\n}\r\nexport default SuccessDialog\r\n","import { useReducer, ReactNode } from \"react\"\r\n\r\n// Components\r\nimport LoadingDialog from \"./LoadingDialog\"\r\nimport ErrorDialog from \"./ErrorDialog\"\r\nimport SuccessDialog from \"./SuccessDialog\"\r\n\r\ntype texts = {\r\n    loading: React.ReactElement | string\r\n    success: React.ReactElement | string\r\n    error: React.ReactElement | string\r\n}\r\ntype gifs = { loading: ReactNode | undefined }\r\nexport type status = \"idle\" | \"loading\" | \"success\" | \"error\"\r\nexport type loadingDialogProps = {\r\n    open: boolean\r\n    status: status\r\n    titles: texts\r\n    texts: texts\r\n    gifs?: gifs\r\n    onDone: () => void\r\n    timeout?: number // Success only: If setted, it will trigger onDone() after timeout value.\r\n    txHash?: string // Success only: If valid hash, shows explorer link i.e. View on Etherscan\r\n    hideButton?: boolean\r\n    clickOutsideToClose?: boolean\r\n}\r\n\r\ntype state = {\r\n    isOpen: boolean\r\n    status: status\r\n    texts?: Partial<texts>\r\n    titles?: Partial<texts>\r\n    gifs?: gifs\r\n}\r\n\r\ntype action =\r\n    | {\r\n          type: \"open\" | \"setStatus\"\r\n          payload: {\r\n              status: status\r\n              texts?: Partial<texts>\r\n              titles?: Partial<texts>\r\n              gifs?: gifs\r\n              forceOpen?: boolean\r\n          }\r\n      }\r\n    | {\r\n          type: \"close\"\r\n      }\r\n\r\nconst reducer = (state: state, action: action) => {\r\n    switch (action.type) {\r\n        case \"open\":\r\n            return {\r\n                status: action.payload.status,\r\n                isOpen: true,\r\n                texts: action.payload.texts,\r\n                titles: action.payload.titles,\r\n                gifs: action.payload.gifs,\r\n            }\r\n        case \"close\":\r\n            return {\r\n                ...state,\r\n                isOpen: false,\r\n                texts: undefined,\r\n                titles: undefined,\r\n                gifs: undefined,\r\n            }\r\n        case \"setStatus\":\r\n            return {\r\n                ...state,\r\n                status: action.payload.status,\r\n                texts: action.payload.texts,\r\n                titles: action.payload.titles,\r\n                gifs: action.payload.gifs,\r\n                isOpen: action.payload.forceOpen ? true : state.isOpen,\r\n            }\r\n    }\r\n}\r\n\r\nexport const useWaitingDialog = (\r\n    {\r\n        defaultStatus = \"loading\",\r\n        defaultIsOpen = false,\r\n    }: {\r\n        defaultStatus?: status\r\n        defaultIsOpen?: boolean\r\n    } = {\r\n        defaultStatus: \"loading\",\r\n        defaultIsOpen: false,\r\n    }\r\n) => {\r\n    const [state, dispatch] = useReducer(reducer, {\r\n        isOpen: defaultIsOpen,\r\n        status: defaultStatus,\r\n        texts: undefined,\r\n        titles: undefined,\r\n        gifs: undefined,\r\n    })\r\n\r\n    return {\r\n        ...state,\r\n        dispatch,\r\n    }\r\n}\r\n\r\n/**\r\n * ### Why?\r\n * WaitingDialog is way to easily implements this kind of flow:\r\n * ```\r\n * Loading -> Success | Error\r\n * ```\r\n * The component is based on a status that can take one of these value: `loading | success | error`\r\n * Depending on the status it'll show a different modal.\r\n *\r\n * ### How to use it?\r\n * To avoid repeating this kind of code:\r\n * ```\r\n * const [isOpen, setIsOpen] = useState(false)\r\n * const [status, setStatus] = useState('loading')\r\n * ```\r\n * You can use the hook that comes with the component:\r\n * ```\r\n * const { isOpen, status, dispatch } = useWaitingDialog()\r\n * ```\r\n *\r\n * If you want to update `isOpen` or `status`, you can do like so:\r\n * ```\r\n * // Set isOpen = false\r\n * dispatch({ type: \"close\" })\r\n *\r\n * // Set isOpen = true & status = 'loading | success | error'\r\n * dispatch({ type: \"open\", payload: { status: 'loading | success | error' }})\r\n *\r\n * // Set status = 'loading | success | error'\r\n * dispatch({ type: \"status\", payload: { status: 'loading | success | error' }})\r\n * ```\r\n */\r\nconst WaitingDialog = ({\r\n    open,\r\n    status,\r\n    titles,\r\n    texts,\r\n    gifs,\r\n    txHash,\r\n    timeout,\r\n    onDone,\r\n    hideButton,\r\n    clickOutsideToClose,\r\n}: loadingDialogProps) => {\r\n    if (!open) return <></>\r\n\r\n    switch (status) {\r\n        case \"loading\":\r\n            return (\r\n                <LoadingDialog\r\n                    open={status === \"loading\"}\r\n                    title={titles.loading}\r\n                    message={texts.loading}\r\n                    customSpinner={gifs?.loading}\r\n                />\r\n            )\r\n        case \"success\":\r\n            return (\r\n                <SuccessDialog\r\n                    open={status === \"success\"}\r\n                    title={titles.success}\r\n                    message={texts.success}\r\n                    timeout={timeout}\r\n                    txHash={txHash}\r\n                    onDone={onDone}\r\n                    onClickOutside={\r\n                        clickOutsideToClose === false ? () => {} : onDone\r\n                    }\r\n                    hideButton={hideButton}\r\n                />\r\n            )\r\n        case \"error\":\r\n            return (\r\n                <ErrorDialog\r\n                    open={status === \"error\"}\r\n                    title={titles.error}\r\n                    message={texts.error}\r\n                    onDone={onDone}\r\n                    timeout={timeout}\r\n                    onClickOutside={\r\n                        clickOutsideToClose === false ? () => {} : onDone\r\n                    }\r\n                    hideButton={hideButton}\r\n                />\r\n            )\r\n        case \"idle\":\r\n            return null\r\n    }\r\n}\r\n\r\nexport default WaitingDialog\r\n","import { AccountType, Devices } from \"../context/commTypes\"\r\n\r\nconst HW_DEVICE_ERRORS = [\r\n    \"DeviceNotReadyError\",\r\n    \"DeviceNotPluggedError\",\r\n    \"RejectedByUserError\",\r\n    \"EthAppPleaseEnableContractData\",\r\n]\r\n\r\nexport const isHardwareDeviceError = (e?: Error) => {\r\n    return e && HW_DEVICE_ERRORS.includes(e.name)\r\n}\r\n\r\nexport const getDeviceFromAccountType = (\r\n    accountType: AccountType\r\n): Devices | undefined => {\r\n    switch (accountType) {\r\n        case AccountType.LEDGER:\r\n            return Devices.LEDGER\r\n        case AccountType.TREZOR:\r\n            return Devices.TREZOR\r\n    }\r\n    return undefined\r\n}\r\n","import {\r\n    AccountInfo,\r\n    Accounts,\r\n} from \"@block-wallet/background/controllers/AccountTrackerController\"\r\nimport { AccountStatus, AccountType } from \"../context/commTypes\"\r\n\r\nconst accountSort = (a: AccountInfo, b: AccountInfo) => {\r\n    return a.index > b.index ? 1 : -1\r\n}\r\n\r\nexport const getSortedAccounts = (accounts: Accounts): AccountInfo[] => {\r\n    return Object.values(accounts).sort(accountSort)\r\n}\r\n\r\nexport const isHiddenAccount = (account: AccountInfo): boolean => {\r\n    return account.status?.toString() === AccountStatus.HIDDEN.toString()\r\n}\r\n\r\nexport const getDefaultAccountName = (accountNumber: number): string => {\r\n    return `Account ${accountNumber}`\r\n}\r\n\r\n/**\r\n * The list of account types that are considered hardware wallets.\r\n */\r\nexport const HARDWARE_TYPES = [AccountType.TREZOR, AccountType.LEDGER]\r\n\r\n/**\r\n * isHardwareWallet\r\n *\r\n * @param accountType the account type to return if it is a hardware wallet for\r\n * @returns bool if it is a hardware wallet\r\n */\r\nexport const isHardwareWallet = (accountType: AccountType) => {\r\n    return HARDWARE_TYPES.includes(accountType)\r\n}\r\n\r\n/**\r\n * isInternalAccount\r\n *\r\n * @param accountType the account type to return whether it is an internal account or not.\r\n * @returns bool if it is an internal account\r\n */\r\nexport const isInternalAccount = (accountType: AccountType): boolean => {\r\n    return !accountType || accountType === AccountType.HD_ACCOUNT\r\n}\r\n\r\nexport const isActiveAccount = (accountInfo: AccountInfo): boolean => {\r\n    return accountInfo.status?.toString() === AccountStatus.ACTIVE\r\n}\r\n\r\n/**\r\n * isExternalAccount\r\n *\r\n * @param accountType the account type to return whether it is an external account or not.\r\n * @returns bool if it is an external account\r\n */\r\nexport const isExternalAccount = (accountType: AccountType): boolean => {\r\n    return accountType === AccountType.EXTERNAL\r\n}\r\n\r\n/**\r\n * Checks if the given name already exists in the accounts array\r\n *\r\n * @param accounts collections of accounts to check whether the name exists or not\r\n * @param name string to match the account name\r\n * @returns bool if the account name is already taken by another account\r\n */\r\nexport const accountNameExists = (\r\n    accounts: Accounts,\r\n    name: string\r\n): boolean => {\r\n    const normalizeAccountName = (name: string) => name.replace(/ /g, \"\")\r\n    return Object.values(accounts || {}).some(\r\n        (a) => normalizeAccountName(a.name) === normalizeAccountName(name)\r\n    )\r\n}\r\n\r\n/**\r\n * Returns the first available account name starting with the provided number. The account names are built using {@link getDefaultAccountName} function\r\n *\r\n * @param accounts collections of accounts to calculate the first available account name\r\n * @param accountNumber starting point for checking names availability.\r\n * @returns string of the first available account name using the {@link getDefaultAccountName} function.\r\n */\r\nexport const getNextAccountName = (\r\n    accounts: Accounts,\r\n    accountNumber = 1\r\n): string => {\r\n    const nextAccountName = getDefaultAccountName(accountNumber)\r\n    if (accountNameExists(accounts, nextAccountName)) {\r\n        return getNextAccountName(accounts, accountNumber + 1)\r\n    }\r\n    return nextAccountName\r\n}\r\n","import { GasPriceLevels } from \"@block-wallet/background/controllers/GasPricesController\"\r\nimport {\r\n    TransactionMeta,\r\n    uiTransactionParams,\r\n} from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport { TransactionCategories, TransactionStatus } from \"../context/commTypes\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { DappRequestSigningStatus } from \"../context/hooks/useDappRequest\"\r\nexport interface RichedTransactionMeta extends TransactionMeta {\r\n    //Dynamically calculated using this transaction status and comparing the nonce with other transactions.\r\n    isQueued?: boolean\r\n    // Allows to force the status of a transaction to be dropped\r\n    forceDrop?: boolean\r\n}\r\n\r\nexport const flagQueuedTransactions = (\r\n    pendingTransactions: TransactionMeta[]\r\n): RichedTransactionMeta[] => {\r\n    if (!pendingTransactions || pendingTransactions.length === 0) {\r\n        return pendingTransactions\r\n    }\r\n    const lowestPendingNonce = pendingTransactions\r\n        .filter((transaction) => {\r\n            return (\r\n                transaction.status === TransactionStatus.SUBMITTED &&\r\n                transaction.transactionCategory !==\r\n                    TransactionCategories.INCOMING_BRIDGE_PLACEHOLDER\r\n            )\r\n        })\r\n        .reduce((lowest, current) => {\r\n            const currentNonce =\r\n                current.transactionParams.nonce ?? Number.MAX_VALUE\r\n            if (currentNonce < lowest) {\r\n                return currentNonce\r\n            }\r\n            return lowest\r\n        }, Number.MAX_VALUE)\r\n\r\n    return pendingTransactions.map((transaction) => {\r\n        const transactionNonce = transaction.transactionParams.nonce\r\n        if (!transactionNonce) {\r\n            return {\r\n                ...transaction,\r\n                isQueued: false,\r\n            }\r\n        }\r\n        const isPendingState =\r\n            transaction.status === TransactionStatus.SUBMITTED\r\n        return {\r\n            ...transaction,\r\n            isQueued:\r\n                transaction.transactionCategory !==\r\n                    TransactionCategories.INCOMING_BRIDGE_PLACEHOLDER &&\r\n                isPendingState &&\r\n                transactionNonce > lowestPendingNonce,\r\n        }\r\n    })\r\n}\r\n\r\nexport const getDepositTransactionInfo = (\r\n    tx: Partial<TransactionMeta>\r\n): {\r\n    confirmations?: number\r\n    isAwaitingForConfirmation: boolean\r\n} => {\r\n    if (\r\n        tx.blankDepositId &&\r\n        (tx.transactionReceipt?.confirmations || -1) > -1\r\n    ) {\r\n        return {\r\n            confirmations: tx.transactionReceipt?.confirmations,\r\n            isAwaitingForConfirmation:\r\n                tx.status === TransactionStatus.SUBMITTED,\r\n        }\r\n    }\r\n\r\n    return {\r\n        isAwaitingForConfirmation: false,\r\n    }\r\n}\r\n\r\nexport const getUITransactionParams = (\r\n    transaction: TransactionMeta | undefined,\r\n    gasPricesLevels: GasPriceLevels,\r\n    isEIP1559Compatible: boolean = true\r\n): uiTransactionParams => {\r\n    return {\r\n        ...transaction?.transactionParams,\r\n        value: BigNumber.from(transaction?.transactionParams.value ?? \"0\"),\r\n        gasLimit: BigNumber.from(\r\n            transaction?.transactionParams.gasLimit ?? \"0\"\r\n        ),\r\n        //Legacy\r\n        gasPrice: !isEIP1559Compatible\r\n            ? BigNumber.from(\r\n                  transaction?.transactionParams.gasPrice ??\r\n                      gasPricesLevels.average.gasPrice\r\n              )\r\n            : undefined,\r\n        //EIP-1559\r\n        maxPriorityFeePerGas: isEIP1559Compatible\r\n            ? BigNumber.from(\r\n                  transaction?.transactionParams.maxPriorityFeePerGas ??\r\n                      gasPricesLevels.average.maxPriorityFeePerGas\r\n              )\r\n            : undefined,\r\n        maxFeePerGas: isEIP1559Compatible\r\n            ? BigNumber.from(\r\n                  transaction?.transactionParams.maxFeePerGas ??\r\n                      gasPricesLevels.average.maxFeePerGas\r\n              )\r\n            : undefined,\r\n    }\r\n}\r\n\r\nexport const isTransactionOrRequestAwaitingSigning = (\r\n    status: TransactionStatus | DappRequestSigningStatus\r\n): boolean => {\r\n    // Dispite both enums having the same \"APPROVED\" status, we need to check for the type\r\n    // in case one of the underlying enums changes in the future.\r\n    const validStatuses = [\r\n        TransactionStatus.APPROVED,\r\n        DappRequestSigningStatus.APPROVED,\r\n    ]\r\n    return validStatuses.includes(status)\r\n}\r\n\r\nexport const canUserSubmitTransaction = (\r\n    status: TransactionStatus\r\n): boolean => {\r\n    return [TransactionStatus.UNAPPROVED].includes(status)\r\n}\r\n\r\nexport const resolveTransactionTo = (tx: TransactionMeta): string => {\r\n    let to: string | undefined\r\n    if (\r\n        tx.transactionCategory === TransactionCategories.TOKEN_METHOD_TRANSFER\r\n    ) {\r\n        to = tx.transferType?.to\r\n    }\r\n    return to ?? tx.transactionParams.to ?? \"\"\r\n}\r\n","import React from \"react\"\r\nimport { calculateRemainingSeconds } from \"../time\"\r\n\r\nconst useCountdown = (\r\n    startTime: number | undefined,\r\n    timeout: number | undefined\r\n) => {\r\n    const [remainingSeconds, setRemainingSeconds] = React.useState<\r\n        number | undefined\r\n    >(() => {\r\n        return calculateRemainingSeconds(startTime, timeout)\r\n    })\r\n    const intervalRef = React.useRef<NodeJS.Timeout | undefined>()\r\n\r\n    React.useEffect(() => {\r\n        if (startTime !== undefined && timeout !== undefined) {\r\n            //don't wait 1 second to execute first calculation.\r\n            setRemainingSeconds(calculateRemainingSeconds(startTime, timeout))\r\n\r\n            intervalRef.current = setInterval(() => {\r\n                setRemainingSeconds(\r\n                    calculateRemainingSeconds(startTime, timeout)\r\n                )\r\n            }, 1000) //run every 1 second\r\n        } else {\r\n            setRemainingSeconds(undefined)\r\n        }\r\n\r\n        return () => {\r\n            intervalRef.current && clearInterval(intervalRef.current)\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [startTime, timeout])\r\n\r\n    return {\r\n        value: remainingSeconds,\r\n    }\r\n}\r\n\r\nexport default useCountdown\r\n","import { useCallback, useEffect } from \"react\"\r\nimport { useWaitingDialog } from \"../../components/dialog/WaitingDialog\"\r\nimport {\r\n    AccountType,\r\n    HardwareWalletOpTypes,\r\n    TransactionStatus,\r\n} from \"../commTypes\"\r\nimport { getAwaitingSigningMessage } from \"../../util/getAwaitingSigningMessage\"\r\nimport { isTransactionOrRequestAwaitingSigning } from \"../../util/transactionUtils\"\r\nimport { DappRequestSigningStatus } from \"./useDappRequest\"\r\nimport AnimatedIcon, { AnimatedIconName } from \"../../components/AnimatedIcon\"\r\nimport Divider from \"../../components/Divider\"\r\nimport ClickableText from \"../../components/button/ClickableText\"\r\nimport { isHardwareWallet } from \"../../util/account\"\r\nimport { useBlankState } from \"../background/backgroundHooks\"\r\nimport useCountdown from \"../../util/hooks/useCountdown\"\r\nimport { secondsToMMSS } from \"../../util/time\"\r\n\r\nconst messages: {\r\n    [key in HardwareWalletOpTypes]: {\r\n        texts: { confirming: string; failed: string; rejected: string }\r\n        titles: { confirming: string; failed: string; rejected: string }\r\n    }\r\n} = {\r\n    SIGN_TRANSACTION: {\r\n        texts: {\r\n            confirming: \"Confirming transaction...\",\r\n            failed: \"Error confirming transaction\",\r\n            rejected: \"Transaction was rejected\",\r\n        },\r\n        titles: {\r\n            confirming: \"Confirming...\",\r\n            failed: \"Error\",\r\n            rejected: \"Transaction Rejected\",\r\n        },\r\n    },\r\n    SIGN_MESSAGE: {\r\n        texts: {\r\n            confirming: \"Signing request...\",\r\n            failed: \"Error signing message\",\r\n            rejected: \"Signing request was rejected\",\r\n        },\r\n        titles: {\r\n            confirming: \"Confirming...\",\r\n            failed: \"Error\",\r\n            rejected: \"Request Rejected\",\r\n        },\r\n    },\r\n    APPROVE_ALLOWANCE: {\r\n        texts: {\r\n            confirming: \"Updating token allowance...\",\r\n            failed: \"Error updating token allowance\",\r\n            rejected: \"Token allowance request was rejected\",\r\n        },\r\n        titles: {\r\n            confirming: \"Confirming...\",\r\n            failed: \"Error\",\r\n            rejected: \"Token Allowance Rejected\",\r\n        },\r\n    },\r\n    SIGN_CANCEL: {\r\n        texts: {\r\n            confirming: \"Trying to cancel the transaction...\",\r\n            failed: \"Error cancelling the transaction\",\r\n            rejected: \"Cancel request was rejected\",\r\n        },\r\n        titles: {\r\n            confirming: \"Cancelling...\",\r\n            failed: \"Error\",\r\n            rejected: \"Rejected\",\r\n        },\r\n    },\r\n    SIGN_SPEEDUP: {\r\n        texts: {\r\n            confirming: \"Trying to speed up the transaction...\",\r\n            failed: \"Error speeding up the transaction\",\r\n            rejected: \"Speed up request was rejected\",\r\n        },\r\n        titles: {\r\n            confirming: \"Speeding up...\",\r\n            failed: \"Error\",\r\n            rejected: \"Rejected\",\r\n        },\r\n    },\r\n}\r\n\r\nconst Timer = ({\r\n    seconds,\r\n    operation,\r\n}: {\r\n    seconds: number\r\n    operation: HardwareWalletOpTypes\r\n}) => {\r\n    const names = {\r\n        [HardwareWalletOpTypes.APPROVE_ALLOWANCE]: \"token allowance request\",\r\n        [HardwareWalletOpTypes.SIGN_CANCEL]: \"cancel transaction request\",\r\n        [HardwareWalletOpTypes.SIGN_TRANSACTION]: \"transaction\",\r\n        [HardwareWalletOpTypes.SIGN_SPEEDUP]: \"speed up transaction request\",\r\n        [HardwareWalletOpTypes.SIGN_MESSAGE]: \"sign message request\",\r\n    }\r\n    const initialCaption = `Your ${names[operation]} will be automatically cancelled in `\r\n    let timeData = secondsToMMSS(seconds)\r\n    return (\r\n        <span>\r\n            {initialCaption} <span className=\"font-bold\">{timeData}</span>\r\n        </span>\r\n    )\r\n}\r\n\r\nconst useTransactionTimeout = () => {\r\n    const { txSignTimeout } = useBlankState()!\r\n    return txSignTimeout\r\n}\r\n\r\nconst WaitingHWConfirmation = ({\r\n    message,\r\n    operation,\r\n    reject,\r\n    txTime,\r\n    txTimeout,\r\n}: {\r\n    message: string\r\n    operation: HardwareWalletOpTypes\r\n    reject: () => void\r\n    txTime?: number\r\n    txTimeout?: number\r\n}) => {\r\n    const { value: remainingSeconds } = useCountdown(txTime, txTimeout)\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center justify-center\">\r\n            {message}\r\n            {\r\n                <div className=\"mt-2\">\r\n                    <Divider />\r\n                    <div className=\"mt-2 text-xs\">\r\n                        {remainingSeconds && (\r\n                            <Timer\r\n                                seconds={remainingSeconds}\r\n                                operation={operation}\r\n                            />\r\n                        )}\r\n                        <br />\r\n                        <div className=\"mt-1\">\r\n                            <span>\r\n                                <i>OR</i>\r\n                            </span>\r\n                            <br />\r\n                            <ClickableText onClick={reject}>\r\n                                <i>\r\n                                    {`Reject ${\r\n                                        operation ===\r\n                                        HardwareWalletOpTypes.SIGN_MESSAGE\r\n                                            ? \"request now\"\r\n                                            : \"transaction now\"\r\n                                    }`}\r\n                                </i>\r\n                            </ClickableText>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\nexport const useTransactionWaitingDialog = (\r\n    transaction:\r\n        | {\r\n              id?: string\r\n              status: TransactionStatus | DappRequestSigningStatus | undefined\r\n              error: Error | undefined\r\n              epochTime?: number\r\n          }\r\n        | undefined,\r\n    operation: HardwareWalletOpTypes,\r\n    accountType: AccountType,\r\n    callbacks: {\r\n        reject: () => void\r\n    }\r\n) => {\r\n    const { texts, titles, dispatch, status, isOpen, gifs } = useWaitingDialog({\r\n        defaultStatus: \"idle\",\r\n    })\r\n    const txTimeout = useTransactionTimeout()\r\n    useEffect(() => {\r\n        if (transaction?.status) {\r\n            if (isTransactionOrRequestAwaitingSigning(transaction.status)) {\r\n                const message = messages[operation]\r\n                const hwDeviceMessage = getAwaitingSigningMessage(\r\n                    accountType,\r\n                    transaction?.status,\r\n                    operation\r\n                )\r\n                dispatch({\r\n                    type: \"open\",\r\n                    payload: {\r\n                        status: \"loading\",\r\n                        titles: { loading: message.titles.confirming },\r\n                        texts: {\r\n                            loading: isHardwareWallet(accountType) ? (\r\n                                <WaitingHWConfirmation\r\n                                    message={\r\n                                        hwDeviceMessage ??\r\n                                        message.texts.confirming\r\n                                    }\r\n                                    operation={operation}\r\n                                    reject={callbacks.reject}\r\n                                    txTime={transaction?.epochTime}\r\n                                    txTimeout={txTimeout}\r\n                                />\r\n                            ) : (\r\n                                message.texts.confirming\r\n                            ),\r\n                        },\r\n                        gifs: {\r\n                            loading: isHardwareWallet(accountType) ? (\r\n                                <AnimatedIcon\r\n                                    className=\"w-12 h-12 m-auto\"\r\n                                    icon={AnimatedIconName.DeviceInteraction}\r\n                                />\r\n                            ) : undefined,\r\n                        },\r\n                    },\r\n                })\r\n            } else if (\r\n                [\r\n                    TransactionStatus.SUBMITTED,\r\n                    DappRequestSigningStatus.SIGNED,\r\n                ].includes(transaction.status)\r\n            ) {\r\n                dispatch({ type: \"setStatus\", payload: { status: \"success\" } })\r\n            } else if (\r\n                [\r\n                    TransactionStatus.FAILED,\r\n                    DappRequestSigningStatus.FAILED,\r\n                ].includes(transaction.status)\r\n            ) {\r\n                const message = messages[operation]\r\n                dispatch({\r\n                    type: \"setStatus\",\r\n                    payload: {\r\n                        status: \"error\",\r\n                        titles: {\r\n                            error: message.titles.failed,\r\n                        },\r\n                        texts: {\r\n                            error:\r\n                                transaction.error?.message ||\r\n                                message.texts.failed,\r\n                        },\r\n                    },\r\n                })\r\n            } else if (\r\n                [\r\n                    TransactionStatus.REJECTED,\r\n                    DappRequestSigningStatus.REJECTED,\r\n                ].includes(transaction.status)\r\n            ) {\r\n                const message = messages[operation]\r\n                dispatch({\r\n                    type: \"setStatus\",\r\n                    payload: {\r\n                        status: \"error\",\r\n                        titles: { error: message.titles.rejected },\r\n                        texts: {\r\n                            error: message.texts.rejected,\r\n                        },\r\n                    },\r\n                })\r\n            }\r\n        }\r\n    }, [\r\n        transaction?.id,\r\n        transaction?.status,\r\n        transaction?.error,\r\n        transaction?.epochTime,\r\n        dispatch,\r\n        operation,\r\n        accountType,\r\n        callbacks.reject,\r\n        txTimeout,\r\n    ])\r\n\r\n    return {\r\n        closeDialog: useCallback(() => dispatch({ type: \"close\" }), [dispatch]),\r\n        isOpen,\r\n        texts,\r\n        titles,\r\n        status,\r\n        dispatch,\r\n        gifs,\r\n    }\r\n}\r\n","import {\r\n    AccountType,\r\n    HardwareWalletOpTypes,\r\n    TransactionStatus,\r\n} from \"../context/commTypes\"\r\nimport { DappRequestSigningStatus } from \"../context/hooks/useDappRequest\"\r\nimport { isHardwareWallet } from \"./account\"\r\nimport { isTransactionOrRequestAwaitingSigning } from \"./transactionUtils\"\r\n\r\n/**\r\n * getAwaitingSigningMessage\r\n *\r\n * It returns a message to be displayed to the user while waiting for a transaction or signing request to be confirmed in the device\r\n * if the account belongs to a hardware wallet and the transaction or signing request is awaiting approval.\r\n *\r\n * @param accountType The account type\r\n * @param status The transaction/signing request status\r\n * @returns The message to display when awaiting signing\r\n */\r\nexport const getAwaitingSigningMessage = (\r\n    accountType: AccountType,\r\n    status: TransactionStatus | DappRequestSigningStatus,\r\n    opType: HardwareWalletOpTypes = HardwareWalletOpTypes.SIGN_TRANSACTION\r\n): string | undefined => {\r\n    return isHardwareWallet(accountType) &&\r\n        // Only display the message if the transaction or signing request is in APPROVED status(previous to SIGNED)\r\n        isTransactionOrRequestAwaitingSigning(status)\r\n        ? `Waiting for ${\r\n              [\r\n                  HardwareWalletOpTypes.SIGN_TRANSACTION,\r\n                  HardwareWalletOpTypes.APPROVE_ALLOWANCE,\r\n                  HardwareWalletOpTypes.SIGN_CANCEL,\r\n                  HardwareWalletOpTypes.SIGN_SPEEDUP,\r\n              ].includes(opType)\r\n                  ? \" your transaction\"\r\n                  : opType === HardwareWalletOpTypes.SIGN_MESSAGE\r\n                  ? \"the signing message request\"\r\n                  : \"request\"\r\n          } to be confirmed on your ${accountType} device.`\r\n        : undefined\r\n}\r\n","import PopupHeader, { PopupHeaderProps } from \"../popup/PopupHeader\"\r\nimport classnames from \"classnames\"\r\nimport NetworkDisplayBadge from \"../chain/NetworkDisplayBadge\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport { AiFillInfoCircle } from \"react-icons/ai\"\r\nimport Tooltip from \"../label/Tooltip\"\r\n\r\ninterface Props extends PopupHeaderProps {\r\n    showNetworkIndicator?: boolean\r\n    requestCount?: number\r\n}\r\nconst DAppPopupHeader: React.FC<Props> = ({\r\n    className,\r\n    showNetworkIndicator = true,\r\n    requestCount = 1,\r\n    children,\r\n    ...rest\r\n}) => {\r\n    const network = useSelectedNetwork()\r\n    return (\r\n        <PopupHeader\r\n            backButton={false}\r\n            close={false}\r\n            className={classnames(\r\n                showNetworkIndicator && \"justify-between\",\r\n                showNetworkIndicator && requestCount > 1 && \"flex space-x-1\",\r\n                \"py-2.5 px-6\",\r\n                className\r\n            )}\r\n            {...rest}\r\n        >\r\n            {children}\r\n            {requestCount > 1 && (\r\n                <div className=\"group relative flex-1\">\r\n                    <AiFillInfoCircle\r\n                        size={26}\r\n                        className=\"pl-2 text-primary-200 cursor-pointer hover:text-primary-300\"\r\n                    />\r\n                    <Tooltip\r\n                        content={`${requestCount - 1} more ${\r\n                            requestCount > 2 ? \"requests\" : \"request\"\r\n                        }`}\r\n                    />\r\n                </div>\r\n            )}\r\n            {showNetworkIndicator && (\r\n                <NetworkDisplayBadge network={network} truncate />\r\n            )}\r\n        </PopupHeader>\r\n    )\r\n}\r\n\r\nexport default DAppPopupHeader\r\n","import { formatUrl } from \"../../util/formatUrl\"\r\n\r\nexport const DAppOrigin = ({\r\n    iconURL,\r\n    name,\r\n}: {\r\n    iconURL: string | null\r\n    name: string\r\n}) => {\r\n    return (\r\n        <div className=\"px-6 py-2 flex flex-row items-center\">\r\n            <div className=\"flex flex-row items-center justify-center w-10 h-10 rounded-full bg-primary-100\">\r\n                {iconURL && <img key={iconURL} alt=\"icon\" src={iconURL} />}\r\n            </div>\r\n            <div className=\"flex flex-col text-sm font-bold ml-4\">\r\n                {formatUrl(name)}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DAppOrigin\r\n","export const formatUrl = (url: string) => url.replace(/(^\\w+:|^)\\/\\//, '')\r\n","import { ReactNode } from \"react\"\r\nimport classnames from \"classnames\"\r\n\r\nconst CodeBlock = ({\r\n    className,\r\n    children,\r\n}: {\r\n    className?: string\r\n    children: ReactNode | string\r\n}) => {\r\n    return (\r\n        <pre\r\n            className={classnames(\r\n                \"text-gray-600 bg-gray-100 border border-gray-300 overflow-auto rounded-md p-2 whitespace-pre-line break-all\",\r\n                className\r\n            )}\r\n        >\r\n            {children}\r\n        </pre>\r\n    )\r\n}\r\n\r\nexport default CodeBlock\r\n","import {\r\n    FunctionComponent,\r\n    PropsWithChildren,\r\n    useCallback,\r\n    useState,\r\n} from \"react\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport { Classes } from \"../../styles/classes\"\r\nimport Divider from \"../../components/Divider\"\r\nimport { formatHash, formatName } from \"../../util/formatAccount\"\r\nimport { formatUnits } from \"@ethersproject/units\"\r\nimport { getAddress } from \"@ethersproject/address\"\r\nimport {\r\n    DappReq,\r\n    DappRequestSigningStatus,\r\n} from \"../../context/hooks/useDappRequest\"\r\nimport ReactJson from \"react-json-view\"\r\nimport {\r\n    attemptRejectDappRequest,\r\n    confirmDappRequest,\r\n    setUserSettings,\r\n} from \"../../context/commActions\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport {\r\n    EIP712Domain,\r\n    EIP712DomainKey,\r\n    MessageSchema,\r\n    NormalizedSignatureData,\r\n    SignatureMethods,\r\n    TypedMessage,\r\n    V1TypedData,\r\n    DappRequestParams,\r\n} from \"@block-wallet/background/utils/types/ethereum\"\r\nimport AccountIcon from \"../../components/icons/AccountIcon\"\r\nimport { getAccountColor } from \"../../util/getAccountColor\"\r\nimport { formatNumberLength } from \"../../util/formatNumberLength\"\r\nimport CopyTooltip from \"../../components/label/Ð¡opyToClipboardTooltip\"\r\nimport { useTokensList } from \"../../context/hooks/useTokensList\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport { DappRequestProps, DappRequest } from \"./DappRequest\"\r\nimport CheckBoxDialog from \"../../components/dialog/CheckboxDialog\"\r\nimport { useUserSettings } from \"../../context/hooks/useUserSettings\"\r\nimport WarningDialog from \"../../components/dialog/WarningDialog\"\r\nimport HardwareDeviceNotLinkedDialog from \"../../components/dialog/HardwareDeviceNotLinkedDialog\"\r\nimport useCheckAccountDeviceLinked from \"../../util/hooks/useCheckAccountDeviceLinked\"\r\nimport WaitingDialog from \"../../components/dialog/WaitingDialog\"\r\nimport { DAPP_FEEDBACK_WINDOW_TIMEOUT } from \"../../util/constants\"\r\nimport { getDeviceFromAccountType } from \"../../util/hardwareDevice\"\r\nimport { useTransactionWaitingDialog } from \"../../context/hooks/useTransactionWaitingDialog\"\r\nimport { HardwareWalletOpTypes } from \"../../context/commTypes\"\r\nimport DAppPopupHeader from \"../../components/dApp/DAppPopupHeader\"\r\nimport DAppOrigin from \"../../components/dApp/DAppOrigin\"\r\nimport { getNetworkNameFromChainId } from \"../../util/getExplorer\"\r\nimport CodeBlock from \"../../components/ui/CodeBlock\"\r\n\r\nconst SignPage = () => {\r\n    return (\r\n        <DappRequest\r\n            requestType={DappReq.SIGNING}\r\n            layoutRender={(props: DappRequestProps) => {\r\n                return <Sign {...props} key={props.requestId} />\r\n            }}\r\n        />\r\n    )\r\n}\r\n\r\nconst Sign: FunctionComponent<PropsWithChildren<DappRequestProps>> = ({\r\n    requestCount,\r\n    requestId,\r\n    origin,\r\n    siteMetadata,\r\n    dappReqData,\r\n    status: requestStatus,\r\n    approveTime,\r\n    error,\r\n}) => {\r\n    const { accounts, availableNetworks, selectedAddress, settings } =\r\n        useBlankState()!\r\n    const { nativeToken } = useTokensList()\r\n    const { hideAddressWarning } = useUserSettings()\r\n    const [copied, setCopied] = useState(false)\r\n    const [accountWarningClosed, setAccountWarningClosed] = useState(false)\r\n    const [isEthSignWarningOpen, setIsEthSignWarningOpen] = useState(true)\r\n    const { isDeviceUnlinked, checkDeviceIsLinked, resetDeviceLinkStatus } =\r\n        useCheckAccountDeviceLinked()\r\n\r\n    const { method, params: dappReqParams } =\r\n        dappReqData as DappRequestParams[DappReq.SIGNING]\r\n\r\n    const websiteIcon = siteMetadata.iconURL\r\n    const { address, data, rawData } = dappReqParams\r\n\r\n    const accountData = accounts[address]\r\n\r\n    // Detect if the transaction was triggered using an address different to the active one\r\n    const checksumFromAddress = getAddress(address)\r\n    const differentAddress = checksumFromAddress !== selectedAddress\r\n\r\n    const { status, isOpen, dispatch, texts, titles, closeDialog, gifs } =\r\n        useTransactionWaitingDialog(\r\n            {\r\n                id: requestId,\r\n                status: requestStatus,\r\n                error,\r\n                epochTime: approveTime,\r\n            },\r\n            HardwareWalletOpTypes.SIGN_MESSAGE,\r\n            accountData.accountType,\r\n            {\r\n                reject: useCallback(() => {\r\n                    if (requestId) {\r\n                        attemptRejectDappRequest(requestId)\r\n                    }\r\n                }, [requestId]),\r\n            }\r\n        )\r\n\r\n    const sign = async () => {\r\n        dispatch({ type: \"open\", payload: { status: \"loading\" } })\r\n        const isLinked = await checkDeviceIsLinked()\r\n        if (!isLinked) {\r\n            closeDialog()\r\n            return\r\n        }\r\n        await confirmDappRequest(requestId, true)\r\n    }\r\n\r\n    const reject = async () => {\r\n        dispatch({\r\n            type: \"open\",\r\n            payload: {\r\n                status: \"loading\",\r\n                titles: { loading: \"Rejecting...\" },\r\n                texts: { loading: \"Rejecting signing request...\" },\r\n            },\r\n        })\r\n        await new Promise<void>((resolve) => {\r\n            setTimeout(resolve, 300)\r\n        })\r\n        await confirmDappRequest(requestId, false)\r\n        dispatch({\r\n            type: \"setStatus\",\r\n            payload: {\r\n                status: \"error\",\r\n                titles: { error: \"Request Rejected\" },\r\n                texts: {\r\n                    error: \"Signing request was rejected.\",\r\n                },\r\n            },\r\n        })\r\n    }\r\n\r\n    const copy = async () => {\r\n        await navigator.clipboard.writeText(accountData.address)\r\n        setCopied(true)\r\n        await new Promise((resolve) => setTimeout(resolve, 1000))\r\n        setCopied(false)\r\n    }\r\n\r\n    const formatTypedDomain = (domain: EIP712Domain) => {\r\n        const displayOrder: EIP712DomainKey[] = [\r\n            \"name\",\r\n            \"version\",\r\n            \"chainId\",\r\n            \"verifyingContract\",\r\n            \"salt\",\r\n        ]\r\n\r\n        const formattedDomainKeyNames: { [key in EIP712DomainKey]: string } = {\r\n            chainId: \"Chain ID\",\r\n            name: \"DApp\",\r\n            salt: \"Salt\",\r\n            verifyingContract: \"Verifying Contract\",\r\n            version: \"Version\",\r\n        }\r\n\r\n        let parsedDomain = []\r\n\r\n        // Arrayifi(lol) domain following the display order\r\n        for (let i = 0; i < displayOrder.length; i++) {\r\n            // Check existing properties on the domain\r\n            if (\r\n                typeof domain[displayOrder[i]] === \"string\" ||\r\n                typeof domain[displayOrder[i]] === \"number\"\r\n            ) {\r\n                parsedDomain[i] = `${domain[displayOrder[i]]}`\r\n            } else {\r\n                parsedDomain[i] = null\r\n            }\r\n        }\r\n\r\n        // Add chain id name if it exists\r\n        if (domain.chainId) {\r\n            const networkName = getNetworkNameFromChainId(\r\n                availableNetworks,\r\n                Number(domain.chainId)\r\n            )\r\n            parsedDomain[2] += ` (${networkName})`\r\n        }\r\n\r\n        // Display them\r\n        return parsedDomain.map((param: string | null, i: number) => {\r\n            if (param) {\r\n                return (\r\n                    <>\r\n                        <span className=\"font-bold pt-1\">\r\n                            {formattedDomainKeyNames[displayOrder[i]]}\r\n                        </span>\r\n                        <span className=\"text-gray-600 allow-select-all\">\r\n                            {param}\r\n                        </span>\r\n                    </>\r\n                )\r\n            } else {\r\n                return null\r\n            }\r\n        })\r\n    }\r\n\r\n    const formatSignatureData = (\r\n        method: SignatureMethods,\r\n        data: NormalizedSignatureData[SignatureMethods],\r\n        rawData: string | undefined\r\n    ) => {\r\n        if (method === \"eth_sign\") {\r\n            return (\r\n                <>\r\n                    <WarningDialog\r\n                        open={isEthSignWarningOpen}\r\n                        onDone={() => setIsEthSignWarningOpen(false)}\r\n                        title=\"Warning\"\r\n                        message=\"Signing this message can be dangerous. It could allow the requesting site to perform any operation on your wallet's behalf, including complete control of your assets. Sign only if you completely trust the requesting site.\"\r\n                        buttonLabel=\"I understand\"\r\n                        useClickOutside={false}\r\n                        iconColor=\"text-red-500\"\r\n                        wideMargins={false}\r\n                    />\r\n                    <div className=\"w-full px-3 py-3 text-sm text-red-500 bg-red-100 rounded\">\r\n                        <strong className=\"font-bold\">Warning: </strong>\r\n                        {`Make sure you trust ${origin}. Signing this could grant complete control of your assets`}\r\n                    </div>\r\n                    <span className=\"font-bold py-2\">Message</span>\r\n                    <CodeBlock className=\"max-h-56\">\r\n                        <>{rawData ?? data}</>\r\n                    </CodeBlock>\r\n                </>\r\n            )\r\n        }\r\n\r\n        if (method === \"personal_sign\") {\r\n            return (\r\n                <>\r\n                    <span className=\"font-bold py-2\">Message</span>\r\n                    <CodeBlock className=\"max-h-56\">\r\n                        <>{rawData ?? data}</>\r\n                    </CodeBlock>\r\n                </>\r\n            )\r\n        }\r\n\r\n        if (method === \"eth_signTypedData_v1\") {\r\n            const v1Data = data as V1TypedData[]\r\n            return (\r\n                <>\r\n                    {v1Data.map((param: V1TypedData) => {\r\n                        return (\r\n                            <>\r\n                                <span className=\"font-bold pt-1\">\r\n                                    {param.name}\r\n                                </span>\r\n                                <span className=\"text-gray-600 allow-select-all\">\r\n                                    {`${param.value}`}\r\n                                </span>\r\n                            </>\r\n                        )\r\n                    })}\r\n                </>\r\n            )\r\n        }\r\n\r\n        const v4Data = data as TypedMessage<MessageSchema>\r\n        return (\r\n            <>\r\n                {formatTypedDomain(v4Data.domain)}\r\n                <span className=\"font-bold py-1\">Message</span>\r\n                <ReactJson\r\n                    enableClipboard\r\n                    src={v4Data.message}\r\n                    name={null}\r\n                    indentWidth={1}\r\n                    iconStyle={\"triangle\"}\r\n                    displayObjectSize={false}\r\n                    displayDataTypes={false}\r\n                    quotesOnKeys={false}\r\n                />\r\n            </>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <DAppPopupHeader\r\n                    title=\"Signature Request\"\r\n                    requestCount={requestCount}\r\n                />\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        onClick={reject}\r\n                        buttonClass={Classes.liteButton}\r\n                        disabled={\r\n                            requestStatus === undefined ||\r\n                            requestStatus !== DappRequestSigningStatus.PENDING\r\n                        }\r\n                        label=\"Reject\"\r\n                    ></ButtonWithLoading>\r\n                    <ButtonWithLoading\r\n                        label=\"Sign\"\r\n                        onClick={sign}\r\n                        disabled={\r\n                            requestStatus === undefined ||\r\n                            requestStatus !== DappRequestSigningStatus.PENDING\r\n                        }\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <WaitingDialog\r\n                open={isOpen}\r\n                status={status}\r\n                titles={{\r\n                    loading: titles?.loading || \"Confirming...\",\r\n                    success: titles?.success || \"Success\",\r\n                    error: titles?.error || \"Error\",\r\n                }}\r\n                texts={{\r\n                    loading: texts?.loading || \"Signing request...\",\r\n                    success: texts?.success || \"You've signed the request.\",\r\n                    error: texts?.error || \"Something went wrong\",\r\n                }}\r\n                clickOutsideToClose={false}\r\n                timeout={DAPP_FEEDBACK_WINDOW_TIMEOUT}\r\n                onDone={closeDialog}\r\n                gifs={gifs}\r\n                hideButton\r\n            />\r\n            <CheckBoxDialog\r\n                message={`Approval request was sent with an account that's different from the selected one in your wallet. \\n\\n Please select if you want to continue or reject the transaction.`}\r\n                onClose={() => {\r\n                    setAccountWarningClosed(true)\r\n                }}\r\n                onCancel={reject}\r\n                onConfirm={(saveChoice) => {\r\n                    if (saveChoice) {\r\n                        setUserSettings({\r\n                            ...settings,\r\n                            hideAddressWarning: true,\r\n                        })\r\n                    }\r\n                }}\r\n                title=\"Different address detected\"\r\n                open={\r\n                    differentAddress &&\r\n                    !accountWarningClosed &&\r\n                    !hideAddressWarning\r\n                }\r\n                closeText=\"Reject\"\r\n                confirmText=\"Continue\"\r\n                showCheckbox\r\n                checkboxText=\"Don't show this warning again\"\r\n            />\r\n            <DAppOrigin name={origin} iconURL={websiteIcon} />\r\n            <Divider />\r\n            <span className=\"font-bold px-6 py-3 text-sm text-gray-800\">\r\n                Signing Account\r\n            </span>\r\n            <div className=\"flex flex-col px-6\">\r\n                <div className=\"flex flex-row items-center space-x-4\">\r\n                    <AccountIcon\r\n                        className=\"w-10 h-10\"\r\n                        fill={getAccountColor(accountData.address)}\r\n                    />\r\n                    <button\r\n                        type=\"button\"\r\n                        className=\"relative flex flex-col group space-y-1\"\r\n                        onClick={copy}\r\n                    >\r\n                        <span className=\"text-sm font-bold\">\r\n                            {formatName(accountData.name, 15)}\r\n                            {\" (\"}\r\n                            {formatNumberLength(\r\n                                formatUnits(\r\n                                    nativeToken.balance,\r\n                                    nativeToken.token.decimals\r\n                                ),\r\n                                5\r\n                            )}\r\n                            {` ${nativeToken.token.symbol})`}\r\n                        </span>\r\n                        <span className=\"text-xs text-gray-600\">\r\n                            {formatHash(accountData.address)}\r\n                        </span>\r\n                        <CopyTooltip copied={copied} />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <div className=\"flex flex-col px-6 py-3 space-y-0.5 text-sm text-gray-800 break-words\">\r\n                {formatSignatureData(method, data, rawData)}\r\n            </div>\r\n            <HardwareDeviceNotLinkedDialog\r\n                onDone={resetDeviceLinkStatus}\r\n                isOpen={isDeviceUnlinked}\r\n                vendor={getDeviceFromAccountType(accountData.accountType)}\r\n                address={accountData.address}\r\n            />\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default SignPage\r\n","export default __webpack_public_path__ + \"static/media/connect_dapp.5bf1cdf2.svg\";","export default __webpack_public_path__ + \"static/media/checkmark_mini.ec804f78.svg\";","import { AccountInfo } from \"@block-wallet/background/controllers/AccountTrackerController\"\r\nimport { isExternalAccount, isHardwareWallet, isHiddenAccount } from \"./account\"\r\n\r\nexport enum AccountFilter {\r\n    ALL = \"all\",\r\n    HIDDEN = \"hidden\",\r\n    HARDWARE = \"hardware\",\r\n    EXTERNAL = \"external\",\r\n}\r\n\r\nconst AccountFilterOptions = {\r\n    [AccountFilter.ALL]: {\r\n        combinableValues: [AccountFilter.HIDDEN],\r\n    },\r\n    [AccountFilter.HIDDEN]: {\r\n        combinableValues: [\r\n            AccountFilter.ALL,\r\n            AccountFilter.HARDWARE,\r\n            AccountFilter.EXTERNAL,\r\n        ],\r\n    },\r\n    [AccountFilter.HARDWARE]: {\r\n        combinableValues: [AccountFilter.HIDDEN, AccountFilter.EXTERNAL],\r\n    },\r\n    [AccountFilter.EXTERNAL]: {\r\n        combinableValues: [AccountFilter.HIDDEN, AccountFilter.HARDWARE],\r\n    },\r\n}\r\n\r\n/**\r\n * Normalizes the filters value to ALL if there is no filter selected yet.\r\n * @param filters array of filters\r\n * @returns\r\n */\r\nexport const getAccountFilterValue = (filters: string[]): string[] => {\r\n    if (!filters || filters.length === 0) {\r\n        return [AccountFilter.ALL]\r\n    }\r\n    return filters\r\n}\r\n\r\n/**\r\n * Given an array of filters and a new picked filter resolves the next filters values\r\n * checking which filters can be combined.\r\n * @param newFilter new picked filter\r\n * @param currentFilters array of current selected filters.\r\n * @returns\r\n */\r\nexport const getNextAccountFilterValue = (\r\n    newFilter: AccountFilter,\r\n    currentFilters: string[]\r\n): string[] => {\r\n    if (currentFilters.includes(newFilter)) {\r\n        const nextFilters = currentFilters.filter(\r\n            (filter) => filter !== newFilter\r\n        )\r\n        if (\r\n            !nextFilters.includes(AccountFilter.EXTERNAL) &&\r\n            !nextFilters.includes(AccountFilter.HARDWARE)\r\n        ) {\r\n            return [AccountFilter.ALL, ...nextFilters]\r\n        }\r\n        return nextFilters\r\n    }\r\n    const options = AccountFilterOptions[newFilter]\r\n    const filteredFilters = (currentFilters || []).filter((filter) => {\r\n        return options.combinableValues.includes(filter as AccountFilter)\r\n    })\r\n    return [newFilter, ...filteredFilters]\r\n}\r\n\r\nconst matchByTerm =\r\n    (term?: string) =>\r\n    (account: AccountInfo): boolean => {\r\n        if (!term) return true\r\n        return (\r\n            account.name.toLowerCase().includes(term) ||\r\n            account.address.toLowerCase().includes(term)\r\n        )\r\n    }\r\n\r\nconst filterByAccountFilter =\r\n    (accountFilters?: AccountFilter[]) =>\r\n    (account: AccountInfo): boolean => {\r\n        const safeFilters = getAccountFilterValue(accountFilters as string[])\r\n\r\n        //Hidden accounts cannot be hardware/external\r\n        if (safeFilters.includes(AccountFilter.HIDDEN)) {\r\n            if (isHiddenAccount(account)) {\r\n                return true\r\n            }\r\n        } else if (isHiddenAccount(account)) {\r\n            return false\r\n        }\r\n\r\n        if (\r\n            safeFilters.includes(AccountFilter.HARDWARE) &&\r\n            isHardwareWallet(account.accountType)\r\n        ) {\r\n            return true\r\n        }\r\n\r\n        if (\r\n            safeFilters.includes(AccountFilter.EXTERNAL) &&\r\n            isExternalAccount(account.accountType)\r\n        ) {\r\n            return true\r\n        }\r\n\r\n        return safeFilters.includes(AccountFilter.ALL)\r\n    }\r\n\r\n/**\r\n * Util to filter an account list by name or address.\r\n * @param accounts account list to filter\r\n * @param term string value to apply\r\n * @returns filtered account list\r\n */\r\n\r\nexport const filterAccounts = (\r\n    accounts: AccountInfo[],\r\n    {\r\n        term,\r\n        accountFilters,\r\n    }: { term?: string; accountFilters?: AccountFilter[] }\r\n) => {\r\n    return accounts\r\n        .filter(matchByTerm(term))\r\n        .filter(filterByAccountFilter(accountFilters))\r\n}\r\n","import { FC, PropsWithChildren } from \"react\"\r\nimport classnames from \"classnames\"\r\n\r\ninterface BadgeProps {\r\n    profile: \"default\" | \"success\" | \"error\" | \"warning\" | \"info\" | \"dark\"\r\n    size?: \"sm\" | \"md\"\r\n}\r\n\r\nconst PROFILE_COLORS = {\r\n    default: {\r\n        backgroundColor: \"bg-gray-600\",\r\n        textColor: \"text-white\",\r\n    },\r\n    success: {\r\n        backgroundColor: \"bg-green-100\",\r\n        textColor: \"text-green-600\",\r\n        borderColor: \"border-green-300\",\r\n    },\r\n    error: {\r\n        backgroundColor: \"bg-red-600\",\r\n        textColor: \"text-white\",\r\n    },\r\n    warning: {\r\n        backgroundColor: \"text-yellow-600\",\r\n        textColor: \"bg-yellow-100\",\r\n    },\r\n    info: {\r\n        backgroundColor: \"bg-blue-500\",\r\n        textColor: \"text-white\",\r\n    },\r\n    dark: {\r\n        backgroundColor: \"bg-black\",\r\n        textColor: \"text-white\",\r\n    },\r\n}\r\n\r\nconst Tag: FC<PropsWithChildren<BadgeProps>> = ({\r\n    children,\r\n    profile,\r\n    size,\r\n}) => {\r\n    const { backgroundColor, textColor } = PROFILE_COLORS[profile]\r\n    const tagSize = size || \"md\"\r\n    return (\r\n        <span\r\n            className={classnames(\r\n                \"px-1.5 py-0.5 rounded-sm\",\r\n                tagSize === \"sm\" ? \"text-xxs\" : \"text-xs\",\r\n                backgroundColor,\r\n                textColor\r\n            )}\r\n        >\r\n            {children}\r\n        </span>\r\n    )\r\n}\r\n\r\nexport default Tag\r\n","import { useState } from \"react\"\r\n\r\nconst useCopyToClipboard = (initialText?: string) => {\r\n    const [copied, setCopied] = useState<boolean>(false)\r\n    return {\r\n        copied,\r\n        //you can override the inital text if you want to.\r\n        onCopy: async (text?: string) => {\r\n            await navigator.clipboard.writeText(text || initialText || \"\")\r\n            setCopied(true)\r\n            await new Promise((resolve) => setTimeout(resolve, 1000))\r\n            setCopied(false)\r\n        },\r\n    }\r\n}\r\n\r\nexport const useMultipleCopyToClipboard = () => {\r\n    const [copied, setCopied] = useState<number>(-1)\r\n    return {\r\n        copied,\r\n        //you can override the inital text if you want to.\r\n        onCopy: async (text: string, id: number) => {\r\n            await navigator.clipboard.writeText(text || \"\")\r\n            setCopied(id)\r\n            await new Promise((resolve) => setTimeout(resolve, 1000))\r\n            setCopied(-1)\r\n        },\r\n    }\r\n}\r\n\r\nexport default useCopyToClipboard\r\n","import { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport { toChecksumAddress } from \"ethereumjs-util\"\r\n\r\nconst CHAIN_IDS_REQUIRE_EIP1191 = [30, 31]\r\n\r\nexport const useSelectedAddressWithChainIdChecksum = (): string => {\r\n    const { selectedAddress } = useBlankState()!\r\n    return useAddressWithChainIdChecksum(selectedAddress)\r\n}\r\n\r\nexport const useAddressWithChainIdChecksum = (address: string): string => {\r\n    const { chainId } = useSelectedNetwork()\r\n    const eip1191ChainId = CHAIN_IDS_REQUIRE_EIP1191.includes(chainId)\r\n        ? chainId\r\n        : undefined\r\n    return toChecksumAddress(address, eip1191ChainId)\r\n}\r\n","import { useState } from \"react\"\r\nimport { FunctionComponent } from \"react\"\r\n\r\nimport { formatUnits } from \"@ethersproject/units\"\r\nimport { AccountInfo } from \"@block-wallet/background/controllers/AccountTrackerController\"\r\nimport {\r\n    formatName,\r\n    formatHash,\r\n    formatHashLastChars,\r\n} from \"../../util/formatAccount\"\r\nimport { getAccountColor } from \"../../util/getAccountColor\"\r\nimport { formatNumberLength } from \"../../util/formatNumberLength\"\r\n\r\nimport AccountIcon from \"../icons/AccountIcon\"\r\nimport checkmarkIcon from \"../../assets/images/icons/checkmark_mini.svg\"\r\nimport { classnames } from \"../../styles\"\r\nimport ConfirmDialog from \"../dialog/ConfirmDialog\"\r\nimport CopyTooltip from \"../label/Ð¡opyToClipboardTooltip\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport useIsHovering from \"../../util/hooks/useIsHovering\"\r\nimport {\r\n    AccountDisplayMenuOption,\r\n    AccountMenuOptionMetadata,\r\n    getAccountMenuOptionMetadata,\r\n} from \"./AccountDisplayMenu\"\r\nimport Tag from \"../ui/Tag\"\r\nimport { isInternalAccount } from \"../../util/account\"\r\nimport useCopyToClipboard from \"../../util/hooks/useCopyToClipboard\"\r\nimport Dropdown from \"../ui/Dropdown/Dropdown\"\r\nimport { toChecksumAddress } from \"ethereumjs-util\"\r\nimport { useAddressWithChainIdChecksum } from \"../../util/hooks/useSelectedAddressWithChainIdChecksum\"\r\n\r\ninterface ConfirmDialogState {\r\n    isOpen: boolean\r\n    onConfirm?: () => void\r\n    title?: string\r\n    message?: string\r\n}\r\n\r\ninterface AccountDisplayProps {\r\n    account: AccountInfo\r\n    selected?: boolean\r\n    showSelectedCheckmark?: boolean\r\n    showAddress?: boolean\r\n    showConnected?: boolean\r\n    copyAddressToClipboard?: boolean\r\n    menu?: AccountDisplayMenuOption[]\r\n    actionButtons?: JSX.Element[]\r\n    onClickAccount?: (account: AccountInfo) => void\r\n}\r\n\r\nconst AccountDisplay: FunctionComponent<AccountDisplayProps> = ({\r\n    account,\r\n    selected,\r\n    showSelectedCheckmark = true,\r\n    showAddress = false,\r\n    showConnected = false,\r\n    copyAddressToClipboard = false,\r\n    actionButtons,\r\n    menu,\r\n    onClickAccount,\r\n}) => {\r\n    const [confirmationDialog, setConfirmationDialog] =\r\n        useState<ConfirmDialogState>({ isOpen: false })\r\n    const { isHovering: isHoveringMenu, getIsHoveringProps } = useIsHovering()\r\n    const { chainId, nativeCurrency } = useSelectedNetwork()\r\n    const checksumAddress = useAddressWithChainIdChecksum(account?.address)\r\n\r\n    const { copied, onCopy } = useCopyToClipboard(checksumAddress)\r\n\r\n    const handleOptionClick = (optionMetadata: AccountMenuOptionMetadata) => {\r\n        if (!optionMetadata.requiresConfirmation) {\r\n            return optionMetadata.handler!(checksumAddress)\r\n        }\r\n        setConfirmationDialog({\r\n            onConfirm: () => optionMetadata.handler!(checksumAddress),\r\n            isOpen: true,\r\n            title: optionMetadata.confirmationTitle,\r\n            message: optionMetadata.confirmationMessage,\r\n        })\r\n    }\r\n\r\n    const nativeTokenBalance =\r\n        (account.balances && account.balances[chainId]?.nativeTokenBalance) ??\r\n        \"0\"\r\n\r\n    const hoverStyle =\r\n        onClickAccount && !selected && !actionButtons && !isHoveringMenu\r\n\r\n    const accountName = formatName(account.name, showAddress ? 25 : 18)\r\n\r\n    return (\r\n        <>\r\n            <div\r\n                className={classnames(\r\n                    \"flex flex-row items-center justify-between w-full rounded-md\",\r\n                    hoverStyle && \"hover:bg-primary-100 cursor-pointer\",\r\n                    confirmationDialog.isOpen && \"!cursor-default\"\r\n                )}\r\n                onClick={() => onClickAccount && onClickAccount(account)}\r\n                role=\"button\"\r\n                aria-label={accountName}\r\n            >\r\n                <div\r\n                    className=\"flex flex-row items-center space-x-3 text-gray-900 p-2\"\r\n                    role=\"link\"\r\n                    data-testid=\"account-icon\"\r\n                >\r\n                    <AccountIcon\r\n                        className=\"w-10 h-10\"\r\n                        fill={getAccountColor(checksumAddress)}\r\n                    />\r\n                    <div className=\"flex flex-col\">\r\n                        <div\r\n                            className={classnames(\r\n                                \"relative flex flex-col items-start group\",\r\n                                copyAddressToClipboard && \"cursor-pointer\"\r\n                            )}\r\n                            onClick={() => copyAddressToClipboard && onCopy()}\r\n                        >\r\n                            <div className=\"flex flex-row space-x-1\">\r\n                                <label\r\n                                    className={classnames(\r\n                                        \"font-bold\",\r\n                                        hoverStyle && \"cursor-pointer\"\r\n                                    )}\r\n                                    title={account.name}\r\n                                    htmlFor={`check-account-${checksumAddress}`}\r\n                                >\r\n                                    {accountName}\r\n                                </label>\r\n                                {!showAddress && (\r\n                                    <span\r\n                                        className=\"font-bold\"\r\n                                        title={checksumAddress}\r\n                                    >\r\n                                        {formatHashLastChars(checksumAddress)}\r\n                                    </span>\r\n                                )}\r\n                            </div>\r\n                            {!showAddress ? (\r\n                                <span\r\n                                    className=\"text-gray-500\"\r\n                                    title={`${formatUnits(\r\n                                        nativeTokenBalance\r\n                                    )} ${nativeCurrency.symbol}`}\r\n                                >\r\n                                    {formatNumberLength(\r\n                                        formatUnits(nativeTokenBalance),\r\n                                        10\r\n                                    )}{\" \"}\r\n                                    {nativeCurrency.symbol}\r\n                                </span>\r\n                            ) : (\r\n                                <span className=\"text-gray-500\">\r\n                                    {formatHash(checksumAddress)}\r\n                                </span>\r\n                            )}\r\n                            {copyAddressToClipboard && (\r\n                                <CopyTooltip copied={copied} />\r\n                            )}\r\n                        </div>\r\n                        {(!isInternalAccount(account.accountType) ||\r\n                            showConnected) && (\r\n                            <div className=\"flex flex-row space-x-1 text-xxs text-white pt-1\">\r\n                                {account.accountType && (\r\n                                    <Tag profile=\"dark\">\r\n                                        <span className=\"font-bold\">\r\n                                            {account.accountType.toString()}\r\n                                        </span>\r\n                                    </Tag>\r\n                                )}\r\n\r\n                                {showConnected && (\r\n                                    <Tag profile=\"success\">Connected</Tag>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex flex-row items-center space-x-3\">\r\n                    {selected && showSelectedCheckmark ? (\r\n                        <img\r\n                            src={checkmarkIcon}\r\n                            alt=\"checkmark\"\r\n                            className=\"w-4 h-4\"\r\n                        />\r\n                    ) : null}\r\n\r\n                    {actionButtons}\r\n\r\n                    {menu && (\r\n                        <div {...getIsHoveringProps()}>\r\n                            <Dropdown>\r\n                                <Dropdown.Menu id=\"account-menu\">\r\n                                    {menu.map((menuItem, indx) => {\r\n                                        const optionMenuMetadata =\r\n                                            getAccountMenuOptionMetadata(\r\n                                                menuItem,\r\n                                                account\r\n                                            )\r\n                                        return (\r\n                                            <Dropdown.MenuItem\r\n                                                key={`${menuItem.optionType}_${indx}`}\r\n                                                className=\"p-2\"\r\n                                                onClick={() =>\r\n                                                    handleOptionClick(\r\n                                                        optionMenuMetadata\r\n                                                    )\r\n                                                }\r\n                                            >\r\n                                                <optionMenuMetadata.Component\r\n                                                    key={menuItem.optionType}\r\n                                                    disabled={menuItem.disabled}\r\n                                                />\r\n                                            </Dropdown.MenuItem>\r\n                                        )\r\n                                    })}\r\n                                </Dropdown.Menu>\r\n                            </Dropdown>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            <ConfirmDialog\r\n                title={confirmationDialog.title || \"\"}\r\n                message={confirmationDialog.message || \"\"}\r\n                open={confirmationDialog.isOpen}\r\n                onClose={() => setConfirmationDialog({ isOpen: false })}\r\n                onConfirm={confirmationDialog.onConfirm!}\r\n            />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AccountDisplay\r\n","import { FunctionComponent } from \"react\"\r\nimport AccountDisplay from \"../account/AccountDisplay\"\r\nimport { AccountInfo } from \"@block-wallet/background/controllers/AccountTrackerController\"\r\nimport { Classes, classnames } from \"../../styles\"\r\n\r\nconst AccountMultipleSelect: FunctionComponent<{\r\n    accounts: AccountInfo[]\r\n    selectedAccount?: AccountInfo\r\n    showAddress?: boolean\r\n    value: AccountInfo[]\r\n    onChange: (value: AccountInfo[]) => void\r\n}> = ({ accounts, selectedAccount, showAddress = false, value, onChange }) => {\r\n    const toggleAccount = (account: AccountInfo) => {\r\n        const newValue = value.some((a) => a.address === account.address)\r\n            ? value.filter((a) => a.address !== account.address)\r\n            : [...value, account]\r\n        onChange(newValue)\r\n    }\r\n    return (\r\n        <div className=\"flex flex-col space-y-3 text-sm text-gray-500\">\r\n            {accounts.map((account, i) => (\r\n                <div\r\n                    className=\"flex flex-row items-center space-x-3 cursor-pointer rounded-md hover:bg-primary-100 pl-2\"\r\n                    key={i}\r\n                    onClick={() => toggleAccount(account)}\r\n                >\r\n                    <input\r\n                        type=\"checkbox\"\r\n                        className={classnames(Classes.checkboxAlt)}\r\n                        checked={value.some(\r\n                            (a) => a.address === account.address\r\n                        )}\r\n                        onChange={() => toggleAccount(account)}\r\n                        id={`check-account-${account.address}`}\r\n                        aria-label={account.name}\r\n                    />\r\n                    <AccountDisplay\r\n                        account={account}\r\n                        showAddress={showAddress}\r\n                    />\r\n                </div>\r\n            ))}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AccountMultipleSelect\r\n","import { AccountInfo } from \"@block-wallet/background/controllers/AccountTrackerController\"\r\nimport { useMemo } from \"react\"\r\nimport { getSortedAccounts } from \"../../util/account\"\r\nimport { useBlankState } from \"../background/backgroundHooks\"\r\n\r\nexport const useSortedAccounts = (\r\n    {\r\n        includeHiddenAccounts,\r\n        filterCurrentAccount,\r\n    }: {\r\n        includeHiddenAccounts?: boolean\r\n        filterCurrentAccount?: boolean\r\n    } = { includeHiddenAccounts: false, filterCurrentAccount: false }\r\n): AccountInfo[] => {\r\n    const { accounts, hiddenAccounts, selectedAddress } = useBlankState()!\r\n    return useMemo(() => {\r\n        return getSortedAccounts({\r\n            ...accounts,\r\n            ...(includeHiddenAccounts ? hiddenAccounts : {}),\r\n        }).filter((account) => {\r\n            if (filterCurrentAccount) {\r\n                return account.address !== selectedAddress\r\n            }\r\n            return true\r\n        })\r\n    }, [\r\n        accounts,\r\n        hiddenAccounts,\r\n        includeHiddenAccounts,\r\n        selectedAddress,\r\n        filterCurrentAccount,\r\n    ])\r\n}\r\n","import classnames from \"classnames\"\r\nimport { FunctionComponent } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { Classes } from \"../../styles\"\r\n\r\nexport const ActionButton: FunctionComponent<{\r\n    icon: string\r\n    label: string\r\n    to: string\r\n    state?: any\r\n}> = ({ icon, label, to, state }) => {\r\n    return (\r\n        <Link\r\n            className={classnames(Classes.actionButton)}\r\n            to={{ pathname: to, state: state }}\r\n            draggable={false}\r\n        >\r\n            <img\r\n                src={icon}\r\n                alt={label}\r\n                className={classnames(Classes.buttonIcon)}\r\n            />\r\n            {label}\r\n        </Link>\r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/account_add.f24c6f75.svg\";","import classnames from \"classnames\"\r\nimport { FunctionComponent, useEffect, useRef, useState } from \"react\"\r\nimport { ActionButton } from \"../button/ActionButton\"\r\n\r\n// Assets\r\nimport accountAdd from \"../../assets/images/icons/account_add.svg\"\r\n\r\nimport CloseIcon from \"../icons/CloseIcon\"\r\nimport OutlinedButton from \"../ui/OutlinedButton\"\r\nimport Icon, { IconName } from \"../ui/Icon\"\r\n\r\nconst AccountSearchBar: FunctionComponent<{\r\n    createAccountTo?: any\r\n    onChange: (value: string) => void\r\n    setIsSearching: (isSearching: boolean) => void\r\n}> = ({\r\n    createAccountTo = { pathname: \"/accounts/create\" },\r\n    onChange,\r\n    setIsSearching,\r\n}) => {\r\n    const [searchBarVisible, setSearchBarVisible] = useState(false)\r\n    const inputRef = useRef<HTMLInputElement>(null)\r\n\r\n    useEffect(() => {\r\n        searchBarVisible && inputRef.current!.focus()\r\n    }, [searchBarVisible])\r\n\r\n    const onValueChanged = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (onChange) onChange(e.target.value)\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className={classnames(\r\n                \"flex justify-between w-full\",\r\n                !searchBarVisible && \"space-x-2\"\r\n            )}\r\n        >\r\n            <div\r\n                className={classnames(\r\n                    \"transition-opacity duration-75    \",\r\n                    !searchBarVisible\r\n                        ? \"flex-1 delay-300 opacity-100\"\r\n                        : \"w-0 opacity-0 \"\r\n                )}\r\n            >\r\n                {!searchBarVisible && (\r\n                    <ActionButton\r\n                        icon={accountAdd}\r\n                        label=\"Create Account\"\r\n                        to={createAccountTo.pathname}\r\n                        state={createAccountTo.state}\r\n                    />\r\n                )}\r\n            </div>\r\n            <OutlinedButton\r\n                className={classnames(\r\n                    \"transition-width\",\r\n                    searchBarVisible\r\n                        ? \"w-full delay-150 duration-500\"\r\n                        : \"w-auto duration-100 cursor-pointer\"\r\n                )}\r\n                onClick={() => {\r\n                    if (!searchBarVisible) {\r\n                        setSearchBarVisible(true)\r\n                        setIsSearching(true)\r\n                    }\r\n                }}\r\n            >\r\n                <Icon name={IconName.SEARCH} profile=\"default\" />\r\n                <input\r\n                    ref={inputRef}\r\n                    className={classnames(\r\n                        \"bg-transparent p-0 border-none w-10/12 font-normal\",\r\n                        \"transition-opacity\",\r\n                        searchBarVisible\r\n                            ? \"opacity-100 duration-100 delay-500 flex-1\"\r\n                            : \"opacity-0 !w-0 !m-0\"\r\n                    )}\r\n                    placeholder=\"Search for Account\"\r\n                    onChange={onValueChanged}\r\n                />\r\n                <div\r\n                    className={classnames(\r\n                        \"w-1/12 hover:text-primary-300\",\r\n                        \"transition-opacity\",\r\n                        searchBarVisible\r\n                            ? \"opacity-100 delay-500 duration-75\"\r\n                            : \"opacity-0 duration-75 !w-0 !m-0 invisible\"\r\n                    )}\r\n                    onClick={() => {\r\n                        inputRef.current!.value = \"\"\r\n                        setSearchBarVisible(false)\r\n                        setIsSearching(false)\r\n                    }}\r\n                >\r\n                    <CloseIcon size=\"12\" />\r\n                </div>\r\n            </OutlinedButton>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AccountSearchBar\r\n","import { AccountInfo } from \"@block-wallet/background/controllers/AccountTrackerController\"\r\nimport { useMemo, useState } from \"react\"\r\nimport { filterAccounts } from \"../../filterAccounts\"\r\n\r\nconst useAccountSearch = (accounts: AccountInfo[]) => {\r\n    const [search, setSearch] = useState(\"\")\r\n    const result = useMemo(\r\n        () => filterAccounts(accounts, { term: (search || \"\").toLowerCase() }),\r\n        [search, accounts]\r\n    )\r\n    return {\r\n        accounts: result,\r\n        search,\r\n        onChangeSearch: setSearch,\r\n    }\r\n}\r\n\r\nexport default useAccountSearch\r\n","import { useState } from \"react\"\r\nimport ErrorDialog from \"./dialog/ErrorDialog\"\r\nimport WarningDialog from \"./dialog/WarningDialog\"\r\n\r\ninterface CollapsableWarningProps {\r\n    isCollapsedByDefault: boolean\r\n    type?: \"warn\" | \"error\"\r\n    onDismiss?: () => void\r\n    dialog: {\r\n        title: string\r\n        message: JSX.Element | string\r\n    }\r\n    collapsedMessage: JSX.Element | string\r\n}\r\nconst CollapsableWarning = ({\r\n    isCollapsedByDefault,\r\n    onDismiss,\r\n    dialog,\r\n    type = \"warn\",\r\n    collapsedMessage,\r\n}: CollapsableWarningProps) => {\r\n    const [isCollapsed, setIsCollapsed] = useState(isCollapsedByDefault)\r\n\r\n    const onClose = () => {\r\n        setIsCollapsed(true)\r\n        if (onDismiss) {\r\n            onDismiss()\r\n        }\r\n    }\r\n\r\n    const Dialog = type === \"warn\" ? WarningDialog : ErrorDialog\r\n\r\n    return (\r\n        <>\r\n            <div\r\n                onClick={() => setIsCollapsed(false)}\r\n                className=\"cursor-pointer\"\r\n            >\r\n                {collapsedMessage}\r\n            </div>\r\n            {!isCollapsed && (\r\n                <Dialog\r\n                    open={true}\r\n                    title={dialog.title}\r\n                    message={dialog.message}\r\n                    buttonLabel=\"OK\"\r\n                    onCancel={onClose}\r\n                    onDone={onClose}\r\n                />\r\n            )}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CollapsableWarning\r\n","import { useEffect, useState } from \"react\"\r\n\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\n\r\nimport { Classes } from \"../../styles/classes\"\r\n\r\nimport Divider from \"../../components/Divider\"\r\nimport connectIcon from \"../../assets/images/icons/connect_dapp.svg\"\r\nimport { useSelectedAccount } from \"../../context/hooks/useSelectedAccount\"\r\nimport AccountMultipleSelect from \"../../components/account/AccountMultipleSelect\"\r\nimport { AccountInfo } from \"@block-wallet/background/controllers/AccountTrackerController\"\r\nimport AppIcon from \"../../components/icons/AppIcon\"\r\nimport { confirmPermission } from \"../../context/commActions\"\r\nimport { usePendingPermissionRequest } from \"../../context/hooks/usePendingPermissionRequest\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport LoadingOverlay from \"../../components/loading/LoadingOverlay\"\r\nimport { AiFillInfoCircle, AiOutlineWarning } from \"react-icons/ai\"\r\nimport Tooltip from \"../../components/label/Tooltip\"\r\nimport { useSortedAccounts } from \"../../context/hooks/useSortedAccounts\"\r\nimport useNextRequestRoute from \"../../context/hooks/useNextRequestRoute\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport AccountSearchBar from \"../../components/account/AccountSearchBar\"\r\nimport useAccountSearch from \"../../util/hooks/account/useAccountSearch\"\r\nimport WaitingDialog, {\r\n    useWaitingDialog,\r\n} from \"../../components/dialog/WaitingDialog\"\r\nimport { PermissionRequest } from \"@block-wallet/background/controllers/PermissionsController\"\r\nimport useDebouncedState from \"../../util/hooks/useDebouncedState\"\r\nimport { DAPP_FEEDBACK_WINDOW_TIMEOUT, LINKS } from \"../../util/constants\"\r\nimport GenericTooltip from \"../../components/label/GenericTooltip\"\r\nimport CollapsableWarning from \"../../components/CollapsableWarning\"\r\nimport { isOriginSafe } from \"../../util/isOriginSafe\"\r\n\r\nconst ConnectPage = () => {\r\n    const pendingPermissionRequest = usePendingPermissionRequest()\r\n    const route = useNextRequestRoute()\r\n    const [nextRequest, setNextRequest] = useDebouncedState(\r\n        pendingPermissionRequest,\r\n        DAPP_FEEDBACK_WINDOW_TIMEOUT\r\n    )\r\n    useEffect(() => {\r\n        setNextRequest(pendingPermissionRequest)\r\n    }, [setNextRequest, pendingPermissionRequest])\r\n\r\n    return nextRequest.requestId ? (\r\n        <ConnectSteps {...nextRequest} />\r\n    ) : (\r\n        <Redirect to={route} />\r\n    )\r\n}\r\n\r\nconst ConnectSteps = ({\r\n    requestCount,\r\n    requestId,\r\n    site,\r\n}: {\r\n    requestCount: number\r\n    requestId: string\r\n    site: PermissionRequest\r\n}) => {\r\n    const isSiteOriginSafe = isOriginSafe(site.origin)\r\n    const accountsList = useSortedAccounts()\r\n    const account = useSelectedAccount()\r\n\r\n    // State\r\n    const [selectedAccounts, setSelectedAccounts] = useState<AccountInfo[]>([\r\n        account,\r\n    ])\r\n\r\n    const { accounts: filteredAccounts, onChangeSearch } = useAccountSearch([\r\n        account, // Place selected account at the top\r\n        ...accountsList.filter((a) => a.address !== account.address),\r\n    ])\r\n    const { status, isOpen, dispatch, texts, titles } = useWaitingDialog()\r\n    const [step, setStep] = useState(1)\r\n    const [allowSite, setAllowSite] = useState(true)\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [checkAll, setCheckAll] = useState(false)\r\n\r\n    const nextEnabled = step === 1 ? selectedAccounts.length > 0 : allowSite\r\n\r\n    const next = async () => {\r\n        step === 1 ? setStep(2) : confirm()\r\n    }\r\n\r\n    const cancel = () => {\r\n        step === 2 ? setStep(1) : confirm(false)\r\n    }\r\n\r\n    const confirm = async (accept = true) => {\r\n        dispatch({\r\n            type: \"open\",\r\n            payload: {\r\n                status: \"loading\",\r\n                titles: { loading: accept ? \"Connecting...\" : \"Rejecting...\" },\r\n                texts: {\r\n                    loading: accept\r\n                        ? \"Connecting accounts...\"\r\n                        : \"Rejecting request...\",\r\n                },\r\n            },\r\n        })\r\n        await new Promise<void>((resolve) => {\r\n            setTimeout(resolve, 300)\r\n        })\r\n        await confirmPermission(\r\n            requestId,\r\n            accept ? selectedAccounts.map((a) => a.address) : null\r\n        )\r\n        dispatch({\r\n            type: \"setStatus\",\r\n            payload: {\r\n                status: accept ? \"success\" : \"error\",\r\n                titles: {\r\n                    error: \"Rejected\",\r\n                    success: \"Connected\",\r\n                },\r\n                texts: {\r\n                    success: \"You've successfully connected your accounts.\",\r\n                    error: \"Request rejected.\",\r\n                },\r\n            },\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (selectedAccounts.length !== filteredAccounts.length) {\r\n            setCheckAll(false)\r\n        }\r\n    }, [selectedAccounts, filteredAccounts])\r\n\r\n    const postProcess = async () => {\r\n        setStep(1)\r\n        setSelectedAccounts([account])\r\n        setIsLoading(false)\r\n    }\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    title=\"Connect With BlockWallet\"\r\n                    close={false}\r\n                    onBack={cancel}\r\n                >\r\n                    {requestCount > 1 && (\r\n                        <div className=\"group relative\">\r\n                            <AiFillInfoCircle\r\n                                size={26}\r\n                                className=\"pl-2 text-primary-200 cursor-pointer hover:text-primary-300\"\r\n                            />\r\n                            <Tooltip\r\n                                content={`${requestCount - 1} more ${\r\n                                    requestCount > 2 ? \"requests\" : \"request\"\r\n                                }`}\r\n                            />\r\n                        </div>\r\n                    )}\r\n                    <span className=\"ml-auto text-sm text-gray-600\">\r\n                        {step} of 2\r\n                    </span>\r\n                </PopupHeader>\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        label={step === 1 ? \"Next\" : \"Connect\"}\r\n                        disabled={!nextEnabled}\r\n                        onClick={next}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            {isLoading && <LoadingOverlay />}\r\n            {!isSiteOriginSafe && (\r\n                <CollapsableWarning\r\n                    dialog={{\r\n                        title: \"Warning: Suspicious URL\",\r\n                        message: (\r\n                            <span>\r\n                                The DApp URL you are connecting to seems\r\n                                malicious. Make sure{\" \"}\r\n                                <a\r\n                                    className=\"underline text-blue-600 hover:text-blue-800\"\r\n                                    href={LINKS.ARTICLES.MALICIOUS_DAPPS}\r\n                                    target=\"_blank\"\r\n                                    rel=\"noreferrer\"\r\n                                >\r\n                                    you know and trust this decentralized\r\n                                    application\r\n                                </a>{\" \"}\r\n                                before connecting your wallet. Failure to do so\r\n                                may result in loss of funds.\r\n                            </span>\r\n                        ),\r\n                    }}\r\n                    isCollapsedByDefault\r\n                    collapsedMessage={\r\n                        <div className=\"text-center  bg-yellow-200 hover:bg-yellow-100 opacity-90  w-full p-2 space-x-2 flex tems-center font-bold justify-center\">\r\n                            <AiOutlineWarning className=\"w-4 h-4 yellow-300\" />\r\n                            <span className=\"text-xs text-yellow-900\">\r\n                                <span className=\"font-bold\">\r\n                                    This DApp URL seems malicious.\r\n                                </span>\r\n                            </span>\r\n                        </div>\r\n                    }\r\n                />\r\n            )}\r\n            <WaitingDialog\r\n                status={status}\r\n                open={isOpen}\r\n                titles={{\r\n                    loading: titles?.loading || \"Connecting...\",\r\n                    success: titles?.success || \"Success\",\r\n                    error: titles?.error || \"Error\",\r\n                }}\r\n                texts={{\r\n                    loading: texts?.loading || \"Loading...\",\r\n                    success:\r\n                        texts?.success || \"You've connected your accounts.\",\r\n                    error:\r\n                        texts?.error ||\r\n                        \"There was an error connecting the accounts.\",\r\n                }}\r\n                onDone={() => {\r\n                    dispatch({ type: \"close\" })\r\n                    postProcess()\r\n                }}\r\n                timeout={DAPP_FEEDBACK_WINDOW_TIMEOUT}\r\n                hideButton\r\n            />\r\n            <div className=\"overflow-auto hide-scroll\">\r\n                <div className=\"flex flex-col items-center w-full p-6 space-y-3\">\r\n                    <AppIcon\r\n                        iconURL={site.siteMetadata.iconURL || connectIcon}\r\n                        size={14}\r\n                        background={false}\r\n                    />\r\n                    <div className=\"w-max max-w-full group relative\">\r\n                        <p className=\"text-center text-sm text-gray-800 whitespace-pre-wrap max-w-full truncate\">\r\n                            {site.origin}\r\n                        </p>\r\n                        <GenericTooltip\r\n                            bottom\r\n                            className=\"p-2 break-all max-w-[310px]\"\r\n                            content={\r\n                                <div>\r\n                                    <p>\r\n                                        <span className=\"font-bold\">\r\n                                            Origin:\r\n                                        </span>\r\n                                        <br />\r\n                                        <span data-testid=\"transaction-origin\">\r\n                                            {site.origin}\r\n                                        </span>\r\n                                    </p>\r\n                                </div>\r\n                            }\r\n                        />\r\n                    </div>\r\n\r\n                    <span className=\"text-xs text-gray-600\">\r\n                        Only connect with sites you trust.\r\n                    </span>\r\n                </div>\r\n                <Divider />\r\n                {step === 1 ? (\r\n                    <div className=\"flex flex-col p-6 space-y-5\">\r\n                        <AccountSearchBar\r\n                            setIsSearching={(isSearching: boolean) => {\r\n                                if (!isSearching) {\r\n                                    onChangeSearch(\"\")\r\n                                }\r\n                            }}\r\n                            onChange={onChangeSearch}\r\n                        />\r\n                        <div className=\"flex flex-row items-center justify-start w-full text-sm space-x-4 cursor-pointer\">\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                className={Classes.checkboxAlt}\r\n                                checked={checkAll}\r\n                                onClick={() => {\r\n                                    !checkAll\r\n                                        ? setSelectedAccounts(filteredAccounts)\r\n                                        : setSelectedAccounts([])\r\n                                }}\r\n                                onChange={() => {\r\n                                    setCheckAll((c) => !c)\r\n                                }}\r\n                                id=\"selectAll\"\r\n                            />\r\n                            <label\r\n                                className=\"text-gray-600 cursor-pointer\"\r\n                                htmlFor=\"selectAll\"\r\n                            >\r\n                                Please select accounts:\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"flex flex-col space-y-3 text-sm text-gray-600\">\r\n                            <AccountMultipleSelect\r\n                                accounts={filteredAccounts}\r\n                                selectedAccount={account}\r\n                                value={selectedAccounts}\r\n                                onChange={setSelectedAccounts}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"flex flex-col p-6 space-y-6\">\r\n                        <span className=\"text-sm text-gray-600\">\r\n                            Allow this site to:\r\n                        </span>\r\n                        <div className=\"flex flex-row items-center space-x-4 text-sm text-gray-600 cursor-pointer\">\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                className={Classes.checkboxAlt}\r\n                                checked={allowSite}\r\n                                onChange={() => setAllowSite(!allowSite)}\r\n                                id=\"allowCheck\"\r\n                            />\r\n                            <label\r\n                                className=\"cursor-pointer\"\r\n                                htmlFor=\"allowCheck\"\r\n                            >\r\n                                View the addresses of your permitted accounts\r\n                                (required)\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default ConnectPage\r\n","/**\r\n * isOriginSafe\r\n *\r\n * check if the origin url of the dapp is safe by making sure that the domain is not bigger than 80 characters with no more than 3 subdomains.\r\n *\r\n * @param {string} origin - the origin url of the dapp\r\n * @returns {boolean} true if the origin is safe, false otherwise\r\n *\r\n */\r\nexport function isOriginSafe(origin: string) {\r\n    try {\r\n        const url = new URL(origin)\r\n        const domain = url.hostname\r\n        // subdomains including the domain itself\r\n        const subdomains = domain.split(\".\")\r\n        const isSafe =\r\n            subdomains.length <= 4 &&\r\n            subdomains.every((subdomain) => subdomain.length <= 25) &&\r\n            domain.length <= 80\r\n        return isSafe\r\n    } catch (e) {\r\n        return false\r\n    }\r\n}\r\n","import { useBlankState } from '../background/backgroundHooks'\r\n\r\nexport const usePendingPermissionRequest = () => {\r\n    const { permissionRequests } = useBlankState()!\r\n\r\n    const requests = Object.keys(permissionRequests)\r\n    const requestCount = requests.length\r\n\r\n    // Gets first permission request\r\n    const site = Object.values(permissionRequests)[0]\r\n    const requestId = requests[0]\r\n\r\n    return { requestCount, requestId, site }\r\n}","import { FunctionComponent, useMemo, useState } from \"react\"\r\nimport { SiteMetadata } from \"@block-wallet/provider/types\"\r\nimport ConfirmDialog from \"../../components/dialog/ConfirmDialog\"\r\nimport AppIcon from \"../../components/icons/AppIcon\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { removeAccountFromSite } from \"../../context/commActions\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport { useSelectedAccount } from \"../../context/hooks/useSelectedAccount\"\r\nimport { FaGlobe } from \"react-icons/fa\"\r\nimport { formatHashLastChars, formatName } from \"../../util/formatAccount\"\r\nimport Icon, { IconName } from \"../../components/ui/Icon\"\r\n\r\nconst ConnectedSite: FunctionComponent<{\r\n    site: SiteMetadata\r\n    origin: string\r\n    onSiteClick: (origin: string) => void\r\n    onDelete: (origin: string) => void\r\n}> = ({ site, origin, onSiteClick, onDelete }) => {\r\n    const [confirmOpen, setConfirmOpen] = useState(false)\r\n\r\n    return (\r\n        <div className=\"flex flex-row items-center justify-between w-full \">\r\n            <div\r\n                className=\"flex flex-row items-center space-x-4 w-11/12 hover:bg-primary-200 rounded-md p-1 cursor-pointer \"\r\n                onClick={() => onSiteClick(origin)}\r\n            >\r\n                <div className=\"flex flex-row items-center justify-center w-10 h-10 p-2 rounded-full bg-primary-100\">\r\n                    {site.iconURL ? (\r\n                        <AppIcon iconURL={site.iconURL} size={10} />\r\n                    ) : (\r\n                        <FaGlobe size={24} />\r\n                    )}\r\n                </div>\r\n                <span className=\"text-sm font-bold text-gray-800\">\r\n                    {new URL(origin).hostname}\r\n                </span>\r\n            </div>\r\n            <button\r\n                onClick={() => setConfirmOpen(true)}\r\n                className=\"hover:bg-primary-200 p-2 rounded-full\"\r\n            >\r\n                <Icon name={IconName.TRASH_BIN} />\r\n            </button>\r\n            <ConfirmDialog\r\n                title=\"Remove Site Connection\"\r\n                message={`Do you want to remove ${\r\n                    new URL(origin).hostname\r\n                } connection?`}\r\n                open={confirmOpen}\r\n                onClose={() => setConfirmOpen(false)}\r\n                onConfirm={() => onDelete(origin)}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst ConnectedSitesPage = () => {\r\n    const account = useSelectedAccount()\r\n    const state = useBlankState()!\r\n    const history = useOnMountHistory()\r\n    const fromAccountList = history.location.state?.fromAccountList\r\n\r\n    const connectedSites = useMemo(() => {\r\n        const permissions = Object.values(state.permissions)\r\n        const res = permissions.filter((p) =>\r\n            p.accounts.includes(state.selectedAddress)\r\n        )\r\n\r\n        return res\r\n    }, [state.permissions, state.selectedAddress])\r\n\r\n    const handleSiteClick = (origin: string) => {\r\n        history.push({\r\n            pathname: \"/accounts/menu/connectedSites/accountList\",\r\n            state: { origin, fromAccountList },\r\n        })\r\n    }\r\n\r\n    const handleDeleteClick = async (origin: string) => {\r\n        try {\r\n            await removeAccountFromSite(origin, state.selectedAddress)\r\n        } catch {}\r\n    }\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    title=\"Connected Sites\"\r\n                    onBack={() => {\r\n                        history.push({\r\n                            pathname: \"/accounts/menu\",\r\n                            state: { fromAccountList },\r\n                        })\r\n                    }}\r\n                />\r\n            }\r\n        >\r\n            <div className=\"flex flex-col p-6 space-y-6\">\r\n                <span className=\"text-sm text-gray-500\">\r\n                    <span className=\"font-bold text-black\" title={account.name}>\r\n                        {formatName(account.name, 30)}\r\n                    </span>\r\n                    <span\r\n                        className=\"font-bold text-black\"\r\n                        title={account.address}\r\n                    >\r\n                        {\" \"}\r\n                        {formatHashLastChars(account.address)}\r\n                    </span>\r\n                    {connectedSites.length > 0\r\n                        ? \" is connected to these sites. They can view your account address.\"\r\n                        : \" is not connected to any site.\"}\r\n                </span>\r\n                {connectedSites.length > 0 && (\r\n                    <div className=\"flex flex-col space-y-2\">\r\n                        {connectedSites.map((permission, i) => (\r\n                            <ConnectedSite\r\n                                key={i}\r\n                                site={permission.data}\r\n                                origin={permission.origin}\r\n                                onSiteClick={handleSiteClick}\r\n                                onDelete={handleDeleteClick}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default ConnectedSitesPage\r\n","import { FC } from \"react\"\r\n\r\ninterface IconProps {\r\n    profile?: \"normal\" | \"outlined\" | \"info\"\r\n    size?: string\r\n    className?: string\r\n}\r\n\r\ninterface ColorsDef {\r\n    background: string\r\n    icon: string\r\n}\r\n\r\ninterface ProfileDef {\r\n    [key: string]: ColorsDef\r\n}\r\n\r\nconst PROFILES: ProfileDef = {\r\n    normal: {\r\n        background: \"#F9F2E7\",\r\n        icon: \"#FFBB54\",\r\n    },\r\n    info: {\r\n        background: \"#49c5ff\",\r\n        icon: \"white\",\r\n    },\r\n    outlined: {\r\n        background: \"#FFBB54\",\r\n        icon: \"white\",\r\n    },\r\n}\r\n\r\nconst ExclamationCircleIconFull: FC<IconProps> = (props: any) => {\r\n    const { profile = \"normal\", size = \"20\", className = \"\" } = props\r\n    const { background, icon } = PROFILES[profile] || PROFILES.normal\r\n    return (\r\n        <svg\r\n            width={size}\r\n            height={size}\r\n            className={className}\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <rect width=\"24\" height=\"24\" rx=\"12\" fill={background} />\r\n            <path\r\n                d=\"M12.961 13.633L13.359 6H10.656L11.055 13.633H12.961Z\"\r\n                fill={icon}\r\n            />\r\n            <path\r\n                d=\"M12 18C12.8284 18 13.5 17.3284 13.5 16.5C13.5 15.6716 12.8284 15 12 15C11.1716 15 10.5 15.6716 10.5 16.5C10.5 17.3284 11.1716 18 12 18Z\"\r\n                fill={icon}\r\n            />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default ExclamationCircleIconFull\r\n","import { useState } from \"react\"\r\nimport { FunctionComponent } from \"react\"\r\nimport classnames from \"classnames\"\r\nimport ExclamationCircleIconFull from \"../icons/ExclamationCircleIconFull\"\r\nimport CloseIcon from \"../icons/CloseIcon\"\r\n\r\nconst warningBgStyle = {\r\n    backgroundColor: \"#F9F2E7\",\r\n    color: \"#FFBB54\",\r\n}\r\n\r\n/**\r\n * Warning tip component.\r\n *\r\n * @param text Warning to display.\r\n * @param withCloseIcon If true the tooltip will have a close button.\r\n * @param fontSize Set font size. Default is \"text-lg\".\r\n * @param justify Set flexbox justify. Default is \"justify-center\".\r\n * @param className Add custom styles to wrapper.\r\n */\r\nconst WarningTip: FunctionComponent<{\r\n    className?: string\r\n    fontSize?: string\r\n    justify?: string\r\n    text: string | JSX.Element\r\n    withCloseIcon?: boolean\r\n}> = ({ className, fontSize, justify, text, withCloseIcon = false }) => {\r\n    const [isClosed, setIsClosed] = useState(false)\r\n\r\n    return isClosed ? null : (\r\n        <div\r\n            className={classnames(\r\n                \"relative flex flex-row p-3 items-center rounded\",\r\n                justify ?? \"justify-center\",\r\n                className ?? className\r\n            )}\r\n            style={warningBgStyle}\r\n        >\r\n            <div>\r\n                <ExclamationCircleIconFull size=\"20\" profile=\"outlined\" />\r\n            </div>\r\n            <p\r\n                className={classnames(\r\n                    \"text-yellow-500 break-words ml-3\",\r\n                    fontSize ?? \"text-lg\"\r\n                )}\r\n            >\r\n                {text}\r\n            </p>\r\n            {withCloseIcon && (\r\n                <>\r\n                    <div className={\"w-5\"}></div>\r\n                    <div\r\n                        className={\r\n                            \"absolute right-3 cursor-pointer hover:text-yellow-500\"\r\n                        }\r\n                        onClick={() => setIsClosed(true)}\r\n                    >\r\n                        <CloseIcon size=\"10\" />\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default WarningTip\r\n","import { AccountInfo } from \"@block-wallet/background/controllers/AccountTrackerController\"\r\nimport { formatUnits } from \"@ethersproject/units\"\r\nimport { FunctionComponent, useMemo, useState } from \"react\"\r\nimport { BiRadioCircleMarked } from \"react-icons/bi\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport AccountIcon from \"../../components/icons/AccountIcon\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport ConfirmDialog from \"../../components/dialog/ConfirmDialog\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport {\r\n    removeAccountFromSite,\r\n    selectAccount,\r\n    updateSitePermissions,\r\n} from \"../../context/commActions\"\r\nimport {\r\n    useOnMountHistory,\r\n    useOnMountLocation,\r\n} from \"../../context/hooks/useOnMount\"\r\nimport { classnames } from \"../../styles\"\r\nimport { formatNumberLength } from \"../../util/formatNumberLength\"\r\nimport { getAccountColor } from \"../../util/getAccountColor\"\r\nimport WarningTip from \"../../components/label/WarningTip\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport { formatHashLastChars, formatName } from \"../../util/formatAccount\"\r\nimport Icon, { IconName } from \"../../components/ui/Icon\"\r\nimport Dropdown from \"../../components/ui/Dropdown/Dropdown\"\r\n\r\nexport type ConnectedSiteAccountsLocationState = {\r\n    origin: string\r\n    fromRoot?: boolean\r\n}\r\n\r\nconst ConnectedSiteAccount: FunctionComponent<{\r\n    account: AccountInfo\r\n    active: boolean\r\n    connected?: boolean\r\n    handleRemoveFromSite: (address: string) => void\r\n    handleConnectSite: (address: string) => void\r\n    handleSwitchAccount: (address: string) => void\r\n}> = ({\r\n    account,\r\n    active,\r\n    connected = true,\r\n    handleRemoveFromSite,\r\n    handleConnectSite,\r\n    handleSwitchAccount,\r\n}) => {\r\n    const [hasDialog, setHasDialog] = useState(false)\r\n\r\n    const { selectedAddress, networkNativeCurrency } = useBlankState()!\r\n    const { chainId } = useSelectedNetwork()\r\n\r\n    return (\r\n        <>\r\n            <div className=\"flex flex-col items-start\">\r\n                <div className=\"flex flex-row items-center justify-between w-full\">\r\n                    <div className=\"flex flex-row items-center space-x-4\">\r\n                        <div className=\"flex flex-row items-center justify-center w-10 h-10 rounded-full\">\r\n                            <AccountIcon\r\n                                className=\"w-10 h-10\"\r\n                                fill={getAccountColor(account.address)}\r\n                            />\r\n                        </div>\r\n                        <div className=\"flex flex-col space-y-1 cursor-default\">\r\n                            <div className=\"flex flex-row space-x-1\">\r\n                                <span\r\n                                    className=\"text-sm font-bold text-gray-800 cursor-text\"\r\n                                    title={account.name}\r\n                                >\r\n                                    {formatName(account.name, 18)}{\" \"}\r\n                                </span>\r\n                                <span\r\n                                    className=\"font-bold text-black cursor-text\"\r\n                                    title={account.address}\r\n                                >\r\n                                    {formatHashLastChars(account.address)}\r\n                                </span>\r\n                            </div>\r\n                            <span\r\n                                className=\"text-xs text-gray-400\"\r\n                                title={`${formatUnits(\r\n                                    account.balances[chainId]\r\n                                        .nativeTokenBalance || \"0\"\r\n                                )} ${networkNativeCurrency.symbol}`}\r\n                            >\r\n                                {formatNumberLength(\r\n                                    formatUnits(\r\n                                        account.balances[chainId]\r\n                                            .nativeTokenBalance || \"0\"\r\n                                    ),\r\n                                    10\r\n                                )}{\" \"}\r\n                                {networkNativeCurrency.symbol}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <Dropdown>\r\n                        <Dropdown.Menu id=\"connected-sites-menu\">\r\n                            {connected ? (\r\n                                <Dropdown.MenuItem\r\n                                    onClick={() => {\r\n                                        setHasDialog(true)\r\n                                    }}\r\n                                    className=\"text-red-500 space-x-2 cursor-pointer flex flex-row p-2 justify-center items-center hover:bg-gray-100 hover:rounded-t-md\"\r\n                                >\r\n                                    <Icon\r\n                                        name={IconName.TRASH_BIN}\r\n                                        profile=\"danger\"\r\n                                    />\r\n                                    <span>Disconnect</span>\r\n                                </Dropdown.MenuItem>\r\n                            ) : (\r\n                                <Dropdown.MenuItem\r\n                                    onClick={() => {\r\n                                        handleConnectSite(account.address)\r\n                                    }}\r\n                                    className=\"text-green-400 space-x-2 cursor-pointer flex flex-row p-2 justify-start items-center hover:bg-gray-100 hover:rounded-t-md\"\r\n                                >\r\n                                    <BiRadioCircleMarked size={24} />\r\n                                    <span>Connect</span>\r\n                                </Dropdown.MenuItem>\r\n                            )}\r\n                        </Dropdown.Menu>\r\n                    </Dropdown>\r\n                </div>\r\n                {connected ? (\r\n                    <div className=\"flex flex-row\">\r\n                        {active && (\r\n                            <div className=\"mt-2 ml-14 px-1.5 py-0.5 font-bold border rounded-sm text-xs border-gray-700 bg-gray-700 text-white pointer-events-none\">\r\n                                Active\r\n                            </div>\r\n                        )}\r\n                        {account.address !== selectedAddress && (\r\n                            <button\r\n                                className={classnames(\r\n                                    \"mt-2 px-1.5 py-0.5 font-bold border rounded-sm text-xs border-primary-300 text-primary-300 hover:bg-primary-200\",\r\n                                    active ? \"ml-2\" : \"ml-14\"\r\n                                )}\r\n                                onClick={() =>\r\n                                    handleSwitchAccount(account.address)\r\n                                }\r\n                            >\r\n                                Switch\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                ) : (\r\n                    <span\r\n                        className={classnames(\r\n                            \"mt-2 ml-14 px-1.5 py-0.5 border rounded-sm text-xs\",\r\n                            \"border-red-300  text-red-300 pointer-events-none\"\r\n                        )}\r\n                    >\r\n                        Not connected\r\n                    </span>\r\n                )}\r\n            </div>\r\n            <ConfirmDialog\r\n                title=\"Remove site connection\"\r\n                message={`Do you want to remove ${formatName(\r\n                    account.name,\r\n                    18\r\n                )} connection?`}\r\n                open={hasDialog}\r\n                onClose={() => setHasDialog(false)}\r\n                onConfirm={() => {\r\n                    handleRemoveFromSite(account.address)\r\n                }}\r\n            />\r\n        </>\r\n    )\r\n}\r\n\r\nconst ConnectedSiteAccountsPage = () => {\r\n    const { accounts, selectedAddress, permissions } = useBlankState()!\r\n    const { origin, fromRoot } =\r\n        useOnMountLocation<ConnectedSiteAccountsLocationState>().state || {}\r\n    const history = useOnMountHistory()\r\n    const permission = permissions[origin]\r\n    const site = permission?.data\r\n    const activeAcc = permission?.activeAccount\r\n\r\n    const connectedAccounts = useMemo(() => {\r\n        return permission?.accounts.filter((a) => a !== selectedAddress)\r\n    }, [permission?.accounts, selectedAddress])\r\n\r\n    const isSelectedAccountConnected = useMemo(() => {\r\n        return permission?.accounts.some((a) => a === selectedAddress)\r\n    }, [permission?.accounts, selectedAddress])\r\n\r\n    const handleRemoveFromSite = async (address: string) => {\r\n        try {\r\n            await removeAccountFromSite(origin, address)\r\n            if (!permission) {\r\n                history.push({\r\n                    pathname: \"/\",\r\n                })\r\n            }\r\n        } catch {}\r\n    }\r\n\r\n    const handleConnectSite = async (address: string) => {\r\n        try {\r\n            connectedAccounts.push(address)\r\n            updateSitePermissions(origin, connectedAccounts)\r\n        } catch {}\r\n    }\r\n\r\n    const handleSwitchAccount = async (address: string) => {\r\n        try {\r\n            await selectAccount(address)\r\n            history.push({\r\n                pathname: \"/\",\r\n            })\r\n        } catch {}\r\n    }\r\n\r\n    return !permission ? (\r\n        <Redirect to=\"/\" />\r\n    ) : (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    icon={site.iconURL}\r\n                    title={new URL(origin).hostname}\r\n                    onBack={() => {\r\n                        if (fromRoot) {\r\n                            history.push(\"/\")\r\n                        } else {\r\n                            history.push({\r\n                                pathname: \"/accounts/menu/connectedSites\",\r\n                                state: {\r\n                                    fromAccountList:\r\n                                        history.location.state?.fromAccountList,\r\n                                },\r\n                            })\r\n                        }\r\n                    }}\r\n                ></PopupHeader>\r\n            }\r\n        >\r\n            <div className=\"flex flex-col p-6 space-y-8 text-sm text-gray-500\">\r\n                {!isSelectedAccountConnected && (\r\n                    <div>\r\n                        <WarningTip\r\n                            text={\"Current account is not connected\"}\r\n                            fontSize=\"text-xs\"\r\n                            justify=\"justify-start\"\r\n                        />\r\n                    </div>\r\n                )}\r\n                <div className=\"flex flex-col space-y-2\">\r\n                    <span className=\"text-xs\">CURRENT ACCOUNT</span>\r\n                    <ConnectedSiteAccount\r\n                        account={accounts[selectedAddress]}\r\n                        active={activeAcc === selectedAddress}\r\n                        connected={isSelectedAccountConnected}\r\n                        handleRemoveFromSite={handleRemoveFromSite}\r\n                        handleConnectSite={handleConnectSite}\r\n                        handleSwitchAccount={handleSwitchAccount}\r\n                    />\r\n                </div>\r\n\r\n                {connectedAccounts?.length > 0 && (\r\n                    <div className=\"flex flex-col space-y-2\">\r\n                        <span className=\"text-xs\">CONNECTED ACCOUNTS</span>\r\n                        <div className=\"flex flex-col space-y-6\">\r\n                            {connectedAccounts.map(\r\n                                (address) =>\r\n                                    accounts[address] && (\r\n                                        <ConnectedSiteAccount\r\n                                            account={accounts[address]}\r\n                                            active={activeAcc === address}\r\n                                            key={address}\r\n                                            handleRemoveFromSite={\r\n                                                handleRemoveFromSite\r\n                                            }\r\n                                            handleConnectSite={\r\n                                                handleConnectSite\r\n                                            }\r\n                                            handleSwitchAccount={\r\n                                                handleSwitchAccount\r\n                                            }\r\n                                        />\r\n                                    )\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default ConnectedSiteAccountsPage\r\n","import styled from \"styled-components\"\r\n\r\n// styles\r\nconst Dots = styled.span`\r\n    &::after {\r\n        display: inline-block;\r\n        animation: ellipsis 1.25s infinite;\r\n        content: \"\";\r\n        width: 1em;\r\n        text-align: left;\r\n    }\r\n    @keyframes ellipsis {\r\n        0% {\r\n            content: \"\";\r\n        }\r\n        25% {\r\n            content: \".\";\r\n        }\r\n        50% {\r\n            content: \"..\";\r\n        }\r\n        75% {\r\n            content: \"...\";\r\n        }\r\n    }\r\n`\r\n\r\nconst LoadingDots = () => {\r\n    return <Dots />\r\n}\r\n\r\n// return\r\nexport default LoadingDots\r\n","import { FunctionComponent } from \"react\"\r\n\r\nconst HorizontalSelect: FunctionComponent<{\r\n    options: any[]\r\n    value: any\r\n    onChange: (value: any) => void\r\n    display?: (option: any, i: number) => React.ReactNode\r\n    disableStyles?: boolean\r\n    optionClassName?: (option: any) => string\r\n    containerClassName?: string\r\n    containerStyle?: React.CSSProperties\r\n}> = ({\r\n    options,\r\n    value,\r\n    onChange,\r\n    display,\r\n    disableStyles = false,\r\n    containerClassName,\r\n    optionClassName,\r\n    containerStyle,\r\n}) => (\r\n    <div\r\n        className={containerClassName || \"flex flex-row space-x-0 w-full\"}\r\n        style={containerStyle}\r\n    >\r\n        {options.map((option, i) => (\r\n            <button\r\n                type=\"button\"\r\n                key={option.label || option.name || option}\r\n                className={\r\n                    !disableStyles\r\n                        ? `flex-1 flex flex-row items-center justify-center p-4 border-b-2 text-sm ${\r\n                              option === value\r\n                                  ? \"border-primary-300 text-primary-300 font-bold\"\r\n                                  : \"border-transparent text-gray-500 hover:text-primary-300 hover:font-medium\"\r\n                          }`\r\n                        : optionClassName\r\n                        ? optionClassName(option)\r\n                        : \"\"\r\n                }\r\n                onClick={() => onChange(option)}\r\n            >\r\n                {display ? display(option, i) : option}\r\n            </button>\r\n        ))}\r\n    </div>\r\n)\r\n\r\nexport default HorizontalSelect\r\n","import classnames from \"classnames\"\r\n\r\nconst EndLabel = ({\r\n    label,\r\n    children,\r\n    className,\r\n}: {\r\n    label: string | JSX.Element\r\n    children: React.ReactNode\r\n    className?: string\r\n}) => (\r\n    <div className=\"flex flex-row relative w-full\">\r\n        {children}\r\n        <div\r\n            className={classnames(\r\n                \"absolute inset-y-0 right-2 flex items-center\",\r\n                className\r\n            )}\r\n        >\r\n            <span className=\"text-gray-500 text-sm\">{label}</span>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default EndLabel\r\n","export const capitalize = (s: string) =>\r\n    s.slice(0, 1).toLocaleUpperCase() + s.slice(1)\r\n","import * as yup from \"yup\"\r\n\r\ntype ValidationInput<T> = [T, string]\r\n\r\ntype StringNumberValidator = {\r\n    min?: ValidationInput<number>\r\n}\r\n/**\r\n * This function create a yup schema field when you need a number (most of the time gas fees) in a form.\r\n * If you need to add more verification you can do it like so:\r\n * ```js\r\n * makeStringNumberFormField('message').test('my-test', ...)\r\n * ```\r\n * @param requiredMessage The error message to show if the input is empty.\r\n * @param isGteThan0 Does the value needs to be greater or equal to 0. Is `true` by default.\r\n */\r\nexport const makeStringNumberFormField = (\r\n    requiredMessage: string,\r\n    isGteThan0: boolean = true,\r\n    { min }: StringNumberValidator = {}\r\n) => {\r\n    let schema = yup\r\n        .string()\r\n        .required(requiredMessage)\r\n        .test(\"is-correct\", \"Please enter a number.\", (value) => {\r\n            if (typeof value != \"string\") return false\r\n            return !isNaN(parseFloat(value))\r\n        })\r\n        .test(\"is-correct\", \"Please enter a number.\", (value) => {\r\n            if (typeof value != \"string\") return false\r\n            const regexp = /^\\d+(\\.\\d+)?$/\r\n            return regexp.test(value)\r\n        })\r\n        .test(\"is-correct\", \"Amount must be a positive number.\", (value) => {\r\n            if (typeof value != \"string\") return false\r\n            return isGteThan0 ? parseFloat(value) >= 0 : parseFloat(value) > 0\r\n        })\r\n\r\n    if (min) {\r\n        const [minValue, message] = min\r\n        schema = schema.test(\"is-min\", message, (value) => {\r\n            if (\r\n                typeof value !== \"string\" &&\r\n                typeof minValue !== \"undefined\" &&\r\n                value\r\n            ) {\r\n                return false\r\n            }\r\n            return parseFloat(value ?? \"0\") >= minValue\r\n        })\r\n    }\r\n    return schema\r\n}\r\n/**\r\n * This function check if the input is a valid number\r\n * @param e Keyboard event\r\n */\r\nexport const handleKeyDown = (e: React.KeyboardEvent<any>) => {\r\n    const amt = Number(e.currentTarget.value)\r\n\r\n    if (\r\n        !isNaN(Number(e.key)) &&\r\n        !isNaN(amt) &&\r\n        amt >= Number.MAX_SAFE_INTEGER\r\n    ) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n    }\r\n}\r\n\r\nconst makeHandleChangeAmount =\r\n    (replace: RegExp) =>\r\n    (cb: (value: string) => void, defaultValue: string = \"\") =>\r\n    (event: React.ChangeEvent<any>) => {\r\n        let value: string = event.target.value\r\n\r\n        value = value\r\n            .replace(\",\", \".\")\r\n            .replace(replace, \"\")\r\n            .replace(/(\\..*?)\\..*/g, \"$1\")\r\n\r\n        const match = value.match(/[0-9]+[.,]([0-9]+)/)\r\n\r\n        if (match && match[1].length > 9) {\r\n            value = value.substring(0, value.length - 1)\r\n        }\r\n\r\n        if (!value || value === \".\") {\r\n            value = defaultValue\r\n        }\r\n\r\n        cb(value)\r\n    }\r\n\r\nexport const handleChangeAmountGwei = makeHandleChangeAmount(/[^0-9.]/g)\r\n\r\nexport const handleChangeAmountWei = makeHandleChangeAmount(/[^0-9]/g)\r\n","import { FixedNumber } from \"@ethersproject/bignumber\"\r\n\r\n/**\r\n * Receives a string containing numbers with decimals and applies round according to param.\r\n * @param value string to round\r\n * @param decimals number of decimals to round. Defaults to 4.\r\n * @returns rounded string\r\n */\r\nexport const formatRounded = (value: string, decimals: number = 4): string => {\r\n    return FixedNumber.fromString(value).round(decimals).toString()\r\n}\r\n","export default __webpack_public_path__ + \"static/media/arrow_down.448f87ab.svg\";","import { FunctionComponent } from \"react\"\r\nimport arrowDown from \"../../assets/images/icons/arrow_down.svg\"\r\n\r\nexport const ArrowUpDown: FunctionComponent<{\r\n    active: boolean\r\n    onClick?: () => void\r\n}> = ({ active = false, onClick }) => (\r\n    <img\r\n        onClick={onClick}\r\n        src={arrowDown}\r\n        className=\"w-3 h-2 text-black\"\r\n        alt=\"\"\r\n        style={{\r\n            transform: `${active ? \"rotate(180deg)\" : \"none\"}`,\r\n        }}\r\n    />\r\n)\r\n","import { GasPriceData } from \"@block-wallet/background/controllers/GasPricesController\"\r\nimport { useBlankState } from \"../background/backgroundHooks\"\r\nimport { useSelectedNetwork } from \"./useSelectedNetwork\"\r\n\r\nexport const useGasPriceData = () => {\r\n    const { gasPriceData } = useBlankState()!\r\n    const { chainId } = useSelectedNetwork()\r\n    if (chainId in gasPriceData) {\r\n        return gasPriceData[chainId]\r\n    }\r\n\r\n    return {\r\n        gasPricesLevels: {\r\n            slow: {\r\n                gasPrice: null,\r\n                maxFeePerGas: null,\r\n                maxPriorityFeePerGas: null,\r\n            },\r\n            average: {\r\n                gasPrice: null,\r\n                maxFeePerGas: null,\r\n                maxPriorityFeePerGas: null,\r\n            },\r\n            fast: {\r\n                gasPrice: null,\r\n                maxFeePerGas: null,\r\n                maxPriorityFeePerGas: null,\r\n            },\r\n        },\r\n    } as GasPriceData\r\n}\r\n","import { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { formatUnits } from \"@ethersproject/units\"\r\n\r\nexport const convertAmount = (\r\n    amount: BigNumber,\r\n    rate: number,\r\n    decimals: number = 18\r\n): number => {\r\n    if (!rate) return 0\r\n    const numberAmount = formatUnits(amount, decimals)\r\n    const convertedNumberAmount = parseFloat(numberAmount) * rate\r\n    return convertedNumberAmount\r\n}\r\n","import { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { DEFAULT_DECIMALS } from \"./constants\"\r\nimport { convertAmount } from \"./convertAmount\"\r\n\r\nconst DEFAULT_LOCALE_INFO = \"en-US\"\r\nconst DEFAULT_CURRENCY = \"USD\"\r\nconst DEFAULT_DECIMAL_PRECISION = 2\r\n\r\nconst CURRENCY_SYMBOLS: { [key: string]: string } = {\r\n    USD: \"$\",\r\n}\r\n\r\nexport type formatCurrencyOptions = {\r\n    locale_info?: string\r\n    currency?: string\r\n    precision?: number\r\n    showSymbol?: boolean\r\n    showCurrency?: boolean\r\n    returnNonBreakingSpace?: boolean // whether or not to return a non-breaking space, if the amount is falsy\r\n    minValue?: number\r\n}\r\n\r\nexport function toCurrencyAmount(\r\n    amount: BigNumber,\r\n    exchangeRate: number,\r\n    decimals: number = DEFAULT_DECIMALS // Ether default\r\n): number {\r\n    return convertAmount(amount, exchangeRate, decimals)\r\n}\r\n\r\nexport function formatCurrency(\r\n    currencyAmount: number,\r\n    options?: formatCurrencyOptions\r\n): string {\r\n    if (currencyAmount === null || currencyAmount === undefined) {\r\n        return options?.returnNonBreakingSpace ? \"\\u200b\" : \"\"\r\n    }\r\n\r\n    const locale_info: string = options?.locale_info || DEFAULT_LOCALE_INFO\r\n    const currency: string =\r\n        options?.currency?.toLocaleUpperCase() || DEFAULT_CURRENCY\r\n    const precision: number = options?.precision || DEFAULT_DECIMAL_PRECISION\r\n\r\n    const showCurrency = options?.showCurrency ?? true\r\n    const symbol =\r\n        options?.showSymbol && currency in CURRENCY_SYMBOLS\r\n            ? CURRENCY_SYMBOLS[currency]\r\n            : \"\"\r\n\r\n    const formatter = new Intl.NumberFormat(locale_info, {\r\n        style: \"decimal\",\r\n        currency: currency,\r\n        minimumFractionDigits: precision,\r\n        maximumFractionDigits: precision,\r\n    })\r\n    let prefix = \"\"\r\n    let formattedValue = `${formatter.format(currencyAmount)}`\r\n    if (currencyAmount < (options?.minValue ?? 0)) {\r\n        prefix = \"<\"\r\n        formattedValue = formatter.format(options?.minValue!)\r\n    }\r\n\r\n    return `${prefix}${symbol}${formattedValue} ${showCurrency ? currency : \"\"}`\r\n}\r\n","import { TransactionFeeData } from \"@block-wallet/background/controllers/erc-20/transactions/SignedTransaction\"\r\nimport { Rates } from \"@block-wallet/background/controllers/ExchangeRatesController\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { DEFAULT_TRANSACTION_GAS_PERCENTAGE_THRESHOLD } from \"./constants\"\r\nimport { formatCurrency, toCurrencyAmount } from \"./formatCurrency\"\r\nimport { FeeData } from \"@ethersproject/abstract-provider\"\r\nimport { formatUnits } from \"@ethersproject/units\"\r\nimport { DisplayGasPricesData } from \"../components/gas/GasPricesInfo\"\r\n\r\ninterface GasFeesCalculation {\r\n    minValue: BigNumber\r\n    maxValue: BigNumber\r\n    minValueNativeCurrency?: string\r\n    maxValueNativeCurrency?: string\r\n}\r\n\r\ninterface ConversionData {\r\n    exchangeRates: Rates\r\n    networkNativeCurrency: {\r\n        symbol: string\r\n        decimals: number\r\n    }\r\n    localeInfo: {\r\n        currency: string\r\n        language: string\r\n    }\r\n    minValue?: number\r\n}\r\n\r\nconst calculateTransactionGas = (\r\n    gasLimit: BigNumber,\r\n    gasPrice?: BigNumber | undefined,\r\n    maxFeePerGas?: BigNumber\r\n): BigNumber => {\r\n    return BigNumber.from(gasLimit!.mul(gasPrice ?? maxFeePerGas ?? 0))\r\n}\r\n\r\nconst gasPriceToNativeCurrency = (\r\n    gasPrice: BigNumber,\r\n    conversionData: ConversionData\r\n) => {\r\n    const { exchangeRates, networkNativeCurrency, localeInfo } = conversionData\r\n    return formatCurrency(\r\n        toCurrencyAmount(\r\n            gasPrice,\r\n            exchangeRates[networkNativeCurrency.symbol],\r\n            networkNativeCurrency!.decimals\r\n        ),\r\n        {\r\n            currency: localeInfo.currency,\r\n            locale_info: localeInfo.language,\r\n            showCurrency: true,\r\n            showSymbol: true,\r\n            precision: 2,\r\n        }\r\n    )\r\n}\r\n\r\nconst calculateGasPricesFromTransactionFees = (\r\n    gasFees: TransactionFeeData,\r\n    baseFee: BigNumber,\r\n    conversionData?: ConversionData\r\n): GasFeesCalculation => {\r\n    // MinValue: (baseFee + tip) * gasLimit\r\n    // We assume that the baseFee could at most be reduced 25% in next 2 blocks so for calculating the min value we apply that reduction.\r\n\r\n    // 25% of BaseFee => (baseFee * 25) / 100\r\n    const percentage = baseFee.mul(BigNumber.from(25)).div(BigNumber.from(100))\r\n    const minBaseFee = baseFee.sub(percentage)\r\n\r\n    // MaxValue: maxFeePerGas * gasLimit\r\n    const maxValue = gasFees.maxFeePerGas!.mul(gasFees.gasLimit!)\r\n\r\n    // if implied baseFee of gasFees is lower than current baseFee\r\n    // adjusted by 25% anyways, minValue will be equal maxValue\r\n    const minValue = minBaseFee.lt(\r\n        gasFees.maxFeePerGas!.sub(gasFees.maxPriorityFeePerGas!)\r\n    )\r\n        ? minBaseFee.add(gasFees.maxPriorityFeePerGas!).mul(gasFees.gasLimit!)\r\n        : maxValue\r\n\r\n    let minValueNativeCurrency = undefined\r\n    let maxValueNativeCurrency = undefined\r\n\r\n    if (conversionData) {\r\n        minValueNativeCurrency = gasPriceToNativeCurrency(\r\n            minValue.lt(maxValue) ? minValue : maxValue,\r\n            conversionData\r\n        )\r\n\r\n        maxValueNativeCurrency = gasPriceToNativeCurrency(\r\n            minValue.gt(maxValue) ? minValue : maxValue,\r\n            conversionData\r\n        )\r\n    }\r\n\r\n    return {\r\n        minValue,\r\n        maxValue,\r\n        minValueNativeCurrency,\r\n        maxValueNativeCurrency,\r\n    }\r\n}\r\n\r\nconst estimatedGasExceedsBaseLowerThreshold = (\r\n    baseMinGas: BigNumber,\r\n    estimatedGas: BigNumber,\r\n    percentage = DEFAULT_TRANSACTION_GAS_PERCENTAGE_THRESHOLD\r\n): boolean => {\r\n    const dif = baseMinGas\r\n        .mul(BigNumber.from(percentage))\r\n        .div(BigNumber.from(100))\r\n    if (baseMinGas.sub(dif).gte(estimatedGas)) {\r\n        return true\r\n    }\r\n    return false\r\n}\r\n\r\nconst estimatedGasExceedsBaseHigherThreshold = (\r\n    baseMaxGas: BigNumber,\r\n    estimatedGas: BigNumber,\r\n    percentage = DEFAULT_TRANSACTION_GAS_PERCENTAGE_THRESHOLD\r\n): boolean => {\r\n    const dif = baseMaxGas\r\n        .mul(BigNumber.from(percentage))\r\n        .div(BigNumber.from(100))\r\n    if (baseMaxGas.add(dif).lte(estimatedGas)) {\r\n        return true\r\n    }\r\n    return false\r\n}\r\n\r\nconst gasToGweiString = (gas: BigNumber | null) => {\r\n    if (!gas) return \"\"\r\n\r\n    const gasInGwei = formatUnits(gas, \"gwei\")\r\n\r\n    if (Number(gasInGwei) > 1) {\r\n        return String(Math.round(Number(gasInGwei)))\r\n    } else if (Number(gasInGwei) > 0.1) {\r\n        return String(Math.round(Number(gasInGwei) * 10) / 10)\r\n    } else if (Number(gasInGwei) > 0) {\r\n        return \"<0.1\"\r\n    } else {\r\n        return \"\"\r\n    }\r\n}\r\n\r\nconst getTransactionFees = (\r\n    isEIP1559Compatible: boolean,\r\n    gasPrice: FeeData,\r\n    estimatedBaseFee: BigNumber,\r\n    gasLimit: BigNumber\r\n): DisplayGasPricesData => {\r\n    if (isEIP1559Compatible && estimatedBaseFee) {\r\n        const baseFee = BigNumber.from(estimatedBaseFee)\r\n        const priority = BigNumber.from(gasPrice?.maxPriorityFeePerGas ?? 0)\r\n        const baseFeePlusTip = baseFee.add(priority)\r\n        return {\r\n            baseFee: gasToGweiString(baseFee),\r\n            priority: gasToGweiString(priority),\r\n            totalGwei: gasToGweiString(BigNumber.from(baseFeePlusTip)),\r\n            totalTransactionCost: calculateTransactionGas(\r\n                gasLimit,\r\n                BigNumber.from(baseFeePlusTip)\r\n            ),\r\n        }\r\n    } else {\r\n        return {\r\n            totalGwei: gasToGweiString(gasPrice?.gasPrice),\r\n            totalTransactionCost: calculateTransactionGas(\r\n                gasLimit,\r\n                BigNumber.from(gasPrice?.gasPrice ?? 1)\r\n            ),\r\n        }\r\n    }\r\n}\r\n\r\nexport {\r\n    calculateGasPricesFromTransactionFees,\r\n    estimatedGasExceedsBaseLowerThreshold,\r\n    estimatedGasExceedsBaseHigherThreshold,\r\n    calculateTransactionGas,\r\n    gasPriceToNativeCurrency,\r\n    gasToGweiString,\r\n    getTransactionFees,\r\n}\r\n","import { PropsWithChildren } from \"react\"\r\nimport classnames from \"classnames\"\r\nexport enum TypographyType {\r\n    TITLE = \"title\",\r\n}\r\n\r\nconst Styles = {\r\n    [TypographyType.TITLE]:\r\n        \"text-2xl font-bold leading-10 font-title text-black\",\r\n}\r\n\r\ninterface TypographyProps {\r\n    type: TypographyType\r\n    className?: string\r\n    extraProps?: any\r\n}\r\n\r\nconst Typography: React.FC<PropsWithChildren<TypographyProps>> = ({\r\n    children,\r\n    type,\r\n    className,\r\n    extraProps, //mostly defined for aria attributes\r\n}) => {\r\n    return (\r\n        <span\r\n            className={classnames(Styles[type], className)}\r\n            {...(extraProps || {})}\r\n        >\r\n            {children}\r\n        </span>\r\n    )\r\n}\r\n\r\nexport default Typography\r\n","import { FunctionComponent, useRef, useState, useEffect, useMemo } from \"react\"\r\nimport classnames from \"classnames\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\n\r\nimport { formatUnits, parseUnits } from \"@ethersproject/units\"\r\nimport * as yup from \"yup\"\r\nimport { InferType } from \"yup\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { GasPriceLevels } from \"@block-wallet/background/controllers/GasPricesController\"\r\nimport { TransactionFeeData } from \"@block-wallet/background/controllers/erc-20/transactions/SignedTransaction\"\r\n\r\n// Components\r\nimport HorizontalSelect from \"../input/HorizontalSelect\"\r\nimport Tooltip from \"../../components/label/Tooltip\"\r\nimport { AiFillInfoCircle } from \"react-icons/ai\"\r\nimport { ImCheckmark } from \"react-icons/im\"\r\nimport Spinner from \"../spinner/Spinner\"\r\nimport Dialog from \"../dialog/Dialog\"\r\nimport EndLabel from \"../input/EndLabel\"\r\nimport { ButtonWithLoading as Button } from \"../button/ButtonWithLoading\"\r\n\r\n// Utils\r\nimport { capitalize } from \"../../util/capitalize\"\r\nimport {\r\n    handleKeyDown,\r\n    handleChangeAmountGwei,\r\n    handleChangeAmountWei,\r\n    makeStringNumberFormField,\r\n} from \"../../util/form\"\r\nimport { useOnClickOutside } from \"../../util/useOnClickOutside\"\r\nimport { formatRounded } from \"../../util/formatRounded\"\r\n\r\n// Assets\r\nimport { Classes } from \"../../styles\"\r\nimport { ArrowUpDown } from \"../icons/ArrowUpDown\"\r\nimport CloseIcon from \"../icons/CloseIcon\"\r\n\r\n// Context\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport { useGasPriceData } from \"../../context/hooks/useGasPriceData\"\r\nimport WarningDialog from \"../dialog/WarningDialog\"\r\nimport { calculateGasPricesFromTransactionFees } from \"../../util/gasPrice\"\r\n\r\ninterface GasComponentProps {\r\n    symbol: string\r\n    nativeCurrencyIcon: string\r\n    gasFees: TransactionFeeData\r\n    selectedOption: GasPriceOption\r\n    options: GasPriceOption[]\r\n    minGasLimit?: string\r\n    setSelectedGas: (option: GasPriceOption) => void\r\n    getGasOption: (label: string, gasFees: TransactionFeeData) => GasPriceOption\r\n}\r\n\r\ninterface GasPriceOption {\r\n    label: string\r\n    gasFees: TransactionFeeData\r\n    //EIP-1559: range\r\n    totalETHCostRange: string\r\n    totalNativeCurrencyCostRange: string\r\n    totalETHCost: string\r\n    totalNativeCurrencyCost: string\r\n}\r\n\r\ntype TransactionSpeed = {\r\n    [key: string]: TransactionFeeData\r\n}\r\n\r\nconst getTransactionSpeeds = (gasPrices: GasPriceLevels): TransactionSpeed => {\r\n    return {\r\n        low: {\r\n            maxPriorityFeePerGas: BigNumber.from(\r\n                gasPrices.slow.maxPriorityFeePerGas\r\n            ),\r\n            maxFeePerGas: BigNumber.from(gasPrices.slow.maxFeePerGas),\r\n        },\r\n        medium: {\r\n            maxPriorityFeePerGas: BigNumber.from(\r\n                gasPrices.average.maxPriorityFeePerGas\r\n            ),\r\n            maxFeePerGas: BigNumber.from(gasPrices.average.maxFeePerGas),\r\n        },\r\n        high: {\r\n            maxPriorityFeePerGas: BigNumber.from(\r\n                gasPrices.fast.maxPriorityFeePerGas\r\n            ),\r\n            maxFeePerGas: BigNumber.from(gasPrices.fast.maxFeePerGas),\r\n        },\r\n    }\r\n}\r\n// Basic Tab. Shows 3 levels of gas calculated with values received from state.\r\nconst GasSelectorBasic = (props: GasComponentProps) => {\r\n    const { selectedOption, options, setSelectedGas } = props\r\n\r\n    return (\r\n        <div className=\"flex flex-col w-full\">\r\n            <div className=\"flex flex-col w-full space-y\">\r\n                {options.map((option, i) => (\r\n                    <div\r\n                        key={option.label}\r\n                        className=\"w-full flex flex-row items-center p-1 cursor-pointer rounded-md hover:bg-gray-100\"\r\n                        onClick={() => {\r\n                            setSelectedGas(option)\r\n                        }}\r\n                    >\r\n                        <div className=\"flex flex-col flex-grow px-1 py-1  w-11/12\">\r\n                            <label\r\n                                className={classnames(\r\n                                    \"text-base font-semibold cursor-pointer capitalize\",\r\n                                    selectedOption.label === option.label &&\r\n                                        \"text-primary-300\"\r\n                                )}\r\n                            >\r\n                                {option.label}\r\n                            </label>\r\n                            <div className=\"flex flex-col w-full justify-between py-2 space-y-1\">\r\n                                <div className=\"flex flex-row justify-between items-center\">\r\n                                    <span\r\n                                        className={classnames(\r\n                                            \"text-xs\",\r\n                                            selectedOption.label ===\r\n                                                option.label &&\r\n                                                \"text-primary-300\"\r\n                                        )}\r\n                                    >\r\n                                        {option.totalNativeCurrencyCostRange}\r\n                                    </span>\r\n                                    <div>\r\n                                        <ImCheckmark\r\n                                            className={classnames(\r\n                                                \"text-sm\",\r\n                                                selectedOption.label ===\r\n                                                    option.label\r\n                                                    ? \"text-primary-300\"\r\n                                                    : \"hidden\"\r\n                                            )}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <span\r\n                                        className={classnames(\r\n                                            \"text-gray-600 text-xs\",\r\n                                            selectedOption.label ===\r\n                                                option.label &&\r\n                                                \"!text-primary-300\"\r\n                                        )}\r\n                                    >\r\n                                        {option.totalETHCostRange}\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n// Schema\r\nconst schemaBuilder = ({ minGasLimit }: { minGasLimit?: string } = {}) =>\r\n    yup.object({\r\n        gasLimit: makeStringNumberFormField(\"Gas limit is required\", false, {\r\n            min: [\r\n                parseInt(minGasLimit ?? \"0\"),\r\n                `Gas limit can't be lower than ${parseInt(minGasLimit ?? \"0\")}`,\r\n            ],\r\n        }),\r\n        maxPriorityFeePerGas: makeStringNumberFormField(\r\n            \"Max tip is required\",\r\n            true\r\n        ),\r\n        maxFeePerGas: makeStringNumberFormField(\"Max fee is required\", false),\r\n    })\r\ntype GasAdvancedForm = InferType<ReturnType<typeof schemaBuilder>>\r\n\r\n// Advanced tab. Allows users to enter manual fee values.\r\nconst GasSelectorAdvanced = (props: GasComponentProps) => {\r\n    const { gasFees, selectedOption, getGasOption, setSelectedGas } = props\r\n    const { estimatedBaseFee: baseFeePerGas, gasPricesLevels } =\r\n        useGasPriceData()\r\n    const { gasLowerCap } = useSelectedNetwork()\r\n\r\n    const defaultFees: TransactionFeeData = {\r\n        gasLimit: gasFees.gasLimit,\r\n        maxPriorityFeePerGas:\r\n            gasFees.maxPriorityFeePerGas ??\r\n            BigNumber.from(gasPricesLevels.average.maxPriorityFeePerGas),\r\n        maxFeePerGas:\r\n            gasFees.maxFeePerGas ??\r\n            BigNumber.from(gasPricesLevels.average.maxFeePerGas),\r\n    }\r\n    const [isCustom, setIsCustom] = useState<boolean>(\r\n        selectedOption.label === \"Custom\"\r\n    )\r\n    const averageTip = BigNumber.from(\r\n        gasPricesLevels.average.maxPriorityFeePerGas\r\n    )\r\n\r\n    const schema = useMemo(() => {\r\n        return schemaBuilder({ minGasLimit: props.minGasLimit })\r\n    }, [props.minGasLimit])\r\n\r\n    const [gasLimitWarning, setGasLimitWarning] = useState(\"\")\r\n    const [tipWarning, setTipWarning] = useState(\"\")\r\n    const [maxFeeWarning, setMaxFeeWarning] = useState(\"\")\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        setValue,\r\n        getValues,\r\n        setError,\r\n        clearErrors,\r\n\r\n        formState: { errors },\r\n    } = useForm<GasAdvancedForm>({\r\n        defaultValues: {\r\n            gasLimit: formatUnits(\r\n                isCustom\r\n                    ? selectedOption.gasFees.gasLimit!\r\n                    : defaultFees.gasLimit!,\r\n                \"wei\"\r\n            ),\r\n            maxPriorityFeePerGas: formatUnits(\r\n                isCustom\r\n                    ? selectedOption.gasFees.maxPriorityFeePerGas!\r\n                    : defaultFees.maxPriorityFeePerGas!,\r\n                \"gwei\"\r\n            ),\r\n            maxFeePerGas: formatUnits(\r\n                isCustom\r\n                    ? selectedOption.gasFees.maxFeePerGas!\r\n                    : defaultFees.maxFeePerGas!,\r\n                \"gwei\"\r\n            ),\r\n        },\r\n        resolver: yupResolver(schema),\r\n    })\r\n\r\n    const handleCustomChange = () => {\r\n        setIsCustom(true)\r\n        setValue(\"gasLimit\", formatUnits(defaultFees.gasLimit!, \"wei\"))\r\n        setValue(\r\n            \"maxPriorityFeePerGas\",\r\n            formatUnits(defaultFees.maxPriorityFeePerGas!, \"gwei\")\r\n        )\r\n        setValue(\"maxFeePerGas\", formatUnits(defaultFees.maxFeePerGas!, \"gwei\"))\r\n    }\r\n\r\n    const validateGasLimit = (gasLimit?: BigNumber) => {\r\n        setGasLimitWarning(\r\n            gasLimit?.lt(defaultFees.gasLimit!)\r\n                ? `Gas limit lower than suggested (${defaultFees.gasLimit})`\r\n                : \"\"\r\n        )\r\n    }\r\n\r\n    const validateFees = (fees: TransactionFeeData) => {\r\n        clearErrors(\"maxFeePerGas\")\r\n\r\n        const baseFee = BigNumber.from(baseFeePerGas)\r\n\r\n        validateGasLimit(fees.gasLimit)\r\n\r\n        setMaxFeeWarning(\r\n            fees.maxFeePerGas?.lt(baseFee.add(fees.maxPriorityFeePerGas!))\r\n                ? \"Max fee lower than base fee + tip\"\r\n                : \"\"\r\n        )\r\n\r\n        if (fees.maxFeePerGas?.lt(fees.maxPriorityFeePerGas!)) {\r\n            setError(\"maxFeePerGas\", {\r\n                message: \"Max fee lower than the max tip\",\r\n            })\r\n        }\r\n\r\n        if (\r\n            gasLowerCap &&\r\n            gasLowerCap.maxPriorityFeePerGas &&\r\n            fees.maxFeePerGas?.lt(gasLowerCap.maxPriorityFeePerGas)\r\n        ) {\r\n            setMaxFeeWarning(\"Max fee lower than network limit\")\r\n        }\r\n\r\n        setTipWarning(\r\n            fees.maxPriorityFeePerGas?.lt(averageTip)\r\n                ? `Tip lower than suggested tip of ${formatUnits(\r\n                      averageTip,\r\n                      \"gwei\"\r\n                  )} Gwei`\r\n                : \"\"\r\n        )\r\n\r\n        if (\r\n            gasLowerCap &&\r\n            gasLowerCap.maxPriorityFeePerGas &&\r\n            fees.maxPriorityFeePerGas?.lt(gasLowerCap.maxPriorityFeePerGas)\r\n        ) {\r\n            setMaxFeeWarning(\"Tip lower than network limit\")\r\n        }\r\n    }\r\n\r\n    const handleBlur = () => {\r\n        const values = getValues()\r\n        const fees: TransactionFeeData = {\r\n            gasLimit: BigNumber.from(\r\n                values.gasLimit === \"\" ? \"0\" : values.gasLimit\r\n            ),\r\n            maxPriorityFeePerGas: parseUnits(\r\n                values.maxPriorityFeePerGas === \"\"\r\n                    ? \"0\"\r\n                    : values.maxPriorityFeePerGas,\r\n                \"gwei\"\r\n            ),\r\n            maxFeePerGas: parseUnits(\r\n                values.maxFeePerGas === \"\" ? \"0\" : values.maxFeePerGas,\r\n                \"gwei\"\r\n            ),\r\n        }\r\n\r\n        validateFees(fees)\r\n    }\r\n\r\n    const handleSave = handleSubmit(async (values: GasAdvancedForm) => {\r\n        const fees: TransactionFeeData = {\r\n            gasLimit: BigNumber.from(values.gasLimit),\r\n            maxPriorityFeePerGas: parseUnits(\r\n                values.maxPriorityFeePerGas,\r\n                \"gwei\"\r\n            ),\r\n            maxFeePerGas: parseUnits(values.maxFeePerGas, \"gwei\"),\r\n        }\r\n\r\n        const custom = getGasOption(\"Custom\", fees)\r\n        setSelectedGas(custom)\r\n    })\r\n\r\n    return (\r\n        <div className=\"flex flex-col w-full\">\r\n            <div className=\"flex flex-col w-full space-y-3 px-3 pb-3\">\r\n                <div className=\"flex flex-col\">\r\n                    <label className=\"leading-loose text-xs font-medium mb-1 text-gra\">\r\n                        Gas limit\r\n                    </label>\r\n                    <input\r\n                        type=\"text\"\r\n                        {...register(\"gasLimit\", {\r\n                            pattern: /[0-9]/g,\r\n                        })}\r\n                        className={classnames(\r\n                            Classes.inputBordered,\r\n                            \"w-full\",\r\n                            !isCustom && \"text-gray-400\",\r\n                            errors.gasLimit\r\n                                ? \"border-red-400 focus:border-red-600\"\r\n                                : gasLimitWarning\r\n                                ? \"border-yellow-400 focus:border-yellow-600\"\r\n                                : \"\"\r\n                        )}\r\n                        autoComplete=\"off\"\r\n                        onKeyDown={handleKeyDown}\r\n                        onInput={handleChangeAmountWei((value) => {\r\n                            //If there was a warning, then check whether we need to clean it or not.\r\n                            //If there weren't, lets validate that onBlur to avoid showing and clearing error everytime.\r\n                            if (gasLimitWarning) {\r\n                                validateGasLimit(BigNumber.from(value ?? \"0\"))\r\n                            }\r\n                            setValue(\"gasLimit\", value, {\r\n                                shouldValidate: true,\r\n                            })\r\n                        })}\r\n                        placeholder={formatUnits(\r\n                            isCustom\r\n                                ? selectedOption.gasFees.gasLimit!\r\n                                : defaultFees.gasLimit!,\r\n                            \"wei\"\r\n                        )}\r\n                        onFocus={() => {\r\n                            !isCustom && handleCustomChange()\r\n                        }}\r\n                        onBlur={() => {\r\n                            handleBlur()\r\n                        }}\r\n                        tabIndex={1}\r\n                    />\r\n\r\n                    {/* ERROR */}\r\n                    <span\r\n                        className={classnames(\r\n                            \"text-xs\",\r\n                            errors.gasLimit\r\n                                ? \"text-red-500\"\r\n                                : gasLimitWarning\r\n                                ? \"text-yellow-500\"\r\n                                : \"m-0 h-0\"\r\n                        )}\r\n                    >\r\n                        {errors.gasLimit?.message || gasLimitWarning || \"\"}\r\n                    </span>\r\n                </div>\r\n                <div className=\"flex flex-col relative\">\r\n                    <label className=\"leading-loose text-xs font-medium  mb-1\">\r\n                        Max tip (per gas unit)\r\n                    </label>\r\n                    <EndLabel label=\"GWEI\">\r\n                        <input\r\n                            type=\"text\"\r\n                            {...register(\"maxPriorityFeePerGas\", {\r\n                                pattern: /[0-9.]/g,\r\n                            })}\r\n                            className={classnames(\r\n                                Classes.inputBordered,\r\n                                \"w-full\",\r\n                                !isCustom && \"text-gray-400\",\r\n                                errors.maxPriorityFeePerGas\r\n                                    ? \"border-red-400 focus:border-red-600\"\r\n                                    : tipWarning\r\n                                    ? \"border-yellow-400 focus:border-yellow-600\"\r\n                                    : \"\"\r\n                            )}\r\n                            autoComplete=\"off\"\r\n                            onKeyDown={handleKeyDown}\r\n                            onInput={handleChangeAmountGwei((value) => {\r\n                                setValue(\"maxPriorityFeePerGas\", value, {\r\n                                    shouldValidate: true,\r\n                                })\r\n                            })}\r\n                            placeholder={formatUnits(\r\n                                isCustom\r\n                                    ? selectedOption.gasFees\r\n                                          .maxPriorityFeePerGas!\r\n                                    : defaultFees.maxPriorityFeePerGas!,\r\n                                \"gwei\"\r\n                            )}\r\n                            onFocus={() => {\r\n                                !isCustom && handleCustomChange()\r\n                            }}\r\n                            onBlur={() => {\r\n                                handleBlur()\r\n                            }}\r\n                            tabIndex={2}\r\n                        />\r\n                    </EndLabel>\r\n                    {/* ERROR */}\r\n                    <span\r\n                        className={classnames(\r\n                            \"text-xs\",\r\n                            errors.maxPriorityFeePerGas\r\n                                ? \"text-red-500\"\r\n                                : tipWarning\r\n                                ? \"text-yellow-500\"\r\n                                : \"m-0 h-0\"\r\n                        )}\r\n                    >\r\n                        {errors.maxPriorityFeePerGas?.message ||\r\n                            tipWarning ||\r\n                            \"\"}\r\n                    </span>\r\n                </div>\r\n                <div className=\"flex flex-col relative\">\r\n                    <label className=\"leading-loose text-xs font-medium  mb-1\">\r\n                        Max fee (per gas unit)\r\n                    </label>\r\n                    <EndLabel label=\"GWEI\">\r\n                        <input\r\n                            type=\"text\"\r\n                            {...register(\"maxFeePerGas\", {\r\n                                pattern: /[0-9.]/g,\r\n                            })}\r\n                            className={classnames(\r\n                                Classes.inputBordered,\r\n                                \"w-full\",\r\n                                !isCustom && \"text-gray-400\",\r\n                                !!errors.maxFeePerGas?.message\r\n                                    ? \"border-red-400 focus:border-red-600\"\r\n                                    : maxFeeWarning\r\n                                    ? \"border-yellow-400 focus:border-yellow-600\"\r\n                                    : \"\"\r\n                            )}\r\n                            autoComplete=\"off\"\r\n                            onKeyDown={handleKeyDown}\r\n                            onInput={handleChangeAmountGwei((value) => {\r\n                                setValue(\"maxFeePerGas\", value, {\r\n                                    shouldValidate: true,\r\n                                })\r\n                            })}\r\n                            placeholder={formatUnits(\r\n                                isCustom\r\n                                    ? selectedOption.gasFees.maxFeePerGas!\r\n                                    : defaultFees.maxFeePerGas!,\r\n                                \"gwei\"\r\n                            )}\r\n                            onFocus={() => {\r\n                                !isCustom && handleCustomChange()\r\n                            }}\r\n                            onBlur={() => {\r\n                                handleBlur()\r\n                            }}\r\n                            tabIndex={3}\r\n                        />\r\n                    </EndLabel>\r\n                    {/* ERROR */}\r\n                    <span\r\n                        className={classnames(\r\n                            \"text-xs\",\r\n                            !!errors.maxFeePerGas?.message\r\n                                ? \"text-red-500\"\r\n                                : maxFeeWarning\r\n                                ? \"text-yellow-500\"\r\n                                : \"m-0 h-0\"\r\n                        )}\r\n                    >\r\n                        {errors.maxFeePerGas?.message || maxFeeWarning || \"\"}\r\n                    </span>\r\n                </div>\r\n                <span className=\"text-gray-500 text-xs\">\r\n                    Last base fee: {formatUnits(baseFeePerGas!, \"gwei\")} GWEI\r\n                </span>\r\n            </div>\r\n            <div>\r\n                <hr className=\"absolute left-0 border-0.5 border-gray-200 w-full\" />\r\n                <div className=\"flex flex-row w-full items-center pt-5 justify-between space-x-4 mt-auto px-4\">\r\n                    <Button\r\n                        label=\"Save\"\r\n                        buttonClass={Classes.button}\r\n                        type=\"button\"\r\n                        onClick={handleSave}\r\n                        disabled={\r\n                            Object.values(errors).filter(\r\n                                (v) => v.message !== \"\"\r\n                            ).length > 0\r\n                        }\r\n                    />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst tabs = [\r\n    {\r\n        label: \"Basic\",\r\n        component: GasSelectorBasic,\r\n    },\r\n    {\r\n        label: \"Advanced\",\r\n        component: GasSelectorAdvanced,\r\n    },\r\n]\r\n\r\n// Main Component\r\nconst GasPriceComponent: FunctionComponent<{\r\n    defaultGas: {\r\n        feeData: TransactionFeeData\r\n        defaultLevel?: \"low\" | \"medium\" | \"high\"\r\n    } // can receive either custom values (i.e. dApps or estimation) or a level to set as default basic value\r\n    setGas: (gasFees: TransactionFeeData) => void\r\n    disabled?: boolean\r\n    isParentLoading?: boolean\r\n    showEstimationError?: boolean\r\n    displayOnlyMaxValue?: boolean\r\n    minGasLimit?: string\r\n}> = ({\r\n    defaultGas,\r\n    setGas,\r\n    isParentLoading,\r\n    disabled,\r\n    showEstimationError,\r\n    displayOnlyMaxValue = false,\r\n    minGasLimit,\r\n}) => {\r\n    //Popup variables\r\n    const ref = useRef(null)\r\n    const [active, setActive] = useState(false)\r\n    useOnClickOutside(ref, () => setActive(false))\r\n\r\n    //State\r\n    const { exchangeRates, nativeCurrency, localeInfo, networkNativeCurrency } =\r\n        useBlankState()!\r\n\r\n    const { estimatedBaseFee: baseFeePerGas, gasPricesLevels } =\r\n        useGasPriceData()\r\n\r\n    const {\r\n        defaultNetworkLogo,\r\n        nativeCurrency: { decimals: nativeCurrencyDecimals },\r\n    } = useSelectedNetwork()\r\n\r\n    const [baseFee, setBaseFee] = useState<BigNumber>(\r\n        BigNumber.from(baseFeePerGas)\r\n    )\r\n\r\n    const [showEstimationWarning, setShowEstimationWarning] = useState(\r\n        showEstimationError ?? false\r\n    )\r\n\r\n    const [transactionSpeeds, setTransactionSpeeds] =\r\n        useState<TransactionSpeed>(getTransactionSpeeds(gasPricesLevels))\r\n\r\n    const getGasOption = (label: string, gasFees: TransactionFeeData) => {\r\n        const {\r\n            minValue,\r\n            maxValue,\r\n            minValueNativeCurrency,\r\n            maxValueNativeCurrency,\r\n        } = calculateGasPricesFromTransactionFees(gasFees, baseFee, {\r\n            exchangeRates,\r\n            localeInfo: {\r\n                currency: nativeCurrency,\r\n                language: localeInfo,\r\n            },\r\n            networkNativeCurrency: {\r\n                symbol: networkNativeCurrency.symbol,\r\n                decimals: nativeCurrencyDecimals,\r\n            },\r\n        })\r\n\r\n        const minValueFormatted = formatRounded(\r\n            formatUnits(minValue.lt(maxValue) ? minValue : maxValue),\r\n            5\r\n        )\r\n\r\n        const maxValueFormatted = formatRounded(\r\n            formatUnits(minValue.gt(maxValue) ? minValue : maxValue),\r\n            5\r\n        )\r\n\r\n        const networkSymbol = networkNativeCurrency.symbol\r\n\r\n        // For parent's label, apply displayOnlyMaxValue flag. Otherwise always display range\r\n        const totalETHCost =\r\n            (label !== \"Custom\" || minValue.lte(maxValue)) &&\r\n            !displayOnlyMaxValue\r\n                ? `${minValueFormatted} ${networkSymbol} - ${maxValueFormatted} ${networkSymbol}`\r\n                : `${formatRounded(formatUnits(maxValue), 5)} ${networkSymbol}`\r\n\r\n        const totalNativeCurrencyCost =\r\n            (label !== \"Custom\" || minValue.lte(maxValue)) &&\r\n            !displayOnlyMaxValue\r\n                ? `${minValueNativeCurrency} - ${maxValueNativeCurrency}`\r\n                : maxValueNativeCurrency\r\n\r\n        const totalETHCostRange =\r\n            label !== \"Custom\" || minValue.lte(maxValue)\r\n                ? `${minValueFormatted} ${networkNativeCurrency.symbol} - ${maxValueFormatted} ${networkNativeCurrency.symbol}`\r\n                : `${formatRounded(formatUnits(maxValue), 5)} ${\r\n                      networkNativeCurrency.symbol\r\n                  }`\r\n\r\n        const totalNativeCurrencyCostRange =\r\n            label !== \"Custom\" || minValue.lte(maxValue)\r\n                ? `${minValueNativeCurrency} - ${maxValueNativeCurrency}`\r\n                : maxValueNativeCurrency\r\n\r\n        return {\r\n            label,\r\n            gasFees,\r\n            totalETHCost,\r\n            totalNativeCurrencyCost,\r\n            totalETHCostRange,\r\n            totalNativeCurrencyCostRange,\r\n        } as GasPriceOption\r\n    }\r\n\r\n    const [gasOptions, setGasOptions] = useState<GasPriceOption[]>([])\r\n\r\n    // Selected gas state\r\n    const [selectedGas, setSelectedGas] = useState<GasPriceOption>()\r\n\r\n    // Tabs variables\r\n    const [tab, setTab] = useState(tabs[!defaultGas.defaultLevel ? 1 : 0])\r\n    const TabComponent = tab.component\r\n    const [isLoaded, setIsLoaded] = useState<boolean>(false)\r\n\r\n    // Effects\r\n    useEffect(() => {\r\n        // Waits till parent component finishes loading (estimation and transaction values)\r\n        if (isParentLoading) {\r\n            // This means there was a change on parent component that is updating values so we should reload all values.\r\n            if (isLoaded) setIsLoaded(false)\r\n\r\n            // keeps waiting for parent to finish\r\n            return\r\n        }\r\n\r\n        //Update transaction speeds\r\n        setTransactionSpeeds(getTransactionSpeeds(gasPricesLevels))\r\n\r\n        //Get & set gas options\r\n        let speedOptions: GasPriceOption[] = []\r\n        for (let speed in transactionSpeeds) {\r\n            speedOptions.push(\r\n                getGasOption(speed, {\r\n                    gasLimit: defaultGas.feeData.gasLimit,\r\n                    maxPriorityFeePerGas:\r\n                        transactionSpeeds[speed].maxPriorityFeePerGas,\r\n                    maxFeePerGas: transactionSpeeds[speed].maxFeePerGas,\r\n                })\r\n            )\r\n        }\r\n        setGasOptions(speedOptions)\r\n\r\n        // First load will check if comp received default values or level\r\n        if (!isLoaded) {\r\n            // If the default gas was set to a basic level, update the selected option with the new gas values\r\n            if (defaultGas.defaultLevel) {\r\n                const defaultOption = speedOptions.find(\r\n                    (s) => s.label === defaultGas.defaultLevel\r\n                )\r\n\r\n                if (defaultOption) {\r\n                    setSelectedGas(defaultOption)\r\n                    setGas(defaultOption.gasFees!)\r\n                    setTab(tabs[0])\r\n                }\r\n            } else {\r\n                // If the default gas was set to custom values, update them and set the advance tab as active\r\n                const defaultOption = getGasOption(\"Custom\", defaultGas.feeData)\r\n                setSelectedGas(defaultOption)\r\n                setGas(defaultOption.gasFees!)\r\n                setTab(tabs[1])\r\n            }\r\n        }\r\n\r\n        setIsLoaded(true)\r\n\r\n        //Updated selected gas on gas price change\r\n        if (isLoaded && selectedGas!.label !== \"Custom\") {\r\n            const selected = speedOptions.find(\r\n                (s) => s.label === selectedGas!.label\r\n            )\r\n            if (selected) {\r\n                setSelectedGas(selected)\r\n                setGas(selectedGas!.gasFees!)\r\n            }\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [isParentLoading, gasPricesLevels, defaultGas.feeData.gasLimit])\r\n\r\n    useEffect(() => {\r\n        setBaseFee(BigNumber.from(baseFeePerGas))\r\n    }, [baseFeePerGas])\r\n\r\n    // Effect to check if estimation failed when switching to a new tx\r\n    useEffect(() => {\r\n        if (showEstimationError && !showEstimationWarning)\r\n            setShowEstimationWarning(true)\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [showEstimationError])\r\n\r\n    return (\r\n        <>\r\n            {/* Label */}\r\n            <div\r\n                className={classnames(\r\n                    Classes.blueSection,\r\n                    active && Classes.blueSectionActive\r\n                )}\r\n                onClick={() =>\r\n                    !disabled &&\r\n                    !isParentLoading &&\r\n                    isLoaded &&\r\n                    setActive(!active)\r\n                }\r\n            >\r\n                <div\r\n                    className={classnames(\r\n                        \"flex justify-start w-full items-center\",\r\n                        displayOnlyMaxValue && \"space-x-4\"\r\n                    )}\r\n                >\r\n                    <div\r\n                        className={classnames(\r\n                            \"text-xs font-semibold\",\r\n                            (isParentLoading || !isLoaded) && \"w-56\"\r\n                        )}\r\n                    >\r\n                        {isParentLoading || !isLoaded\r\n                            ? \"Loading prices...\"\r\n                            : capitalize(selectedGas!.label)}\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-row w-full items-center justify-around text-xs\">\r\n                        {!isParentLoading &&\r\n                            isLoaded &&\r\n                            (displayOnlyMaxValue ? (\r\n                                <div className=\"flex flex-row w-full items-center space-x-4\">\r\n                                    <span className=\"text-xs text-gray-600\">\r\n                                        {selectedGas!.totalNativeCurrencyCost}\r\n                                    </span>\r\n                                    <div className=\"flex flex-row space-x-1 items-center\">\r\n                                        <img\r\n                                            src={defaultNetworkLogo}\r\n                                            alt={networkNativeCurrency.symbol}\r\n                                            width=\"20px\"\r\n                                            draggable={false}\r\n                                        />\r\n                                        <span className=\"text-xs\">\r\n                                            {selectedGas!.totalETHCost}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            ) : (\r\n                                <>\r\n                                    <span className=\"text-xs text-gray-600\">\r\n                                        {selectedGas!.totalNativeCurrencyCost}\r\n                                    </span>\r\n                                    <div className=\"flex flex-row space-x-1 items-center justify-self-end\">\r\n                                        <div className=\"justify-self-start\">\r\n                                            <img\r\n                                                src={defaultNetworkLogo}\r\n                                                alt={\r\n                                                    networkNativeCurrency.symbol\r\n                                                }\r\n                                                width=\"20px\"\r\n                                                draggable={false}\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"w-full\">\r\n                                            <span className=\"text-xs\">\r\n                                                {selectedGas!.totalETHCost}\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n                                </>\r\n                            ))}\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex justify-end items-center w-4 h-full\">\r\n                    {isParentLoading || !isLoaded ? (\r\n                        <Spinner />\r\n                    ) : (\r\n                        <ArrowUpDown active={active} />\r\n                    )}\r\n                </div>\r\n            </div>\r\n            <WarningDialog\r\n                open={showEstimationWarning}\r\n                onDone={() => setShowEstimationWarning(false)}\r\n                title=\"Gas estimation failed\"\r\n                message=\"There was an error estimating fee values. This transaction might fail when confirmed.\"\r\n            />\r\n            {/* Modal */}\r\n\r\n            <Dialog open={active} onClickOutside={() => setActive(false)}>\r\n                <span className=\"absolute top-0 right-0 p-4 z-50\">\r\n                    <div\r\n                        onClick={() => setActive(false)}\r\n                        className=\" cursor-pointer p-2 ml-auto -mr-2 text-gray-900 transition duration-300 rounded-full hover:bg-primary-100 hover:text-primary-300\"\r\n                    >\r\n                        <CloseIcon size=\"10\" />\r\n                    </div>\r\n                </span>\r\n                <div>\r\n                    <div className=\"flex flex-col w-full space-y-2\">\r\n                        <div className=\"z-10 flex flex-row items-center p-2 bg-white bg-opacity-75\">\r\n                            <h2 className=\"p-0 text-lg font-bold\">Gas Price</h2>\r\n                            <div className=\"group relative\">\r\n                                <a\r\n                                    href=\"https://ethereum.org/en/developers/docs/gas/\"\r\n                                    target=\"_blank\"\r\n                                    rel=\"noreferrer\"\r\n                                >\r\n                                    <AiFillInfoCircle\r\n                                        size={26}\r\n                                        className=\"pl-2 text-primary-200 cursor-pointer hover:text-primary-300\"\r\n                                    />\r\n                                </a>\r\n                                <Tooltip\r\n                                    content={\r\n                                        <div className=\"flex flex-col font-normal items-start text-xs text-white-500\">\r\n                                            <div className=\"flex flex-row items-end space-x-7\">\r\n                                                <span>\r\n                                                    Gas is used to operate on\r\n                                                    the network.\r\n                                                </span>{\" \"}\r\n                                            </div>\r\n                                            <div className=\"flex flex-row items-end space-x-4\">\r\n                                                <span>\r\n                                                    Click on this icon to learn\r\n                                                    more.\r\n                                                </span>{\" \"}\r\n                                            </div>\r\n                                        </div>\r\n                                    }\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <HorizontalSelect\r\n                            options={tabs}\r\n                            value={tab}\r\n                            onChange={setTab}\r\n                            display={(t) => t.label}\r\n                            disableStyles\r\n                            optionClassName={(value) =>\r\n                                `flex-1 flex flex-row items-center justify-center p-3 text-sm\r\n                                            ${\r\n                                                tab === value\r\n                                                    ? \"border-primary-300 border-b-2 text-primary-300 font-bold\"\r\n                                                    : \"border-gray-200 text-gray-500 border-b\"\r\n                                            }`\r\n                            }\r\n                            containerClassName=\"flex flex-row -ml-3\"\r\n                            containerStyle={{\r\n                                width: \"calc(100% + 1.5rem)\",\r\n                            }}\r\n                        />\r\n                        <TabComponent\r\n                            symbol={networkNativeCurrency.symbol}\r\n                            nativeCurrencyIcon={defaultNetworkLogo}\r\n                            options={gasOptions}\r\n                            gasFees={defaultGas.feeData}\r\n                            selectedOption={selectedGas!}\r\n                            setSelectedGas={(option: GasPriceOption) => {\r\n                                setSelectedGas(option)\r\n                                setGas(option.gasFees)\r\n                                setShowEstimationWarning(false)\r\n                                setActive(false)\r\n                            }}\r\n                            minGasLimit={minGasLimit}\r\n                            getGasOption={getGasOption}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                {/*</div>*/}\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default GasPriceComponent\r\n","import classnames from \"classnames\"\r\nimport { FunctionComponent, useEffect, useState } from \"react\"\r\n\r\nconst ToggleButton: FunctionComponent<{\r\n    //inidicate the ID if you have more than one toggle input in the same screen to avoid collisions\r\n    id?: string\r\n    label?: string\r\n    inputName?: string\r\n    disabled?: boolean\r\n    readOnly?: boolean\r\n    defaultChecked: boolean\r\n    onToggle?: (checked: boolean) => void\r\n}> = ({\r\n    label,\r\n    inputName,\r\n    disabled = false,\r\n    defaultChecked,\r\n    readOnly,\r\n    onToggle,\r\n    id = \"toggleInput\",\r\n}) => {\r\n    const [isChecked, setIsCheked] = useState(defaultChecked)\r\n\r\n    useEffect(() => {\r\n        if (onToggle) {\r\n            onToggle(isChecked)\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [isChecked])\r\n\r\n    useEffect(() => {\r\n        setIsCheked(defaultChecked)\r\n    }, [defaultChecked])\r\n\r\n    const backgroundStyle = disabled\r\n        ? \"bg-gray-200\"\r\n        : isChecked\r\n        ? \"bg-primary-300\"\r\n        : \"bg-primary-200\"\r\n\r\n    const onClick = () => {\r\n        if (!disabled && !readOnly) {\r\n            setIsCheked(!isChecked)\r\n        }\r\n    }\r\n    return (\r\n        <label\r\n            htmlFor={id}\r\n            className={classnames(\r\n                \"flex items-center justify-between w-full\",\r\n                !disabled && !readOnly && \"cursor-pointer\"\r\n            )}\r\n        >\r\n            {label && <div className=\"font-bold text-sm\">{label}</div>}\r\n            <div className=\"group relative\">\r\n                <div\r\n                    className={classnames(\r\n                        \"block w-11 h-6 rounded-full\",\r\n                        backgroundStyle\r\n                    )}\r\n                ></div>\r\n                <div\r\n                    className={classnames(\r\n                        \"dot absolute left-0.5 top-0.5 bg-white w-5 h-5 rounded-full transition transform\",\r\n                        isChecked && \"translate-x-full\"\r\n                    )}\r\n                ></div>\r\n                <input\r\n                    type=\"checkbox\"\r\n                    id={id}\r\n                    name={inputName ?? \"toggleInput\"}\r\n                    className=\"sr-only\"\r\n                    disabled={disabled}\r\n                    readOnly={readOnly}\r\n                    onClick={onClick}\r\n                />\r\n            </div>\r\n        </label>\r\n    )\r\n}\r\n\r\nexport default ToggleButton\r\n","import * as yup from \"yup\"\r\nimport CloseIcon from \"../icons/CloseIcon\"\r\nimport Dialog from \"../dialog/Dialog\"\r\nimport Divider from \"../Divider\"\r\nimport Icon, { IconName } from \"../ui/Icon\"\r\nimport OutlinedButton from \"../ui/OutlinedButton\"\r\nimport ToggleButton from \"../button/ToggleButton\"\r\nimport Tooltip from \"../label/Tooltip\"\r\nimport { AiFillInfoCircle } from \"react-icons/ai\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { ButtonWithLoading } from \"../button/ButtonWithLoading\"\r\nimport { Classes, classnames } from \"../../styles\"\r\nimport { FunctionComponent, useEffect, useRef, useState } from \"react\"\r\nimport { InferType } from \"yup\"\r\nimport { TransactionAdvancedData } from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport { getNextNonce } from \"../../context/commActions\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useOnClickOutside } from \"../../util/useOnClickOutside\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\n\r\nexport interface AdvancedSettingsDisplay {\r\n    nonce: boolean\r\n    flashbots: boolean\r\n    slippage: boolean\r\n}\r\n\r\nexport interface AdvancedSettingsProps {\r\n    address: string\r\n    advancedSettings: TransactionAdvancedData\r\n    setAdvancedSettings: (x: TransactionAdvancedData) => void\r\n    defaultSettings?: Required<TransactionAdvancedData>\r\n    display?: AdvancedSettingsDisplay\r\n    label?: string\r\n    transactionGasLimit?: BigNumber\r\n}\r\n\r\nexport const defaultAdvancedSettings: Required<TransactionAdvancedData> = {\r\n    customAllowance: \"0\",\r\n    customNonce: 0,\r\n    flashbots: false,\r\n    slippage: 0.5,\r\n}\r\n\r\nexport const defaultSettingsDisplay: AdvancedSettingsDisplay = {\r\n    nonce: true,\r\n    flashbots: true,\r\n    slippage: false,\r\n}\r\n\r\nexport const FLASHBOTS_MIN_GAS_LIMIT = BigNumber.from(42000)\r\n\r\nconst GetAdvancedSettingsSchema = (display: AdvancedSettingsDisplay) => {\r\n    return yup.object({\r\n        nonce: yup.string().when([], {\r\n            is: () => display.nonce,\r\n            then: yup\r\n                .string()\r\n                .required(\"A nonce is required\")\r\n                .test(\"is-number\", \"Please enter a number\", (value) => {\r\n                    if (typeof value != \"string\") return false\r\n                    return !isNaN(parseFloat(value))\r\n                })\r\n                .test(\"is-integer\", \"Nonce should be an integer\", (value) => {\r\n                    if (typeof value != \"string\") return false\r\n                    return !value.includes(\".\")\r\n                }),\r\n        }),\r\n        slippage: yup.string().when([], {\r\n            is: () => display.slippage,\r\n            then: yup\r\n                .string()\r\n                .required(\"A slippage setting is required\")\r\n                .test(\"is-number\", \"Please enter a number\", (value) => {\r\n                    if (typeof value != \"string\") return false\r\n                    return !isNaN(parseFloat(value))\r\n                })\r\n                .test(\r\n                    \"too-large\",\r\n                    \"Slippage can't be more than 100%\",\r\n                    (value) => {\r\n                        if (typeof value != \"string\") return false\r\n                        return parseFloat(value) < 100\r\n                    }\r\n                ),\r\n        }),\r\n    })\r\n}\r\n\r\ntype AdvancedSettingsFormData = InferType<\r\n    ReturnType<typeof GetAdvancedSettingsSchema>\r\n>\r\n\r\n/**\r\n * Advanced Settings\r\n * Opens a Dialog where the user can customize advanced transaction settings.\r\n *\r\n * @param address Transaction signing address\r\n * @param advancedSettings Current parent advanced settings state\r\n * @param setAdvancedSettings Parent set state callback\r\n * @param defaultSettings Default advanced settings\r\n * @param display Custom display options\r\n */\r\nexport const AdvancedSettings: FunctionComponent<AdvancedSettingsProps> = ({\r\n    address,\r\n    advancedSettings,\r\n    setAdvancedSettings,\r\n    defaultSettings = defaultAdvancedSettings,\r\n    display = defaultSettingsDisplay,\r\n    label = \"Advanced Settings\",\r\n    transactionGasLimit = BigNumber.from(21000),\r\n}) => {\r\n    const { chainId } = useSelectedNetwork()\r\n    const isFlashbotsAvailable = chainId === 1\r\n\r\n    const [isOpen, setIsOpen] = useState<boolean>(false)\r\n    const [isFlashbotsEnabled, setIsFlashbotsEnabled] = useState<boolean>(\r\n        isFlashbotsAvailable ? !!advancedSettings.flashbots : false\r\n    )\r\n    const [slippageWarning, setSlippageWarning] = useState<string | null>(null)\r\n\r\n    const nextNonce = useRef<number>(defaultSettings.customNonce)\r\n    const clickOutsideRef = useRef<HTMLDivElement | null>(null)\r\n    useOnClickOutside(clickOutsideRef, () => {\r\n        setIsOpen(false)\r\n    })\r\n\r\n    // Validation\r\n    const schema = GetAdvancedSettingsSchema(display)\r\n\r\n    const {\r\n        clearErrors,\r\n        getValues,\r\n        handleSubmit,\r\n        register,\r\n        setValue,\r\n        formState: { errors },\r\n    } = useForm<InferType<typeof schema>>({\r\n        resolver: yupResolver(schema),\r\n    })\r\n\r\n    const canSubmit = !(errors.nonce || errors.slippage)\r\n    const isModified = () => {\r\n        const { nonce, slippage } = getValues()\r\n\r\n        if (\r\n            nonce &&\r\n            display.nonce &&\r\n            advancedSettings.customNonce !== parseInt(nonce)\r\n        ) {\r\n            return true\r\n        }\r\n\r\n        if (\r\n            display.flashbots &&\r\n            advancedSettings.flashbots !== isFlashbotsEnabled\r\n        ) {\r\n            return true\r\n        }\r\n\r\n        if (\r\n            slippage !== undefined &&\r\n            display.slippage &&\r\n            advancedSettings.slippage !== parseFloat(slippage)\r\n        ) {\r\n            return true\r\n        }\r\n    }\r\n\r\n    const validateSlippage = (v: string) => {\r\n        if (!v) {\r\n            setSlippageWarning(null)\r\n            return\r\n        }\r\n\r\n        const parsedSlippage = parseFloat(v)\r\n\r\n        if (!isFlashbotsEnabled && parsedSlippage > 3) {\r\n            setSlippageWarning(\"The transaction may be frontrun\")\r\n            return\r\n        }\r\n\r\n        if (parsedSlippage < 0.05) {\r\n            setSlippageWarning(\"The transaction may fail\")\r\n            return\r\n        }\r\n\r\n        setSlippageWarning(null)\r\n    }\r\n\r\n    const onNonceChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const inputLimit = 7\r\n        let value = event.target.value\r\n\r\n        value = value.slice(0, inputLimit)\r\n\r\n        value = value.replace(/[^0-9]/g, \"\")\r\n\r\n        if (value === \"\") {\r\n            setValue(\"nonce\", \"\", {\r\n                shouldValidate: true,\r\n            })\r\n        } else {\r\n            setValue(\"nonce\", value, {\r\n                shouldValidate: true,\r\n            })\r\n        }\r\n    }\r\n\r\n    const onSlippageChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const inputLimit = 5\r\n        let value = event.target.value\r\n\r\n        value = value.slice(0, inputLimit)\r\n\r\n        value = value\r\n            .replace(/[^0-9.,]/g, \"\")\r\n            .replace(\",\", \".\")\r\n            .replace(/(\\..*?)\\..*/g, \"$1\")\r\n\r\n        if (value === \".\") {\r\n            value = \"\"\r\n        }\r\n\r\n        if (value === \"\") {\r\n            setValue(\"slippage\", \"\", {\r\n                shouldValidate: true,\r\n            })\r\n        } else {\r\n            setValue(\"slippage\", value, {\r\n                shouldValidate: true,\r\n            })\r\n        }\r\n\r\n        validateSlippage(value)\r\n    }\r\n\r\n    // Reset settings to default\r\n    const resetSettings = () => {\r\n        clearErrors()\r\n\r\n        setValue(\"nonce\", nextNonce.current.toString(), {\r\n            shouldValidate: true,\r\n        })\r\n        setValue(\"slippage\", defaultSettings.slippage.toString(), {\r\n            shouldValidate: true,\r\n        })\r\n\r\n        validateSlippage(defaultSettings.slippage.toString())\r\n\r\n        setIsFlashbotsEnabled(\r\n            isFlashbotsAvailable\r\n                ? advancedSettings.flashbots || defaultSettings.flashbots\r\n                : false\r\n        )\r\n    }\r\n\r\n    const onSubmit = handleSubmit(\r\n        ({ slippage, nonce }: AdvancedSettingsFormData) => {\r\n            setAdvancedSettings({\r\n                customNonce: nonce ? parseInt(nonce) : undefined,\r\n                flashbots: isFlashbotsEnabled,\r\n                slippage:\r\n                    slippage !== undefined ? parseFloat(slippage) : undefined,\r\n            })\r\n\r\n            setIsOpen(false)\r\n        }\r\n    )\r\n\r\n    useEffect(() => {\r\n        const fetch = async () => {\r\n            nextNonce.current = await getNextNonce(address)\r\n\r\n            setValue(\"slippage\", defaultSettings.slippage.toString(), {\r\n                shouldValidate: true,\r\n            })\r\n            setValue(\"nonce\", nextNonce.current.toString(), {\r\n                shouldValidate: true,\r\n            })\r\n\r\n            validateSlippage(defaultSettings.slippage.toString())\r\n\r\n            setAdvancedSettings({\r\n                customNonce: nextNonce.current,\r\n                flashbots: isFlashbotsEnabled,\r\n                slippage:\r\n                    advancedSettings.slippage !== undefined\r\n                        ? advancedSettings.slippage\r\n                        : defaultSettings.slippage,\r\n            })\r\n        }\r\n\r\n        fetch()\r\n\r\n        // eslint-disable-next-line\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            clearErrors()\r\n\r\n            setValue(\r\n                \"nonce\",\r\n                advancedSettings.customNonce?.toString() ||\r\n                    nextNonce.current.toString(),\r\n                {\r\n                    shouldValidate: true,\r\n                }\r\n            )\r\n            setValue(\r\n                \"slippage\",\r\n                (advancedSettings.slippage !== undefined\r\n                    ? advancedSettings.slippage\r\n                    : defaultSettings.slippage\r\n                ).toString(),\r\n                {\r\n                    shouldValidate: true,\r\n                }\r\n            )\r\n\r\n            validateSlippage(\r\n                (advancedSettings.slippage !== undefined\r\n                    ? advancedSettings.slippage\r\n                    : defaultSettings.slippage\r\n                ).toString()\r\n            )\r\n\r\n            setIsFlashbotsEnabled(\r\n                isFlashbotsAvailable\r\n                    ? advancedSettings.flashbots || defaultSettings.flashbots\r\n                    : false\r\n            )\r\n        }\r\n\r\n        // eslint-disable-next-line\r\n    }, [isOpen, nextNonce.current])\r\n\r\n    return (\r\n        <>\r\n            <OutlinedButton\r\n                onClick={() => setIsOpen(true)}\r\n                className=\"w-full py-3\"\r\n            >\r\n                <span className=\"font-bold text-sm\">{label}</span>\r\n                <Icon name={IconName.RIGHT_CHEVRON} size=\"sm\" />\r\n            </OutlinedButton>\r\n            <Dialog open={isOpen}>\r\n                <div className=\"absolute top-0 right-0 p-5 z-40\">\r\n                    <div\r\n                        onClick={() => {\r\n                            setIsOpen(false)\r\n                        }}\r\n                        className=\"cursor-pointer p-2 ml-auto -mr-2 text-gray-900 transition duration-300 rounded-full hover:bg-primary-100 hover:text-primary-300\"\r\n                    >\r\n                        <CloseIcon size=\"10\" />\r\n                    </div>\r\n                </div>\r\n                <div\r\n                    className=\"flex flex-col w-full px-3\"\r\n                    ref={clickOutsideRef}\r\n                >\r\n                    <p className=\"text-base font-bold pb-3\">{label}</p>\r\n\r\n                    {display.slippage && (\r\n                        <div className=\"w-full pb-2\">\r\n                            <p className=\"text-xs font-medium pb-1\">\r\n                                Slippage percentage (%)\r\n                            </p>\r\n                            <input\r\n                                {...register(\"slippage\")}\r\n                                id=\"slippage\"\r\n                                name=\"slippage\"\r\n                                type=\"text\"\r\n                                autoComplete=\"off\"\r\n                                onChange={(e) => {\r\n                                    onSlippageChange(e)\r\n                                }}\r\n                                className={classnames(\r\n                                    \"w-full\",\r\n                                    Classes.inputBordered,\r\n                                    errors.slippage\r\n                                        ? \"border-red-400 focus:border-red-400\"\r\n                                        : slippageWarning &&\r\n                                              \"border-yellow-400 focus:border-yellow-600\"\r\n                                )}\r\n                            />\r\n                            {errors.slippage?.message || slippageWarning ? (\r\n                                <p className=\"text-xs text-red-500 pt-1\">\r\n                                    {errors.slippage?.message ||\r\n                                        slippageWarning}\r\n                                </p>\r\n                            ) : null}\r\n                        </div>\r\n                    )}\r\n\r\n                    {display.nonce && (\r\n                        <div className=\"w-full pb-2\">\r\n                            <p className=\"text-xs font-medium pb-1\">\r\n                                Custom Nonce\r\n                            </p>\r\n                            <input\r\n                                {...register(\"nonce\")}\r\n                                id=\"nonce\"\r\n                                name=\"nonce\"\r\n                                type=\"text\"\r\n                                autoComplete=\"off\"\r\n                                onChange={(e) => {\r\n                                    onNonceChange(e)\r\n                                }}\r\n                                className={classnames(\r\n                                    \"w-full\",\r\n                                    Classes.inputBordered,\r\n                                    errors.nonce &&\r\n                                        \"border-red-400 focus:border-red-400\"\r\n                                )}\r\n                            />\r\n                            {errors.nonce?.message ? (\r\n                                <p className=\"text-xs text-red-500 pt-1\">\r\n                                    {errors.nonce.message}\r\n                                </p>\r\n                            ) : null}\r\n                        </div>\r\n                    )}\r\n\r\n                    {display.flashbots && isFlashbotsAvailable && (\r\n                        <div className=\"w-full pb-2\">\r\n                            <div className=\"flex items-center pb-1\">\r\n                                <p className=\"text-xs font-medium \">\r\n                                    Flashbots\r\n                                </p>\r\n                                <div className=\"group relative\">\r\n                                    <AiFillInfoCircle\r\n                                        size={20}\r\n                                        className=\"pl-1 text-primary-200  hover:text-primary-300\"\r\n                                    />\r\n                                    <Tooltip\r\n                                        content={\r\n                                            <div className=\"p-0.5 font-normal text-center text-xs text-white-500\">\r\n                                                <p>\r\n                                                    Transactions consuming less\r\n                                                    than 42,000 gas\r\n                                                </p>\r\n                                                <p>\r\n                                                    will be mined normally,\r\n                                                    without Flashbots.\r\n                                                </p>\r\n                                            </div>\r\n                                        }\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <ToggleButton\r\n                                defaultChecked={\r\n                                    advancedSettings.flashbots ?? false\r\n                                }\r\n                                disabled={transactionGasLimit.lt(\r\n                                    FLASHBOTS_MIN_GAS_LIMIT\r\n                                )}\r\n                                inputName=\"flashbots\"\r\n                                onToggle={(checked) => {\r\n                                    setIsFlashbotsEnabled(checked)\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    )}\r\n\r\n                    <p\r\n                        onClick={() => resetSettings()}\r\n                        className=\"text-xs text-blue-500 hover:text-blue-800 cursor-pointer w-min\"\r\n                    >\r\n                        Reset\r\n                    </p>\r\n\r\n                    <div className=\"-mx-5 py-2\">\r\n                        <Divider />\r\n                    </div>\r\n\r\n                    <ButtonWithLoading\r\n                        type=\"submit\"\r\n                        label=\"Save\"\r\n                        disabled={!(canSubmit && isModified())}\r\n                        buttonClass={Classes.button}\r\n                        onClick={() => {\r\n                            onSubmit()\r\n                        }}\r\n                    />\r\n                </div>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","import { useState, useEffect, useRef } from \"react\"\r\nimport { ImCheckmark } from \"react-icons/im\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport classnames from \"classnames\"\r\nimport { parseUnits } from \"@ethersproject/units\"\r\nimport { formatUnits } from \"@ethersproject/units\"\r\nimport { GasPriceLevels } from \"@block-wallet/background/controllers/GasPricesController\"\r\nimport * as yup from \"yup\"\r\nimport { InferType } from \"yup\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { AiFillInfoCircle } from \"react-icons/ai\"\r\nimport { TransactionFeeData } from \"@block-wallet/background/controllers/erc-20/transactions/SignedTransaction\"\r\n\r\n// Components\r\nimport HorizontalSelect from \"../input/HorizontalSelect\"\r\nimport Tooltip from \"../../components/label/Tooltip\"\r\nimport Spinner from \"../spinner/Spinner\"\r\nimport Dialog from \"../dialog/Dialog\"\r\nimport { ArrowUpDown } from \"../icons/ArrowUpDown\"\r\nimport EndLabel from \"../input/EndLabel\"\r\nimport WarningDialog from \"../dialog/WarningDialog\"\r\n\r\n// Assets\r\nimport { Classes } from \"../../styles/classes\"\r\nimport CloseIcon from \"../icons/CloseIcon\"\r\n\r\n// Utils\r\nimport { capitalize } from \"../../util/capitalize\"\r\nimport { formatCurrency, toCurrencyAmount } from \"../../util/formatCurrency\"\r\nimport {\r\n    makeStringNumberFormField,\r\n    handleKeyDown,\r\n    handleChangeAmountGwei,\r\n    handleChangeAmountWei,\r\n} from \"../../util/form\"\r\nimport { useOnClickOutside } from \"../../util/useOnClickOutside\"\r\nimport { formatRounded } from \"../../util/formatRounded\"\r\n\r\n// Context\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport { useGasPriceData } from \"../../context/hooks/useGasPriceData\"\r\n\r\nexport type TransactionSpeed = {\r\n    [key: string]: BigNumber\r\n}\r\n\r\nexport type TransactionSpeedOption = {\r\n    label: string\r\n    ethTotalCost: string\r\n    gasPrice: BigNumber\r\n    gasLimit: BigNumber\r\n    nativeCurrencyAmount: string\r\n}\r\n\r\ninterface GasPriceSelectorProps {\r\n    defaultGasLimit: BigNumber\r\n    defaultGasPrice: BigNumber\r\n    defaultLevel: \"low\" | \"medium\" | \"high\"\r\n    setGasPriceAndLimit: (gasPrice: BigNumber, gasLimit: BigNumber) => void\r\n    disabled?: boolean\r\n    isParentLoading?: boolean\r\n    showEstimationError?: boolean\r\n}\r\n\r\ninterface GasTabProps {\r\n    defaultNetworkLogo: string\r\n    symbol: string\r\n    options: TransactionSpeedOption[]\r\n    selectedGasPrice: TransactionSpeedOption\r\n    defaultGasLimit: BigNumber\r\n    defaultGasPrice: BigNumber\r\n    minGasLimit?: number\r\n    setUserChanged: (userChanged: boolean) => void\r\n    handlePriceSelection: (price: TransactionSpeedOption) => void\r\n    getSpeedOption: (\r\n        label: string,\r\n        price: BigNumber,\r\n        limit: BigNumber\r\n    ) => TransactionSpeedOption\r\n}\r\n\r\n// Schema\r\nconst schema = yup.object({\r\n    gasLimit: makeStringNumberFormField(\"Gas limit is required\", false),\r\n    gasPrice: makeStringNumberFormField(\"Gas price is required\", true),\r\n})\r\ntype GasAdvancedForm = InferType<typeof schema>\r\n\r\nconst GasSelectorAdvanced = (props: GasTabProps) => {\r\n    const {\r\n        selectedGasPrice,\r\n        defaultGasLimit,\r\n        defaultGasPrice,\r\n        setUserChanged,\r\n        getSpeedOption,\r\n        handlePriceSelection,\r\n    } = props\r\n\r\n    const { gasLowerCap } = useSelectedNetwork()\r\n\r\n    // State\r\n    const [isCustom, setIsCustom] = useState<boolean>(\r\n        selectedGasPrice.label === \"Custom\"\r\n    )\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        setValue,\r\n        getValues,\r\n\r\n        formState: { errors },\r\n    } = useForm<GasAdvancedForm>({\r\n        defaultValues: {\r\n            gasLimit: formatUnits(\r\n                isCustom ? selectedGasPrice.gasLimit! : defaultGasLimit,\r\n                \"wei\"\r\n            ),\r\n            gasPrice: formatUnits(\r\n                isCustom ? selectedGasPrice.gasPrice! : defaultGasPrice,\r\n                \"gwei\"\r\n            ),\r\n        },\r\n        resolver: yupResolver(schema),\r\n    })\r\n\r\n    const validateFees = (fees: TransactionFeeData) => {\r\n        // Clean warnings\r\n        setGasLimitWarning(\"\")\r\n        setGasPriceWarning(\"\")\r\n\r\n        // Validations\r\n        if (fees.gasLimit?.lt(defaultGasLimit)) {\r\n            setGasLimitWarning(\"Gas limit lower than suggested\")\r\n        }\r\n\r\n        if (\r\n            gasLowerCap &&\r\n            gasLowerCap.gasPrice &&\r\n            fees.gasPrice?.lt(gasLowerCap.gasPrice)\r\n        ) {\r\n            setGasPriceWarning(\"Max fee lower than network limit\")\r\n        }\r\n    }\r\n\r\n    const handleBlur = () => {\r\n        const values = getValues()\r\n\r\n        const fees: TransactionFeeData = {\r\n            gasLimit: BigNumber.from(\r\n                values.gasLimit === \"\" ? \"0\" : values.gasLimit\r\n            ),\r\n            gasPrice: parseUnits(\r\n                values.gasPrice === \"\" ? \"0\" : values.gasPrice,\r\n                \"gwei\"\r\n            ),\r\n        }\r\n\r\n        validateFees(fees)\r\n    }\r\n\r\n    const handleSave = handleSubmit(async (values: GasAdvancedForm) => {\r\n        const fees: TransactionFeeData = {\r\n            gasLimit: BigNumber.from(values.gasLimit),\r\n            gasPrice: parseUnits(values.gasPrice, \"gwei\"),\r\n        }\r\n\r\n        handlePriceSelection(\r\n            getSpeedOption(\"Custom\", fees.gasPrice!, fees.gasLimit!)\r\n        )\r\n    })\r\n\r\n    const [gasPriceWarning, setGasPriceWarning] = useState(\"\")\r\n    const [gasLimitWarning, setGasLimitWarning] = useState(\"\")\r\n\r\n    const handleCustomChange = () => {\r\n        setIsCustom(true)\r\n        setValue(\"gasLimit\", formatUnits(defaultGasLimit, \"wei\"))\r\n        setValue(\"gasPrice\", formatUnits(defaultGasPrice, \"gwei\"))\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {/* ADVANCED */}\r\n            <div className=\"flex flex-col w-full\">\r\n                <div className=\"flex flex-col w-full space-y-3 px-3 pb-3\">\r\n                    <div className=\"flex flex-col\">\r\n                        <label\r\n                            className={classnames(\r\n                                \"leading-loose text-xs font-medium  mb-1\",\r\n                                !isCustom && \"text-gray-400\"\r\n                            )}\r\n                        >\r\n                            Gas Price\r\n                        </label>\r\n                        <EndLabel label=\"GWEI\">\r\n                            <input\r\n                                {...register(\"gasPrice\")}\r\n                                autoComplete=\"off\"\r\n                                className={classnames(\r\n                                    Classes.inputBordered,\r\n                                    \"w-full\",\r\n                                    !isCustom && \"text-gray-400\",\r\n                                    errors.gasPrice\r\n                                        ? \"border-red-400 focus:border-red-600\"\r\n                                        : gasPriceWarning\r\n                                        ? \"border-yellow-400 focus:border-yellow-600\"\r\n                                        : \"\"\r\n                                )}\r\n                                type=\"text\"\r\n                                onKeyDown={handleKeyDown}\r\n                                placeholder={formatUnits(\r\n                                    isCustom\r\n                                        ? selectedGasPrice.gasPrice\r\n                                        : defaultGasPrice,\r\n                                    \"gwei\"\r\n                                )}\r\n                                onInput={handleChangeAmountGwei((value) => {\r\n                                    setValue(\"gasPrice\", value, {\r\n                                        shouldValidate: true,\r\n                                    })\r\n                                    setUserChanged(true)\r\n                                })}\r\n                                onFocus={() => {\r\n                                    !isCustom && handleCustomChange()\r\n                                }}\r\n                                onBlur={() => {\r\n                                    handleBlur()\r\n                                }}\r\n                            />\r\n                        </EndLabel>\r\n                        {/* ERROR */}\r\n                        <span\r\n                            className={classnames(\r\n                                \"text-xs\",\r\n                                errors.gasPrice\r\n                                    ? \"text-red-500\"\r\n                                    : gasPriceWarning\r\n                                    ? \"text-yellow-500\"\r\n                                    : \"m-0 h-0\"\r\n                            )}\r\n                        >\r\n                            {errors.gasPrice?.message || gasPriceWarning || \"\"}\r\n                        </span>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col\">\r\n                        <label\r\n                            className={classnames(\r\n                                \"leading-loose text-xs font-medium  mb-1\",\r\n                                !isCustom && \"text-gray-400\"\r\n                            )}\r\n                        >\r\n                            Gas limit\r\n                        </label>\r\n                        <EndLabel label=\"WEI\">\r\n                            <input\r\n                                autoComplete=\"off\"\r\n                                {...register(\"gasLimit\")}\r\n                                className={classnames(\r\n                                    Classes.inputBordered,\r\n                                    \"w-full\",\r\n                                    !isCustom && \"text-gray-400\",\r\n                                    errors.gasLimit\r\n                                        ? \"border-red-400 focus:border-red-600\"\r\n                                        : gasLimitWarning\r\n                                        ? \"border-yellow-400 focus:border-yellow-600\"\r\n                                        : \"\"\r\n                                )}\r\n                                type=\"text\"\r\n                                onKeyDown={handleKeyDown}\r\n                                placeholder={formatUnits(\r\n                                    isCustom\r\n                                        ? selectedGasPrice.gasLimit\r\n                                        : defaultGasLimit,\r\n                                    \"wei\"\r\n                                )}\r\n                                onInput={handleChangeAmountWei((value) => {\r\n                                    setValue(\"gasLimit\", value, {\r\n                                        shouldValidate: true,\r\n                                    })\r\n                                    setUserChanged(true)\r\n                                }, defaultGasLimit.toString())}\r\n                                onFocus={() => {\r\n                                    !isCustom && handleCustomChange()\r\n                                }}\r\n                                onBlur={() => {\r\n                                    handleBlur()\r\n                                }}\r\n                            />\r\n                        </EndLabel>\r\n                        {/* ERROR */}\r\n                        <span\r\n                            className={classnames(\r\n                                \"text-xs\",\r\n                                errors.gasLimit\r\n                                    ? \"text-red-500\"\r\n                                    : gasLimitWarning\r\n                                    ? \"text-yellow-500\"\r\n                                    : \"m-0 h-0\"\r\n                            )}\r\n                        >\r\n                            {errors.gasLimit?.message || gasLimitWarning || \"\"}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <hr className=\"absolute left-0 border-0.5 border-gray-200 w-full\" />\r\n                    <div className=\"flex flex-row w-full items-center pt-5 justify-between space-x-4 mt-auto px-4\">\r\n                        <button\r\n                            type=\"button\"\r\n                            className={classnames(Classes.button)}\r\n                            onClick={handleSave}\r\n                        >\r\n                            Save\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nconst GasSelectorBasic = (props: GasTabProps) => {\r\n    const {\r\n        options,\r\n        selectedGasPrice,\r\n        handlePriceSelection,\r\n        defaultNetworkLogo,\r\n        symbol,\r\n    } = props\r\n    return (\r\n        <>\r\n            {/* REGULAR */}\r\n            {options.map((price: TransactionSpeedOption, i) => {\r\n                return (\r\n                    <div\r\n                        className=\"w-full flex flex-row items-center justify-content-between cursor-pointer rounded-md hover:bg-gray-100 px-2\"\r\n                        key={i}\r\n                        onClick={() => {\r\n                            handlePriceSelection(price)\r\n                        }}\r\n                    >\r\n                        <div className=\"flex flex-col flex-grow items-start px-2 py-1 w-11/12\">\r\n                            <label\r\n                                className={classnames(\r\n                                    \"text-base font-semibold mb-2 cursor-pointer capitalize\",\r\n                                    selectedGasPrice.label === price.label &&\r\n                                        \"text-primary-300\"\r\n                                )}\r\n                            >\r\n                                {price.label}\r\n                            </label>\r\n                            <div className=\"flex flex-row w-full items-center justify-start\">\r\n                                <div className=\"w-36\">\r\n                                    <span\r\n                                        className={classnames(\r\n                                            \"text-sm\",\r\n                                            selectedGasPrice.label ===\r\n                                                price.label &&\r\n                                                \"text-primary-300\"\r\n                                        )}\r\n                                    >\r\n                                        {price.nativeCurrencyAmount}\r\n                                    </span>\r\n                                </div>\r\n                                <div className=\"flex flex-row space-x-2 items-center justify-start w-44\">\r\n                                    <div className=\"justify-self-start\">\r\n                                        <img\r\n                                            src={defaultNetworkLogo}\r\n                                            alt={symbol}\r\n                                            width=\"20px\"\r\n                                            draggable={false}\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"w-full\">\r\n                                        <span\r\n                                            className={classnames(\r\n                                                \"text-sm\",\r\n                                                selectedGasPrice.label ===\r\n                                                    price.label &&\r\n                                                    \"text-primary-300\"\r\n                                            )}\r\n                                        >\r\n                                            {price.ethTotalCost}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex w-1/12\">\r\n                            <ImCheckmark\r\n                                className={classnames(\r\n                                    \"text-sm\",\r\n                                    selectedGasPrice.label === price.label\r\n                                        ? \"text-primary-300\"\r\n                                        : \"hidden\"\r\n                                )}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                )\r\n            })}\r\n        </>\r\n    )\r\n}\r\n\r\nconst tabs = [\r\n    {\r\n        label: \"Basic\",\r\n        component: GasSelectorBasic,\r\n    },\r\n    {\r\n        label: \"Advanced\",\r\n        component: GasSelectorAdvanced,\r\n    },\r\n]\r\n\r\nconst getTransactionSpeeds = (gasPrices: GasPriceLevels) => {\r\n    return {\r\n        low: BigNumber.from(gasPrices.slow.gasPrice!),\r\n        medium: BigNumber.from(gasPrices.average.gasPrice!),\r\n        high: BigNumber.from(gasPrices.fast.gasPrice!),\r\n    }\r\n}\r\n\r\nexport const GasPriceSelector = (props: GasPriceSelectorProps) => {\r\n    // Popup variables\r\n    const ref = useRef(null)\r\n    const [active, setActive] = useState(false)\r\n    useOnClickOutside(ref, () => setActive(false))\r\n    const [isLoaded, setIsLoaded] = useState<boolean>(false)\r\n\r\n    const {\r\n        defaultGasLimit,\r\n        defaultGasPrice,\r\n        defaultLevel,\r\n        setGasPriceAndLimit,\r\n        disabled,\r\n        isParentLoading = props.isParentLoading ?? false,\r\n    } = props\r\n\r\n    const [showEstimationWarning, setShowEstimationWarning] = useState(\r\n        props.showEstimationError ?? false\r\n    )\r\n\r\n    // State variables\r\n    const { nativeCurrency, localeInfo, exchangeRates, networkNativeCurrency } =\r\n        useBlankState()!\r\n\r\n    const { gasPricesLevels } = useGasPriceData()\r\n\r\n    const {\r\n        showGasLevels,\r\n        defaultNetworkLogo,\r\n        nativeCurrency: { decimals: nativeCurrencyDecimals },\r\n    } = useSelectedNetwork()\r\n\r\n    const [transactionSpeeds, setTransactionSpeeds] =\r\n        useState<TransactionSpeed>(getTransactionSpeeds(gasPricesLevels))\r\n\r\n    const [speeds, setTransactionSpeedOptions] = useState<\r\n        TransactionSpeedOption[]\r\n    >([])\r\n\r\n    const getSpeedOption = (\r\n        label: string,\r\n        price: BigNumber,\r\n        limit: BigNumber\r\n    ): TransactionSpeedOption => {\r\n        return {\r\n            label,\r\n            gasPrice: BigNumber.from(price),\r\n            gasLimit: BigNumber.from(limit),\r\n            ethTotalCost: formatRounded(\r\n                formatUnits(BigNumber.from(price).mul(BigNumber.from(limit))),\r\n                10\r\n            ),\r\n            nativeCurrencyAmount: formatCurrency(\r\n                toCurrencyAmount(\r\n                    BigNumber.from(price).mul(BigNumber.from(limit)),\r\n                    exchangeRates[networkNativeCurrency.symbol],\r\n                    nativeCurrencyDecimals\r\n                ),\r\n                {\r\n                    currency: nativeCurrency,\r\n                    locale_info: localeInfo,\r\n                    showSymbol: true,\r\n                }\r\n            ),\r\n        }\r\n    }\r\n\r\n    const [selectedGasPrice, setSelectedGasPrice] =\r\n        useState<TransactionSpeedOption>()\r\n\r\n    const [userChanged, setUserChanged] = useState<boolean>(false)\r\n\r\n    // Tabs variables\r\n    // if network is configured to noxt show gas levels or received gas does not match with average, default is advanced tab.\r\n    const [tab, setTab] = useState(\r\n        tabs[!showGasLevels || !defaultLevel ? 1 : 0]\r\n    )\r\n    const TabComponent = tab.component\r\n    //Recalculate options on gas change\r\n    useEffect(() => {\r\n        // Waits till parent component finishes loading (estimation and transaction values)\r\n        if (isParentLoading) {\r\n            // This means there was a change on parent component that is updating values so we should reload all values.\r\n            if (isLoaded) setIsLoaded(false)\r\n\r\n            // keeps waiting for parent to finish\r\n            return\r\n        }\r\n\r\n        setTransactionSpeeds(getTransactionSpeeds(gasPricesLevels))\r\n\r\n        let speedOptions: TransactionSpeedOption[] = []\r\n        for (let speed in transactionSpeeds) {\r\n            speedOptions.push(\r\n                getSpeedOption(speed, transactionSpeeds[speed], defaultGasLimit)\r\n            )\r\n        }\r\n\r\n        setTransactionSpeedOptions(speedOptions)\r\n\r\n        //Default selected checks if received default price is equals average to select it, otherwise sets custom value.\r\n        if (!isLoaded) {\r\n            if (showGasLevels && defaultLevel) {\r\n                const defaultOption = speedOptions.find(\r\n                    (o) => o.label === defaultLevel\r\n                )!\r\n                setSelectedGasPrice(defaultOption)\r\n                setGasPriceAndLimit(\r\n                    defaultOption.gasPrice,\r\n                    defaultOption.gasLimit\r\n                )\r\n                setTab(tabs[0])\r\n            } else {\r\n                setSelectedGasPrice(\r\n                    getSpeedOption(\"Custom\", defaultGasPrice, defaultGasLimit)\r\n                )\r\n                setGasPriceAndLimit(defaultGasPrice, defaultGasLimit)\r\n                setTab(tabs[1])\r\n            }\r\n            setIsLoaded(true)\r\n        } else {\r\n            if (\r\n                Object.keys(transactionSpeeds).includes(selectedGasPrice!.label)\r\n            ) {\r\n                const selected = speeds.find(\r\n                    (s) => s.label === selectedGasPrice!.label\r\n                )\r\n                selected && handlePriceSelection(selected)\r\n            }\r\n\r\n            if (!showGasLevels && !userChanged) {\r\n                setSelectedGasPrice(\r\n                    getSpeedOption(\"Custom\", defaultGasPrice, defaultGasLimit)\r\n                )\r\n                setGasPriceAndLimit(defaultGasPrice, defaultGasLimit)\r\n            }\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [gasPricesLevels, defaultGasPrice, defaultGasLimit, isParentLoading])\r\n\r\n    // Handlers\r\n    const handlePriceSelection = (price: TransactionSpeedOption) => {\r\n        setSelectedGasPrice(price)\r\n        setGasPriceAndLimit(price.gasPrice, price.gasLimit)\r\n    }\r\n\r\n    // Effect to check if estimation failed when switching to a new tx\r\n    useEffect(() => {\r\n        if (props.showEstimationError && !showEstimationWarning) {\r\n            setShowEstimationWarning(true)\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [props.showEstimationError])\r\n\r\n    return (\r\n        <>\r\n            <div\r\n                className={classnames(\r\n                    Classes.blueSection,\r\n                    active && Classes.blueSectionActive\r\n                )}\r\n                onClick={() =>\r\n                    !disabled &&\r\n                    !isParentLoading &&\r\n                    isLoaded &&\r\n                    setActive(!active)\r\n                }\r\n            >\r\n                <div className=\"flex justify-start w-full space-x-2\">\r\n                    <div className={\"text-xs font-semibold\"}>\r\n                        {isParentLoading || !isLoaded\r\n                            ? \"Loading prices...\"\r\n                            : capitalize(selectedGasPrice!.label)}\r\n                    </div>\r\n                    <div className=\"flex flex-row w-full items-center justify-start space-x-3 text-xs\">\r\n                        <span className=\"text-xs text-gray-600\">\r\n                            {!isParentLoading && isLoaded\r\n                                ? selectedGasPrice!.nativeCurrencyAmount\r\n                                : \"\"}\r\n                        </span>\r\n                        <div className=\"flex flex-row space-x-1 items-center justify-self-end\">\r\n                            {!isParentLoading && isLoaded && (\r\n                                <>\r\n                                    <div className=\"justify-self-start\">\r\n                                        <img\r\n                                            src={defaultNetworkLogo}\r\n                                            alt={networkNativeCurrency.symbol}\r\n                                            width=\"20px\"\r\n                                            draggable={false}\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"w-full\">\r\n                                        <span className=\"text-xs\">\r\n                                            {selectedGasPrice!.ethTotalCost}\r\n                                        </span>\r\n                                    </div>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex justify-end items-center w-4 h-full\">\r\n                    {isParentLoading || !isLoaded ? (\r\n                        <Spinner />\r\n                    ) : (\r\n                        <ArrowUpDown active={active} />\r\n                    )}\r\n                </div>\r\n            </div>\r\n            <WarningDialog\r\n                open={showEstimationWarning}\r\n                onDone={() => setShowEstimationWarning(false)}\r\n                title=\"Gas estimation failed\"\r\n                message=\"There was an error estimating fee values. This transaction might fail when confirmed.\"\r\n            />\r\n            <Dialog open={active} onClickOutside={() => setActive(false)}>\r\n                <span className=\"absolute top-0 right-0 p-4 z-50\">\r\n                    <div\r\n                        onClick={() => setActive(false)}\r\n                        className=\" cursor-pointer p-2 ml-auto -mr-2 text-gray-900 transition duration-300 rounded-full hover:bg-primary-100 hover:text-primary-300\"\r\n                    >\r\n                        <CloseIcon size=\"10\" />\r\n                    </div>\r\n                </span>\r\n                <div>\r\n                    <div className=\"flex flex-col w-full space-y-2\">\r\n                        <div className=\"z-10 flex flex-row items-center p-2 bg-white bg-opacity-75\">\r\n                            <h2 className=\"pl-0.5 pr-0 text-lg font-bold\">\r\n                                Gas Price\r\n                            </h2>\r\n                            <div className=\"group relative\">\r\n                                <a\r\n                                    href=\"https://ethereum.org/en/developers/docs/gas/\"\r\n                                    target=\"_blank\"\r\n                                    rel=\"noreferrer\"\r\n                                >\r\n                                    <AiFillInfoCircle\r\n                                        size={26}\r\n                                        className=\"pl-2 text-primary-200 cursor-pointer hover:text-primary-300\"\r\n                                    />\r\n                                </a>\r\n                                <Tooltip\r\n                                    content={\r\n                                        <div className=\"flex flex-col font-normal items-start text-xs text-white-500\">\r\n                                            <div className=\"flex flex-row items-end space-x-7\">\r\n                                                <span>\r\n                                                    Gas is used to operate on\r\n                                                    the network.\r\n                                                </span>{\" \"}\r\n                                            </div>\r\n                                            <div className=\"flex flex-row items-end space-x-4\">\r\n                                                <span>\r\n                                                    Click on this icon to learn\r\n                                                    more.\r\n                                                </span>{\" \"}\r\n                                            </div>\r\n                                        </div>\r\n                                    }\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {showGasLevels && (\r\n                            <HorizontalSelect\r\n                                options={tabs}\r\n                                value={tab}\r\n                                onChange={setTab}\r\n                                display={(t) => t.label}\r\n                                disableStyles\r\n                                optionClassName={(value) =>\r\n                                    `flex-1 flex flex-row items-center justify-center p-3 text-sm\r\n                                            ${\r\n                                                tab === value\r\n                                                    ? \"border-primary-300 border-b-2 text-primary-300 font-bold\"\r\n                                                    : \"border-gray-200 text-gray-500 border-b\"\r\n                                            }`\r\n                                }\r\n                                containerClassName=\"flex flex-row -ml-3\"\r\n                                containerStyle={{\r\n                                    width: \"calc(100% + 1.5rem)\",\r\n                                }}\r\n                            />\r\n                        )}\r\n\r\n                        <TabComponent\r\n                            defaultNetworkLogo={defaultNetworkLogo}\r\n                            symbol={networkNativeCurrency.symbol}\r\n                            options={speeds}\r\n                            selectedGasPrice={selectedGasPrice!}\r\n                            getSpeedOption={getSpeedOption}\r\n                            defaultGasLimit={defaultGasLimit}\r\n                            defaultGasPrice={defaultGasPrice}\r\n                            setUserChanged={setUserChanged}\r\n                            handlePriceSelection={(\r\n                                option: TransactionSpeedOption\r\n                            ) => {\r\n                                handlePriceSelection(option)\r\n                                setActive(false)\r\n                                setShowEstimationWarning(false)\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/arrow_right_black.6d87aa35.svg\";","import { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { useTokensList } from \"./useTokensList\"\r\n\r\nexport const useSelectedAccountBalance = () => {\r\n    const { nativeToken } = useTokensList()\r\n    return nativeToken ? nativeToken.balance : BigNumber.from(0)\r\n}\r\n","import {\r\n    TransactionMeta,\r\n    uiTransactionParams,\r\n} from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport { getNonSubmittedTransactions } from \"../../util/getNonSubmittedTransactions\"\r\nimport { getUITransactionParams } from \"../../util/transactionUtils\"\r\nimport { useBlankState } from \"../background/backgroundHooks\"\r\nimport { useGasPriceData } from \"./useGasPriceData\"\r\nimport { useSelectedNetwork } from \"./useSelectedNetwork\"\r\n\r\ninterface UnapprovedTransaction {\r\n    transactionCount: number\r\n    transactionId: string\r\n    transaction: TransactionMeta\r\n    params: uiTransactionParams\r\n}\r\n\r\nexport const useNonSubmittedExternalTransaction = (): UnapprovedTransaction => {\r\n    const { transactions } = useBlankState()!\r\n    const { isEIP1559Compatible } = useSelectedNetwork()\r\n    const { gasPricesLevels } = useGasPriceData()\r\n\r\n    const nonSubmittedTransactions = getNonSubmittedTransactions(\r\n        transactions,\r\n        true\r\n    )\r\n\r\n    // Gets first unapproved transaction\r\n    const transactionIds = Object.keys(nonSubmittedTransactions)\r\n\r\n    const transaction = Object.values(nonSubmittedTransactions)[0]\r\n    const transactionId = transactionIds[0]\r\n    const transactionCount = transactionIds.length\r\n\r\n    return {\r\n        transactionId,\r\n        transaction,\r\n        transactionCount,\r\n        params: getUITransactionParams(\r\n            transaction,\r\n            gasPricesLevels,\r\n            isEIP1559Compatible\r\n        ),\r\n    }\r\n}\r\n","import { getUITransactionParams } from \"../../util/transactionUtils\"\r\nimport { useBlankState } from \"../background/backgroundHooks\"\r\nimport { useGasPriceData } from \"./useGasPriceData\"\r\nimport { useSelectedNetwork } from \"./useSelectedNetwork\"\r\n\r\nexport const useTransactionById = (transactionId?: string) => {\r\n    const { transactions } = useBlankState()!\r\n    const { isEIP1559Compatible } = useSelectedNetwork()\r\n    const { gasPricesLevels } = useGasPriceData()\r\n    const transaction = transactions.find((t) => t.id === transactionId)\r\n    return {\r\n        transaction,\r\n        params: getUITransactionParams(\r\n            transaction,\r\n            gasPricesLevels,\r\n            isEIP1559Compatible\r\n        ),\r\n    }\r\n}\r\n","import { useSelectedNetwork } from \"./useSelectedNetwork\"\r\nimport { useBlankState } from \"../background/backgroundHooks\"\r\nimport { NetworkAddressBook } from \"@block-wallet/background/controllers/AddressBookController\"\r\n\r\nexport const useAddressBook = (): NetworkAddressBook => {\r\n    const { name } = useSelectedNetwork()\r\n    const { addressBook } = useBlankState()!\r\n\r\n    if (!addressBook) {\r\n        return {} as NetworkAddressBook\r\n    }\r\n\r\n    return addressBook[name.toUpperCase()] || ({} as NetworkAddressBook)\r\n}\r\n\r\nconst defaultParams = {\r\n    filterContacts: false,\r\n}\r\n\r\nexport const useAddressBookRecentAddresses = ({\r\n    filterContacts,\r\n}: { filterContacts: boolean } = defaultParams) => {\r\n    const { name } = useSelectedNetwork()\r\n    const addressBook = useAddressBook()\r\n    const { recentAddresses } = useBlankState()!\r\n\r\n    if (!recentAddresses) {\r\n        return {} as NetworkAddressBook\r\n    }\r\n\r\n    const recentNetworkAddresses =\r\n        recentAddresses[name.toUpperCase()] || ({} as NetworkAddressBook)\r\n\r\n    if (!filterContacts) {\r\n        return recentNetworkAddresses\r\n    }\r\n\r\n    return Object.keys(recentNetworkAddresses)\r\n        .filter((key) => {\r\n            return !addressBook[key]\r\n        })\r\n        .reduce(\r\n            (acc, key) => ({\r\n                ...acc,\r\n                [key]: recentNetworkAddresses[key],\r\n            }),\r\n            {}\r\n        )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/open_external.d05db600.svg\";","import {\r\n    ExchangeType,\r\n    MetaType,\r\n    TransactionCategories,\r\n    TransactionStatus,\r\n} from \"../context/commTypes\"\r\nimport { SwapParameters } from \"@block-wallet/background/controllers/SwapController\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { formatUnits } from \"@ethersproject/units\"\r\nimport { RichedTransactionMeta } from \"./transactionUtils\"\r\n\r\nconst ONEINCH_NATIVE_ADDRESS = \"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE\"\r\n\r\nexport const isSwapNativeTokenAddress = (address: string): boolean => {\r\n    return address.toLowerCase() === ONEINCH_NATIVE_ADDRESS.toLowerCase()\r\n}\r\n\r\n/**\r\n * Calculates the exchange rate between two assets\r\n */\r\nexport const calcExchangeRate = (\r\n    fromAmount: BigNumber,\r\n    fromTokenDecimals: number,\r\n    toAmount: BigNumber,\r\n    toTokenDecimals: number\r\n): number => {\r\n    const plainRate =\r\n        parseFloat(formatUnits(toAmount, toTokenDecimals)) /\r\n        parseFloat(formatUnits(fromAmount, fromTokenDecimals))\r\n    return parseFloat(plainRate.toFixed(fromTokenDecimals))\r\n}\r\n\r\n/**\r\n * Simulates a complete transaction object to display details\r\n */\r\nexport const populateExchangeTransaction = (\r\n    swapParameters: SwapParameters\r\n): RichedTransactionMeta => {\r\n    return {\r\n        id: \"\",\r\n        status: TransactionStatus.UNAPPROVED,\r\n        time: 1,\r\n        blocksDropCount: 1,\r\n        metaType: MetaType.REGULAR,\r\n        loadingGasValues: false,\r\n        transactionParams: {\r\n            from: swapParameters.tx.from,\r\n            to: swapParameters.tx.to,\r\n        },\r\n        transactionCategory: TransactionCategories.EXCHANGE,\r\n        methodSignature: swapParameters.methodSignature,\r\n        exchangeParams: {\r\n            exchangeType: ExchangeType.SWAP_1INCH,\r\n            fromToken: swapParameters.fromToken,\r\n            toToken: swapParameters.toToken,\r\n            fromTokenAmount: swapParameters.fromTokenAmount,\r\n            toTokenAmount: swapParameters.toTokenAmount,\r\n            blockWalletFee: swapParameters.blockWalletFee,\r\n        },\r\n    }\r\n}\r\n","const isNil = (value: any) => {\r\n    return typeof value === 'undefined' || value === null || value === undefined\r\n}\r\n\r\nexport default isNil\r\n","import { ReactNode, useState } from \"react\"\r\nimport classnames from \"classnames\"\r\n\r\ntype ExpandableTextProps = {\r\n    children: string | ReactNode\r\n    className: string\r\n}\r\n\r\nconst ExpandableText = ({ children, className }: ExpandableTextProps) => {\r\n    const [isExpended, setIsExpended] = useState(() => false)\r\n\r\n    return (\r\n        <p\r\n            className={classnames(\r\n                className,\r\n                \"cursor-pointer\",\r\n                isExpended ? \"break-words\" : \"truncate\"\r\n            )}\r\n            onClick={(_) => {\r\n                setIsExpended(!isExpended)\r\n            }}\r\n            title={typeof children === \"string\" ? children : undefined}\r\n        >\r\n            {children}\r\n        </p>\r\n    )\r\n}\r\n\r\nexport default ExpandableText\r\n","import { FC } from \"react\"\r\nimport classnames from \"classnames\"\r\nimport { DetailedItem } from \"./TransactionDetailsList\"\r\nimport { capitalize } from \"../../util/capitalize\"\r\nimport ExpandableText from \"../ExpandableText\"\r\nimport { formatNumberLength } from \"../../util/formatNumberLength\"\r\nimport GenericTooltip from \"../label/GenericTooltip\"\r\n\r\nconst TransactionDetailItem: FC<{ item: DetailedItem }> = ({ item }) => {\r\n    const isNativeValue =\r\n        typeof item.value === \"string\" || typeof item.value === \"number\"\r\n    return (\r\n        <div\r\n            className={classnames(\r\n                \"w-full\",\r\n                item.noSpace ? \"\" : \"mt-3\",\r\n                item.expandable\r\n                    ? \"\"\r\n                    : \"flex justify-between items-center space-x-1\"\r\n            )}\r\n        >\r\n            <span\r\n                className=\"text-sm font-semibold text-ellipsis overflow-hidden whitespace-nowrap w-36\"\r\n                title={item.label}\r\n            >\r\n                {capitalize(item.label)}\r\n            </span>\r\n            {item.expandable ? (\r\n                <ExpandableText className=\"text-gray-600 mt-1 w-fulltext-sm allow-select\">\r\n                    {item.value ?? \"N/A\"}\r\n                </ExpandableText>\r\n            ) : (\r\n                <GenericTooltip\r\n                    content={item.info ?? \"\"}\r\n                    divFull={false}\r\n                    className=\"!w-60 !break-word !whitespace-normal !border !z-50\"\r\n                >\r\n                    <span\r\n                        className={classnames(\r\n                            \"text-sm\",\r\n                            isNativeValue &&\r\n                                \"whitespace-nowrap text-ellipsis overflow-hidden text-gray-600 allow-select\",\r\n                            item.expandable ? \"w-11/12 mt-1\" : \"\"\r\n                        )}\r\n                        title={\r\n                            isNativeValue && !item.info\r\n                                ? `${item.value ?? \"N/A\"} ${\r\n                                      item.unitName ?? \"\"\r\n                                  }`\r\n                                : undefined\r\n                        }\r\n                    >\r\n                        {item.value && isNativeValue\r\n                            ? item.decimals\r\n                                ? `${formatNumberLength(\r\n                                      item.value as string,\r\n                                      item.decimals,\r\n                                      false\r\n                                  )} ${item.unitName ?? \"\"}`\r\n                                : `${item.value} ${item.unitName ?? \"\"}`\r\n                            : item.value}\r\n                    </span>\r\n                </GenericTooltip>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TransactionDetailItem\r\n","import { FC, ReactElement, ReactNode } from \"react\"\r\nimport Divider from \"../Divider\"\r\nimport TransactionDetailItem from \"./TransactionDetailsItem\"\r\n\r\nexport interface DetailedItem {\r\n    label: string\r\n    value: string | ReactNode\r\n    noSpace?: boolean\r\n    expandable?: boolean\r\n    decimals?: number\r\n    unitName?: string\r\n    info?: string\r\n}\r\n\r\ntype TransactionDetailItem = DetailedItem | undefined\r\n\r\ninterface TransactionDetailsListProps {\r\n    details: TransactionDetailItem[]\r\n}\r\n\r\nconst TransactionDetailsList: FC<TransactionDetailsListProps> = ({\r\n    details,\r\n}) => {\r\n    return (\r\n        <div>\r\n            {details.map((detail, i) =>\r\n                detail ? (\r\n                    <TransactionDetailItem key={detail.label} item={detail} />\r\n                ) : (\r\n                    <div\r\n                        className=\"py-3\"\r\n                        style={{\r\n                            width: \"calc(100% + 1.5rem)\",\r\n                            marginLeft: \"-0.75rem\",\r\n                        }}\r\n                        key={i}\r\n                    >\r\n                        <Divider />\r\n                    </div>\r\n                )\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TransactionDetailsList\r\n","import { BigNumber } from \"@ethersproject/bignumber\"\r\n\r\nexport const bnOr0 = (value: any): BigNumber => BigNumber.from(value || \"0\")\r\n","const native_token_address_reduced = \"0x0\"\r\nconst native_token_address = \"0x0000000000000000000000000000000000000000\"\r\n\r\n/**\r\n * compareAddresses\r\n *\r\n * Compares two addresses\r\n *\r\n * @param a First address\r\n * @param b Second address\r\n * @returns Whether or not the provided addresses are equal\r\n */\r\nexport const compareAddresses = (\r\n    a: string | undefined,\r\n    b: string | undefined\r\n): boolean => {\r\n    if (!a || !b) {\r\n        return false\r\n    }\r\n\r\n    return a.toLowerCase() === b.toLowerCase()\r\n}\r\n\r\nexport const isNativeTokenAddress = (address: string) => {\r\n    if (!address) {\r\n        return false\r\n    }\r\n    return (\r\n        compareAddresses(address, native_token_address_reduced) ||\r\n        compareAddresses(address, native_token_address)\r\n    )\r\n}\r\n","import { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { formatUnits } from \"@ethersproject/units\"\r\nimport { FunctionComponent, useMemo } from \"react\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport { getAccountColor } from \"../../util/getAccountColor\"\r\nimport Divider from \"../Divider\"\r\nimport AccountIcon from \"../icons/AccountIcon\"\r\nimport { TransactionDetailsTabProps } from \"./TransactionDetails\"\r\nimport arrowRight from \"../../assets/images/icons/arrow_right_black.svg\"\r\nimport CopyTooltip from \"../label/Ð¡opyToClipboardTooltip\"\r\nimport { formatHash, formatName } from \"../../util/formatAccount\"\r\nimport { useSortedAccounts } from \"../../context/hooks/useSortedAccounts\"\r\nimport { useAddressBook } from \"../../context/hooks/useAddressBook\"\r\nimport { generateExplorerLink, getExplorerTitle } from \"../../util/getExplorer\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport openIcon from \"../../assets/images/icons/open_external.svg\"\r\nimport {\r\n    TransactionCategories,\r\n    TransactionStatus,\r\n} from \"../../context/commTypes\"\r\nimport { calcExchangeRate } from \"../../util/exchangeUtils\"\r\nimport isNil from \"../../util/isNil\"\r\nimport TransactionDetailsList from \"./TransactionDetailsList\"\r\nimport { bnOr0 } from \"../../util/numberUtils\"\r\nimport { TransactionMeta } from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport { resolveTransactionTo } from \"../../util/transactionUtils\"\r\nimport { useMultipleCopyToClipboard } from \"../../util/hooks/useCopyToClipboard\"\r\nimport { isNativeTokenAddress } from \"../../util/tokenUtils\"\r\nimport { BsFileEarmarkText } from \"react-icons/bs\"\r\n\r\nexport const TransactionDetailsBasic: FunctionComponent<\r\n    TransactionDetailsTabProps & { nonce?: number }\r\n> = ({ transaction: _transaction, nonce: _nonce }) => {\r\n    const state = useBlankState()!\r\n    const { nativeCurrency } = useSelectedNetwork()\r\n    const accounts = useSortedAccounts()\r\n    const addressBook = useAddressBook()\r\n    const transaction = _transaction as TransactionMeta\r\n    const { onCopy, copied } = useMultipleCopyToClipboard()\r\n\r\n    const details = useMemo(() => {\r\n        const isConfirmed = transaction.status === TransactionStatus.CONFIRMED\r\n        const nonce = transaction.transactionParams.nonce || _nonce\r\n        const value = bnOr0(transaction.transactionParams.value)\r\n        const gasPrice = bnOr0(\r\n            transaction.transactionReceipt?.effectiveGasPrice ||\r\n                transaction.transactionParams.gasPrice\r\n        )\r\n        const gasLimit = bnOr0(\r\n            transaction.transactionReceipt?.gasUsed ||\r\n                transaction.transactionParams.gasLimit\r\n        )\r\n        const maxFeePerGas = bnOr0(\r\n            transaction.transactionReceipt?.effectiveGasPrice ||\r\n                transaction.transactionParams.maxFeePerGas\r\n        )\r\n        const maxPriorityFeePerGas = bnOr0(\r\n            transaction.transactionParams.maxPriorityFeePerGas\r\n        )\r\n\r\n        const details: (\r\n            | {\r\n                  label: string\r\n                  value: string\r\n                  noSpace?: boolean\r\n                  expandable?: boolean\r\n                  decimals?: number\r\n                  unitName?: string\r\n              }\r\n            | undefined\r\n        )[] = []\r\n\r\n        // Swap details\r\n        if (\r\n            transaction.transactionCategory ===\r\n                TransactionCategories.EXCHANGE &&\r\n            transaction.exchangeParams !== undefined\r\n        ) {\r\n            if (transaction.transactionParams.hash !== undefined) {\r\n                if (!isNil(nonce)) {\r\n                    details.push({\r\n                        label: \"Nonce\",\r\n                        value: nonce!.toString(),\r\n                        noSpace: false,\r\n                    })\r\n                }\r\n\r\n                if (gasLimit.gt(0)) {\r\n                    let txFee = BigNumber.from(0)\r\n\r\n                    if (maxPriorityFeePerGas.gt(0) && maxFeePerGas.gt(0)) {\r\n                        txFee = maxFeePerGas.mul(gasLimit)\r\n                    } else if (gasPrice.gt(0)) {\r\n                        txFee = gasPrice.mul(gasLimit)\r\n                    }\r\n\r\n                    if (txFee.gt(0)) {\r\n                        details.push({\r\n                            label: \"Transaction fee\",\r\n                            value: formatUnits(txFee, nativeCurrency.decimals),\r\n                            decimals: 10,\r\n                            unitName: nativeCurrency.symbol,\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n\r\n            details.push({\r\n                label: \"Swap fee\",\r\n                value: formatUnits(\r\n                    bnOr0(transaction.exchangeParams.blockWalletFee),\r\n                    transaction.exchangeParams.fromToken.decimals\r\n                ),\r\n                decimals: 10,\r\n                unitName: transaction.exchangeParams.fromToken.symbol,\r\n            })\r\n\r\n            details.push({\r\n                label: isConfirmed ? \"Spent\" : \"Spending\",\r\n                value: formatUnits(\r\n                    bnOr0(transaction.exchangeParams.fromTokenAmount),\r\n                    transaction.exchangeParams.fromToken.decimals\r\n                ),\r\n                decimals: 10,\r\n                unitName: transaction.exchangeParams.fromToken.symbol,\r\n            })\r\n\r\n            details.push({\r\n                label: isConfirmed ? \"Received\" : \"Receiving\",\r\n                value: formatUnits(\r\n                    bnOr0(transaction.exchangeParams.toTokenAmount),\r\n                    transaction.exchangeParams.toToken.decimals\r\n                ),\r\n                decimals: 10,\r\n                unitName: transaction.exchangeParams.toToken.symbol,\r\n            })\r\n\r\n            const rate = calcExchangeRate(\r\n                bnOr0(transaction.exchangeParams.fromTokenAmount),\r\n                transaction.exchangeParams.fromToken.decimals,\r\n                bnOr0(transaction.exchangeParams.toTokenAmount),\r\n                transaction.exchangeParams.toToken.decimals\r\n            )\r\n\r\n            details.push({\r\n                label: \"Rate\",\r\n                value: rate.toString(),\r\n                decimals: 5,\r\n                unitName: `${transaction.exchangeParams.toToken.symbol}/${transaction.exchangeParams.fromToken.symbol}`,\r\n            })\r\n\r\n            return details\r\n        }\r\n\r\n        if (nonce) {\r\n            details.push({\r\n                label: \"Nonce\",\r\n                value: nonce.toString(),\r\n                noSpace: false,\r\n            })\r\n        }\r\n\r\n        // Check if it's a transfer and display amount as transferred amount\r\n        if (\r\n            transaction.transferType?.decimals &&\r\n            transaction.transferType?.currency &&\r\n            transaction.transferType?.amount\r\n        ) {\r\n            details.push({\r\n                label: \"Amount\",\r\n                value: formatUnits(\r\n                    bnOr0(transaction.transferType.amount),\r\n                    transaction.transferType.decimals\r\n                ),\r\n                decimals: 10,\r\n                unitName: transaction.transferType.currency,\r\n            })\r\n\r\n            // Check if it's a withdraw\r\n            if (\r\n                transaction.transactionCategory ===\r\n                    TransactionCategories.BLANK_WITHDRAWAL &&\r\n                transaction.advancedData?.withdrawFee\r\n            ) {\r\n                details.push({\r\n                    label: \"Withdraw Fee\",\r\n                    value: formatUnits(\r\n                        bnOr0(transaction.advancedData?.withdrawFee),\r\n                        transaction.transferType.decimals\r\n                    ),\r\n                    decimals: 10,\r\n                    unitName: transaction.transferType.currency,\r\n                })\r\n            }\r\n        } else {\r\n            // Or else display transaction value\r\n            details.push({\r\n                label: \"Value\",\r\n                value: formatUnits(value, nativeCurrency.decimals),\r\n                decimals: 10,\r\n                unitName: nativeCurrency.symbol,\r\n            })\r\n        }\r\n\r\n        // Gas and total calculation\r\n        if (gasLimit.gt(0)) {\r\n            details.push({\r\n                label: \"Gas limit\",\r\n                value: gasLimit.toString(),\r\n            })\r\n\r\n            let txFee = BigNumber.from(0)\r\n\r\n            if (maxPriorityFeePerGas.gt(0) && maxFeePerGas.gt(0)) {\r\n                details.push({\r\n                    label: \"Max priority fee\",\r\n                    value: formatUnits(maxPriorityFeePerGas, \"gwei\"),\r\n                    unitName: \"GWEI\",\r\n                })\r\n\r\n                details.push({\r\n                    label: \"Max fee\",\r\n                    value: formatUnits(maxFeePerGas, \"gwei\"),\r\n                    unitName: \"GWEI\",\r\n                })\r\n\r\n                txFee = maxFeePerGas.mul(gasLimit)\r\n            } else if (gasPrice.gt(0)) {\r\n                details.push({\r\n                    label: \"Gas price\",\r\n                    value: formatUnits(gasPrice, \"gwei\"),\r\n                    unitName: \"GWEI\",\r\n                    decimals: 10,\r\n                })\r\n\r\n                txFee = gasPrice.mul(gasLimit)\r\n            }\r\n\r\n            if (txFee.gt(0)) {\r\n                details.push({\r\n                    label: \"Transaction fee\",\r\n                    value: formatUnits(txFee, nativeCurrency.decimals),\r\n                    decimals: 10,\r\n                    unitName: nativeCurrency.symbol,\r\n                })\r\n\r\n                if (value.gt(0)) {\r\n                    details.push(undefined)\r\n\r\n                    details.push({\r\n                        label: \"Total\",\r\n                        value: formatUnits(\r\n                            txFee.add(value),\r\n                            nativeCurrency.decimals\r\n                        ),\r\n                        noSpace: true,\r\n                        decimals: 10,\r\n                        unitName: nativeCurrency.symbol,\r\n                    })\r\n                }\r\n            }\r\n        }\r\n\r\n        return details\r\n\r\n        // eslint-disable-next-line\r\n    }, [transaction, _nonce])\r\n\r\n    const { from } = transaction.transactionParams\r\n    const transactionTo = resolveTransactionTo(transaction)\r\n\r\n    let fromName\r\n    if (from) {\r\n        fromName = accounts.find(\r\n            (account) => account.address.toLowerCase() === from.toLowerCase()\r\n        )?.name\r\n\r\n        //If from was not found in accounts, then we look into the address book.\r\n        if (!fromName) {\r\n            fromName = Object.values(addressBook).find(\r\n                (address) => address.address.toLowerCase() === from\r\n            )?.name\r\n        }\r\n    }\r\n\r\n    let toName\r\n    if (transactionTo) {\r\n        if (isNativeTokenAddress(transactionTo)) {\r\n            toName = \"Null Address\"\r\n        } else {\r\n            toName = accounts.find(\r\n                (account) =>\r\n                    account.address.toLowerCase() ===\r\n                    transactionTo.toLowerCase()\r\n            )?.name\r\n\r\n            //If to was not found in accounts, then we look into the address book.\r\n            if (!toName) {\r\n                toName = Object.values(addressBook).find(\r\n                    (address) => address.address.toLowerCase() === transactionTo\r\n                )?.name\r\n            }\r\n        }\r\n    }\r\n\r\n    const explorerName = getExplorerTitle(\r\n        state.availableNetworks,\r\n        state.selectedNetwork\r\n    )\r\n\r\n    return (\r\n        <div className=\"-mt-8 pt-4 flex-1 flex flex-col\">\r\n            <div className=\"flex flex-row items-center justify-between w-full py-4 relative\">\r\n                <div\r\n                    className=\"flex flex-row items-center w-1/2 justify-start group relative cursor-pointer\"\r\n                    onClick={() => onCopy(from ?? \"\", 0)}\r\n                >\r\n                    <div>\r\n                        <AccountIcon\r\n                            className=\"h-6 w-6\"\r\n                            fill={getAccountColor(from!)}\r\n                        />\r\n                    </div>\r\n                    <span\r\n                        title={from}\r\n                        className=\"pl-2 font-bold text-sm truncate\"\r\n                    >\r\n                        {fromName\r\n                            ? formatName(fromName, 12)\r\n                            : formatHash(from!, 2)}\r\n                    </span>\r\n                    <CopyTooltip copied={copied === 0} text=\"Copy address\" />\r\n                </div>\r\n                <div className=\"w-8 border rounded-full bg-white z-10 absolute left-1/2 top-1/2 -translate-y-1/2 -translate-x-1/2\">\r\n                    <img\r\n                        src={arrowRight}\r\n                        className=\"p-2\"\r\n                        alt=\"\"\r\n                        draggable={false}\r\n                    />\r\n                </div>\r\n                <div\r\n                    className=\"absolute border-t transform rotate-90 z-0 left-1/2 -translate-x-1/2\"\r\n                    style={{ width: \"58px\" }}\r\n                ></div>\r\n                <div\r\n                    className=\"relative flex flex-row items-center cursor-pointer group w-1/2 pl-6\"\r\n                    onClick={() => onCopy(transactionTo, 1)}\r\n                >\r\n                    <div>\r\n                        {transaction.transactionCategory !==\r\n                        TransactionCategories.CONTRACT_DEPLOYMENT ? (\r\n                            <AccountIcon\r\n                                className=\"h-6 w-6\"\r\n                                fill={getAccountColor(transactionTo!)}\r\n                            />\r\n                        ) : (\r\n                            <BsFileEarmarkText size={24} />\r\n                        )}\r\n                    </div>\r\n                    <span\r\n                        title={transactionTo}\r\n                        className=\"pl-2 font-bold text-sm truncate\"\r\n                    >\r\n                        {transaction.transactionCategory !==\r\n                        TransactionCategories.CONTRACT_DEPLOYMENT\r\n                            ? toName\r\n                                ? formatName(toName, 12)\r\n                                : formatHash(transactionTo!, 2)\r\n                            : \"New Contract\"}\r\n                    </span>\r\n                    <CopyTooltip copied={copied === 1} text=\"Copy address\" />\r\n                </div>\r\n            </div>\r\n            <div\r\n                style={{\r\n                    width: \"calc(100% + 1.5rem)\",\r\n                    marginLeft: \"-0.75rem\",\r\n                }}\r\n            >\r\n                <Divider />\r\n            </div>\r\n            <main>\r\n                <TransactionDetailsList details={details} />\r\n            </main>\r\n            {!!transaction.transactionParams.hash && (\r\n                <div className=\"flex flex-col\">\r\n                    <div className=\"flex w-full items-center justify-start mt-3\">\r\n                        <a\r\n                            href={generateExplorerLink(\r\n                                state.availableNetworks,\r\n                                state.selectedNetwork,\r\n                                transaction.transactionParams.hash,\r\n                                \"tx\"\r\n                            )}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            className=\"flex flex-row items-center space-x-2 text-sm font-bold text-primary-300\"\r\n                        >\r\n                            <span>View on {explorerName}</span>\r\n                            <img\r\n                                src={openIcon}\r\n                                alt=\"Open icon\"\r\n                                className=\"w-3 h-3\"\r\n                            />\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TransactionDetailsBasic\r\n","import { FunctionComponent, useState } from \"react\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { TransactionArgument } from \"@block-wallet/background/controllers/transactions/ContractSignatureParser\"\r\nimport { TransactionDetailsTabProps } from \"./TransactionDetails\"\r\nimport ExpandableText from \"../ExpandableText\"\r\nimport classNames from \"classnames\"\r\nimport { ArrowUpDown } from \"../icons/ArrowUpDown\"\r\nimport openIcon from \"../../assets/images/icons/open_external.svg\"\r\nimport { generateExplorerLink } from \"../../util/getExplorer\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport GenericTooltip from \"../label/GenericTooltip\"\r\nimport { formatName } from \"../../util/formatAccount\"\r\nimport { isValidAddress } from \"ethereumjs-util\"\r\nimport log from \"loglevel\"\r\n\r\nexport interface TransactionDetailsProps {\r\n    transactionArgs: TransactionArgument[]\r\n}\r\n\r\nconst ArgumentValue = ({\r\n    unformattedValue,\r\n}: {\r\n    unformattedValue: any[] | string | BigNumber\r\n}) => {\r\n    const { availableNetworks, selectedNetwork } = useBlankState()!\r\n\r\n    if (!unformattedValue) return null\r\n\r\n    if (Array.isArray(unformattedValue)) {\r\n        return (\r\n            <>\r\n                {unformattedValue.map((value, i) => (\r\n                    <div key={`20${i}`}>\r\n                        <Argument\r\n                            value={value}\r\n                            name={(i + 1).toString()}\r\n                            canCollapse={false}\r\n                        />\r\n                    </div>\r\n                ))}\r\n            </>\r\n        )\r\n    }\r\n\r\n    let parsedValue: string = \"\"\r\n\r\n    if (typeof unformattedValue === \"string\") {\r\n        parsedValue = unformattedValue\r\n    } else {\r\n        try {\r\n            parsedValue = BigNumber.from(unformattedValue).toString()\r\n        } catch (error) {\r\n            log.error(\"Can't parse transaction detail parameter\", parsedValue)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex\">\r\n            <ExpandableText className=\"allow-select text-gray-600 pt-1\">\r\n                {parsedValue as string}\r\n            </ExpandableText>\r\n            {isValidAddress(parsedValue as string) && (\r\n                <a\r\n                    href={generateExplorerLink(\r\n                        availableNetworks,\r\n                        selectedNetwork,\r\n                        parsedValue as string,\r\n                        \"address\"\r\n                    )}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                    className=\"w-6 h-6 block\"\r\n                >\r\n                    <img src={openIcon} alt=\"Open icon\" className=\"w-6 h-6\" />\r\n                </a>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Argument = ({\r\n    value,\r\n    name,\r\n    canCollapse = true,\r\n}: {\r\n    value: any\r\n    name: string\r\n    canCollapse?: boolean\r\n}) => {\r\n    const [isCollapsed, setIsCollapsed] = useState(true)\r\n\r\n    return (\r\n        <>\r\n            <div\r\n                className=\"flex items-center cursor-pointer\"\r\n                onClick={() => {\r\n                    setIsCollapsed(!isCollapsed)\r\n                }}\r\n            >\r\n                {canCollapse && (\r\n                    <div className=\"mt-1\">\r\n                        <ArrowUpDown active={!isCollapsed} />\r\n                    </div>\r\n                )}\r\n                <p className=\"pl-1 pt-1 font-bold\">{name}</p>\r\n            </div>\r\n            <div\r\n                className={classNames(\r\n                    \"overflow-hidden\",\r\n                    canCollapse && isCollapsed ? \"h-0\" : \"\"\r\n                )}\r\n            >\r\n                <div className=\"w-11/12 ml-2\">\r\n                    <ArgumentValue unformattedValue={value} />\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport const TransactionDetails: FunctionComponent<\r\n    TransactionDetailsTabProps\r\n> = ({ transaction }) => {\r\n    const signature = transaction.methodSignature\r\n\r\n    if (!signature) {\r\n        return (\r\n            <div className=\"h-full flex items-center\">\r\n                <p className=\"w-full text-lg text-center text-gray-600\">\r\n                    Details are not available\r\n                </p>\r\n            </div>\r\n        )\r\n    } else {\r\n        let parsedName = signature.name.split(\" \").join(\"\")\r\n\r\n        parsedName = parsedName.charAt(0).toLowerCase() + parsedName.slice(1)\r\n\r\n        return (\r\n            <div className=\"px-3 break-all text-sm\">\r\n                <div className=\"overflow-x-auto whitespace-nowrap horizontal-custom-scroll py-1\">\r\n                    <pre className=\"bg-gray-100 w-full p-4 rounded\">\r\n                        <code className=\"allow-select\">\r\n                            <span className=\"font-bold allow-select\">\r\n                                <GenericTooltip\r\n                                    bottom\r\n                                    disabled={parsedName.length < 25}\r\n                                    className=\"w-52 p-2 left-0\"\r\n                                    content={\r\n                                        <p className=\"whitespace-normal break-all\">\r\n                                            {parsedName}\r\n                                        </p>\r\n                                    }\r\n                                >\r\n                                    {formatName(parsedName, 25)}\r\n                                </GenericTooltip>\r\n                            </span>\r\n                            (\r\n                            {signature.args.map((arg, i) => (\r\n                                <span className=\"allow-select\" key={i}>\r\n                                    <br />\r\n                                    <span className=\"text-primary-300 allow-select\">{`\\u00A0\\u00A0\\u00A0\\u00A0${arg.type}`}</span>\r\n                                    {arg.name ? ` ${arg.name}` : \"\"}\r\n                                    {i !== signature.args.length - 1 ? \",\" : \"\"}\r\n                                </span>\r\n                            ))}\r\n                            {signature.args.length > 0 ? <br /> : null})\r\n                        </code>\r\n                    </pre>\r\n                </div>\r\n                <div>\r\n                    {signature.args.map(({ name, value }, index) => (\r\n                        <div key={`1${index}`} className=\"mt-1\">\r\n                            <Argument\r\n                                name={name || (index + 1).toString()}\r\n                                value={value}\r\n                            />\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default TransactionDetails\r\n","import { FunctionComponent, useState } from \"react\"\r\nimport TransactionDetailsBasic from \"./TransactionDetailsBasic\"\r\nimport TransactionDetailsAdvanced from \"./TransactionDetailsAdvanced\"\r\nimport Dialog from \"../dialog/Dialog\"\r\nimport HorizontalSelect from \"../input/HorizontalSelect\"\r\nimport CloseIcon from \"../icons/CloseIcon\"\r\nimport Divider from \"../Divider\"\r\nimport { Classes, classnames } from \"../../styles\"\r\nimport GenericTooltip from \"../label/GenericTooltip\"\r\nimport { TransactionMeta } from \"@block-wallet/background/controllers/transactions/utils/types\"\r\n\r\nexport type TransactionDetailsProps = {\r\n    open: boolean\r\n    onClose: () => void\r\n    transaction: Partial<TransactionMeta>\r\n    nonce?: number\r\n}\r\n\r\nexport type TransactionDetailsTabProps = {\r\n    transaction: TransactionMeta | Partial<TransactionMeta>\r\n}\r\n\r\nexport const TransactionDetails: FunctionComponent<TransactionDetailsProps> = ({\r\n    open,\r\n    onClose,\r\n    transaction,\r\n    nonce,\r\n}) => {\r\n    const tabs = [\r\n        {\r\n            label: \"Summary\",\r\n            component: TransactionDetailsBasic,\r\n            disabled: false,\r\n        },\r\n        {\r\n            label: \"Contract\",\r\n            component: TransactionDetailsAdvanced,\r\n            disabled: !transaction.methodSignature,\r\n        },\r\n    ]\r\n\r\n    const [tab, setTab] = useState(() => tabs[0])\r\n    const TabComponent = tab.component\r\n\r\n    return (\r\n        <Dialog open={open} onClickOutside={onClose}>\r\n            <span className=\"absolute top-0 right-0 p-4 z-50\">\r\n                <div\r\n                    onClick={onClose}\r\n                    className=\"cursor-pointer p-2 ml-auto -mr-2 text-gray-900 transition duration-300 rounded-full hover:bg-primary-100 hover:text-primary-300\"\r\n                >\r\n                    <CloseIcon size=\"10\" />\r\n                </div>\r\n            </span>\r\n\r\n            <div className=\"flex flex-col w-full h-full\">\r\n                <h2 className=\"px-2 pr-0 pb-2 mt-2 text-lg font-bold\">\r\n                    Transaction details\r\n                </h2>\r\n                <HorizontalSelect\r\n                    options={tabs}\r\n                    value={tab}\r\n                    onChange={(tab) => {\r\n                        if (tab.disabled) return\r\n\r\n                        setTab(tab)\r\n                    }}\r\n                    display={(t) => {\r\n                        return (\r\n                            <GenericTooltip\r\n                                top\r\n                                divFull\r\n                                disabled={!t.disabled}\r\n                                className=\"w-38 p-2 left-1\"\r\n                                content=\"Not available for this transaction\"\r\n                            >\r\n                                {t.label}\r\n                            </GenericTooltip>\r\n                        )\r\n                    }}\r\n                    disableStyles\r\n                    optionClassName={(value) =>\r\n                        `flex-1 flex flex-row items-center justify-center p-3 text-sm group\r\n                                    ${\r\n                                        tab.label === value.label\r\n                                            ? \"border-primary-300 border-b-2 text-primary-300 font-bold\"\r\n                                            : \"border-gray-200 text-gray-500 border-b\"\r\n                                    }`\r\n                    }\r\n                    containerClassName=\"flex flex-row -ml-3\"\r\n                    containerStyle={{\r\n                        width: \"calc(100% + 1.5rem)\",\r\n                    }}\r\n                />\r\n                <div\r\n                    className=\"flex flex-col h-[17rem] overflow-auto py-4 -ml-3 px-3\"\r\n                    style={{ width: \"calc(100% + 1.5rem)\" }}\r\n                >\r\n                    <TabComponent transaction={transaction} nonce={nonce} />\r\n                </div>\r\n            </div>\r\n            <div className=\"-mx-3\">\r\n                <Divider />\r\n            </div>\r\n            <button\r\n                onClick={onClose}\r\n                className={classnames(Classes.liteButton, \"mt-4\")}\r\n                type=\"button\"\r\n            >\r\n                Close\r\n            </button>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default TransactionDetails\r\n","import { useState, useEffect, useRef, useCallback } from \"react\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport { BsFileEarmarkText } from \"react-icons/bs\"\r\nimport { AiFillInfoCircle } from \"react-icons/ai\"\r\nimport { formatUnits } from \"@ethersproject/units\"\r\nimport { getAddress } from \"@ethersproject/address\"\r\nimport { HiOutlineExclamationCircle } from \"react-icons/hi\"\r\n\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\n\r\n// Styles\r\nimport { Classes, classnames } from \"../../styles\"\r\n\r\n// Components\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport AccountIcon from \"../../components/icons/AccountIcon\"\r\nimport CopyTooltip from \"../../components/label/Ð¡opyToClipboardTooltip\"\r\nimport Tooltip from \"../../components/label/Tooltip\"\r\nimport LoadingOverlay from \"../../components/loading/LoadingOverlay\"\r\nimport LoadingDots from \"../../components/loading/LoadingDots\"\r\nimport GasPriceComponent from \"../../components/transactions/GasPriceComponent\"\r\nimport CheckBoxDialog from \"../../components/dialog/CheckboxDialog\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport WaitingDialog from \"../../components/dialog/WaitingDialog\"\r\nimport { AdvancedSettings } from \"../../components/transactions/AdvancedSettings\"\r\nimport { GasPriceSelector } from \"../../components/transactions/GasPriceSelector\"\r\nimport GenericTooltip from \"../../components/label/GenericTooltip\"\r\nimport ClickableText from \"../../components/button/ClickableText\"\r\n\r\n// Asset\r\nimport arrowRight from \"../../assets/images/icons/arrow_right_black.svg\"\r\n\r\n// Context\r\nimport { useSelectedAccountBalance } from \"../../context/hooks/useSelectedAccountBalance\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { useNonSubmittedExternalTransaction } from \"../../context/hooks/useNonSubmittedExternalTransaction\"\r\nimport useNextRequestRoute from \"../../context/hooks/useNextRequestRoute\"\r\nimport { useUserSettings } from \"../../context/hooks/useUserSettings\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport { TransactionFeeData } from \"@block-wallet/background/controllers/erc-20/transactions/SignedTransaction\"\r\nimport {\r\n    TransactionAdvancedData,\r\n    TransactionMeta,\r\n} from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport {\r\n    confirmTransaction,\r\n    getNextNonce,\r\n    rejectTransaction,\r\n    setUserSettings,\r\n} from \"../../context/commActions\"\r\n\r\n// Utils\r\nimport { formatName } from \"../../util/formatAccount\"\r\nimport { formatCurrency, toCurrencyAmount } from \"../../util/formatCurrency\"\r\nimport { getAccountColor } from \"../../util/getAccountColor\"\r\nimport { formatNumberLength } from \"../../util/formatNumberLength\"\r\nimport {\r\n    HardwareWalletOpTypes,\r\n    TransactionCategories,\r\n} from \"../../context/commTypes\"\r\nimport { useGasPriceData } from \"../../context/hooks/useGasPriceData\"\r\nimport {\r\n    calculateGasPricesFromTransactionFees,\r\n    calculateTransactionGas,\r\n    estimatedGasExceedsBaseHigherThreshold,\r\n    estimatedGasExceedsBaseLowerThreshold,\r\n} from \"../../util/gasPrice\"\r\n\r\nimport useCheckAccountDeviceLinked from \"../../util/hooks/useCheckAccountDeviceLinked\"\r\nimport HardwareDeviceNotLinkedDialog from \"../../components/dialog/HardwareDeviceNotLinkedDialog\"\r\nimport { useTransactionById } from \"../../context/hooks/useTransactionById\"\r\nimport useDebouncedState from \"../../util/hooks/useDebouncedState\"\r\nimport { DAPP_FEEDBACK_WINDOW_TIMEOUT } from \"../../util/constants\"\r\nimport useCopyToClipboard from \"../../util/hooks/useCopyToClipboard\"\r\nimport { getDeviceFromAccountType } from \"../../util/hardwareDevice\"\r\nimport TransactionDetails from \"../../components/transactions/TransactionDetails\"\r\nimport { useTransactionWaitingDialog } from \"../../context/hooks/useTransactionWaitingDialog\"\r\nimport { canUserSubmitTransaction } from \"../../util/transactionUtils\"\r\nimport DAppPopupHeader from \"../../components/dApp/DAppPopupHeader\"\r\n\r\nconst TransactionConfirmPage = () => {\r\n    //Retrieves all the transactions to be processed\r\n    const { transaction: nextTransaction, transactionCount } =\r\n        useNonSubmittedExternalTransaction()\r\n    const route = useNextRequestRoute()\r\n    const [currentTx, setCurrentTx] = useDebouncedState<TransactionMeta>(\r\n        nextTransaction,\r\n        DAPP_FEEDBACK_WINDOW_TIMEOUT\r\n    )\r\n\r\n    useEffect(() => {\r\n        //only override the transactionId when there is another one to process\r\n        //to avoid passing an empty transactionId to the child component and break the UI.\r\n        setCurrentTx(nextTransaction)\r\n    }, [nextTransaction, setCurrentTx])\r\n\r\n    return currentTx?.id &&\r\n        currentTx?.transactionCategory !==\r\n            TransactionCategories.TOKEN_METHOD_APPROVE ? (\r\n        <TransactionConfirm\r\n            transactionId={currentTx.id!}\r\n            transactionCount={transactionCount}\r\n        />\r\n    ) : (\r\n        <Redirect to={route} />\r\n    )\r\n}\r\n\r\nconst TransactionConfirm: React.FC<{\r\n    transactionId: string\r\n    transactionCount: number\r\n}> = ({ transactionId, transactionCount }) => {\r\n    //Hooks\r\n    const {\r\n        accounts,\r\n        exchangeRates,\r\n        nativeCurrency,\r\n        localeInfo,\r\n        networkNativeCurrency,\r\n        selectedAddress,\r\n        settings,\r\n        defaultGasOption,\r\n    } = useBlankState()!\r\n    const { isEIP1559Compatible, defaultNetworkLogo } = useSelectedNetwork()\r\n    const [gasPriceThresholdWarning, setGasPriceThresholdWarning] = useState<{\r\n        message?: string\r\n        title?: string\r\n        dialogOpen: boolean\r\n    }>({\r\n        message: \"\",\r\n        title: \"\",\r\n        dialogOpen: false,\r\n    })\r\n    const { hideAddressWarning } = useUserSettings()\r\n    const { isDeviceUnlinked, checkDeviceIsLinked, resetDeviceLinkStatus } =\r\n        useCheckAccountDeviceLinked()\r\n    const network = useSelectedNetwork()\r\n    const { transaction: txById, params } = useTransactionById(transactionId)\r\n    // At this point transactionId is ensured.\r\n    const transaction = txById!\r\n\r\n    // Flag to detect if the transaction was triggered using an address different to the active one\r\n    const checksumFromAddress = getAddress(params.from!)\r\n    const differentAddress = checksumFromAddress !== selectedAddress\r\n    const [dialogClosed, setDialogClosed] = useState(false)\r\n\r\n    const selectedAccountBalance = useSelectedAccountBalance()\r\n    // If differentAddress, fetch the balance of that address instead of the selected one.\r\n    const balance = differentAddress\r\n        ? accounts[checksumFromAddress].balances[network.chainId]\r\n              .nativeTokenBalance ?? BigNumber.from(\"0\")\r\n        : selectedAccountBalance\r\n\r\n    // State variables\r\n    const ethExchangeRate = exchangeRates[networkNativeCurrency.symbol]\r\n    const [isLoading, setIsLoading] = useState(true)\r\n    const [hasDetails, setHasDetails] = useState(false)\r\n\r\n    const [hasBalance, setHasBalance] = useState(true)\r\n    const { onCopy, copied } = useCopyToClipboard()\r\n    const [gasEstimationFailed, setGasEstimationFailed] = useState(false)\r\n\r\n    const [gasCost, setGasCost] = useState<BigNumber>(\r\n        params.gasLimit.mul(params.gasPrice ?? params.maxFeePerGas!)\r\n    )\r\n    const [total, setTotal] = useState<BigNumber>(gasCost.add(params.value))\r\n    const [totalInNativeCurrency, setTotalInNativeCurrency] = useState(\r\n        toCurrencyAmount(\r\n            total,\r\n            ethExchangeRate,\r\n            network.nativeCurrency.decimals\r\n        )\r\n    )\r\n\r\n    const [defaultGas, setDefaultGas] = useState<TransactionFeeData>({\r\n        gasLimit: params.gasLimit,\r\n        gasPrice: params.gasPrice,\r\n        maxPriorityFeePerGas: params.maxPriorityFeePerGas,\r\n        maxFeePerGas: params.maxFeePerGas,\r\n    })\r\n\r\n    const [transactionGas, setTransactionGas] = useState<TransactionFeeData>({\r\n        gasLimit: params.gasLimit,\r\n        gasPrice: params.gasPrice,\r\n        maxPriorityFeePerGas: params.maxPriorityFeePerGas,\r\n        maxFeePerGas: params.maxFeePerGas,\r\n    })\r\n    // const [error, setError] = useState<string>(\"\")\r\n    const [transactionAdvancedData, setTransactionAdvancedData] =\r\n        useState<TransactionAdvancedData>({})\r\n    const nonceRef = useRef(0)\r\n\r\n    const description =\r\n        transaction.methodSignature?.name ??\r\n        transaction.transactionCategory?.toString()\r\n    const account = accounts[getAddress(params.from!)]\r\n    const accountName = account ? account.name : \"BlockWallet\"\r\n\r\n    const { status, isOpen, dispatch, texts, titles, closeDialog, gifs } =\r\n        useTransactionWaitingDialog(\r\n            transaction\r\n                ? {\r\n                      status: transaction.status,\r\n                      error: transaction.error as Error,\r\n                      epochTime: transaction?.approveTime,\r\n                  }\r\n                : undefined,\r\n            HardwareWalletOpTypes.SIGN_TRANSACTION,\r\n            account.accountType,\r\n            {\r\n                reject: useCallback(() => {\r\n                    if (transactionId) {\r\n                        rejectTransaction(transactionId)\r\n                    }\r\n                }, [transactionId]),\r\n            }\r\n        )\r\n\r\n    const calcTranTotals = () => {\r\n        const gas = calculateTransactionGas(\r\n            transactionGas.gasLimit!,\r\n            transactionGas.gasPrice,\r\n            transactionGas.maxFeePerGas!\r\n        )\r\n\r\n        const totalCalc = gas.add(params.value)\r\n\r\n        setGasCost(gas)\r\n        setTotal(totalCalc)\r\n        setHasBalance(totalCalc.lt(balance))\r\n        setTotalInNativeCurrency(\r\n            toCurrencyAmount(\r\n                totalCalc,\r\n                ethExchangeRate,\r\n                network.nativeCurrency.decimals\r\n            )\r\n        )\r\n    }\r\n\r\n    useEffect(() => {\r\n        getNextNonce(selectedAddress).then((nonce) => {\r\n            nonceRef.current = nonce\r\n        })\r\n    }, [selectedAddress])\r\n\r\n    // To prevent calculations on every render, force dependency array to only check state value that impacts\r\n    // Recalculate gas values when switching between transactions too.\r\n    useEffect(() => {\r\n        if (isLoading && !transaction.loadingGasValues) {\r\n            setDefaultGas({\r\n                gasLimit: params.gasLimit,\r\n                gasPrice: params.gasPrice,\r\n                maxPriorityFeePerGas: params.maxPriorityFeePerGas,\r\n                maxFeePerGas: params.maxFeePerGas,\r\n            })\r\n            setGasEstimationFailed(transaction.gasEstimationFailed ?? false)\r\n            setIsLoading(false)\r\n        }\r\n        calcTranTotals()\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [transactionGas, transactionId, transaction.loadingGasValues])\r\n\r\n    const { estimatedBaseFee: baseFeePerGas, gasPricesLevels } =\r\n        useGasPriceData()!\r\n\r\n    useEffect(() => {\r\n        if (\r\n            !settings.hideEstimatedGasExceedsThresholdWarning &&\r\n            !transaction.loadingGasValues\r\n        ) {\r\n            const estimatedGas = calculateTransactionGas(\r\n                params.gasLimit,\r\n                params.gasPrice,\r\n                params.maxFeePerGas!\r\n            )\r\n            const { slow, fast } = gasPricesLevels\r\n            let minValue = BigNumber.from(0),\r\n                maxValue = BigNumber.from(0)\r\n\r\n            if (isEIP1559Compatible) {\r\n                minValue = calculateGasPricesFromTransactionFees(\r\n                    {\r\n                        gasLimit: params.gasLimit,\r\n                        maxFeePerGas: BigNumber.from(slow.maxFeePerGas!),\r\n                        maxPriorityFeePerGas: BigNumber.from(\r\n                            slow.maxPriorityFeePerGas!\r\n                        ),\r\n                    },\r\n                    BigNumber.from(baseFeePerGas)\r\n                ).minValue\r\n                maxValue = calculateGasPricesFromTransactionFees(\r\n                    {\r\n                        gasLimit: params.gasLimit,\r\n                        maxFeePerGas: BigNumber.from(fast.maxFeePerGas!),\r\n                        maxPriorityFeePerGas: BigNumber.from(\r\n                            fast.maxPriorityFeePerGas!\r\n                        ),\r\n                    },\r\n                    BigNumber.from(baseFeePerGas)\r\n                ).maxValue\r\n            } else {\r\n                minValue = calculateTransactionGas(\r\n                    params.gasLimit,\r\n                    slow.gasPrice!\r\n                )\r\n                maxValue = calculateTransactionGas(\r\n                    params.gasLimit,\r\n                    fast.gasPrice!\r\n                )\r\n            }\r\n\r\n            const isLower = estimatedGasExceedsBaseLowerThreshold(\r\n                minValue,\r\n                estimatedGas\r\n            )\r\n            if (isLower) {\r\n                setGasPriceThresholdWarning({\r\n                    title: \"Low Gas Price\",\r\n                    message:\r\n                        \"The dApp suggests fees much lower than recommended.\",\r\n                    dialogOpen: true,\r\n                })\r\n            }\r\n            const isHigher = estimatedGasExceedsBaseHigherThreshold(\r\n                maxValue,\r\n                estimatedGas\r\n            )\r\n            if (isHigher) {\r\n                setGasPriceThresholdWarning({\r\n                    title: \"High Gas Price\",\r\n                    message:\r\n                        \"The dApp suggests fees much higher than recommended.\",\r\n                    dialogOpen: true,\r\n                })\r\n            }\r\n        }\r\n        // We only need to calculate these every new transaction and not run this on every render.\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [transactionId, isEIP1559Compatible, transaction.loadingGasValues])\r\n\r\n    // Functions\r\n    const confirm = async () => {\r\n        try {\r\n            dispatch({ type: \"open\", payload: { status: \"loading\" } })\r\n            const isLinked = await checkDeviceIsLinked()\r\n            if (!isLinked) {\r\n                closeDialog()\r\n                return\r\n            }\r\n            await confirmTransaction(\r\n                transaction.id,\r\n                transactionGas,\r\n                transactionAdvancedData\r\n            )\r\n        } catch (e) {}\r\n    }\r\n\r\n    const reject = async () => {\r\n        dispatch({\r\n            type: \"open\",\r\n            payload: {\r\n                status: \"loading\",\r\n                titles: { loading: \"Rejecting...\" },\r\n                texts: { loading: \"Rejecting transaction...\" },\r\n            },\r\n        })\r\n        await new Promise<void>((resolve) => {\r\n            setTimeout(resolve, 300)\r\n        })\r\n        await rejectTransaction(transactionId)\r\n    }\r\n\r\n    // Formats transaction value according to network native currency symbol length, reducing decimals\r\n    // and wrapping the text\r\n    const transactionValues = () => {\r\n        const formattedValue = formatNumberLength(\r\n            formatUnits(params.value!, network.nativeCurrency.decimals),\r\n            networkNativeCurrency.symbol.length > 3 ? 8 : 9\r\n        )\r\n\r\n        const totalLength =\r\n            formattedValue.length + networkNativeCurrency.symbol.length\r\n        const valueWidth = totalLength >= 5 ? \"w-7/12\" : \"w-4/12\"\r\n        const originWidth = totalLength >= 5 ? \"w-5/12\" : \"w-8/12\"\r\n        return (\r\n            <GenericTooltip\r\n                top\r\n                className=\"w-60 p-2 ml-8 break-all\"\r\n                content={\r\n                    <div>\r\n                        <p>\r\n                            <span className=\"font-bold\">Total value: </span>\r\n                            {formatUnits(\r\n                                params.value!,\r\n                                network.nativeCurrency.decimals\r\n                            )}{\" \"}\r\n                            {networkNativeCurrency.symbol}\r\n                        </p>\r\n                        <p>\r\n                            <span className=\"font-bold\">Origin: </span>\r\n                            <span data-testid=\"transaction-origin\">\r\n                                {transaction.origin}\r\n                            </span>\r\n                        </p>\r\n                    </div>\r\n                }\r\n            >\r\n                <div className=\"flex items-center p-4 rounded-md bg-primary-100 justify-between  hover:bg-primary-200\">\r\n                    <div\r\n                        className={classnames(\r\n                            \"flex flex-row items-center pointer-events-none\",\r\n                            valueWidth\r\n                        )}\r\n                    >\r\n                        <img\r\n                            src={defaultNetworkLogo}\r\n                            alt={network.nativeCurrency.symbol}\r\n                            width=\"20px\"\r\n                            height=\"18px\"\r\n                            draggable={false}\r\n                        />\r\n                        <span className=\"font-black pl-1 text-sm\">\r\n                            {formattedValue} {networkNativeCurrency.symbol}\r\n                        </span>\r\n                    </div>\r\n\r\n                    <span\r\n                        className={classnames(\r\n                            \"text-xxs text-right truncate justify-self-end pointer-events-none\",\r\n                            originWidth\r\n                        )}\r\n                    >\r\n                        {transaction.origin}\r\n                    </span>\r\n                </div>\r\n            </GenericTooltip>\r\n        )\r\n    }\r\n\r\n    const addressDialogIsOpen =\r\n        differentAddress && !dialogClosed && !hideAddressWarning && !isLoading\r\n\r\n    const gasExceedsThresholdDialogIsOpen =\r\n        !isLoading &&\r\n        !addressDialogIsOpen &&\r\n        !settings.hideEstimatedGasExceedsThresholdWarning &&\r\n        gasPriceThresholdWarning.dialogOpen\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <DAppPopupHeader\r\n                    title=\"Confirm\"\r\n                    requestCount={transactionCount}\r\n                />\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        onClick={reject}\r\n                        buttonClass={Classes.liteButton}\r\n                        disabled={!canUserSubmitTransaction(transaction.status)}\r\n                        label=\"Reject\"\r\n                    ></ButtonWithLoading>\r\n                    <ButtonWithLoading\r\n                        label=\"Confirm\"\r\n                        disabled={\r\n                            !hasBalance ||\r\n                            !canUserSubmitTransaction(transaction.status)\r\n                        }\r\n                        onClick={confirm}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <WaitingDialog\r\n                open={isOpen}\r\n                status={status}\r\n                titles={{\r\n                    loading: titles?.loading || \"Confirming...\",\r\n                    success: titles?.success || \"Success\",\r\n                    error: titles?.error || \"Error\",\r\n                }}\r\n                texts={{\r\n                    loading: texts?.loading || \"Confirming the transaction...\",\r\n                    success:\r\n                        texts?.success || \"The transaction has been submitted.\",\r\n                    error: texts?.error || \"Something went wrong\",\r\n                }}\r\n                txHash={transaction.transactionParams.hash}\r\n                clickOutsideToClose={false}\r\n                timeout={DAPP_FEEDBACK_WINDOW_TIMEOUT}\r\n                onDone={closeDialog}\r\n                gifs={gifs}\r\n                hideButton\r\n            />\r\n            <TransactionDetails\r\n                transaction={transaction}\r\n                open={hasDetails}\r\n                onClose={() => setHasDetails(false)}\r\n                nonce={transactionAdvancedData.customNonce ?? nonceRef.current}\r\n            />\r\n            <div className=\"flex flex-row items-center justify-between w-full px-6 py-4 border-b\">\r\n                {isLoading && <LoadingOverlay />}\r\n                <CheckBoxDialog\r\n                    message={`Transaction was sent with an account that's different from the selected one in your wallet. \\n\\n Please select if you want to continue or reject the transaction.`}\r\n                    onClose={() => {\r\n                        setDialogClosed(true)\r\n                    }}\r\n                    onCancel={reject}\r\n                    onConfirm={(saveChoice) => {\r\n                        if (saveChoice) {\r\n                            setUserSettings({\r\n                                ...settings,\r\n                                hideAddressWarning: true,\r\n                            })\r\n                        }\r\n                    }}\r\n                    title=\"Different address detected\"\r\n                    open={addressDialogIsOpen}\r\n                    closeText=\"Reject\"\r\n                    confirmText=\"Continue\"\r\n                    showCheckbox\r\n                    checkboxText=\"Don't show this warning again\"\r\n                />\r\n                <CheckBoxDialog\r\n                    message={`${gasPriceThresholdWarning.message}\\n\\nYou can manually change the gas price by clicking on it.`}\r\n                    onClose={() => {\r\n                        setGasPriceThresholdWarning({\r\n                            dialogOpen: false,\r\n                        })\r\n                    }}\r\n                    onCancel={reject}\r\n                    onConfirm={(saveChoice) => {\r\n                        if (saveChoice) {\r\n                            setUserSettings({\r\n                                ...settings,\r\n                                hideEstimatedGasExceedsThresholdWarning: true,\r\n                            })\r\n                        }\r\n                    }}\r\n                    title={gasPriceThresholdWarning.title || \"\"}\r\n                    open={gasExceedsThresholdDialogIsOpen}\r\n                    confirmText=\"Continue\"\r\n                    showCloseButton={false}\r\n                    showCheckbox\r\n                    checkboxText=\"Don't show this warning again\"\r\n                />\r\n\r\n                <div className=\"flex flex-row items-center w-2/5 justify-start\">\r\n                    <div>\r\n                        <AccountIcon\r\n                            className=\"h-6 w-6\"\r\n                            fill={getAccountColor(params.from!)}\r\n                        />\r\n                    </div>\r\n                    <span\r\n                        title={accountName}\r\n                        className=\"pl-2 font-bold text-sm truncate ...\"\r\n                    >\r\n                        {formatName(accountName, 24)}\r\n                    </span>\r\n                    {differentAddress && (\r\n                        <div className=\"group relative\">\r\n                            <AiFillInfoCircle\r\n                                size={20}\r\n                                className=\"pl-2 text-yellow-600 cursor-pointer hover:text-yellow-700\"\r\n                            />\r\n                            <Tooltip content=\"Account differs from the selected in your wallet\" />\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"flex flex-row items-center justify-center w-1/5 relative\">\r\n                    <div className=\"w-8 border rounded-full bg-white z-10\">\r\n                        <img\r\n                            src={arrowRight}\r\n                            className=\"p-2\"\r\n                            alt=\"\"\r\n                            draggable={false}\r\n                        />\r\n                    </div>\r\n                    <div\r\n                        className=\"absolute border-t transform rotate-90 z-0\"\r\n                        style={{ width: \"63px\" }}\r\n                    ></div>\r\n                </div>\r\n\r\n                {params.to ? (\r\n                    <div\r\n                        className=\"relative flex flex-row items-center cursor-pointer group w-2/5 justify-end\"\r\n                        onClick={() => onCopy(params?.to)}\r\n                    >\r\n                        <AccountIcon className=\"h-6 w-6\" fill=\"black\" />\r\n                        <span className=\"pl-2 font-bold text-sm\">\r\n                            ...{params.to!.slice(-6)}\r\n                        </span>\r\n                        <CopyTooltip copied={copied} />\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"flex flex-row items-center relative w-2/5 justify-end\">\r\n                        <BsFileEarmarkText size={24} />\r\n                        <span className=\"pl-1 font-bold text-sm\">\r\n                            New Contract\r\n                        </span>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div className=\"flex flex-col px-6 py-3 space-y-3 w-full\">\r\n                <div className=\"flex flex-row w-full items-center justify-start py-0.5 \">\r\n                    <HiOutlineExclamationCircle\r\n                        size={20}\r\n                        className=\"text-gray-600 font-bold\"\r\n                    />\r\n                    <div className=\"text-xs text-gray-600 pl-2 font-medium capitalize flex items-center justify-between w-full\">\r\n                        {description ? (\r\n                            <>\r\n                                <GenericTooltip\r\n                                    top\r\n                                    className=\"w-60 p-2 -ml-48\"\r\n                                    disabled={description.length < 30}\r\n                                    content={description}\r\n                                >\r\n                                    {formatName(description, 30)}\r\n                                </GenericTooltip>\r\n                                <ClickableText\r\n                                    onClick={(e) => {\r\n                                        e.preventDefault()\r\n                                        setHasDetails(true)\r\n                                    }}\r\n                                >\r\n                                    View details\r\n                                </ClickableText>\r\n                            </>\r\n                        ) : (\r\n                            <span>Loading{<LoadingDots />}</span>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                {transactionValues()}\r\n\r\n                <div className=\"flex flex-col\">\r\n                    <label\r\n                        className={classnames(\r\n                            Classes.inputLabel,\r\n                            \"text-gray-600 pb-2\"\r\n                        )}\r\n                    >\r\n                        Gas Price\r\n                    </label>\r\n\r\n                    {!isEIP1559Compatible ? (\r\n                        <GasPriceSelector\r\n                            defaultLevel={defaultGasOption || \"medium\"}\r\n                            defaultGasLimit={defaultGas.gasLimit!}\r\n                            defaultGasPrice={defaultGas.gasPrice!}\r\n                            setGasPriceAndLimit={(gasPrice, gasLimit) => {\r\n                                setTransactionGas({ gasPrice, gasLimit })\r\n                            }}\r\n                            showEstimationError={gasEstimationFailed}\r\n                            isParentLoading={isLoading}\r\n                        />\r\n                    ) : (\r\n                        <GasPriceComponent\r\n                            defaultGas={{\r\n                                defaultLevel: defaultGasOption || \"medium\",\r\n                                feeData: {\r\n                                    gasLimit: defaultGas.gasLimit,\r\n                                    maxFeePerGas: defaultGas.maxFeePerGas!,\r\n                                    maxPriorityFeePerGas:\r\n                                        defaultGas.maxPriorityFeePerGas!,\r\n                                },\r\n                            }}\r\n                            setGas={(gasFees) => {\r\n                                setTransactionGas({\r\n                                    ...gasFees,\r\n                                })\r\n                            }}\r\n                            showEstimationError={gasEstimationFailed}\r\n                            isParentLoading={isLoading}\r\n                            displayOnlyMaxValue\r\n                        />\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"flex flex-col space-y-2\">\r\n                    <div\r\n                        className={classnames(\r\n                            \"flex flex-col items-start px-4 pt-4 space-y rounded-md bg-primary-100\",\r\n                            !hasBalance\r\n                                ? \"border border-red-400 pb-2\"\r\n                                : \"border-opacity-0 border-transparent pb-4\"\r\n                        )}\r\n                    >\r\n                        <div className=\"flex flex-row\">\r\n                            <label\r\n                                htmlFor=\"amount\"\r\n                                className={classnames(\r\n                                    Classes.inputLabel,\r\n                                    \"text-gray-500\"\r\n                                )}\r\n                            >\r\n                                AMOUNT + {isEIP1559Compatible && \" MAX \"} GAS\r\n                                FEE\r\n                            </label>\r\n                        </div>\r\n                        <div className=\"flex flex-col w-full space-y-1\">\r\n                            <div className=\"flex flex-row items-center justify-between w-full font-bold\">\r\n                                <span className=\"w-2/12 text-sm\">Total:</span>\r\n                                <span className=\"flex flex-row items-center justify-end w-10/12\">\r\n                                    <img\r\n                                        src={defaultNetworkLogo}\r\n                                        alt={network.nativeCurrency.symbol}\r\n                                        width=\"20px\"\r\n                                        height=\"18px\"\r\n                                        draggable={false}\r\n                                    />\r\n                                    <span\r\n                                        className=\"pl-1 text-base\"\r\n                                        title={\r\n                                            formatUnits(\r\n                                                total,\r\n                                                network.nativeCurrency.decimals\r\n                                            ) +\r\n                                            ` ${network.nativeCurrency.symbol}`\r\n                                        }\r\n                                    >\r\n                                        {formatNumberLength(\r\n                                            formatUnits(\r\n                                                total,\r\n                                                network.nativeCurrency.decimals\r\n                                            ),\r\n                                            networkNativeCurrency.symbol\r\n                                                .length > 3\r\n                                                ? 12\r\n                                                : 14\r\n                                        )}{\" \"}\r\n                                        {network.nativeCurrency.symbol}\r\n                                    </span>\r\n                                    {/*\r\n                                    {selectedCurrency.toUpperCase()} */}\r\n                                </span>\r\n                            </div>\r\n                            <span className=\"ml-auto text-xs text-gray-500\">\r\n                                {formatCurrency(totalInNativeCurrency, {\r\n                                    currency: nativeCurrency,\r\n                                    locale_info: localeInfo,\r\n                                    showSymbol: true,\r\n                                })}\r\n                            </span>\r\n                            <span className=\"text-xs text-red-500\">\r\n                                {!hasBalance && \"Insufficient balance\"}\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <AdvancedSettings\r\n                    address={checksumFromAddress}\r\n                    transactionGasLimit={transactionGas.gasLimit}\r\n                    advancedSettings={transactionAdvancedData}\r\n                    setAdvancedSettings={(\r\n                        newSettings: TransactionAdvancedData\r\n                    ) => {\r\n                        setTransactionAdvancedData({\r\n                            customNonce: newSettings.customNonce,\r\n                            flashbots: newSettings.flashbots,\r\n                        })\r\n                    }}\r\n                />\r\n            </div>\r\n            <HardwareDeviceNotLinkedDialog\r\n                onDone={resetDeviceLinkStatus}\r\n                isOpen={isDeviceUnlinked}\r\n                address={account.address}\r\n                vendor={getDeviceFromAccountType(account.accountType)}\r\n            />\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default TransactionConfirmPage\r\n","const GearIcon = () => (\r\n    <svg\r\n        width=\"16\"\r\n        height=\"16\"\r\n        viewBox=\"0 0 16 16\"\r\n        fill=\"none\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n        <path\r\n            d=\"M15.135 6.784C13.832 6.458 13.214 4.966 13.905 3.815C14.227 3.279 14.13 2.817 13.811 2.499L13.501 2.189C13.183 1.871 12.721 1.774 12.185 2.095C11.033 2.786 9.541 2.168 9.216 0.865C9.065 0.258 8.669 0 8.219 0H7.781C7.331 0 6.936 0.258 6.784 0.865C6.458 2.168 4.966 2.786 3.815 2.095C3.279 1.773 2.816 1.87 2.498 2.188L2.188 2.498C1.87 2.816 1.773 3.279 2.095 3.815C2.786 4.967 2.168 6.459 0.865 6.784C0.26 6.935 0 7.33 0 7.781V8.219C0 8.669 0.258 9.064 0.865 9.216C2.168 9.542 2.786 11.034 2.095 12.185C1.773 12.721 1.87 13.183 2.189 13.501L2.499 13.811C2.818 14.13 3.281 14.226 3.815 13.905C4.967 13.214 6.459 13.832 6.784 15.135C6.935 15.742 7.331 16 7.781 16H8.219C8.669 16 9.064 15.742 9.216 15.135C9.542 13.832 11.034 13.214 12.185 13.905C12.72 14.226 13.182 14.13 13.501 13.811L13.811 13.501C14.129 13.183 14.226 12.721 13.905 12.185C13.214 11.033 13.832 9.541 15.135 9.216C15.742 9.065 16 8.669 16 8.219V7.781C16 7.33 15.74 6.935 15.135 6.784ZM8 11C6.343 11 5 9.657 5 8C5 6.343 6.343 5 8 5C9.657 5 11 6.343 11 8C11 9.657 9.657 11 8 11Z\"\r\n            fill=\"currentColor\"\r\n        />\r\n    </svg>\r\n)\r\n\r\nexport default GearIcon\r\n","import { FC, PropsWithChildren } from \"react\"\r\n\r\ninterface AccountsListProps {\r\n    title: string\r\n}\r\nconst AccountsList: FC<PropsWithChildren<AccountsListProps>> = ({\r\n    title,\r\n    children,\r\n}) => {\r\n    return (\r\n        <div className=\"flex flex-col space-y-3\">\r\n            <span className=\"text-xs text-gray-500\">{title}</span>\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AccountsList\r\n","import { useBlankState } from \"../../../context/background/backgroundHooks\"\r\nimport { session } from \"../../../context/setup\"\r\n\r\nconst useConnectedAccounts = () => {\r\n    const { permissions } = useBlankState()!\r\n    const origin = session?.origin\r\n    const permission = origin ? permissions[origin] : undefined\r\n    const connectedAccounts = permission?.accounts ?? []\r\n    return {\r\n        connectedAccounts,\r\n        isAccountConnected: (accountAddress: string) =>\r\n            (connectedAccounts || []).includes(accountAddress),\r\n    }\r\n}\r\n\r\nexport default useConnectedAccounts\r\n","import { AccountInfo } from \"@block-wallet/background/controllers/AccountTrackerController\"\r\nimport { useMemo } from \"react\"\r\nimport { AccountFilter, filterAccounts } from \"../../filterAccounts\"\r\n\r\nconst useAccountsFilter = (accounts: AccountInfo[], filters: string[]) => {\r\n    return useMemo(() => {\r\n        return filterAccounts(accounts, {\r\n            accountFilters: filters as AccountFilter[],\r\n        })\r\n    }, [accounts, filters])\r\n}\r\n\r\nexport default useAccountsFilter\r\n","import { PropsWithChildren } from \"react\"\r\n\r\ntype Position = \"top-right\" | \"top-left\" | \"bottom-right\" | \"bottom-left\"\r\n\r\nconst offsets = {\r\n    \"top-right\": \"-top-2 -right-2\",\r\n    \"top-left\": \"-top-2 -left-2\",\r\n    \"bottom-right\": \"-bottom-2 -right-2\",\r\n    \"bottom-left\": \"-bottom-2 -left-2\",\r\n}\r\n\r\nconst Badge: React.FC<PropsWithChildren<{ position?: Position }>> = (\r\n    { children, position } = { position: \"top-right\" }\r\n) => {\r\n    const offset = offsets[position || \"top-right\"]\r\n    return (\r\n        <div\r\n            className={`flex justify-center items-center absolute h-5 w-5 bg-primary-300 rounded-xl ${offset}`}\r\n        >\r\n            <span className=\"text-white font-bold text-sm\">{children}</span>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Badge\r\n","import { Fragment } from \"react\"\r\nimport {\r\n    AccountFilter,\r\n    getAccountFilterValue,\r\n    getNextAccountFilterValue,\r\n} from \"../../util/filterAccounts\"\r\nimport Divider from \"../Divider\"\r\nimport Badge from \"../ui/Badge\"\r\nimport Dropdown from \"../ui/Dropdown/Dropdown\"\r\nimport { DropdownOutlinedIconButton } from \"../ui/Dropdown/DropdownButton\"\r\nimport { IconName } from \"../ui/Icon\"\r\n\r\nconst getFilterOptions = (customFilters?: AccountFilter[]) => {\r\n    const filterOptions = [\r\n        { label: \"All\", value: AccountFilter.ALL },\r\n        { label: \"Hardware\", value: AccountFilter.HARDWARE },\r\n        { label: \"External\", value: AccountFilter.EXTERNAL },\r\n        { label: \"Hidden\", value: AccountFilter.HIDDEN, divider: true },\r\n    ]\r\n    if (!customFilters) {\r\n        return filterOptions\r\n    }\r\n    return filterOptions.filter(({ value }) => customFilters.includes(value))\r\n}\r\n\r\ninterface AccountFilterProps {\r\n    filters: string[]\r\n    customFilters?: AccountFilter[]\r\n    onChangeFilters: (newFilters: string[]) => void\r\n}\r\n\r\nconst AccountFilters: React.FC<AccountFilterProps> = ({\r\n    filters,\r\n    onChangeFilters,\r\n    customFilters,\r\n}) => {\r\n    const selectedFilters = getAccountFilterValue(filters)\r\n    const badgeCount = selectedFilters.filter(\r\n        (f) =>\r\n            ![AccountFilter.ALL, AccountFilter.HIDDEN].includes(\r\n                f as AccountFilter\r\n            )\r\n    )\r\n    return (\r\n        <div className=\"relative\">\r\n            <Dropdown\r\n                onClickItem={(selected) => {\r\n                    return onChangeFilters(\r\n                        getNextAccountFilterValue(selected, filters)\r\n                    )\r\n                }}\r\n            >\r\n                <Dropdown.Button>\r\n                    <DropdownOutlinedIconButton iconName={IconName.GROUP} />\r\n                </Dropdown.Button>\r\n                <Dropdown.Menu id=\"filter-menu\" className=\"w-28\">\r\n                    {getFilterOptions(customFilters).map(\r\n                        ({ value, label, divider }) => {\r\n                            return (\r\n                                <Fragment key={value}>\r\n                                    {divider && <Divider />}\r\n                                    <Dropdown.MenuItem\r\n                                        value={value}\r\n                                        selected={selectedFilters.includes(\r\n                                            value\r\n                                        )}\r\n                                        className=\"p-2 font-normal text-black\"\r\n                                    >\r\n                                        {label}\r\n                                    </Dropdown.MenuItem>\r\n                                </Fragment>\r\n                            )\r\n                        }\r\n                    )}\r\n                </Dropdown.Menu>\r\n            </Dropdown>\r\n            {badgeCount.length > 0 && <Badge>{badgeCount.length}</Badge>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AccountFilters\r\n","import { PropsWithChildren } from \"react\"\r\nimport classnames from \"classnames\"\r\nimport Icon, { IconName } from \"./Icon\"\r\nimport Typography, { TypographyType } from \"./Typography\"\r\ninterface EmptyStateProps {\r\n    iconName?: IconName\r\n    className: string\r\n    title: string\r\n}\r\nconst EmptyState: React.FC<PropsWithChildren<EmptyStateProps>> = ({\r\n    iconName,\r\n    title,\r\n    children,\r\n    className,\r\n}) => {\r\n    return (\r\n        <div\r\n            className={classnames(\r\n                \"items-center flex flex-col space-y-1 text-center\",\r\n                className || \"\"\r\n            )}\r\n        >\r\n            <Icon size=\"xl\" name={iconName || IconName.EMPTY_DRAWER} />\r\n            <Typography type={TypographyType.TITLE}>{title}</Typography>\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EmptyState\r\n","import { FunctionComponent, useState } from \"react\"\r\nimport AccountDisplay from \"../account/AccountDisplay\"\r\nimport { AccountInfo } from \"@block-wallet/background/controllers/AccountTrackerController\"\r\nimport { useSelectedAccount } from \"../../context/hooks/useSelectedAccount\"\r\nimport AccountSearchBar from \"./AccountSearchBar\"\r\nimport {\r\n    removeAccount,\r\n    hideAccount,\r\n    updateAccountFilters,\r\n    unhideAccount,\r\n} from \"../../context/commActions\"\r\nimport { AccountType } from \"../../context/commTypes\"\r\nimport { AccountMenuOptionType } from \"./AccountDisplayMenu\"\r\nimport GearIcon from \"../icons/GearIcon\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport AccountsList from \"./AccountsList\"\r\nimport useAccountSearch from \"../../util/hooks/account/useAccountSearch\"\r\nimport {\r\n    isActiveAccount,\r\n    isHiddenAccount,\r\n    isInternalAccount,\r\n} from \"../../util/account\"\r\nimport type { LocationDescriptor } from \"history\"\r\nimport useConnectedAccounts from \"../../util/hooks/account/useConnectedAccounts\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport useAccountsFilter from \"../../util/hooks/account/useAccountsFilter\"\r\nimport AccountFilters from \"./AccountFilters\"\r\nimport { AccountFilter } from \"../../util/filterAccounts\"\r\nimport EmptyState from \"../ui/EmptyState\"\r\n\r\ninterface AccountSelectProps {\r\n    accounts: AccountInfo[]\r\n    selectedAccount: AccountInfo\r\n    showSelectedCheckmark?: boolean\r\n    onAccountChange: (account: AccountInfo) => void\r\n    showMenu?: boolean\r\n    customFilters?: AccountFilter[]\r\n    showActionButtons?: boolean\r\n    createAccountTo?: LocationDescriptor\r\n}\r\n\r\ntype AccountsData = {\r\n    otherAccounts: AccountInfo[]\r\n    hiddenAccounts: AccountInfo[]\r\n    currentAccount: AccountInfo | undefined\r\n}\r\nconst AccountSelect: FunctionComponent<AccountSelectProps> = ({\r\n    accounts,\r\n    selectedAccount,\r\n    showSelectedCheckmark = false,\r\n    showMenu = true,\r\n    customFilters = undefined,\r\n    showActionButtons = true,\r\n    onAccountChange,\r\n    createAccountTo = { pathname: \"/accounts/create\" },\r\n}) => {\r\n    const { isAccountConnected } = useConnectedAccounts()\r\n    const { filters } = useBlankState()!\r\n    const [filterValue, setFilterValue] = useState(filters.account)\r\n    const {\r\n        search,\r\n        accounts: searchedAccounts,\r\n        onChangeSearch,\r\n    } = useAccountSearch(accounts)\r\n\r\n    //All the accounts after filtering\r\n    const filteredAccounts = useAccountsFilter(\r\n        search ? searchedAccounts : accounts,\r\n        filterValue\r\n    )\r\n\r\n    const currentAccountAddress = useSelectedAccount().address\r\n\r\n    const { currentAccount, otherAccounts, hiddenAccounts } =\r\n        filteredAccounts.reduce(\r\n            (acc: AccountsData, account) => {\r\n                if (account.address === currentAccountAddress) {\r\n                    return {\r\n                        ...acc,\r\n                        currentAccount: account,\r\n                    }\r\n                }\r\n                if (isHiddenAccount(account)) {\r\n                    return {\r\n                        ...acc,\r\n                        hiddenAccounts: [...acc.hiddenAccounts, account],\r\n                    }\r\n                }\r\n                return {\r\n                    ...acc,\r\n                    otherAccounts: [...acc.otherAccounts, account],\r\n                }\r\n            },\r\n            { currentAccount: undefined, otherAccounts: [], hiddenAccounts: [] }\r\n        )\r\n\r\n    const history = useHistory()\r\n\r\n    const internalAccountsNumber = accounts.filter(\r\n        (account) =>\r\n            isInternalAccount(account.accountType) && isActiveAccount(account)\r\n    ).length\r\n\r\n    const getAccountOptions = (account: AccountInfo) => {\r\n        if (!showMenu) return undefined\r\n        if (account.accountType === AccountType.HD_ACCOUNT) {\r\n            if (isHiddenAccount(account)) {\r\n                return [\r\n                    {\r\n                        optionType: AccountMenuOptionType.UNHIDE_ACCOUNT,\r\n                        handler: unhideAccount,\r\n                    },\r\n                ]\r\n            }\r\n            return [\r\n                {\r\n                    optionType: AccountMenuOptionType.HIDE_ACCOUNT,\r\n                    handler: hideAccount,\r\n                    disabled: internalAccountsNumber === 1,\r\n                },\r\n            ]\r\n        }\r\n        return [\r\n            {\r\n                optionType: AccountMenuOptionType.REMOVE_ACCOUNT,\r\n                handler: removeAccount,\r\n            },\r\n        ]\r\n    }\r\n\r\n    let searchedActiveAccounts = otherAccounts\r\n    if (currentAccount) {\r\n        searchedActiveAccounts = [currentAccount, ...searchedActiveAccounts]\r\n    }\r\n\r\n    let showEmptyState = false\r\n    if (search) {\r\n        showEmptyState =\r\n            searchedActiveAccounts.length === 0 && hiddenAccounts.length === 0\r\n    } else {\r\n        showEmptyState =\r\n            !currentAccount &&\r\n            otherAccounts.length === 0 &&\r\n            hiddenAccounts.length === 0\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex flex-col p-6 space-y-5 text-sm text-gray-500 pb-3\">\r\n            <div className=\"flex flex-row justify-between space-x-2 w-full\">\r\n                <AccountSearchBar\r\n                    onChange={onChangeSearch}\r\n                    createAccountTo={createAccountTo}\r\n                    setIsSearching={(isSearching: boolean) => {\r\n                        if (!isSearching) {\r\n                            onChangeSearch(\"\")\r\n                        }\r\n                    }}\r\n                />\r\n                <AccountFilters\r\n                    customFilters={customFilters}\r\n                    filters={filterValue}\r\n                    onChangeFilters={async (newFilters: string[]) => {\r\n                        const prevValue = [...filterValue]\r\n                        try {\r\n                            //optimhistic update to avoid weird UI while awating for the background to persist the state\r\n                            setFilterValue(newFilters)\r\n                            await updateAccountFilters(newFilters)\r\n                        } catch (e) {\r\n                            //if failed, set the previous value\r\n                            setFilterValue(prevValue)\r\n                        }\r\n                    }}\r\n                />\r\n            </div>\r\n            {showEmptyState && (\r\n                <EmptyState title=\"No results\" className=\"p-6\">\r\n                    The account you are searching for does not exist. Try\r\n                    adjusting your search term or filter.\r\n                </EmptyState>\r\n            )}\r\n            {search === \"\" ? (\r\n                <>\r\n                    {currentAccount && (\r\n                        <AccountsList\r\n                            title=\"CURRENT ACCOUNT\"\r\n                            key={\"current-account\"}\r\n                        >\r\n                            <AccountDisplay\r\n                                key={`current-account-${currentAccount.index}`}\r\n                                onClickAccount={() => {\r\n                                    if (\r\n                                        selectedAccount.address !==\r\n                                            currentAccount.address &&\r\n                                        onAccountChange\r\n                                    )\r\n                                        onAccountChange(currentAccount)\r\n                                }}\r\n                                account={currentAccount}\r\n                                showSelectedCheckmark={showSelectedCheckmark}\r\n                                showConnected={isAccountConnected(\r\n                                    currentAccount.address\r\n                                )}\r\n                                menu={getAccountOptions(currentAccount!)}\r\n                                selected={\r\n                                    selectedAccount.address ===\r\n                                    currentAccount!.address\r\n                                }\r\n                                actionButtons={\r\n                                    showActionButtons\r\n                                        ? [\r\n                                              <div\r\n                                                  key={`current-account-action-button-1`}\r\n                                                  onClick={() => {\r\n                                                      history.push({\r\n                                                          pathname:\r\n                                                              \"/accounts/menu\",\r\n                                                          state: {\r\n                                                              fromAccountList:\r\n                                                                  true,\r\n                                                          },\r\n                                                      })\r\n                                                  }}\r\n                                                  className=\"cursor-pointer p-2 transition duration-300 rounded-full hover:bg-primary-100 hover:text-primary-300\"\r\n                                              >\r\n                                                  <GearIcon />\r\n                                              </div>,\r\n                                          ]\r\n                                        : undefined\r\n                                }\r\n                            />\r\n                        </AccountsList>\r\n                    )}\r\n                    {otherAccounts.length > 0 && (\r\n                        <AccountsList title=\"OTHER ACCOUNTS\">\r\n                            {otherAccounts.map((account) => (\r\n                                <AccountDisplay\r\n                                    key={`other-${account.address}`}\r\n                                    onClickAccount={onAccountChange}\r\n                                    account={account}\r\n                                    menu={getAccountOptions(account)}\r\n                                    selected={\r\n                                        selectedAccount.address ===\r\n                                        account.address\r\n                                    }\r\n                                    showConnected={isAccountConnected(\r\n                                        account.address\r\n                                    )}\r\n                                />\r\n                            ))}\r\n                        </AccountsList>\r\n                    )}\r\n                    {hiddenAccounts.length > 0 && (\r\n                        <AccountsList title=\"HIDDEN ACCOUNTS\">\r\n                            {hiddenAccounts.map((account) => (\r\n                                <AccountDisplay\r\n                                    key={`hidden-${account.address}`}\r\n                                    account={account}\r\n                                    menu={getAccountOptions(account)}\r\n                                />\r\n                            ))}\r\n                        </AccountsList>\r\n                    )}\r\n                </>\r\n            ) : (\r\n                <>\r\n                    {searchedActiveAccounts.length > 0 && (\r\n                        <AccountsList title=\"SEARCH RESULTS\">\r\n                            {searchedActiveAccounts.map((account) => (\r\n                                <AccountDisplay\r\n                                    key={`result-${account.address}`}\r\n                                    onClickAccount={onAccountChange}\r\n                                    account={account}\r\n                                    menu={getAccountOptions(account)}\r\n                                    selected={\r\n                                        selectedAccount.address ===\r\n                                        account!.address\r\n                                    }\r\n                                    showConnected={isAccountConnected(\r\n                                        account!.address\r\n                                    )}\r\n                                />\r\n                            ))}\r\n                        </AccountsList>\r\n                    )}\r\n                    {hiddenAccounts.length > 0 && (\r\n                        <AccountsList title=\"SEARCH RESULTS (HIDDEN ACCOUNTS)\">\r\n                            {hiddenAccounts.map((account) => (\r\n                                <AccountDisplay\r\n                                    key={`hidden-result-${account.address}`}\r\n                                    account={account}\r\n                                    menu={getAccountOptions(account)}\r\n                                />\r\n                            ))}\r\n                        </AccountsList>\r\n                    )}\r\n                </>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AccountSelect\r\n","import PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport AccountSelect from \"../../components/account/AccountSelect\"\r\nimport { AccountInfo } from \"@block-wallet/background/controllers/AccountTrackerController\"\r\nimport { selectAccount } from \"../../context/commActions\"\r\nimport { useSelectedAccount } from \"../../context/hooks/useSelectedAccount\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport { useSortedAccounts } from \"../../context/hooks/useSortedAccounts\"\r\n\r\nconst AccountsPage = () => {\r\n    const selectedAccount = useSelectedAccount()\r\n    const history = useOnMountHistory()\r\n    const accounts = useSortedAccounts({ includeHiddenAccounts: true })\r\n    const setSelectedAccount = async (account: AccountInfo) => {\r\n        await selectAccount(account.address)\r\n        history.push(\"/\")\r\n    }\r\n\r\n    return (\r\n        <PopupLayout header={<PopupHeader title=\"My Accounts\" />}>\r\n            <AccountSelect\r\n                accounts={accounts}\r\n                selectedAccount={selectedAccount!}\r\n                showSelectedCheckmark={false}\r\n                onAccountChange={(account: AccountInfo) =>\r\n                    setSelectedAccount(account)\r\n                }\r\n            />\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default AccountsPage\r\n","const QRIcon = () => (\r\n    <svg\r\n        width=\"16\"\r\n        height=\"16\"\r\n        viewBox=\"0 0 16 16\"\r\n        fill=\"none\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n        <path\r\n            d=\"M6 7H1C0.4 7 0 6.6 0 6V1C0 0.4 0.4 0 1 0H6C6.6 0 7 0.4 7 1V6C7 6.6 6.6 7 6 7ZM2 5H5V2H2V5Z\"\r\n            fill=\"currentColor\"\r\n        />\r\n        <path\r\n            d=\"M6 16H1C0.4 16 0 15.6 0 15V10C0 9.4 0.4 9 1 9H6C6.6 9 7 9.4 7 10V15C7 15.6 6.6 16 6 16ZM2 14H5V11H2V14Z\"\r\n            fill=\"currentColor\"\r\n        />\r\n        <path\r\n            d=\"M15 7H10C9.4 7 9 6.6 9 6V1C9 0.4 9.4 0 10 0H15C15.6 0 16 0.4 16 1V6C16 6.6 15.6 7 15 7ZM11 5H14V2H11V5Z\"\r\n            fill=\"currentColor\"\r\n        />\r\n        <path d=\"M4 3H3V4H4V3Z\" fill=\"currentColor\" />\r\n        <path d=\"M4 12H3V13H4V12Z\" fill=\"currentColor\" />\r\n        <path d=\"M16 14H9V16H16V14Z\" fill=\"currentColor\" />\r\n        <path\r\n            d=\"M16 13H14V11H11V9H15C15.6 9 16 9.4 16 10V13Z\"\r\n            fill=\"currentColor\"\r\n        />\r\n        <path d=\"M13 12H12V13H13V12Z\" fill=\"currentColor\" />\r\n        <path d=\"M13 3H12V4H13V3Z\" fill=\"currentColor\" />\r\n    </svg>\r\n)\r\n\r\nexport default QRIcon\r\n","import { Network } from \"@block-wallet/background/utils/constants/networks\"\r\nconst MAINNET_CHAIN_ID = 1\r\n\r\nconst sortNetworksByOrder = (n1: Network, n2: Network) => {\r\n    return n1.order - n2.order\r\n}\r\n\r\nconst getFirstUrl = (urls: string[] | undefined) => {\r\n    if (!urls || !urls?.length) {\r\n        return \"\"\r\n    }\r\n    return urls[0]\r\n}\r\n\r\nconst canDeleteNetwork = (network: Network) => {\r\n    return network.chainId !== MAINNET_CHAIN_ID\r\n}\r\n\r\n/**\r\n * Parses the given parameter as Int so that users can specify the ID in decimals or hex.\r\n * @param chainId Chain ID expressed in decimal or hexadecimal notation.\r\n * @returns the chain ID specified in decimal notation\r\n */\r\nconst parseChainId = (chainId?: string): number | undefined => {\r\n    return chainId ? parseInt(chainId) : undefined\r\n}\r\n\r\nexport { getFirstUrl, sortNetworksByOrder, canDeleteNetwork, parseChainId }\r\n","import { FunctionComponent, useRef, useState } from \"react\"\r\nimport { RiArrowDownSLine, RiArrowUpSLine } from \"react-icons/ri\"\r\nimport { BsCheck } from \"react-icons/bs\"\r\nimport { useHistory } from \"react-router-dom\"\r\n\r\nimport ClickableText from \"../button/ClickableText\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport classnames from \"classnames\"\r\nimport { useOnClickOutside } from \"../../util/useOnClickOutside\"\r\nimport { changeNetwork, setShowTestNetworks } from \"../../context/commActions\"\r\nimport { Network } from \"@block-wallet/background/utils/constants/networks\"\r\nimport classNames from \"classnames\"\r\nimport { sortNetworksByOrder } from \"../../util/networkUtils\"\r\nimport { getNetworkColor } from \"../../util/getNetworkColor\"\r\n\r\nconst NetworkOption: FunctionComponent<{\r\n    option: Network\r\n    selectedNetwork: string\r\n    handleNetworkChange: (network: string) => void\r\n    disabled?: boolean\r\n}> = ({ option, selectedNetwork, handleNetworkChange, disabled = false }) => {\r\n    const networkColor = getNetworkColor(option)\r\n    return (\r\n        <li\r\n            title={option.desc}\r\n            className={classnames(\r\n                \"cursor-pointer flex flex-row pl-2 pr-2 pt-1 pb-1 items-center hover:bg-gray-100\",\r\n                !option.enable && \"bg-gray-200 pointer-events-none\",\r\n                disabled && \"opacity-50 pointer-events-none\",\r\n                option.name === selectedNetwork && \"pointer-events-none\"\r\n            )}\r\n            onClick={async () => await handleNetworkChange(option.name)}\r\n        >\r\n            <span\r\n                className={\"h-2 w-2 rounded-xl mr-2\"}\r\n                style={{ backgroundColor: networkColor }}\r\n            />\r\n            <span\r\n                className={classnames(\r\n                    \"leading-loose text-ellipsis overflow-hidden whitespace-nowrap\",\r\n                    selectedNetwork === option.name && \"font-bold\"\r\n                )}\r\n            >\r\n                {option.desc}\r\n            </span>\r\n            {selectedNetwork === option.name && <BsCheck size={16} />}\r\n        </li>\r\n    )\r\n}\r\n\r\nconst NetworkSelect: FunctionComponent<{\r\n    className?: string\r\n    optionsContainerClassName?: string\r\n}> = ({ className, optionsContainerClassName }) => {\r\n    const history = useHistory()!\r\n    const [networkList, setNetworkList] = useState(false)\r\n    const {\r\n        selectedNetwork,\r\n        availableNetworks,\r\n        showTestNetworks,\r\n        isImportingDeposits,\r\n        isUserNetworkOnline,\r\n    } = useBlankState()!\r\n    const ref = useRef(null)\r\n    useOnClickOutside(ref, () => setNetworkList(false))\r\n\r\n    const handleNetworkChange = (network: string) => {\r\n        setNetworkList(false)\r\n        changeNetwork(network)\r\n    }\r\n\r\n    const getNetworkData = (): { color: string; desc: string } => {\r\n        const network = availableNetworks[selectedNetwork.toUpperCase()]\r\n        const color = getNetworkColor(network)\r\n        return { color: color, desc: network.desc }\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className={`relative ${className}`}\r\n            ref={ref}\r\n            role=\"menu\"\r\n            data-testid=\"network-selector\"\r\n        >\r\n            <div\r\n                onClick={() => {\r\n                    if (!isImportingDeposits) {\r\n                        setNetworkList(!networkList)\r\n                    }\r\n                }}\r\n                className={classNames(\r\n                    \"relative flex flex-row items-center justify-start p-1 text-gray-600 border rounded-md group border-primary-200 w-44 text-xs hover:border-primary-300\",\r\n                    !isImportingDeposits\r\n                        ? \"cursor-pointer select-none\"\r\n                        : \"disabled:pointer-events-none opacity-50\",\r\n                    networkList && \"border-primary-300\"\r\n                )}\r\n            >\r\n                <span\r\n                    className={\"justify-start h-2 rounded-xl ml-1 mr-2\"}\r\n                    style={{\r\n                        backgroundColor: getNetworkData().color,\r\n                        width: \"8px\",\r\n                    }}\r\n                />\r\n                <span\r\n                    data-testid=\"selected-network\"\r\n                    className=\"justify-start select-none w-36 text-ellipsis overflow-hidden whitespace-nowrap\"\r\n                >\r\n                    {getNetworkData().desc}\r\n                </span>\r\n                {networkList ? (\r\n                    <RiArrowUpSLine size={16} />\r\n                ) : (\r\n                    <RiArrowDownSLine size={16} />\r\n                )}\r\n            </div>\r\n\r\n            <div\r\n                hidden={!networkList}\r\n                className={`absolute shadow-md rounded-md w-48 max-h-96 overflow-y-auto mt-2 bg-white z-50 select-none ${optionsContainerClassName}`}\r\n            >\r\n                <ul className=\"text-xs\">\r\n                    {Object.values(availableNetworks)\r\n                        .filter((n) => n.enable && !n.test)\r\n                        .sort(sortNetworksByOrder)\r\n                        .map((option) => (\r\n                            <NetworkOption\r\n                                key={option.chainId}\r\n                                option={option}\r\n                                selectedNetwork={selectedNetwork}\r\n                                handleNetworkChange={handleNetworkChange}\r\n                                disabled={!isUserNetworkOnline}\r\n                            />\r\n                        ))}\r\n                    <li\r\n                        key=\"test\"\r\n                        className=\"cursor-pointer flex flex-row justify-between pl-2 pr-2 pt-1 pb-1 items-center border-t border-t-gray-200 border-b border-b-gray-200 hover:bg-gray-100\"\r\n                        onClick={() => setShowTestNetworks(!showTestNetworks)}\r\n                    >\r\n                        <label\r\n                            className=\"leading-loose text-gray-500 cursor-pointer\"\r\n                            htmlFor=\"showTestNetworks\"\r\n                        >\r\n                            Show Test Networks\r\n                        </label>\r\n                        <input\r\n                            id=\"showTestNetworks\"\r\n                            type=\"checkbox\"\r\n                            className=\"border-2 border-gray-200 rounded-md focus:ring-0 cursor-pointer\"\r\n                            checked={showTestNetworks}\r\n                            onChange={() => {}}\r\n                        />\r\n                    </li>\r\n                    {showTestNetworks &&\r\n                        Object.values(availableNetworks)\r\n                            .filter((n) => n.enable && n.test)\r\n                            .sort(sortNetworksByOrder)\r\n                            .map((option) => (\r\n                                <NetworkOption\r\n                                    key={option.chainId}\r\n                                    option={option}\r\n                                    selectedNetwork={selectedNetwork}\r\n                                    handleNetworkChange={handleNetworkChange}\r\n                                    disabled={\r\n                                        !isUserNetworkOnline &&\r\n                                        !option.name\r\n                                            .toLowerCase()\r\n                                            .includes(\"localhost\")\r\n                                    }\r\n                                />\r\n                            ))}\r\n                    <li\r\n                        className={`${\r\n                            showTestNetworks\r\n                                ? \"border-t border-t-gray-200 border-b border-b-gray-200\"\r\n                                : \"\"\r\n                        } hover:bg-gray-100`}\r\n                    >\r\n                        <ClickableText\r\n                            className={`cursor-pointer flex flex-row justify-between pl-2 pr-2 pt-1 pb-1 leading-loose items-center w-full rounded-none`}\r\n                            onClick={() =>\r\n                                history.push({\r\n                                    pathname: \"/settings/networks\",\r\n                                    state: { isFromHomePage: true },\r\n                                })\r\n                            }\r\n                        >\r\n                            Edit Networks\r\n                        </ClickableText>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NetworkSelect\r\n","export default __webpack_public_path__ + \"static/media/arrow_margin.38c8d1ea.svg\";","import { FunctionComponent } from \"react\"\r\nimport styled, { keyframes } from \"styled-components\"\r\n\r\nimport arrow from \"../../assets/images/icons/arrow_margin.svg\"\r\n\r\ninterface RotateProp {\r\n    rotate: string\r\n}\r\n\r\nconst HoverAnimation = styled.div<RotateProp>`\r\n    background-repeat: repeat;\r\n    background-position-y: 0;\r\n    a:hover > div > & {\r\n        animation: ${keyframes`\r\n      from {\r\n        background-position-y: 0;\r\n      }\r\n      to {\r\n        background-position-y: 4rem;\r\n      }\r\n    `} 0.4s backwards;\r\n    }\r\n    transform: ${(props) => `rotate(${props.rotate})`};\r\n`\r\nconst ROTATE = {\r\n    top: \"0deg\",\r\n    right: \"270deg\",\r\n    down: \"180deg\",\r\n    left: \"90deg\",\r\n}\r\ninterface ArrowHoverAnimationProps {\r\n    direction?: \"top\" | \"right\" | \"left\" | \"down\"\r\n    children?: React.ReactNode\r\n}\r\nconst ArrowHoverAnimation: FunctionComponent<ArrowHoverAnimationProps> = ({\r\n    children,\r\n    direction = \"top\",\r\n}) => (\r\n    <HoverAnimation\r\n        rotate={ROTATE[direction]}\r\n        className=\"w-full h-full\"\r\n        style={{\r\n            backgroundImage: `url(${arrow})`,\r\n            backgroundSize: \"32px 32px\",\r\n            backgroundPosition: \"center\",\r\n        }}\r\n    >\r\n        {children}\r\n    </HoverAnimation>\r\n)\r\n\r\nexport default ArrowHoverAnimation\r\n","import { useEffect, useRef } from \"react\"\r\n\r\n/**\r\n * useDOMElementObserver\r\n * This hook observes the given html node reference and invokes the callback function when it is intersected.\r\n * @param domRef DOM ref element to listen\r\n * @param fn Callback function to execute\r\n * @param deps Dpendency list to re-run the observer\r\n * @returns\r\n */\r\nconst useDOMElementObserver = (\r\n    domRef: React.RefObject<HTMLElement>,\r\n    fn: () => void,\r\n    deps?: React.DependencyList\r\n) => {\r\n    const observerRef = useRef<IntersectionObserver | null>(null)\r\n    useEffect(() => {\r\n        if (!domRef.current) return\r\n        if (observerRef.current) observerRef.current.disconnect()\r\n        observerRef.current = new IntersectionObserver(\r\n            async (entries) => {\r\n                const entry = entries[0]\r\n                if (!entry || !entry.isIntersecting) return\r\n                fn()\r\n            },\r\n            { threshold: 0.5 }\r\n        )\r\n\r\n        observerRef.current.observe(domRef.current)\r\n\r\n        return () => {\r\n            if (!observerRef.current) return\r\n\r\n            observerRef.current.disconnect()\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, deps)\r\n    return {}\r\n}\r\n\r\nexport default useDOMElementObserver\r\n","export default __webpack_public_path__ + \"static/media/dot_loading.d127823c.svg\";","export default __webpack_public_path__ + \"static/media/plus.10f24cab.svg\";","export default __webpack_public_path__ + \"static/media/unknown_token.4039721b.svg\";","const ChevronRightIcon = () => {\r\n    return (\r\n        <svg\r\n            width=\"8\"\r\n            height=\"12\"\r\n            viewBox=\"0 0 8 12\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n            <path\r\n                d=\"M7.39998 6.00039L1.99998 11.4004L0.599976 10.0004L4.59998 6.00039L0.599975 2.00039L1.99998 0.600391L7.39998 6.00039Z\"\r\n                fill=\"#0A121E\"\r\n            />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default ChevronRightIcon\r\n","import classnames from \"classnames\"\r\nimport AnimatedIcon, { AnimatedIconName } from \"../AnimatedIcon\"\r\nimport ChevronRightIcon from \"../icons/ChevronRightIcon\"\r\n\r\nconst AssetsLoadingSkeleton = () => {\r\n    return (\r\n        <>\r\n            {[...Array(2)].map((x, index) => (\r\n                <div key={index}>\r\n                    {index > 0 ? <hr /> : null}\r\n\r\n                    <div className=\"flex items-center justify-between py-5\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                            <div className=\"flex justify-center items-center h-9 w-9 rounded-full border\">\r\n                                <AnimatedIcon\r\n                                    icon={\r\n                                        AnimatedIconName.GreyCircleLoadingSkeleton\r\n                                    }\r\n                                    className={classnames(\r\n                                        \"w-4 h-4 pointer-events-none\",\r\n                                        index % 2 === 1 && \"rotate-180\"\r\n                                    )}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <AnimatedIcon\r\n                                    icon={\r\n                                        AnimatedIconName.GreyLineLoadingSkeleton\r\n                                    }\r\n                                    className=\"mb-2 h-3 w-16 rotate-180\"\r\n                                    svgClassName=\"rounded-md\"\r\n                                />\r\n                                <AnimatedIcon\r\n                                    icon={\r\n                                        AnimatedIconName.GreyLineLoadingSkeleton\r\n                                    }\r\n                                    className=\"h-3 w-24\"\r\n                                    svgClassName=\"rounded-md\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <ChevronRightIcon />\r\n                    </div>\r\n                </div>\r\n            ))}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AssetsLoadingSkeleton\r\n","function deepEqual(object1: any, object2: any) {\r\n    const keys1 = Object.keys(object1)\r\n    const keys2 = Object.keys(object2)\r\n    if (keys1.length !== keys2.length) {\r\n        return false\r\n    }\r\n    for (const key of keys1) {\r\n        const val1 = object1[key]\r\n        const val2 = object2[key]\r\n        const areObjects = isObject(val1) && isObject(val2)\r\n        if (\r\n            (areObjects && !deepEqual(val1, val2)) ||\r\n            (!areObjects && val1 !== val2)\r\n        ) {\r\n            return false\r\n        }\r\n    }\r\n    return true\r\n}\r\nfunction isObject(object: Object) {\r\n    return object != null && typeof object === \"object\"\r\n}\r\n\r\n/**\r\n * Returns true if the specified key exists in the key-value pair object.\r\n * @param key to check\r\n * @param object\r\n * @returns boolean\r\n */\r\nfunction existsKeyInObject(key: any, object: Object) {\r\n    return Object.keys(object).includes(key)\r\n}\r\n\r\n\r\n/**\r\n * Checks if a key exists in an object and if it does, returns the value. Otherwise, returns a default value.\r\n * @param object key-value pair object\r\n * @param key\r\n * @param defaultValue\r\n * @returns\r\n */\r\nfunction getValueByKey<T>(object: T, key: keyof T, defaultValue: typeof object[keyof T]) {\r\n\r\n    return existsKeyInObject(key, object)\r\n        ? object[key]\r\n        : defaultValue\r\n}\r\n\r\nexport { deepEqual, existsKeyInObject, getValueByKey }\r\n","import { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { formatCurrency, toCurrencyAmount } from \"../formatCurrency\"\r\nimport { getValueByKey } from \"../objectUtils\"\r\n\r\nconst useCurrencyFromatter = () => {\r\n    const state = useBlankState()!\r\n    const format = (\r\n        balance: BigNumber,\r\n        tokenSymbol: string,\r\n        decimals: number,\r\n        isNativeCurrency = false\r\n    ) => {\r\n        const currencyAmount = toCurrencyAmount(\r\n            balance || BigNumber.from(0),\r\n            getValueByKey(\r\n                state.exchangeRates,\r\n                isNativeCurrency ? tokenSymbol.toUpperCase() : tokenSymbol,\r\n                0\r\n            ),\r\n            decimals\r\n        )\r\n\r\n        return formatCurrency(currencyAmount, {\r\n            currency: state.nativeCurrency,\r\n            locale_info: state.localeInfo,\r\n            returnNonBreakingSpace: true,\r\n            showSymbol: true,\r\n        })\r\n    }\r\n    return { format }\r\n}\r\n\r\nexport default useCurrencyFromatter\r\n","import {\r\n    getAccountNativeTokenBalanceForChain,\r\n    fetchLatestGasPriceForChain,\r\n} from \"../commActions\"\r\nimport { useMemo, useEffect, useCallback, useState } from \"react\"\r\nimport useAsyncInvoke, { Status } from \"../../util/hooks/useAsyncInvoke\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { GasPriceData } from \"@block-wallet/background/controllers/GasPricesController\"\r\nimport { hasEnoughFundsToPayTheGasInSendTransaction } from \"../../util/bridgeUtils\"\r\nimport { useBlankState } from \"../background/backgroundHooks\"\r\n\r\nexport enum EnoughNativeTokensToSend {\r\n    UNKNOWN = \"UNKNOWN\",\r\n    ENOUGH = \"ENOUGH\",\r\n    NOT_ENOUGH = \"NOT_ENOUGH\",\r\n}\r\n\r\ninterface NativeAndGasPrices {\r\n    nativeTokenBalance: BigNumber | undefined\r\n    gasPrices: GasPriceData | undefined\r\n}\r\n\r\ninterface EnoughNativeTokenToSend {\r\n    check: () => Promise<any>\r\n    result: EnoughNativeTokensToSend | undefined\r\n    isLoading: boolean\r\n}\r\n\r\n/**\r\n * useSelectedAccountHasEnoughNativeTokensToSend\r\n *\r\n * This hooks checks the native token balance on the destination network (defined by chainId parameter) and @returns:\r\n *\r\n * check(): callback that checks the native token in the destination network and the gas prices of that network\r\n *\r\n * result: undefined if the check didn't run, \"ENOUGH\"/\"NOT_ENOUGH\" if the user has/hasn't enough balance to perform a send tx in the destination network, \"UNKNOWN\" if we can't verify the native token balance in the destination network (due to an external error or because he/she doesn't have the network in his wallet)\r\n *\r\n * isLoading: false if the check didn't run or it finished and true if it's still runinng.\r\n */\r\nexport const useSelectedAccountHasEnoughNativeTokensToSend = (\r\n    chainId: number\r\n): EnoughNativeTokenToSend => {\r\n    const { run, isLoading, data } = useAsyncInvoke<NativeAndGasPrices>({\r\n        status: Status.IDLE,\r\n    })\r\n    const [hasStarted, setHasStarted] = useState<boolean>(false)\r\n    const { isEIP1559Compatible } = useBlankState()!\r\n\r\n    const check = useCallback(() => {\r\n        return run(\r\n            new Promise<NativeAndGasPrices>(async (resolve) => {\r\n                setHasStarted(true)\r\n                const [nativeTokenBalance, gasPrices] = await Promise.all([\r\n                    getAccountNativeTokenBalanceForChain(chainId),\r\n                    fetchLatestGasPriceForChain(chainId),\r\n                ])\r\n                return resolve({\r\n                    nativeTokenBalance,\r\n                    gasPrices,\r\n                })\r\n            })\r\n        )\r\n    }, [])\r\n\r\n    return useMemo(() => {\r\n        let result = undefined\r\n        if (hasStarted && !isLoading) {\r\n            if (!data || !data.nativeTokenBalance || !data.gasPrices) {\r\n                result = EnoughNativeTokensToSend.UNKNOWN\r\n            } else {\r\n                const hasEnoughFunds =\r\n                    hasEnoughFundsToPayTheGasInSendTransaction(\r\n                        !!isEIP1559Compatible[chainId],\r\n                        data.nativeTokenBalance,\r\n                        data.gasPrices\r\n                    )\r\n                if (hasEnoughFunds === undefined) {\r\n                    result = EnoughNativeTokensToSend.UNKNOWN\r\n                } else {\r\n                    result = hasEnoughFunds\r\n                        ? EnoughNativeTokensToSend.ENOUGH\r\n                        : EnoughNativeTokensToSend.NOT_ENOUGH\r\n                }\r\n            }\r\n        }\r\n        return { isLoading, result, check }\r\n    }, [isLoading, data, check])\r\n}\r\n","import { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { Fragment, FunctionComponent, useState } from \"react\"\r\nimport { useOnMountHistory } from \"../context/hooks/useOnMount\"\r\nimport { Token } from \"@block-wallet/background/controllers/erc-20/Token\"\r\nimport { TokenList, useTokensList } from \"../context/hooks/useTokensList\"\r\nimport { formatUnits } from \"@ethersproject/units\"\r\n\r\nimport { Classes } from \"../styles/classes\"\r\nimport plus from \"../assets/images/icons/plus.svg\"\r\nimport unknownTokenIcon from \"../assets/images/unknown_token.svg\"\r\nimport ChevronRightIcon from \"./icons/ChevronRightIcon\"\r\nimport { formatRounded } from \"../util/formatRounded\"\r\nimport { ActionButton } from \"./button/ActionButton\"\r\nimport AssetsLoadingSkeleton from \"./skeleton/AssetsLoadingSkeleton\"\r\nimport useCurrencyFromatter from \"../util/hooks/useCurrencyFormatter\"\r\nimport { isNativeTokenAddress } from \"../util/tokenUtils\"\r\nimport { useBlankState } from \"../context/background/backgroundHooks\"\r\nexport type AssetItem = {\r\n    token: Token\r\n    balance: BigNumber\r\n}\r\n\r\nexport const AssetIcon: FunctionComponent<{\r\n    asset: Partial<Token>\r\n    filled?: boolean\r\n}> = ({ asset, filled }) => (\r\n    <div className={filled ? Classes.roundedFilledIcon : Classes.roundedIcon}>\r\n        {\r\n            <img\r\n                src={asset.logo || unknownTokenIcon}\r\n                onError={(e) => {\r\n                    ;(e.target as any).onerror = null\r\n                    ;(e.target as any).src = unknownTokenIcon\r\n                }}\r\n                alt={asset.symbol || \"\"}\r\n                className=\"rounded-full\"\r\n            />\r\n        }\r\n    </div>\r\n)\r\n\r\nconst Asset: FunctionComponent<{\r\n    asset: AssetItem\r\n    pushDeleteTokens: Function\r\n}> = ({ asset }) => {\r\n    const history: any = useOnMountHistory()\r\n    const formatter = useCurrencyFromatter()\r\n    return (\r\n        <div\r\n            onClick={() =>\r\n                history.push({\r\n                    pathname: `/asset/details`,\r\n                    state: {\r\n                        address: asset.token.address,\r\n                        transitionDirection: \"left\",\r\n                    },\r\n                })\r\n            }\r\n            className=\"flex flex-row items-center justify-between px-6 py-5 -ml-6 transition duration-300 hover:bg-primary-100 hover:bg-opacity-50 active:bg-primary-200 active:bg-opacity-50 cursor-pointer\"\r\n            style={{ width: \"calc(100% + 2 * 1.5rem)\" }}\r\n            role=\"listitem\"\r\n            aria-label={asset.token.symbol}\r\n        >\r\n            <div className=\"flex flex-row items-center\">\r\n                <AssetIcon asset={asset.token} />\r\n                <div className=\"flex flex-col ml-2\">\r\n                    <span\r\n                        className=\"text-sm font-bold\"\r\n                        title={`\r\n                                    ${formatUnits(\r\n                                        asset.balance || \"0\",\r\n                                        asset.token.decimals\r\n                                    )} ${asset.token.symbol}\r\n                                `}\r\n                    >\r\n                        {`\r\n                                    ${formatRounded(\r\n                                        formatUnits(\r\n                                            asset.balance || \"0\",\r\n                                            asset.token.decimals\r\n                                        ),\r\n                                        4\r\n                                    )}\r\n                                    ${asset.token.symbol}\r\n                                `}\r\n                    </span>\r\n                    <span className=\"text-xs text-gray-600\">\r\n                        {formatter.format(\r\n                            asset.balance || BigNumber.from(0),\r\n                            asset.token.symbol,\r\n                            asset.token.decimals,\r\n                            isNativeTokenAddress(asset.token.address)\r\n                        )}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div className=\"flex flex-col items-end\">\r\n                <ChevronRightIcon />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst SubAssetList: FunctionComponent<{ assets: TokenList }> = ({ assets }) => {\r\n    const state = useBlankState()!\r\n\r\n    const isLoading =\r\n        state.isNetworkChanging || state.isRatesChangingAfterNetworkChange\r\n\r\n    const [deletedTokens, setDeletedTokens] = useState([] as string[])\r\n    const pushDeleteTokens = (deleteToken: string) => {\r\n        setDeletedTokens([...deletedTokens, deleteToken])\r\n    }\r\n\r\n    // the action of delete a token is not sync, we include this blick of code for not showing deleted tokens while they are being deleted.\r\n    const newDeleted: string[] = []\r\n    deletedTokens.forEach((t) => {\r\n        if (assets.map((a) => a.token.address).includes(t)) {\r\n            newDeleted.push(t)\r\n        }\r\n    })\r\n    if (deletedTokens.length !== newDeleted.length) {\r\n        setDeletedTokens(newDeleted)\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className=\"flex flex-col flex-1 w-full space-y-0\"\r\n            role=\"list\"\r\n            aria-label=\"assets\"\r\n        >\r\n            {isLoading ? (\r\n                <AssetsLoadingSkeleton />\r\n            ) : (\r\n                assets\r\n                    .filter((t) => !deletedTokens.includes(t.token.address))\r\n                    .map((a, i) => (\r\n                        <Fragment key={i}>\r\n                            {i > 0 ? <hr /> : null}\r\n                            <Asset\r\n                                asset={a}\r\n                                pushDeleteTokens={pushDeleteTokens}\r\n                            />\r\n                        </Fragment>\r\n                    ))\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst AssetsList = () => {\r\n    const { currentNetworkTokens, nativeToken } = useTokensList()\r\n\r\n    const tokens = [nativeToken].concat(currentNetworkTokens)\r\n\r\n    // Top spacing for network labels: \"pt-6\"\r\n    return (\r\n        <div\r\n            className=\"flex flex-col w-full space-y-4\"\r\n            data-testid=\"assets-list\"\r\n        >\r\n            {tokens.length > 9 && (\r\n                <div className=\"flex flex-col w-full mt-4\">\r\n                    <ActionButton\r\n                        icon={plus}\r\n                        label=\"Add Token\"\r\n                        to=\"/settings/tokens/add\"\r\n                    />\r\n                </div>\r\n            )}\r\n            <div className=\"flex flex-col w-full space-y-1\">\r\n                {/* Network label */}\r\n                {/* <span className=\"text-xs text-gray-500\">ETHEREUM</span> */}\r\n                <SubAssetList assets={tokens} />\r\n            </div>\r\n            <div className=\"flex flex-col w-full space-y-1\">\r\n                <ActionButton\r\n                    icon={plus}\r\n                    label=\"Add Token\"\r\n                    to=\"/settings/tokens/add\"\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AssetsList\r\n","export const getDisplayTime = (time?: Date) => {\r\n    if (!time || !time.getTime()) return \"\"\r\n\r\n    const checkTime: Date = time\r\n\r\n    const checkTimeHours: string = checkTime.toLocaleTimeString(undefined, {\r\n        timeStyle: \"short\",\r\n    })\r\n\r\n    const today: Date = new Date()\r\n    const yesterday: Date = new Date(\r\n        new Date().setDate(new Date().getDate() - 1)\r\n    )\r\n\r\n    const isToday: boolean =\r\n        checkTime.getDate() === today.getDate() &&\r\n        checkTime.getMonth() === today.getMonth() &&\r\n        checkTime.getFullYear() === today.getFullYear()\r\n    const isYesterday: boolean =\r\n        checkTime.getDate() === yesterday.getDate() &&\r\n        checkTime.getMonth() === yesterday.getMonth() &&\r\n        checkTime.getFullYear() === yesterday.getFullYear()\r\n\r\n    const options: Intl.DateTimeFormatOptions = {\r\n        year:\r\n            checkTime.getFullYear() !== today.getFullYear()\r\n                ? \"2-digit\"\r\n                : undefined,\r\n        month: \"short\",\r\n        day: \"numeric\",\r\n        hour: \"numeric\",\r\n        minute: \"numeric\",\r\n    }\r\n\r\n    return isToday\r\n        ? `Today, ${checkTimeHours}`\r\n        : isYesterday\r\n        ? `Yesterday, ${checkTimeHours}`\r\n        : checkTime.toLocaleString(undefined, options)\r\n}\r\n","import { formatUnits } from \"@ethersproject/units\"\r\nimport { TransferType } from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport { formatRounded } from \"./formatRounded\"\r\n\r\nconst formatTransactionValue = (\r\n    { amount, currency, decimals }: TransferType,\r\n    round = false,\r\n    roundDecimals = 6\r\n) => {\r\n    const value = formatUnits(amount, decimals)\r\n    return [\r\n        `${round ? formatRounded(value, roundDecimals) : value}`,\r\n        currency.toUpperCase(),\r\n    ]\r\n}\r\n\r\nexport default formatTransactionValue\r\n","import { TransactionMeta } from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport { createCustomExplorerLink } from \"@block-wallet/explorer-link\"\r\nimport { useEffect, useState } from \"react\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { getSpecificChainDetails } from \"../../context/commActions\"\r\nimport { TransactionCategories } from \"../../context/commTypes\"\r\n\r\ninterface ChainExplorerData {\r\n    networkName: string\r\n    blockExplorerUrl?: string\r\n    explorerName?: string\r\n    chainId: number\r\n}\r\n\r\nconst BRIDGE_TX_CATEGORIES = [\r\n    TransactionCategories.BRIDGE,\r\n    TransactionCategories.INCOMING_BRIDGE,\r\n    TransactionCategories.INCOMING_BRIDGE_REFUND,\r\n]\r\n\r\ninterface BridgeTxDetails {\r\n    networkName: string\r\n    chainId: number\r\n    explorerLink?: string\r\n    explorerName?: string\r\n}\r\n\r\nexport interface BridgeTransactionsData {\r\n    sendingTransaction?: BridgeTxDetails\r\n    receivingTransaction?: BridgeTxDetails\r\n}\r\n\r\nconst useGetBridgeTransactionsData = (\r\n    transaction?: TransactionMeta | Partial<TransactionMeta>\r\n): BridgeTransactionsData | null => {\r\n    const { availableNetworks } = useBlankState()!\r\n\r\n    const [bridgeDetails, setBridgeDetails] =\r\n        useState<BridgeTransactionsData | null>(null)\r\n\r\n    useEffect(() => {\r\n        async function getChainData(chainId: number) {\r\n            const network = Object.values(availableNetworks).find((network) => {\r\n                return Number(network.chainId) === Number(chainId)\r\n            })\r\n            let chainData: ChainExplorerData | null = null\r\n\r\n            if (network) {\r\n                chainData = {\r\n                    networkName: network.desc!,\r\n                    explorerName: network.blockExplorerName,\r\n                    chainId,\r\n                    blockExplorerUrl:\r\n                        network.blockExplorerUrls &&\r\n                        network.blockExplorerUrls.length > 0\r\n                            ? network.blockExplorerUrls[0]\r\n                            : undefined,\r\n                }\r\n            } else {\r\n                const chain = await getSpecificChainDetails(Number(chainId))\r\n                if (chain) {\r\n                    const explorer =\r\n                        chain.explorers && chain.explorers.length > 0\r\n                            ? chain.explorers[0]\r\n                            : undefined\r\n                    chainData = {\r\n                        chainId,\r\n                        networkName: chain.name!,\r\n                        explorerName: explorer?.name,\r\n                        blockExplorerUrl: undefined, //Use txLink in this case.\r\n                    }\r\n                }\r\n            }\r\n            return chainData\r\n        }\r\n\r\n        function getBridgeDetails(\r\n            chainData: ChainExplorerData,\r\n            txHash: string,\r\n            txLink: string\r\n        ): BridgeTxDetails {\r\n            return {\r\n                networkName: chainData.networkName,\r\n                chainId: chainData.chainId,\r\n                explorerLink:\r\n                    chainData.blockExplorerUrl && txHash\r\n                        ? createCustomExplorerLink(\r\n                              txHash,\r\n                              chainData.blockExplorerUrl\r\n                          )\r\n                        : txLink,\r\n                explorerName: chainData.explorerName || \"Explorer\",\r\n            }\r\n        }\r\n\r\n        async function fillBridgeDetails() {\r\n            const { bridgeParams } = transaction!\r\n            if (!bridgeParams) {\r\n                return\r\n            }\r\n\r\n            const sendingChainData = await getChainData(\r\n                bridgeParams!.fromChainId\r\n            )\r\n            const receivingChainData = await getChainData(\r\n                bridgeParams!.effectiveToChainId ?? bridgeParams!.toChainId\r\n            )\r\n\r\n            const bridgeDetails = {\r\n                sendingTransaction: sendingChainData\r\n                    ? getBridgeDetails(\r\n                          sendingChainData,\r\n                          bridgeParams?.sendingTxHash!,\r\n                          bridgeParams?.sendingTxLink!\r\n                      )\r\n                    : undefined,\r\n                receivingTransaction: receivingChainData\r\n                    ? getBridgeDetails(\r\n                          receivingChainData,\r\n                          bridgeParams?.receivingTxHash!,\r\n                          bridgeParams?.receivingTxLink!\r\n                      )\r\n                    : undefined,\r\n            }\r\n\r\n            setBridgeDetails(bridgeDetails)\r\n        }\r\n\r\n        if (\r\n            transaction &&\r\n            BRIDGE_TX_CATEGORIES.includes(\r\n                transaction.transactionCategory! || \"\"\r\n            ) &&\r\n            transaction.bridgeParams\r\n        ) {\r\n            fillBridgeDetails()\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [transaction?.bridgeParams])\r\n\r\n    return bridgeDetails\r\n}\r\n\r\nexport default useGetBridgeTransactionsData\r\n","import { FC, ReactNode, useState } from \"react\"\r\nimport classnames from \"classnames\"\r\nimport { ArrowUpDown } from \"../icons/ArrowUpDown\"\r\n\r\ninterface ExpandableItem {\r\n    children: ReactNode\r\n    expanded: ReactNode\r\n    className?: string\r\n    expandable: boolean\r\n    defaultExpanded?: boolean\r\n}\r\nconst ExpandableItem: FC<ExpandableItem> = ({\r\n    children,\r\n    expanded,\r\n    className,\r\n    expandable,\r\n    defaultExpanded = false,\r\n}) => {\r\n    const [isExpanded, setIsExpanded] = useState<boolean>(defaultExpanded)\r\n    return (\r\n        <div className=\"flex flex-col space-y-0.5\">\r\n            <div\r\n                onClick={() => {\r\n                    setIsExpanded((prev) => !prev)\r\n                }}\r\n                className={classnames(\r\n                    \"flex items-center flex-row space-x-2\",\r\n                    expandable ? \"cursor-pointer\" : \"cursor-default\",\r\n                    className\r\n                )}\r\n            >\r\n                {expandable && <ArrowUpDown active={isExpanded} />}\r\n                <span className=\"ml-1\">{children}</span>\r\n            </div>\r\n            {expandable && isExpanded && (\r\n                <span className={classnames(\"p-0.5\")}>{expanded}</span>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ExpandableItem\r\n","import { IToken } from \"@block-wallet/background/controllers/erc-20/Token\"\r\nimport { formatUnits } from \"@ethersproject/units\"\r\nimport classnames from \"classnames\"\r\nimport { useState } from \"react\"\r\nimport { formatRounded } from \"../../util/formatRounded\"\r\nimport { ArrowUpDown } from \"../icons/ArrowUpDown\"\r\nimport { IBridgeFeeCost } from \"@block-wallet/background/utils/bridgeApi\"\r\nimport ExpandableItem from \"./ExpandableItem\"\r\n\r\ntype Unpacked<T> = T extends (infer U)[]\r\n    ? U\r\n    : T extends (...args: any[]) => infer U\r\n    ? U\r\n    : T extends Promise<infer U>\r\n    ? U\r\n    : T\r\n\r\nconst FeeItem = ({\r\n    detail,\r\n    token,\r\n    expandable = true,\r\n}: {\r\n    detail: Unpacked<IBridgeFeeCost[\"details\"]>\r\n    token: IToken\r\n    expandable: boolean\r\n}) => {\r\n    const amountStr = `${formatRounded(\r\n        formatUnits(detail.amount, token.decimals),\r\n        4\r\n    )} ${token.symbol}`\r\n    return (\r\n        <li>\r\n            <ExpandableItem\r\n                expandable={expandable}\r\n                expanded={\r\n                    <i className=\"ml-1 text-gray-500\">\r\n                        {detail.description ?? detail.name}\r\n                    </i>\r\n                }\r\n            >\r\n                <div>\r\n                    <span className=\"font-bold\">{detail.name}:</span>\r\n                    <span className=\"ml-1\">{amountStr}</span>\r\n                </div>\r\n            </ExpandableItem>\r\n        </li>\r\n    )\r\n}\r\n\r\nexport default FeeItem\r\n","import { IBridgeFeeCost } from \"@block-wallet/background/utils/bridgeApi\"\r\nimport { formatUnits } from \"@ethersproject/units\"\r\nimport React from \"react\"\r\nimport { formatRounded } from \"../../util/formatRounded\"\r\nimport FeeItem from \"./FeeItem\"\r\n\r\nconst FeeTokenSummaryDisplay = ({\r\n    feeDetail,\r\n    expandable = true,\r\n}: {\r\n    feeDetail: IBridgeFeeCost\r\n    expandable?: boolean\r\n}) => {\r\n    return (\r\n        <div>\r\n            <span className=\"text-xs text-gray-500 font-bold\">\r\n                {formatRounded(\r\n                    formatUnits(feeDetail.total, feeDetail.token.decimals),\r\n                    4\r\n                )}{\" \"}\r\n                {feeDetail.token.symbol}\r\n            </span>\r\n            <ul className=\"pl-1 pt-1 flex space-y-2 flex-col\">\r\n                {feeDetail.details?.map((fee) => {\r\n                    return (\r\n                        <React.Fragment key={fee.name}>\r\n                            <FeeItem\r\n                                detail={fee}\r\n                                token={feeDetail.token}\r\n                                expandable={!!fee.description}\r\n                            />\r\n                        </React.Fragment>\r\n                    )\r\n                })}\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FeeTokenSummaryDisplay\r\n","import { TransactionMeta } from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport { IBridgeFeeCost } from \"@block-wallet/background/utils/bridgeApi\"\r\nimport { FC, Fragment } from \"react\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport { BridgeTransactionsData } from \"../../util/hooks/useGetBridgeTransactionsData\"\r\nimport Divider from \"../Divider\"\r\nimport ExpandableItem from \"./ExpandableItem\"\r\nimport FeeTokenSummaryDisplay from \"./FeeTokenSummaryDisplay\"\r\n\r\ntype FeesByChain = Record<string, IBridgeFeeCost[]>\r\n\r\nconst groupFeesByChain = (\r\n    fees: IBridgeFeeCost[],\r\n    currentChainId: number\r\n): FeesByChain => {\r\n    const feesByChain = fees.reduce<FeesByChain>((acc, fee) => {\r\n        const chainFees = acc[fee.chainId.toString()] || []\r\n        return {\r\n            ...acc,\r\n            [fee.chainId.toString()]: [...chainFees, fee],\r\n        }\r\n    }, {})\r\n\r\n    const sortedKeys = Object.keys(feesByChain).sort((a, b) =>\r\n        Number(a) === currentChainId ? -1 : Number(b) === currentChainId ? 1 : 0\r\n    )\r\n    const sortedObj = sortedKeys.reduce<FeesByChain>(\r\n        (acc: FeesByChain, key: string) => {\r\n            //put an space to avoid JS autosorting numeric key.\r\n            acc[\" \" + key.toString()] = feesByChain[key.toString()]\r\n            return acc\r\n        },\r\n        {}\r\n    )\r\n    return sortedObj\r\n}\r\n\r\nconst BridgeDetilsFees: FC<{\r\n    transaction: Partial<TransactionMeta>\r\n    bridgeTransactionsData: BridgeTransactionsData | null\r\n}> = ({ transaction, bridgeTransactionsData }) => {\r\n    const { chainId } = useSelectedNetwork()\r\n    if (!transaction.bridgeParams) {\r\n        return null\r\n    }\r\n    const feeCosts = transaction.bridgeParams?.feeCosts || []\r\n    const fees = groupFeesByChain(feeCosts, chainId)\r\n    const getChainName = (chainId: number): string => {\r\n        const { receivingTransaction, sendingTransaction } =\r\n            bridgeTransactionsData || {}\r\n        if (sendingTransaction?.chainId === chainId) {\r\n            return sendingTransaction.networkName\r\n        }\r\n        if (receivingTransaction?.chainId === chainId) {\r\n            return receivingTransaction.networkName\r\n        }\r\n        return chainId.toString()\r\n    }\r\n    return (\r\n        <div className=\"flex-1 flex flex-col\">\r\n            <main className=\"p-2\">\r\n                {fees && Object.keys(fees).length > 0 ? (\r\n                    <div className=\"flex flex-col\">\r\n                        {Object.entries(fees).map(([chainId, fees], index) => (\r\n                            <Fragment key={chainId}>\r\n                                {index !== 0 && (\r\n                                    <Divider className=\"mt-3 mb-3\" />\r\n                                )}\r\n                                <span>\r\n                                    <ExpandableItem\r\n                                        expandable\r\n                                        defaultExpanded\r\n                                        expanded={\r\n                                            <div className=\"ml-2\">\r\n                                                {fees.map((fee) => (\r\n                                                    <div\r\n                                                        key={fee.token.address}\r\n                                                    >\r\n                                                        <FeeTokenSummaryDisplay\r\n                                                            feeDetail={fee}\r\n                                                        />\r\n                                                    </div>\r\n                                                ))}\r\n                                            </div>\r\n                                        }\r\n                                    >\r\n                                        <span className=\"text-sm font-bold\">\r\n                                            {getChainName(Number(chainId))}\r\n                                        </span>\r\n                                    </ExpandableItem>\r\n                                </span>\r\n                            </Fragment>\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <span className=\"text-gray-500\">\r\n                        There are no fees for this operation!\r\n                    </span>\r\n                )}\r\n            </main>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BridgeDetilsFees\r\n","import {\r\n    GetBridgeQuoteResponse,\r\n    GetBridgeQuoteNotFoundResponse,\r\n} from \"@block-wallet/background/controllers/BridgeController\"\r\nimport { GasPriceData } from \"@block-wallet/background/controllers/GasPricesController\"\r\nimport { IBridgeRoute } from \"@block-wallet/background/utils/bridgeApi\"\r\nimport { IChain } from \"@block-wallet/background/utils/types/chain\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport {\r\n    BridgeImplementation,\r\n    BridgeStatus,\r\n    BridgeSubstatus,\r\n    MetaType,\r\n    TransactionCategories,\r\n    TransactionStatus,\r\n} from \"../context/commTypes\"\r\nimport { RichedTransactionMeta } from \"./transactionUtils\"\r\nimport { SEND_GAS_COST } from \"../util/constants\"\r\nimport { getTransactionFees } from \"../util/gasPrice\"\r\nimport { EnoughNativeTokensToSend } from \"../context/hooks/useSelectedAccountHasEnoughNativeTokensToSend\"\r\nimport { Network } from \"@block-wallet/background/utils/constants/networks\"\r\nimport {\r\n    BridgeTransactionParams,\r\n    TransactionMeta,\r\n} from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport { DetailedItem } from \"../components/transactions/TransactionDetailsList\"\r\nimport { BridgeTransactionsData } from \"./hooks/useGetBridgeTransactionsData\"\r\nimport isNil from \"./isNil\"\r\nimport { formatUnits } from \"@ethersproject/units\"\r\nimport { bnOr0 } from \"./numberUtils\"\r\n\r\nconst LIFI_NATIVE_ADDRESS = \"0x0000000000000000000000000000000000000000\"\r\n\r\nexport type BridgeWarningMessage = {\r\n    title: string\r\n    body: string\r\n}\r\n\r\nexport const BRIDGE_PENDING_STATUS = [\r\n    BridgeStatus.PENDING,\r\n    BridgeStatus.NOT_FOUND,\r\n]\r\n\r\nexport const isBridgeNativeTokenAddress = (address: string): boolean => {\r\n    const parsedAddress = checkForBridgeNativeAsset(address)\r\n    return parsedAddress.toLowerCase() === LIFI_NATIVE_ADDRESS.toLowerCase()\r\n}\r\n\r\nexport const checkForBridgeNativeAsset = (address: string): string => {\r\n    if (address === \"0x0\") {\r\n        return LIFI_NATIVE_ADDRESS\r\n    }\r\n\r\n    return address\r\n}\r\n\r\nexport const getRouteForNetwork = (\r\n    availableRoutes: IBridgeRoute[],\r\n    network?: IChain\r\n): IBridgeRoute | undefined => {\r\n    if (!network) {\r\n        return undefined\r\n    }\r\n\r\n    return availableRoutes.filter((route) => route.toChainId === network.id)[0]\r\n}\r\n\r\n/**\r\n * Simulates a complete transaction object to display details\r\n */\r\nexport const populateBridgeTransaction = (\r\n    bridgeQuote: GetBridgeQuoteResponse\r\n): RichedTransactionMeta => {\r\n    return {\r\n        id: \"\",\r\n        status: TransactionStatus.UNAPPROVED,\r\n        time: 1,\r\n        blocksDropCount: 1,\r\n        metaType: MetaType.REGULAR,\r\n        loadingGasValues: false,\r\n        transactionParams: {\r\n            from: bridgeQuote.bridgeParams.params.transactionRequest.from,\r\n            to: bridgeQuote.bridgeParams.params.transactionRequest.to,\r\n        },\r\n        transactionCategory: TransactionCategories.BRIDGE,\r\n        methodSignature: bridgeQuote.bridgeParams.methodSignature,\r\n        bridgeParams: {\r\n            bridgeImplementation: BridgeImplementation.LIFI_BRIDGE,\r\n            fromToken: bridgeQuote.bridgeParams.params.fromToken,\r\n            toToken: bridgeQuote.bridgeParams.params.toToken,\r\n            fromTokenAmount: bridgeQuote.bridgeParams.params.fromAmount,\r\n            toTokenAmount: bridgeQuote.bridgeParams.params.toAmount,\r\n            fromChainId: bridgeQuote.bridgeParams.params.fromChainId,\r\n            toChainId: bridgeQuote.bridgeParams.params.toChainId,\r\n            tool: bridgeQuote.bridgeParams.params.tool,\r\n            role: \"SENDING\",\r\n            feeCosts: bridgeQuote.bridgeParams.params.feeCosts,\r\n            slippage: bridgeQuote.bridgeParams.params.slippage,\r\n            estimatedDurationInSeconds:\r\n                bridgeQuote.bridgeParams.params.estimatedDurationInSeconds,\r\n        },\r\n    }\r\n}\r\n\r\nexport const hasEnoughFundsToPayTheGasInSendTransaction = (\r\n    isEIP1559Compatible: boolean,\r\n    balance: BigNumber,\r\n    gasPricesData: GasPriceData\r\n): boolean | undefined => {\r\n    const transactionFees = getTransactionFees(\r\n        isEIP1559Compatible,\r\n        gasPricesData.gasPricesLevels.average,\r\n        gasPricesData.estimatedBaseFee!,\r\n        SEND_GAS_COST\r\n    )\r\n    if (transactionFees === undefined) {\r\n        return undefined\r\n    }\r\n    return BigNumber.from(balance).gte(\r\n        BigNumber.from(transactionFees?.totalTransactionCost)\r\n    )\r\n}\r\n\r\nexport const isBridgeQuoteNotFoundError = (e: Error): boolean => {\r\n    return e.name === \"QuoteNotFoundError\"\r\n}\r\n\r\nexport const isANotFoundQuote = (\r\n    quote: GetBridgeQuoteResponse | GetBridgeQuoteNotFoundResponse\r\n) => {\r\n    return \"errors\" in quote\r\n}\r\n\r\nexport const getBridgeWarningMessages = (\r\n    nativeTokenStatus: EnoughNativeTokensToSend,\r\n    network: Network | undefined\r\n): BridgeWarningMessage | undefined => {\r\n    switch (nativeTokenStatus) {\r\n        case EnoughNativeTokensToSend.ENOUGH: {\r\n            return undefined\r\n        }\r\n        case EnoughNativeTokensToSend.NOT_ENOUGH: {\r\n            const title = \"Your funds may get stuck!\"\r\n            const networkNativeToken = network\r\n                ? network.nativeCurrency.symbol\r\n                : \"native token\"\r\n            const networkName = network\r\n                ? network.desc\r\n                : \"the destination network\"\r\n            const body = `We noticed you don't have enough ${networkNativeToken} on ${networkName} to cover minimum gas fees.`\r\n            return { title: title, body: body }\r\n        }\r\n        case EnoughNativeTokensToSend.UNKNOWN: {\r\n            if (!network || !network.enable) {\r\n                return {\r\n                    title: \"Destination network not detected!\",\r\n                    body: \"We noticed you haven't added the destination network to your wallet. Please ensure you have enough native token on destination network to cover minimum gas fees so your funds do not get stuck.\",\r\n                }\r\n            } else {\r\n                return {\r\n                    title: \"Gas prices currently unavailable\",\r\n                    body: `Due to external issues we're unable to retrieve current gas prices on ${network.name}. Please try again in a few moments.`,\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport const buildBridgeDetailedItems = (\r\n    transaction: TransactionMeta,\r\n    birdgeTransactionsData: BridgeTransactionsData | null\r\n): DetailedItem[] => {\r\n    let details: DetailedItem[] = []\r\n    const { bridgeParams, status } = transaction\r\n    if (!bridgeParams) {\r\n        return []\r\n    }\r\n\r\n    const bridgeSendingChainLabel =\r\n        birdgeTransactionsData?.sendingTransaction?.networkName ||\r\n        bridgeParams.fromChainId.toString()\r\n    const bridgeReceivingChainLabel =\r\n        birdgeTransactionsData?.receivingTransaction?.networkName ||\r\n        bridgeParams.toChainId.toString()\r\n\r\n    const isConfirmed = status === TransactionStatus.CONFIRMED\r\n\r\n    details.push({\r\n        label: \"Origin network\",\r\n        value: bridgeSendingChainLabel,\r\n    })\r\n\r\n    details.push({\r\n        label: \"Destination network\",\r\n        value: bridgeReceivingChainLabel,\r\n    })\r\n\r\n    details.push({\r\n        label: isConfirmed ? \"Sent\" : \"Sending\",\r\n        value: formatUnits(\r\n            bnOr0(bridgeParams.fromTokenAmount),\r\n            bridgeParams.fromToken.decimals\r\n        ),\r\n        decimals: 10,\r\n        unitName: bridgeParams.fromToken.symbol,\r\n    })\r\n\r\n    if (\r\n        bridgeParams.effectiveToToken &&\r\n        [BridgeSubstatus.PARTIAL, BridgeSubstatus.REFUNDED].includes(\r\n            bridgeParams.substatus! || \"\"\r\n        ) &&\r\n        bridgeParams.effectiveToToken.address.toLowerCase() !==\r\n            bridgeParams.toToken.address.toLowerCase()\r\n    ) {\r\n        const bridgedAmount = formatUnits(\r\n            bnOr0(bridgeParams.toTokenAmount),\r\n            bridgeParams.toToken.decimals\r\n        )\r\n        details.push({\r\n            label: \"Bridged amount\",\r\n            value: bridgedAmount,\r\n            decimals: 10,\r\n            info: `${bridgedAmount} ${bridgeParams.toToken.symbol} is the sent amount substracting the bridge fees. You can check the fees in the 'Fees' tab.`,\r\n            unitName: bridgeParams.toToken.symbol,\r\n        })\r\n\r\n        let labelForFinalState = \"Received amount\"\r\n        if (bridgeParams.substatus === BridgeSubstatus.REFUNDED) {\r\n            labelForFinalState = \"Refunded amount\"\r\n        }\r\n        details.push({\r\n            label: labelForFinalState,\r\n            value: formatUnits(\r\n                bnOr0(bridgeParams.effectiveToTokenAmount),\r\n                bridgeParams.effectiveToToken.decimals\r\n            ),\r\n            decimals: 10,\r\n            unitName: bridgeParams.effectiveToToken.symbol,\r\n        })\r\n    } else {\r\n        details.push({\r\n            label: isConfirmed ? \"Received\" : \"Receiving\",\r\n            value: formatUnits(\r\n                bnOr0(\r\n                    bridgeParams.effectiveToTokenAmount ||\r\n                        bridgeParams.toTokenAmount\r\n                ),\r\n                bridgeParams.toToken.decimals\r\n            ),\r\n            decimals: 10,\r\n            unitName: bridgeParams.toToken.symbol,\r\n        })\r\n    }\r\n\r\n    details.push({\r\n        label: \"Tool\",\r\n        value: bridgeParams.tool,\r\n    })\r\n\r\n    details.push({\r\n        label: \"Slippage\",\r\n        value: bridgeParams.slippage * 100 + \"%\" || \"unknown\",\r\n    })\r\n\r\n    return details\r\n}\r\n\r\nexport const getBridgePendingMessage = (\r\n    bridgeParams: BridgeTransactionParams,\r\n    destinationNetworkName?: string\r\n): { label: string; info?: string } | null => {\r\n    if (bridgeParams.status === BridgeStatus.NOT_FOUND) {\r\n        return {\r\n            label: \"Processing bridge\",\r\n        }\r\n    }\r\n    if (bridgeParams.status === BridgeStatus.PENDING) {\r\n        switch (bridgeParams.substatus) {\r\n            case BridgeSubstatus.NOT_PROCESSABLE_REFUND_NEEDED:\r\n            case BridgeSubstatus.REFUND_IN_PROGRESS:\r\n                return {\r\n                    label: \"Refund in progress\",\r\n                    info: \"The bridge has failed and there in course as a refund of the amount sent.\",\r\n                }\r\n            case BridgeSubstatus.CHAIN_NOT_AVAILABLE:\r\n            case BridgeSubstatus.BRIDGE_NOT_AVAILABLE:\r\n            case BridgeSubstatus.UNKNOWN_ERROR:\r\n            case BridgeSubstatus.WAIT_SOURCE_CONFIRMATIONS: {\r\n                return {\r\n                    label: \"Processing bridge\",\r\n                }\r\n            }\r\n            case BridgeSubstatus.WAIT_DESTINATION_TRANSACTION: {\r\n                return {\r\n                    label: `Waiting for ${\r\n                        destinationNetworkName || \"destination network\"\r\n                    } transaction`,\r\n                    info: `The sending transaction is mined and we're awaiting for the ${destinationNetworkName} transaction to be processed.`,\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return null\r\n}\r\n","import { TransactionMeta } from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport { FC, ReactNode } from \"react\"\r\nimport { BridgeStatus, BridgeSubstatus } from \"../../context/commTypes\"\r\nimport {\r\n    BRIDGE_PENDING_STATUS,\r\n    getBridgePendingMessage,\r\n} from \"../../util/bridgeUtils\"\r\nimport useGetBridgeTransactionsData from \"../../util/hooks/useGetBridgeTransactionsData\"\r\nimport GenericTooltip from \"../label/GenericTooltip\"\r\nimport Spinner from \"../spinner/ThinSpinner\"\r\n\r\nconst Status: FC<{ children: ReactNode }> = ({ children }) => {\r\n    return (\r\n        <span className=\"flex flex-row items-center justify-end w-40\">\r\n            {children}\r\n        </span>\r\n    )\r\n}\r\n\r\nconst BridgeCompletedStatus = () => {\r\n    return (\r\n        <Status>\r\n            <span className=\"relative inline-flex rounded-full h-2 w-2 mr-2 animate-pulse bg-green-400 pointer-events-none\"></span>\r\n            <span className=\"text-green-600\">Completed</span>\r\n        </Status>\r\n    )\r\n}\r\n\r\nconst BridgePartiallyCompletedStatus = () => {\r\n    return (\r\n        <Status>\r\n            <GenericTooltip\r\n                divFull={false}\r\n                className=\"!w-60 !break-word !whitespace-normal !border !z-50\"\r\n                bottom\r\n                content=\"The token you received is not the one you requested.\"\r\n            >\r\n                <span className=\"relative inline-flex rounded-full h-2 w-2 mr-2 animate-pulse bg-yellow-400 pointer-events-none\"></span>\r\n                <span className=\"text-yellow-600\">Partially completed</span>\r\n            </GenericTooltip>\r\n        </Status>\r\n    )\r\n}\r\n\r\nconst BridgeRefundedStatus = () => {\r\n    return (\r\n        <GenericTooltip\r\n            divFull={false}\r\n            className=\"!w-60 !break-word !whitespace-normal !border !z-50\"\r\n            bottom\r\n            content=\"The bridge operation failed and the amount you sent have been refunded to the Origin network.\"\r\n        >\r\n            <span className=\"relative inline-flex rounded-full h-2 w-2 mr-2 animate-pulse bg-orange-400 pointer-events-none\"></span>\r\n            <span className=\"text-orange-600\">Refunded</span>\r\n        </GenericTooltip>\r\n    )\r\n}\r\n\r\nconst ErroredBridgeStatus = () => {\r\n    return (\r\n        <Status>\r\n            <span className=\"relative inline-flex rounded-full h-2 w-2 mr-2 animate-pulse bg-red-400 pointer-events-none\" />\r\n            <span className=\"text-red-600\">Failed</span>\r\n        </Status>\r\n    )\r\n}\r\n\r\nconst NotInitializedBridgeStatus = () => {\r\n    return (\r\n        <Status>\r\n            <span className=\"relative inline-flex rounded-full h-2 w-2 mr-2 animate-pulse bg-gray-400 pointer-events-none\" />\r\n            <span className=\"text-gray-600\">Not initialized</span>\r\n        </Status>\r\n    )\r\n}\r\n\r\nconst PendingBridgeStatus: FC<{ transaction: Partial<TransactionMeta> }> = ({\r\n    transaction,\r\n}) => {\r\n    const bridgeTransactionsData = useGetBridgeTransactionsData(transaction)\r\n    const pendingMessage = getBridgePendingMessage(\r\n        transaction.bridgeParams!,\r\n        bridgeTransactionsData?.receivingTransaction?.networkName\r\n    )\r\n    if (!pendingMessage) {\r\n        return null\r\n    }\r\n    return (\r\n        <GenericTooltip content={pendingMessage?.info ?? \"\"}>\r\n            <Status>\r\n                <Spinner color=\"text-blue-200\" size=\"1rem\" />\r\n                <span className=\"whitespace-nowrap text-ellipsis overflow-hidden text-blue-600 ml-1 max-w-[200px]\">\r\n                    {pendingMessage.label}\r\n                </span>\r\n            </Status>\r\n        </GenericTooltip>\r\n    )\r\n}\r\n\r\nconst BridgeDetailsStatus: FC<{\r\n    transaction: TransactionMeta | Partial<TransactionMeta>\r\n}> = ({ transaction }) => {\r\n    if (transaction.bridgeParams && !transaction.bridgeParams?.status) {\r\n        return <NotInitializedBridgeStatus />\r\n    }\r\n\r\n    if (transaction.bridgeParams?.status === BridgeStatus.FAILED) {\r\n        return <ErroredBridgeStatus />\r\n    }\r\n\r\n    if (transaction.bridgeParams?.status === BridgeStatus.DONE) {\r\n        switch (transaction.bridgeParams.substatus) {\r\n            case BridgeSubstatus.COMPLETED: {\r\n                return <BridgeCompletedStatus />\r\n            }\r\n            case BridgeSubstatus.PARTIAL: {\r\n                return <BridgePartiallyCompletedStatus />\r\n            }\r\n            case BridgeSubstatus.REFUNDED: {\r\n                return <BridgeRefundedStatus />\r\n            }\r\n        }\r\n    }\r\n\r\n    if (BRIDGE_PENDING_STATUS.includes(transaction.bridgeParams!.status!)) {\r\n        return <PendingBridgeStatus transaction={transaction} />\r\n    }\r\n\r\n    return null\r\n}\r\n\r\nexport default BridgeDetailsStatus\r\n","import {\r\n    BridgeTransactionParams,\r\n    TransactionMeta,\r\n} from \"@block-wallet/background/controllers/transactions/utils/types\"\r\n\r\nimport { FC, useMemo } from \"react\"\r\nimport {\r\n    TransactionCategories,\r\n    BridgeStatus,\r\n    BridgeSubstatus,\r\n} from \"../../context/commTypes\"\r\nimport { buildBridgeDetailedItems } from \"../../util/bridgeUtils\"\r\nimport { BridgeTransactionsData } from \"../../util/hooks/useGetBridgeTransactionsData\"\r\nimport TransactionDetailsList, {\r\n    DetailedItem,\r\n} from \"../transactions/TransactionDetailsList\"\r\nimport BridgeDetailsStatus from \"./BridgeDetailsStatus\"\r\nimport openIcon from \"../../assets/images/icons/open_external.svg\"\r\nimport { secondsToEstimatedMinutes, secondsToMMSS } from \"../../util/time\"\r\n\r\ninterface BridgeDetailsSummaryProps {\r\n    transaction: Partial<TransactionMeta>\r\n    bridgeTransactionsData: BridgeTransactionsData | null\r\n}\r\n\r\nconst Explorer = ({\r\n    explorerLink,\r\n    explorerName,\r\n}: {\r\n    explorerLink: string\r\n    explorerName: string\r\n}) => {\r\n    return (\r\n        <div className=\"flex w-full items-center justify-start\">\r\n            <a\r\n                href={explorerLink}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                className=\"flex flex-row items-center space-x-1\"\r\n                title={explorerName}\r\n            >\r\n                <span className=\"text-sm font-bold text-primary-300 whitespace-nowrap text-ellipsis overflow-hidden\">\r\n                    {explorerName}\r\n                </span>\r\n                <img src={openIcon} alt=\"Open icon\" className=\"w-3 h-3\" />\r\n            </a>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst getBridgeFinalDurationInSeconds = (\r\n    bridgeParams?: BridgeTransactionParams\r\n): number | null => {\r\n    if (!bridgeParams || !bridgeParams.startTime || !bridgeParams.endTime) {\r\n        return null\r\n    }\r\n\r\n    return (bridgeParams.endTime - bridgeParams.startTime) / 1000\r\n}\r\n\r\nconst BridgeDetailsSummary: FC<BridgeDetailsSummaryProps> = ({\r\n    transaction,\r\n    bridgeTransactionsData,\r\n}) => {\r\n    const details = useMemo(() => {\r\n        return transaction.bridgeParams\r\n            ? buildBridgeDetailedItems(\r\n                  transaction as TransactionMeta,\r\n                  bridgeTransactionsData\r\n              )\r\n            : undefined\r\n    }, [transaction])\r\n\r\n    if (!details) {\r\n        return null\r\n    }\r\n\r\n    const statusDetail: DetailedItem = {\r\n        label: \"Status\",\r\n        value: <BridgeDetailsStatus transaction={transaction} />,\r\n    }\r\n\r\n    const durationDetails: DetailedItem[] = []\r\n\r\n    if (\r\n        transaction.bridgeParams?.estimatedDurationInSeconds &&\r\n        ![BridgeStatus.DONE, BridgeStatus.FAILED].includes(\r\n            transaction.bridgeParams?.status! || \"\"\r\n        )\r\n    ) {\r\n        durationDetails.push({\r\n            label: \"Estimated duration\",\r\n            value: secondsToEstimatedMinutes(\r\n                transaction.bridgeParams?.estimatedDurationInSeconds\r\n            ),\r\n        })\r\n    } else {\r\n        const durationInSeconds = getBridgeFinalDurationInSeconds(\r\n            transaction.bridgeParams\r\n        )\r\n        if (durationInSeconds) {\r\n            durationDetails.push({\r\n                label: \"Duration\",\r\n                value: secondsToMMSS(durationInSeconds),\r\n            })\r\n        }\r\n    }\r\n\r\n    const explorerDetails: DetailedItem[] = []\r\n\r\n    if (bridgeTransactionsData?.sendingTransaction?.explorerLink) {\r\n        explorerDetails.push({\r\n            label: \"Origin Tx\",\r\n            value: (\r\n                <Explorer\r\n                    explorerLink={\r\n                        bridgeTransactionsData?.sendingTransaction?.explorerLink\r\n                    }\r\n                    explorerName={\r\n                        bridgeTransactionsData?.sendingTransaction\r\n                            ?.explorerName || \"Explorer\"\r\n                    }\r\n                />\r\n            ),\r\n        })\r\n    }\r\n\r\n    if (\r\n        transaction.bridgeParams?.status === BridgeStatus.DONE &&\r\n        bridgeTransactionsData?.receivingTransaction?.explorerLink\r\n    ) {\r\n        const explorer = (\r\n            <Explorer\r\n                explorerLink={\r\n                    bridgeTransactionsData?.receivingTransaction?.explorerLink\r\n                }\r\n                explorerName={\r\n                    bridgeTransactionsData?.receivingTransaction\r\n                        ?.explorerName || \"Explorer\"\r\n                }\r\n            />\r\n        )\r\n        if (transaction.bridgeParams?.substatus === BridgeSubstatus.REFUNDED) {\r\n            explorerDetails.push({\r\n                label: \"Refund Tx\",\r\n                value: explorer,\r\n            })\r\n        } else {\r\n            explorerDetails.push({\r\n                label: \"Destination Tx\",\r\n                value: explorer,\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {transaction.transactionCategory ===\r\n                TransactionCategories.INCOMING_BRIDGE_REFUND && (\r\n                <>\r\n                    <i className=\"text-gray-500 text-center py-2\">\r\n                        This is a refund transaction of a failed bridge.\r\n                    </i>\r\n                </>\r\n            )}\r\n            <TransactionDetailsList\r\n                details={[\r\n                    statusDetail,\r\n                    ...durationDetails,\r\n                    ...details,\r\n                    ...explorerDetails,\r\n                ]}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BridgeDetailsSummary\r\n","import { FC, useEffect, useState } from \"react\"\r\nimport classnames from \"classnames\"\r\nimport Dialog from \"../dialog/Dialog\"\r\nimport CloseIcon from \"../icons/CloseIcon\"\r\nimport HorizontalSelect from \"../input/HorizontalSelect\"\r\nimport GenericTooltip from \"../label/GenericTooltip\"\r\nimport { Classes } from \"../../styles\"\r\nimport { TransactionMeta } from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport BridgeDetilsFees from \"./BridgeDetailsFees\"\r\nimport BridgeDetailsSummary from \"./BridgeDetailsSummary\"\r\nimport useGetBridgeTransactionsData from \"../../util/hooks/useGetBridgeTransactionsData\"\r\nimport TransactionDetailsBasic from \"../transactions/TransactionDetailsBasic\"\r\nimport isNil from \"../../util/isNil\"\r\nimport Divider from \"../Divider\"\r\nimport { TransactionDetailsTabProps } from \"../transactions/TransactionDetails\"\r\n\r\nconst BridgeTransactionDetails = (\r\n    props: TransactionDetailsTabProps & { nonce?: number }\r\n) => {\r\n    return (\r\n        <div className=\"pt-3\">\r\n            <TransactionDetailsBasic {...props} />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst BridgeDetails: FC<{\r\n    onClose: () => void\r\n    open: boolean\r\n    transaction?: Partial<TransactionMeta>\r\n    nonce?: number\r\n    tab?: \"summary\" | \"fees\"\r\n}> = ({ onClose, open, transaction, tab, nonce }) => {\r\n    const bridgeTransactionsData = useGetBridgeTransactionsData(transaction)\r\n    const _nonce = nonce ?? transaction?.transactionParams?.nonce\r\n    const tabs = [\r\n        {\r\n            id: \"summary\",\r\n            label: \"Summary\",\r\n            component: BridgeDetailsSummary,\r\n            disabled: false,\r\n        },\r\n        {\r\n            id: \"fees\",\r\n            label: \"Fees\",\r\n            component: BridgeDetilsFees,\r\n            disabled: false,\r\n        },\r\n        {\r\n            id: \"transaction\",\r\n            label: \"Transaction\",\r\n            component: BridgeTransactionDetails,\r\n            disabled: isNil(_nonce),\r\n        },\r\n    ]\r\n\r\n    const [selectedTab, setSelectedTab] = useState(() => tabs[0])\r\n    const TabComponent = selectedTab.component\r\n\r\n    useEffect(() => {\r\n        if (tab) {\r\n            setSelectedTab(tabs.find((t) => t.id === tab) || tabs[0])\r\n        }\r\n    }, [tab])\r\n\r\n    if (!transaction) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <Dialog open={open} onClickOutside={onClose}>\r\n            <span className=\"absolute top-0 right-0 p-4 z-50\">\r\n                <div\r\n                    onClick={onClose}\r\n                    className=\"cursor-pointer p-2 ml-auto -mr-2 text-gray-900 transition duration-300 rounded-full hover:bg-primary-100 hover:text-primary-300\"\r\n                >\r\n                    <CloseIcon size=\"10\" />\r\n                </div>\r\n            </span>\r\n            <div className=\"flex flex-col w-full h-full\">\r\n                <h2 className=\"px-2 pr-0 pb-2 mt-2 text-lg font-bold\">\r\n                    Bridge details\r\n                </h2>\r\n                <HorizontalSelect\r\n                    options={tabs}\r\n                    value={tab}\r\n                    onChange={(tab) => {\r\n                        if (!tab.disabled) {\r\n                            setSelectedTab(tab)\r\n                        }\r\n                    }}\r\n                    display={(t) => {\r\n                        return (\r\n                            <GenericTooltip\r\n                                bottom\r\n                                divFull\r\n                                disabled={!t.disabled}\r\n                                className=\"!w-254 p-2 border\"\r\n                                content=\"Not available\"\r\n                            >\r\n                                {t.label}\r\n                            </GenericTooltip>\r\n                        )\r\n                    }}\r\n                    disableStyles\r\n                    optionClassName={(value) =>\r\n                        classnames(\r\n                            `flex-1 flex flex-row items-center justify-center p-3 text-sm group\r\n                                    ${\r\n                                        selectedTab.label === value.label\r\n                                            ? \"border-primary-300 border-b-2 text-primary-300 font-bold\"\r\n                                            : \"border-gray-200 text-gray-500 border-b\"\r\n                                    }`,\r\n                            value.disabled && \"cursor-default\"\r\n                        )\r\n                    }\r\n                    containerClassName=\"flex flex-row -ml-3\"\r\n                    containerStyle={{\r\n                        width: \"calc(100% + 1.5rem)\",\r\n                    }}\r\n                />\r\n                <div\r\n                    className=\"flex flex-col h-[17rem] overflow-hidden overflow-y-auto py-1 -ml-3 px-3\"\r\n                    style={{ width: \"calc(100% + 1.5rem)\" }}\r\n                >\r\n                    <TabComponent\r\n                        transaction={transaction}\r\n                        bridgeTransactionsData={bridgeTransactionsData}\r\n                        nonce={_nonce}\r\n                    />\r\n                </div>\r\n            </div>\r\n            <div className=\"-mx-3\">\r\n                <Divider />\r\n            </div>\r\n            <button\r\n                onClick={onClose}\r\n                className={classnames(Classes.liteButton, \"mt-4\")}\r\n                type=\"button\"\r\n            >\r\n                Close\r\n            </button>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default BridgeDetails\r\n","import { CSSProperties, useRef, useState } from \"react\"\r\nimport { FaExchangeAlt } from \"react-icons/fa\"\r\nimport { FiUpload } from \"react-icons/fi\"\r\nimport { RiCopperCoinFill } from \"react-icons/ri\"\r\nimport { AiFillInfoCircle } from \"react-icons/ai\"\r\nimport { GiSuspensionBridge } from \"react-icons/gi\"\r\nimport { ImSpinner } from \"react-icons/im\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport classNames from \"classnames\"\r\nimport { Classes, classnames } from \"../../styles\"\r\nimport { AssetIcon } from \"./../AssetsList\"\r\nimport Tooltip from \"../../components/label/Tooltip\"\r\nimport eth from \"../../assets/images/icons/ETH.svg\"\r\nimport blankLogo from \"../../assets/images/logo.svg\"\r\nimport flashbotsLogo from \"../../assets/images/flashbots.png\"\r\nimport {\r\n    BridgeSubstatus,\r\n    MetaType,\r\n    TransactionCategories,\r\n    TransactionStatus,\r\n} from \"../../context/commTypes\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport {\r\n    BridgeTransactionParams,\r\n    TransactionMeta,\r\n    TransferType,\r\n} from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport { capitalize } from \"../../util/capitalize\"\r\nimport { getDisplayTime } from \"../../util/getDisplayTime\"\r\nimport formatTransactionValue from \"../../util/formatTransactionValue\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport AppIcon from \"./../icons/AppIcon\"\r\nimport { formatName } from \"../../util/formatAccount\"\r\nimport { RichedTransactionMeta } from \"../../util/transactionUtils\"\r\nimport Dots from \"../loading/LoadingDots\"\r\nimport useCurrencyFromatter from \"../../util/hooks/useCurrencyFormatter\"\r\nimport useGetBridgeTransactionsData from \"../../util/hooks/useGetBridgeTransactionsData\"\r\nimport BridgeDetails from \"../bridge/BridgeDetails\"\r\nimport {\r\n    BRIDGE_PENDING_STATUS,\r\n    getBridgePendingMessage,\r\n} from \"../../util/bridgeUtils\"\r\nimport TransactionDetails from \"./TransactionDetails\"\r\n\r\nconst transactionMessages = {\r\n    [TransactionCategories.BLANK_DEPOSIT]: \"Privacy Pool Deposit\",\r\n    [TransactionCategories.BLANK_WITHDRAWAL]: \"Privacy Pool Withdraw\",\r\n    [TransactionCategories.INCOMING]: \"Received Ether\",\r\n    [TransactionCategories.SENT_ETHER]: \"Sent Ether\",\r\n    [TransactionCategories.CONTRACT_DEPLOYMENT]: \"Deploy Contract\",\r\n    [TransactionCategories.CONTRACT_INTERACTION]: \"Contract Interaction\",\r\n    [TransactionCategories.TOKEN_METHOD_APPROVE]: \"Token Approval\",\r\n    [TransactionCategories.TOKEN_METHOD_TRANSFER]: \"Token Transfer\",\r\n    [TransactionCategories.TOKEN_METHOD_INCOMING_TRANSFER]: \"Received Token\",\r\n    [TransactionCategories.TOKEN_METHOD_TRANSFER_FROM]: \"Token Transfer From\",\r\n    [TransactionCategories.EXCHANGE]: \"BlockWallet Swap\",\r\n    [TransactionCategories.BRIDGE]: \"BlockWallet Bridge\",\r\n    [TransactionCategories.INCOMING_BRIDGE]: \"Incoming Bridge\",\r\n    [TransactionCategories.INCOMING_BRIDGE_REFUND]: \"Bridge Refund\",\r\n    [TransactionCategories.INCOMING_BRIDGE_PLACEHOLDER]: \"Incoming Bridge\",\r\n}\r\n\r\nconst pendingTransactionMessages: { [x: string]: string } = {\r\n    [TransactionCategories.CONTRACT_DEPLOYMENT]: \"Deploying Contract\",\r\n    [TransactionCategories.TOKEN_METHOD_APPROVE]: \"Approving Tokens\",\r\n    [TransactionCategories.TOKEN_METHOD_TRANSFER]: \"Transfering Tokens\",\r\n}\r\n\r\nconst getTransactionMessage = (\r\n    category: TransactionCategories,\r\n    symbol: string\r\n) => {\r\n    const message = (() => {\r\n        switch (category) {\r\n            case TransactionCategories.SENT_ETHER:\r\n                return `Sent ${symbol}`\r\n            case TransactionCategories.INCOMING:\r\n                return `Received ${symbol}`\r\n            default:\r\n                return transactionMessages[category]\r\n        }\r\n    })()\r\n\r\n    return message\r\n}\r\n\r\nconst getPendingTransactionMessage = (\r\n    category: TransactionCategories,\r\n    metaType: MetaType,\r\n    symbol: string\r\n) => {\r\n    const message = (() => {\r\n        switch (category) {\r\n            case TransactionCategories.SENT_ETHER:\r\n                return `Sending ${symbol}`\r\n            default:\r\n                return pendingTransactionMessages[category]\r\n        }\r\n    })()\r\n\r\n    if (metaType === MetaType.CANCEL || metaType === MetaType.SPEED_UP)\r\n        return `${\r\n            metaType === MetaType.CANCEL ? \"Cancelation\" : \"Speeding up\"\r\n        } of ${message[0].toLowerCase()}${message.substring(1)}`\r\n\r\n    return message\r\n}\r\n\r\nconst getTransactionItemStyles = (\r\n    label: string = \"Transaction\",\r\n    txValue: string\r\n) => {\r\n    let formattedLabel = label\r\n\r\n    // We're letting both containers to grow based on content but with a limit to keep them inside the container\r\n    let typeCss: CSSProperties = { maxWidth: \"170px\" }\r\n    let amountCss: CSSProperties = { maxWidth: \"118px\" }\r\n\r\n    // If label and value are both long, we crop the label prioritizing the value.\r\n    //Example: Privacy Pool Witdraw X.XXXXX\r\n    if (label.length > 18 && txValue?.length > 7) {\r\n        formattedLabel = formatName(label, 20)\r\n    }\r\n\r\n    // If label is not that long, we give value more space.\r\n    if (label.length < 16) {\r\n        amountCss.maxWidth = \"140px\"\r\n    }\r\n\r\n    return { formattedLabel, typeCss, amountCss }\r\n}\r\n\r\nconst transactionIcons = {\r\n    [TransactionCategories.BLANK_DEPOSIT]: <img src={blankLogo} alt=\"blank\" />,\r\n    [TransactionCategories.BLANK_WITHDRAWAL]: (\r\n        <img src={blankLogo} alt=\"BlockWallet\" />\r\n    ),\r\n    [TransactionCategories.INCOMING]: <img src={eth} alt=\"ETH\" />,\r\n    [TransactionCategories.SENT_ETHER]: <img src={eth} alt=\"ETH\" />,\r\n    [TransactionCategories.CONTRACT_DEPLOYMENT]: <FiUpload />,\r\n    [TransactionCategories.CONTRACT_INTERACTION]: <FaExchangeAlt />,\r\n    [TransactionCategories.TOKEN_METHOD_APPROVE]: (\r\n        <RiCopperCoinFill size=\"1.5rem\" />\r\n    ),\r\n    [TransactionCategories.TOKEN_METHOD_TRANSFER]: (\r\n        <RiCopperCoinFill size=\"1.5rem\" />\r\n    ),\r\n    [TransactionCategories.TOKEN_METHOD_INCOMING_TRANSFER]: (\r\n        <RiCopperCoinFill size=\"1.5rem\" />\r\n    ),\r\n    [TransactionCategories.TOKEN_METHOD_TRANSFER_FROM]: (\r\n        <RiCopperCoinFill size=\"1.5rem\" />\r\n    ),\r\n    [TransactionCategories.EXCHANGE]: <RiCopperCoinFill size=\"1.5rem\" />,\r\n    [TransactionCategories.BRIDGE]: <GiSuspensionBridge size=\"1.5rem\" />,\r\n    [TransactionCategories.INCOMING_BRIDGE]: (\r\n        <GiSuspensionBridge size=\"1.5rem\" />\r\n    ),\r\n    [TransactionCategories.INCOMING_BRIDGE_REFUND]: (\r\n        <GiSuspensionBridge size=\"1.5rem\" />\r\n    ),\r\n    [TransactionCategories.INCOMING_BRIDGE_PLACEHOLDER]: (\r\n        <GiSuspensionBridge size=\"1.5rem\" />\r\n    ),\r\n}\r\n\r\nconst failedStatuses = [\r\n    TransactionStatus.FAILED,\r\n    TransactionStatus.CANCELLED,\r\n    TransactionStatus.DROPPED,\r\n    TransactionStatus.REJECTED,\r\n]\r\n\r\nconst PendingSpinner: React.FC<{\r\n    size?: string\r\n}> = ({ size = \"1rem\" }) => (\r\n    <ImSpinner size={size} className=\"animate-spin text-black opacity-50\" />\r\n)\r\n\r\nconst TransactionIcon: React.FC<{\r\n    transaction: {\r\n        transactionCategory: TransactionCategories | undefined\r\n        transactionStatus: TransactionStatus\r\n    }\r\n    transactionIcon?: string\r\n}> = ({\r\n    transaction: { transactionCategory: category, transactionStatus },\r\n    transactionIcon,\r\n}) => (\r\n    <div className=\"align-start\">\r\n        {transactionStatus !== TransactionStatus.SUBMITTED ? (\r\n            transactionIcon ? (\r\n                <AssetIcon\r\n                    asset={{\r\n                        logo: transactionIcon,\r\n                        symbol: \"\",\r\n                    }}\r\n                />\r\n            ) : category ? (\r\n                <div className={Classes.roundedIcon}>\r\n                    {transactionIcons[category]}\r\n                </div>\r\n            ) : null\r\n        ) : (\r\n            <div className={Classes.roundedIcon}>\r\n                <PendingSpinner />\r\n            </div>\r\n        )}\r\n    </div>\r\n)\r\n\r\nconst getTransactionTime = (\r\n    status: TransactionStatus,\r\n    metaType: MetaType,\r\n    time: number,\r\n    isQueued: boolean\r\n) => {\r\n    const [{ color, label }, extraInfo] = (() => {\r\n        const displayTime = {\r\n            color: \"text-gray-600\",\r\n            label: getDisplayTime(new Date(time)),\r\n        }\r\n        // If the transaction that we wanted to cancel is sent\r\n        // It means that cancelation failed\r\n        if (\r\n            status === TransactionStatus.CONFIRMED &&\r\n            metaType === MetaType.REGULAR_CANCELLING\r\n        )\r\n            return [\r\n                displayTime,\r\n                {\r\n                    color: \"text-red-600\",\r\n                    label: \"Failed to cancel\",\r\n                },\r\n            ]\r\n        else if (\r\n            status === TransactionStatus.CONFIRMED &&\r\n            metaType === MetaType.SPEED_UP\r\n        )\r\n            return [\r\n                displayTime,\r\n                {\r\n                    color: \"text-blue-600\",\r\n                    label: \"Sped up\",\r\n                },\r\n            ]\r\n        // If the transaction that was supposed to be sped up worked\r\n        // It's a good as we pay less fee\r\n        else if (\r\n            status === TransactionStatus.CONFIRMED &&\r\n            metaType === MetaType.REGULAR_SPEEDING_UP\r\n        )\r\n            return [displayTime]\r\n        // If the transaction we wanted to cancel is either dropped or cancelled\r\n        // It worked\r\n        else if (\r\n            failedStatuses.includes(status) &&\r\n            metaType === MetaType.REGULAR_CANCELLING\r\n        )\r\n            return [{ color: \"text-blue-600\", label: \"Cancelled\" }]\r\n        // /!\\ Really specific case /!\\\r\n        // the DROPPED + SPEEDING_UP is supposed to mean that the speed up work\r\n        // However, the transaction is supposed to be filtered an not shown.\r\n        // The only case where this will show is if both the SPEEDING_UP and SPEED_UP tx failed\r\n        // and they were replaced by another tx with the same nonce manually\r\n        else if (\r\n            (status === TransactionStatus.DROPPED ||\r\n                status === TransactionStatus.CANCELLED) &&\r\n            metaType === MetaType.REGULAR_SPEEDING_UP\r\n        )\r\n            return [\r\n                {\r\n                    color: \"text-red-600\",\r\n                    label: capitalize(status.toLowerCase()),\r\n                },\r\n            ]\r\n        // If the cancelling/speeding up transaction is either dropped or cancelled\r\n        // It failed\r\n        else if (\r\n            (status === TransactionStatus.DROPPED ||\r\n                status === TransactionStatus.CANCELLED) &&\r\n            (metaType === MetaType.CANCEL || metaType === MetaType.SPEED_UP)\r\n        )\r\n            return [{ color: \"text-red-600\", label: \"Cancelled\" }]\r\n        // If we're here, we're waiting to see if the transaction will be cancelled\r\n        else if (metaType === MetaType.REGULAR_CANCELLING)\r\n            return [{ color: \"text-gray-600\", label: \"Cancelling...\" }]\r\n        // If we're here, we're waiting to see if the transaction will be sped up\r\n        else if (metaType === MetaType.REGULAR_SPEEDING_UP)\r\n            return [{ color: \"text-gray-600\", label: \"Speeding up...\" }]\r\n        else if (status === TransactionStatus.SUBMITTED)\r\n            return !isQueued\r\n                ? [{ color: \"text-gray-600\", label: \"Pending...\" }]\r\n                : [{ color: \"text-yellow-600\", label: \"Queued\" }]\r\n        else return [displayTime]\r\n    })()\r\n\r\n    return (\r\n        <>\r\n            <span className={`text-xs ${color}`}>{label}</span>\r\n            {extraInfo && (\r\n                <span className={`text-xs ${extraInfo.color} mt-0.5`}>\r\n                    {extraInfo.label}\r\n                </span>\r\n            )}\r\n        </>\r\n    )\r\n}\r\n\r\nconst getTransactionLabel = (\r\n    status: TransactionStatus,\r\n    metaType: MetaType,\r\n    pendingIndex: number | undefined,\r\n    transactionCategory: TransactionCategories | undefined,\r\n    methodSignature: TransactionMeta[\"methodSignature\"],\r\n    networkNativeCurrency: { symbol: string }\r\n): string => {\r\n    const getCategoryMessage = () => {\r\n        const isPending =\r\n            status === TransactionStatus.SUBMITTED && pendingIndex === 0\r\n\r\n        if (!transactionCategory) {\r\n            return \"Transaction\"\r\n        }\r\n\r\n        return isPending\r\n            ? getPendingTransactionMessage(\r\n                  transactionCategory,\r\n                  metaType,\r\n                  networkNativeCurrency.symbol\r\n              ) ||\r\n                  getTransactionMessage(\r\n                      transactionCategory,\r\n                      networkNativeCurrency.symbol\r\n                  )\r\n            : getTransactionMessage(\r\n                  transactionCategory,\r\n                  networkNativeCurrency.symbol\r\n              )\r\n    }\r\n\r\n    const defaultCategory = getCategoryMessage()\r\n\r\n    if (transactionCategory === TransactionCategories.CONTRACT_INTERACTION) {\r\n        return methodSignature ? methodSignature.name : defaultCategory\r\n    }\r\n\r\n    return defaultCategory\r\n}\r\n\r\nconst getTransactionTimeOrStatus = (\r\n    status: TransactionStatus,\r\n    metaType: MetaType,\r\n    confirmationTime: number | undefined,\r\n    submittedTime: number | undefined,\r\n    time: number,\r\n    isQueued: boolean,\r\n    forceDrop: boolean,\r\n    bridgeParams?: BridgeTransactionParams\r\n) => {\r\n    if (forceDrop) {\r\n        return (\r\n            <span className=\"text-xs text-red-600\">\r\n                {capitalize(TransactionStatus.DROPPED.toLowerCase())}\r\n            </span>\r\n        )\r\n    }\r\n\r\n    if (failedStatuses.includes(status) && metaType === MetaType.REGULAR) {\r\n        return (\r\n            <span className=\"text-xs text-red-600\">\r\n                {capitalize(\r\n                    status === TransactionStatus.CANCELLED\r\n                        ? \"failed\"\r\n                        : status.toLowerCase()\r\n                )}\r\n            </span>\r\n        )\r\n    }\r\n\r\n    if (\r\n        bridgeParams?.substatus === BridgeSubstatus.REFUNDED &&\r\n        bridgeParams.role !== \"RECEIVING\"\r\n    ) {\r\n        return (\r\n            <span className=\"text-xs text-red-600\">\r\n                Failed bridge: Refunded\r\n            </span>\r\n        )\r\n    }\r\n\r\n    return getTransactionTime(\r\n        status,\r\n        metaType,\r\n        confirmationTime || submittedTime || time,\r\n        isQueued\r\n    )\r\n}\r\n\r\nconst TransactionItem: React.FC<{\r\n    transaction: RichedTransactionMeta\r\n    index: number\r\n}> = ({ index, transaction }) => {\r\n    const {\r\n        transactionParams: { value, hash },\r\n        transactionCategory,\r\n        methodSignature,\r\n        status,\r\n        time,\r\n        confirmationTime,\r\n        submittedTime,\r\n        transferType,\r\n        metaType,\r\n        id,\r\n        flashbots,\r\n        isQueued,\r\n        forceDrop,\r\n        bridgeParams,\r\n    } = transaction\r\n    const bridgeTransactionsData = useGetBridgeTransactionsData(transaction)\r\n\r\n    const history: any = useOnMountHistory()\r\n    const formatter = useCurrencyFromatter()\r\n\r\n    const { nativeCurrency: networkNativeCurrency, defaultNetworkLogo } =\r\n        useSelectedNetwork()\r\n\r\n    const [hasDetails, setHasDetails] = useState(false)\r\n\r\n    const txHash = hash\r\n    const transfer = transferType ?? {\r\n        amount: value ? value : BigNumber.from(\"0\"),\r\n        currency: networkNativeCurrency.symbol,\r\n        decimals: networkNativeCurrency.decimals,\r\n        logo: defaultNetworkLogo,\r\n    }\r\n\r\n    const isBlankWithdraw: boolean =\r\n        transactionCategory === \"blankWithdrawal\" ? true : false\r\n\r\n    const label = getTransactionLabel(\r\n        status,\r\n        metaType,\r\n        index,\r\n        transactionCategory,\r\n        methodSignature,\r\n        networkNativeCurrency\r\n    )\r\n\r\n    const txValueSign = (() => {\r\n        switch (transactionCategory) {\r\n            case TransactionCategories.INCOMING:\r\n            case TransactionCategories.TOKEN_METHOD_INCOMING_TRANSFER:\r\n            case TransactionCategories.BLANK_WITHDRAWAL:\r\n            case TransactionCategories.INCOMING_BRIDGE:\r\n            case TransactionCategories.INCOMING_BRIDGE_PLACEHOLDER:\r\n            case TransactionCategories.INCOMING_BRIDGE_REFUND:\r\n                return \"+\"\r\n\r\n            default:\r\n                return BigNumber.from(transfer.amount).eq(0) ? \"\" : \"-\"\r\n        }\r\n    })()\r\n\r\n    const txValue = transfer.amount\r\n        ? formatTransactionValue(transfer as TransferType, true, 5)[0]\r\n        : \"\"\r\n\r\n    const valueLabel = `${txValueSign}${txValue}`\r\n\r\n    const { formattedLabel, typeCss, amountCss } = getTransactionItemStyles(\r\n        label,\r\n        valueLabel\r\n    )\r\n\r\n    const tokenSymbol = transfer.currency\r\n        ? transfer.currency.toUpperCase()\r\n        : networkNativeCurrency.symbol.toUpperCase()\r\n\r\n    const transferCurrencyAmount = formatter.format(\r\n        transfer.amount,\r\n        tokenSymbol,\r\n        transfer.decimals,\r\n        transfer.currency === networkNativeCurrency.symbol.toUpperCase()\r\n    )\r\n\r\n    const canSpeedUpOrCancel =\r\n        status === TransactionStatus.SUBMITTED &&\r\n        metaType === MetaType.REGULAR &&\r\n        transactionCategory !==\r\n            TransactionCategories.INCOMING_BRIDGE_PLACEHOLDER &&\r\n        !isBlankWithdraw\r\n\r\n    const OperationDetails =\r\n        transactionCategory &&\r\n        [\r\n            TransactionCategories.BRIDGE,\r\n            TransactionCategories.INCOMING_BRIDGE_REFUND,\r\n            TransactionCategories.INCOMING_BRIDGE,\r\n        ].includes(transactionCategory)\r\n            ? BridgeDetails\r\n            : TransactionDetails\r\n\r\n    return (\r\n        <>\r\n            <OperationDetails\r\n                transaction={transaction}\r\n                open={hasDetails}\r\n                onClose={() => setHasDetails(false)}\r\n            />\r\n\r\n            <div\r\n                className={`flex flex-col px-6 py-5 -ml-6 transition duration-300 hover:bg-primary-100 hover:bg-opacity-50 active:bg-primary-200 active:bg-opacity-50 ${\r\n                    !(txHash && transaction.transactionParams.from) &&\r\n                    \"cursor-default\"\r\n                }`}\r\n                style={{ width: \"calc(100% + 3rem)\" }}\r\n                role=\"button\"\r\n                data-txid={txHash}\r\n                onClick={() => {\r\n                    if (txHash && transaction.transactionParams.from) {\r\n                        setHasDetails(true)\r\n                    }\r\n                }}\r\n            >\r\n                {/* Type */}\r\n                <div className=\"flex flex-row items-center w-full justify-between\">\r\n                    <TransactionIcon\r\n                        transaction={{\r\n                            transactionCategory,\r\n                            transactionStatus: status,\r\n                        }}\r\n                        transactionIcon={transfer.logo}\r\n                    />\r\n                    <div\r\n                        className=\"flex flex-col ml-2\"\r\n                        style={{ width: \"calc(100% - 1rem)\" }}\r\n                    >\r\n                        <div\r\n                            className=\"flex flex-row w-full items-center space-x-1\"\r\n                            style={typeCss}\r\n                        >\r\n                            <span\r\n                                className=\"text-sm font-bold truncate\"\r\n                                title={label}\r\n                            >\r\n                                {formattedLabel}\r\n                            </span>\r\n                            {flashbots && (\r\n                                <AppIcon\r\n                                    iconURL={flashbotsLogo}\r\n                                    size={6}\r\n                                    iconSize={5}\r\n                                    title=\"Flashbots\"\r\n                                />\r\n                            )}\r\n                            {status === TransactionStatus.DROPPED &&\r\n                                metaType === MetaType.REGULAR && (\r\n                                    <div className=\"group relative self-start\">\r\n                                        <a\r\n                                            href=\"https://help.blockwallet.io/hc/en-us/articles/4410031249553\"\r\n                                            target=\"_blank\"\r\n                                            rel=\"noreferrer\"\r\n                                        >\r\n                                            <AiFillInfoCircle\r\n                                                size={24}\r\n                                                className=\"pl-2 pb-1 text-primary-200 cursor-pointer hover:text-primary-300\"\r\n                                            />\r\n                                        </a>\r\n                                        <Tooltip\r\n                                            content={\r\n                                                <div className=\"flex flex-col font-normal items-start text-xs text-white-500\">\r\n                                                    <div className=\"flex flex-row items-end space-x-7\">\r\n                                                        <span>\r\n                                                            This transaction was\r\n                                                            never mined.\r\n                                                        </span>{\" \"}\r\n                                                    </div>\r\n                                                    <div className=\"flex flex-row items-end space-x-4\">\r\n                                                        <span>\r\n                                                            Click on this icon\r\n                                                            to learn more.\r\n                                                        </span>{\" \"}\r\n                                                    </div>\r\n                                                </div>\r\n                                            }\r\n                                        />\r\n                                    </div>\r\n                                )}\r\n                        </div>\r\n                        {getTransactionTimeOrStatus(\r\n                            status,\r\n                            metaType,\r\n                            confirmationTime,\r\n                            submittedTime,\r\n                            time,\r\n                            isQueued || false,\r\n                            forceDrop || false,\r\n                            bridgeParams\r\n                        )}\r\n\r\n                        {canSpeedUpOrCancel && (\r\n                            <div className=\"mt-2\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    className={classnames(\r\n                                        \"rounded-md cursor-pointer text-blue-500 border-current border p-1 font-bold hover:bg-blue-500 hover:text-white transition-colors\",\r\n                                        isQueued\r\n                                            ? \"opacity-50 pointer-events-none\"\r\n                                            : \"\"\r\n                                    )}\r\n                                    disabled={isQueued}\r\n                                    onClick={(e) => {\r\n                                        e.stopPropagation()\r\n                                        history.push({\r\n                                            pathname: \"/transaction/speedUp\",\r\n                                            state: {\r\n                                                txId: id,\r\n                                            },\r\n                                        })\r\n                                    }}\r\n                                >\r\n                                    Speed up\r\n                                </button>\r\n                                <button\r\n                                    type=\"button\"\r\n                                    className=\"ml-1.5 border p-1 rounded-md cursor-pointer text-gray-500 border-current font-bold hover:bg-gray-500 hover:text-white transition-colors\"\r\n                                    onClick={(e) => {\r\n                                        e.stopPropagation()\r\n                                        history.push({\r\n                                            pathname: \"/transaction/cancel\",\r\n                                            state: {\r\n                                                txId: id,\r\n                                            },\r\n                                        })\r\n                                    }}\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Amount */}\r\n                    {transfer.amount && (\r\n                        <div\r\n                            className={classNames(\"flex flex-col items-end\")}\r\n                            style={amountCss}\r\n                        >\r\n                            <div\r\n                                className=\"w-full flex justify-end\"\r\n                                title={formatTransactionValue(\r\n                                    transfer as TransferType\r\n                                ).reduce((acc, curr) => `${acc} ${curr}`, \"\")}\r\n                            >\r\n                                <span\r\n                                    className={classNames(\r\n                                        \"text-sm font-bold text-right mr-1 truncate max-w-[130px]\"\r\n                                    )}\r\n                                >\r\n                                    {`${valueLabel} ${transfer.currency.toUpperCase()}`}\r\n                                </span>\r\n                            </div>\r\n                            <div className=\"w-full flex justify-end\">\r\n                                <span\r\n                                    className=\"text-xs text-gray-600 truncate\"\r\n                                    title={transferCurrencyAmount}\r\n                                >\r\n                                    {transferCurrencyAmount}\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                {status === TransactionStatus.CONFIRMED &&\r\n                transactionCategory === TransactionCategories.BRIDGE &&\r\n                bridgeParams &&\r\n                BRIDGE_PENDING_STATUS.includes(bridgeParams!.status! || \"\") ? (\r\n                    <div className=\"ml-11 mt-2\">\r\n                        <i className=\"text-gray-500\">\r\n                            <>\r\n                                {\r\n                                    getBridgePendingMessage(\r\n                                        bridgeParams!,\r\n                                        bridgeTransactionsData\r\n                                            ?.receivingTransaction?.networkName\r\n                                    )?.label\r\n                                }\r\n                                <Dots />\r\n                            </>\r\n                        </i>\r\n                    </div>\r\n                ) : null}\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default TransactionItem\r\n","export default \"data:image/png;base64,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\"","import classnames from \"classnames\"\r\nimport AnimatedIcon, { AnimatedIconName } from \"../AnimatedIcon\"\r\n\r\nconst TransactionsLoadingSkeleton = () => {\r\n    return (\r\n        <>\r\n            {[...Array(3)].map((x, index) => (\r\n                <div key={index}>\r\n                    {index > 0 ? <hr /> : null}\r\n                    <div className=\"flex items-center justify-between py-5\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                            <div className=\"flex justify-center items-center h-9 w-9 rounded-full border\">\r\n                                <AnimatedIcon\r\n                                    icon={\r\n                                        AnimatedIconName.GreyCircleLoadingSkeleton\r\n                                    }\r\n                                    className={classnames(\r\n                                        \"w-4 h-4 pointer-events-none\",\r\n                                        index % 2 === 1 && \"rotate-180\"\r\n                                    )}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <AnimatedIcon\r\n                                    icon={\r\n                                        AnimatedIconName.GreyLineLoadingSkeleton\r\n                                    }\r\n                                    className=\"mb-2 h-3 w-16 rotate-180\"\r\n                                    svgClassName=\"rounded-md\"\r\n                                />\r\n                                <AnimatedIcon\r\n                                    icon={\r\n                                        AnimatedIconName.GreyLineLoadingSkeleton\r\n                                    }\r\n                                    className=\"h-3 w-24\"\r\n                                    svgClassName=\"rounded-md\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex flex-col items-end\">\r\n                            <AnimatedIcon\r\n                                icon={AnimatedIconName.GreyLineLoadingSkeleton}\r\n                                className=\"mb-2 h-3 w-10\"\r\n                                svgClassName=\"rounded-md\"\r\n                            />\r\n                            <AnimatedIcon\r\n                                icon={AnimatedIconName.GreyLineLoadingSkeleton}\r\n                                className=\"h-3 w-16 rotate-180\"\r\n                                svgClassName=\"rounded-md\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            ))}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default TransactionsLoadingSkeleton\r\n","import { Fragment, useRef, useState } from \"react\"\r\nimport useDOMElementObserver from \"../../util/hooks/useDOMElementObserver\"\r\nimport { RichedTransactionMeta } from \"../../util/transactionUtils\"\r\nimport dotLoading from \"../../assets/images/icons/dot_loading.svg\"\r\nimport { classnames } from \"../../styles\"\r\nimport TransactionItem from \"./TransactionItem\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport TransactionsLoadingSkeleton from \"../skeleton/TransactionsLoadingSkeleton\"\r\n\r\nconst getInitialCount = (transactions: RichedTransactionMeta[]) =>\r\n    transactions.length > 10 ? 10 : transactions.length\r\n\r\nconst TransactionsList: React.FC<{\r\n    transactions: RichedTransactionMeta[]\r\n}> = ({ transactions }) => {\r\n    const state = useBlankState()!\r\n\r\n    const isLoading =\r\n        state.isNetworkChanging || state.isRatesChangingAfterNetworkChange\r\n\r\n    const [transactionCount, setTransactionCount] = useState(() =>\r\n        getInitialCount(transactions)\r\n    )\r\n    const [isLoadingMoreTransactions, setIsLoadingMoreTransactions] =\r\n        useState(false)\r\n    const loaderRef = useRef<HTMLImageElement>(null)\r\n\r\n    useDOMElementObserver(\r\n        loaderRef,\r\n        async () => {\r\n            const countToLoad = transactions.length - transactionCount\r\n            if (countToLoad === 0) return\r\n            setIsLoadingMoreTransactions(true)\r\n            await new Promise((resolve) => setTimeout(resolve, 300))\r\n            setTransactionCount(\r\n                transactionCount + (countToLoad > 10 ? 10 : countToLoad)\r\n            )\r\n            setIsLoadingMoreTransactions(false)\r\n        },\r\n        [transactionCount, transactions]\r\n    )\r\n\r\n    return (\r\n        <>\r\n            {isLoading ? (\r\n                <TransactionsLoadingSkeleton />\r\n            ) : (\r\n                <>\r\n                    {transactions.slice(0, transactionCount).map((t, i) => (\r\n                        <Fragment key={i}>\r\n                            {i > 0 ? <hr /> : null}\r\n                            <TransactionItem transaction={t} index={i} />\r\n                        </Fragment>\r\n                    ))}\r\n                    <img\r\n                        ref={loaderRef}\r\n                        src={dotLoading}\r\n                        alt=\"Loader\"\r\n                        aria-label=\"loading\"\r\n                        role=\"alert\"\r\n                        aria-busy=\"true\"\r\n                        className={classnames(\r\n                            \"m-auto w-8 mt-4\",\r\n                            isLoadingMoreTransactions\r\n                                ? \"opacity-100\"\r\n                                : \"opacity-0\"\r\n                        )}\r\n                    />\r\n                </>\r\n            )}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default TransactionsList\r\n","import { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport {\r\n    MetaType,\r\n    TransactionCategories,\r\n    TransactionStatus,\r\n} from \"../../context/commTypes\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport { flagQueuedTransactions } from \"../transactionUtils\"\r\n\r\nconst failedStatuses = [\r\n    TransactionStatus.FAILED,\r\n    TransactionStatus.CANCELLED,\r\n    TransactionStatus.DROPPED,\r\n    TransactionStatus.REJECTED,\r\n]\r\n\r\nconst useTransactions = () => {\r\n    const { confirmed, pending } = useBlankState()!.activityList\r\n    const { nativeCurrency: networkNativeCurrency, defaultNetworkLogo } =\r\n        useSelectedNetwork()\r\n\r\n    const allTransactions = pending\r\n        .concat(confirmed)\r\n        .map((transaction) => {\r\n            //transaction currency is different from the native network currency\r\n            if (transaction.transferType) {\r\n                return transaction\r\n            }\r\n            const value = transaction.transactionParams.value\r\n            return {\r\n                ...transaction,\r\n                transferType: {\r\n                    amount: value ? value : BigNumber.from(\"0\"),\r\n                    currency: networkNativeCurrency.symbol,\r\n                    decimals: networkNativeCurrency.decimals,\r\n                    logo: defaultNetworkLogo,\r\n                },\r\n            }\r\n        })\r\n        .flatMap((t, _, transactions) => {\r\n            // Remove incoming transactions with 0 value\r\n            if (\r\n                t.transactionParams.value &&\r\n                BigNumber.from(t.transactionParams.value).eq(0) &&\r\n                t.transactionCategory === TransactionCategories.INCOMING\r\n            )\r\n                return []\r\n\r\n            if (t.metaType === MetaType.REGULAR_SPEEDING_UP) {\r\n                const speedUpTx = transactions.find(\r\n                    (tx) => tx.id && tx.id === t.replacedBy\r\n                )\r\n\r\n                if (!speedUpTx) return [t]\r\n\r\n                // If the speed up transaction is still pending\r\n                // We replace the tx hash of the one you wanted to speed up by the speed up one\r\n                if (speedUpTx.status === TransactionStatus.SUBMITTED)\r\n                    return [\r\n                        {\r\n                            ...t,\r\n                            transactionParams: {\r\n                                ...t.transactionParams,\r\n                                hash:\r\n                                    speedUpTx.transactionParams.hash ??\r\n                                    t.transactionParams.hash,\r\n                            },\r\n                        },\r\n                    ]\r\n\r\n                // Remove the transaction that was sped up if it worked\r\n                if (speedUpTx.status === TransactionStatus.CONFIRMED) return []\r\n\r\n                // If both SPEEDING_UP and SPEED_UP are failed it means they got replaced\r\n                // Manually by another tx with the same nonce. In that case, we force the hash\r\n                // To be undefined so there's no click interaction available\r\n                if (failedStatuses.includes(speedUpTx.status))\r\n                    return [\r\n                        {\r\n                            ...t,\r\n                            transactionParams: {\r\n                                ...t.transactionParams,\r\n                                hash: undefined,\r\n                            },\r\n                        },\r\n                    ]\r\n            }\r\n\r\n            if (t.metaType === MetaType.REGULAR_CANCELLING) {\r\n                const cancelTx = transactions.find(\r\n                    (tx) => tx.id && tx.id === t.replacedBy\r\n                )\r\n\r\n                if (!cancelTx) return [t]\r\n\r\n                if (\r\n                    failedStatuses.includes(t.status) &&\r\n                    failedStatuses.includes(cancelTx.status)\r\n                )\r\n                    return [\r\n                        {\r\n                            ...t,\r\n                            transactionParams: {\r\n                                ...t.transactionParams,\r\n                                hash: undefined,\r\n                            },\r\n                            forceDrop: true,\r\n                        },\r\n                    ]\r\n                else if (failedStatuses.includes(cancelTx.status)) return [t]\r\n\r\n                return [\r\n                    {\r\n                        ...t,\r\n                        transactionParams: {\r\n                            ...t.transactionParams,\r\n                            hash:\r\n                                cancelTx?.transactionParams.hash ??\r\n                                t.transactionParams.hash,\r\n                        },\r\n                    },\r\n                ]\r\n            }\r\n\r\n            // Remove cancelation transactions, and speed up that failed or pending\r\n            if (\r\n                t.metaType === MetaType.CANCEL ||\r\n                (t.metaType === MetaType.SPEED_UP &&\r\n                    (failedStatuses.includes(t.status) ||\r\n                        t.status === TransactionStatus.SUBMITTED))\r\n            ) {\r\n                return []\r\n            }\r\n            return [t]\r\n        })\r\n\r\n    return {\r\n        transactions: flagQueuedTransactions(allTransactions),\r\n    }\r\n}\r\n\r\nexport default useTransactions\r\n","import { FunctionComponent, useState } from \"react\"\r\nimport { PopupTabs } from \"@block-wallet/background/controllers/PreferencesController\"\r\nimport { updatePopupTab } from \"../context/commActions\"\r\nimport ActivityList from \"./ActivityList\"\r\nimport AssetsList from \"./AssetsList\"\r\nimport HorizontalSelect from \"./input/HorizontalSelect\"\r\n\r\nconst tabs = [\r\n    {\r\n        label: \"Activity\",\r\n        component: ActivityList,\r\n    },\r\n    {\r\n        label: \"Assets\",\r\n        component: AssetsList,\r\n    },\r\n]\r\n\r\nconst ActivityAssetsView: FunctionComponent<{ initialTab: PopupTabs }> = ({\r\n    initialTab,\r\n}) => {\r\n    const initialTabIndex = initialTab === \"activity\" ? 0 : 1\r\n    const [tab, setTab] = useState(tabs[initialTabIndex])\r\n    const TabComponent = tab.component\r\n\r\n    const onTabChange = async (value: any) => {\r\n        setTab(value)\r\n        updatePopupTab(value.label.toLowerCase() as PopupTabs)\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex flex-col w-full\">\r\n            <HorizontalSelect\r\n                options={tabs}\r\n                value={tab}\r\n                onChange={onTabChange}\r\n                display={(t) => t.label}\r\n                disableStyles\r\n                optionClassName={(value) =>\r\n                    `flex-1 flex flex-row items-center justify-center p-3 text-sm hover:text-primary-300 ${\r\n                        tab === value\r\n                            ? \"border-primary-300 border-b-2 text-primary-300 font-bold\"\r\n                            : \"border-gray-200 text-gray-500 border-b hover:text-primary-300 hover:font-medium\"\r\n                    }`\r\n                }\r\n                containerClassName=\"flex flex-row -ml-6\"\r\n                containerStyle={{ width: \"calc(100% + 2 * 1.5rem)\" }}\r\n            />\r\n            <div className=\"flex flex-col w-full\">\r\n                <TabComponent />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ActivityAssetsView\r\n","import TransactionsList from \"./transactions/TransactionsList\"\r\n\r\n// Context\r\nimport { useSelectedNetwork } from \"../context/hooks/useSelectedNetwork\"\r\nimport { useSelectedAccount } from \"../context/hooks/useSelectedAccount\"\r\n\r\n// Utils\r\n\r\nimport useTransactions from \"../util/hooks/useTransactions\"\r\n\r\nconst ActivityList = () => {\r\n    const { chainId } = useSelectedNetwork()\r\n    const { address } = useSelectedAccount()\r\n\r\n    const { transactions } = useTransactions()\r\n\r\n    return (\r\n        <div\r\n            className=\"flex flex-col flex-1 w-full space-y-0\"\r\n            data-testid=\"activity-list\"\r\n        >\r\n            <TransactionsList\r\n                transactions={transactions}\r\n                //When the chainId and/or the address changes, this component is unmounted and mounted again.\r\n                key={`${chainId}-${address}`}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ActivityList\r\n","import AnimatedIcon, { AnimatedIconName } from \"../AnimatedIcon\"\r\n\r\nconst BalanceLoadingSkeleton = () => {\r\n    return (\r\n        <div className=\"flex flex-col items-center space-y-2\">\r\n            <AnimatedIcon\r\n                icon={AnimatedIconName.BlueLineLoadingSkeleton}\r\n                className=\"w-32 h-4 pointer-events-none\"\r\n                svgClassName=\"rounded-md\"\r\n            />\r\n            <AnimatedIcon\r\n                icon={AnimatedIconName.BlueLineLoadingSkeleton}\r\n                className=\"w-16 h-4 pointer-events-none rotate-180\"\r\n                svgClassName=\"rounded-md\"\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BalanceLoadingSkeleton\r\n","import { FC } from \"react\"\r\nimport classnames from \"classnames\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport BalanceLoadingSkeleton from \"../skeleton/BalanceLoadingSkeleton\"\r\n\r\ninterface TokenSummaryMembers {\r\n    Balances: FC<{ children: React.ReactNode; className?: string }>\r\n    TokenBalance: FC<{\r\n        title?: string\r\n        children: React.ReactNode\r\n        className?: string\r\n    }>\r\n    ExchangeRateBalance: FC<{ title?: string; children: React.ReactNode }>\r\n    TokenName: FC<{ title?: string; children: React.ReactNode }>\r\n    Actions: FC<{ children: React.ReactNode; className?: string | undefined }>\r\n}\r\n\r\nconst TokenSummary: FC<{\r\n    minHeight?: string | number\r\n    children: React.ReactNode\r\n    className?: string | undefined\r\n}> &\r\n    TokenSummaryMembers = ({ children, minHeight, className }) => {\r\n    return (\r\n        <div\r\n            className={\r\n                \"flex flex-col items-center w-full justify-between rounded-md bg-primary-100 h-fit \" +\r\n                className\r\n            }\r\n            style={{ minHeight: minHeight ?? \"10rem\" }}\r\n        >\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Balances = ({\r\n    children,\r\n    className,\r\n}: {\r\n    children: React.ReactNode\r\n    className?: string\r\n}) => {\r\n    const state = useBlankState()!\r\n\r\n    const isLoading =\r\n        state.isNetworkChanging || state.isRatesChangingAfterNetworkChange\r\n\r\n    return (\r\n        <>\r\n            {isLoading ? (\r\n                <BalanceLoadingSkeleton />\r\n            ) : (\r\n                <div\r\n                    className={\r\n                        \"flex flex-col items-center space-y-1 \" + className\r\n                    }\r\n                >\r\n                    {children}\r\n                </div>\r\n            )}\r\n        </>\r\n    )\r\n}\r\n\r\nconst TokenBalance: FC<{\r\n    title?: string\r\n    className?: string\r\n    children: React.ReactNode\r\n}> = ({ children, title, className }) => {\r\n    return (\r\n        <span\r\n            className={classnames(\"text-2xl font-bold\", className)}\r\n            title={title}\r\n        >\r\n            {children}\r\n        </span>\r\n    )\r\n}\r\n\r\nconst ExchangeRateBalance: FC<{\r\n    title?: string\r\n    children: React.ReactNode\r\n}> = ({ children, title }) => {\r\n    return (\r\n        <span className=\"text-sm text-gray-600\" title={title}>\r\n            {children}\r\n        </span>\r\n    )\r\n}\r\n\r\nconst TokenName: FC<{\r\n    title?: string\r\n    children: React.ReactNode\r\n}> = ({ children, title }) => {\r\n    return (\r\n        <span className=\"text-xs text-gray-600\" title={title}>\r\n            {children}\r\n        </span>\r\n    )\r\n}\r\n\r\nconst Actions: FC<{\r\n    children: React.ReactNode\r\n    className?: string\r\n}> = ({ children, className }) => {\r\n    return (\r\n        <div\r\n            className={\r\n                \"flex flex-row items-center justify-around w-full \" + className\r\n            }\r\n        >\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\nTokenSummary.Balances = Balances\r\nTokenSummary.TokenBalance = TokenBalance\r\nTokenSummary.ExchangeRateBalance = ExchangeRateBalance\r\nTokenSummary.TokenName = TokenName\r\nTokenSummary.Actions = Actions\r\nexport default TokenSummary\r\n","import DropDownSelector from \"../input/DropDownSelector\"\r\nimport SearchInput from \"../input/SearchInput\"\r\nimport {\r\n    ChangeEvent,\r\n    Dispatch,\r\n    FC,\r\n    SetStateAction,\r\n    useEffect,\r\n    useState,\r\n} from \"react\"\r\nimport {\r\n    TokenWithBalance,\r\n    useTokensList,\r\n} from \"../../context/hooks/useTokensList\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { formatRounded } from \"../../util/formatRounded\"\r\nimport { formatUnits } from \"@ethersproject/units\"\r\nimport { searchTokenInAssetsList } from \"../../context/commActions\"\r\nimport { useCustomCompareEffect } from \"use-custom-compare\"\r\nimport { useSwappedTokenList } from \"../../context/hooks/useSwappedTokenList\"\r\nimport AssetDropdownDisplay from \"./AssetDropdownDisplay\"\r\nimport AssetList from \"./AssetList\"\r\nimport { Token } from \"@block-wallet/background/controllers/erc-20/Token\"\r\n\r\nexport enum AssetListType {\r\n    ALL = \"ALL\",\r\n    DEFAULT = \"DEFAULT\",\r\n}\r\n\r\ninterface AssetSelectionProps {\r\n    selectedAssetList: AssetListType\r\n    onAssetChange: (asset: TokenWithBalance) => void\r\n    selectedAsset?: TokenWithBalance\r\n    customAmount?: BigNumber\r\n    displayIcon?: boolean\r\n    error?: string\r\n    register?: any\r\n    topMargin?: number\r\n    bottomMargin?: number\r\n    popupMargin?: number\r\n    dropdownWidth?: string\r\n    //It will be used to return the token(in case of new one) to swap page\r\n    addTokenState?: any\r\n    assetBalanceClassName?: string\r\n}\r\n\r\nconst ZERO_BN = BigNumber.from(0)\r\nconst SEARCH_LIMIT = 20\r\n\r\nexport const AssetSelection: FC<AssetSelectionProps> = ({\r\n    onAssetChange,\r\n    selectedAssetList,\r\n    selectedAsset,\r\n    customAmount,\r\n    displayIcon = false,\r\n    error,\r\n    topMargin,\r\n    bottomMargin,\r\n    popupMargin,\r\n    dropdownWidth,\r\n    assetBalanceClassName,\r\n    addTokenState,\r\n    register,\r\n}) => {\r\n    const [searchResult, setSearchResult] = useState<TokenWithBalance[]>([])\r\n    const [search, setSearch] = useState<string | null>(null)\r\n    const [assetList, setAssetList] = useState<TokenWithBalance[]>([])\r\n\r\n    const { currentNetworkTokens, nativeToken } = useTokensList()\r\n    const swappedAssetList = useSwappedTokenList()\r\n\r\n    const defaultAssetList = [nativeToken].concat(currentNetworkTokens)\r\n\r\n    useEffect(() => {\r\n        // Only set asset list if this keeps being empty due to hooks init\r\n        if (!assetList.length) {\r\n            setAssetList(defaultAssetList)\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [defaultAssetList])\r\n\r\n    useEffect(() => {\r\n        const searchAll = async () => {\r\n            // If there is no search return the list of swapped assets\r\n            if (!search) {\r\n                setSearchResult(swappedAssetList)\r\n                return\r\n            }\r\n\r\n            const input = search.toLowerCase()\r\n            let searchRes = (await searchTokenInAssetsList(input)).tokens\r\n\r\n            searchRes = searchRes.filter((t) => !!t.symbol)\r\n\r\n            // Order search\r\n            let ownedAsset: TokenWithBalance[] = []\r\n            let exactResult: TokenWithBalance[] = []\r\n            let partialResult: TokenWithBalance[] = []\r\n            let elseResult: TokenWithBalance[] = []\r\n\r\n            // Limit the results\r\n            const searchLength =\r\n                searchRes.length > SEARCH_LIMIT\r\n                    ? SEARCH_LIMIT\r\n                    : searchRes.length\r\n\r\n            for (let index = 0; index < searchLength; index++) {\r\n                const ownedArray = defaultAssetList.filter(({ token }) => {\r\n                    return (\r\n                        token.address.toLowerCase() ===\r\n                        searchRes[index].address.toLowerCase()\r\n                    )\r\n                })\r\n\r\n                if (ownedArray.length) {\r\n                    ownedAsset.push({\r\n                        token: searchRes[index] as Token,\r\n                        balance: ZERO_BN,\r\n                    })\r\n                    continue\r\n                }\r\n\r\n                const lcSymbol = searchRes[index].symbol.toLowerCase()\r\n\r\n                if (input === lcSymbol) {\r\n                    exactResult.push({\r\n                        token: searchRes[index] as Token,\r\n                        balance: ZERO_BN,\r\n                    })\r\n                    continue\r\n                }\r\n\r\n                const isPartialResult = lcSymbol.startsWith(input)\r\n\r\n                if (isPartialResult) {\r\n                    partialResult.push({\r\n                        token: searchRes[index] as Token,\r\n                        balance: ZERO_BN,\r\n                    })\r\n                } else {\r\n                    elseResult.push({\r\n                        token: searchRes[index] as Token,\r\n                        balance: ZERO_BN,\r\n                    })\r\n                }\r\n            }\r\n\r\n            setSearchResult(\r\n                ownedAsset\r\n                    .concat(exactResult)\r\n                    .concat(partialResult)\r\n                    .concat(elseResult)\r\n            )\r\n        }\r\n\r\n        if (selectedAssetList !== AssetListType.ALL) {\r\n            const result = assetList.filter(({ token }: TokenWithBalance) => {\r\n                if (!search) {\r\n                    return true\r\n                }\r\n\r\n                const name = token.name.toUpperCase()\r\n                const symbol = token.symbol.toUpperCase()\r\n                const uppercasedSearch = search.toUpperCase()\r\n\r\n                return (\r\n                    name.includes(uppercasedSearch) ||\r\n                    symbol.includes(uppercasedSearch)\r\n                )\r\n            })\r\n\r\n            setSearchResult(result)\r\n        } else {\r\n            searchAll()\r\n        }\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [search, assetList])\r\n\r\n    const onSearchInputChange = (event: ChangeEvent<HTMLInputElement>) => {\r\n        let value: string | null = event.target.value\r\n\r\n        value = value.replace(/\\W/g, \"\")\r\n\r\n        if (!value) {\r\n            value = null\r\n        }\r\n\r\n        setSearch(value)\r\n    }\r\n\r\n    const onAssetClick = async (\r\n        asset: TokenWithBalance,\r\n        setActive?: Dispatch<SetStateAction<boolean>>\r\n    ) => {\r\n        const assetBalance =\r\n            defaultAssetList.find(\r\n                (element) => element.token.address === asset.token.address\r\n            )?.balance || BigNumber.from(0)\r\n\r\n        onAssetChange({\r\n            token: asset.token,\r\n            balance: assetBalance,\r\n        })\r\n        setActive && setActive(false)\r\n    }\r\n\r\n    // Effect to update selected token when balance is updated to make parent component estimate gas again.\r\n    useCustomCompareEffect(\r\n        () => {\r\n            if (!selectedAsset) return\r\n\r\n            const asset = assetList.find(\r\n                (t) => t.token.address === selectedAsset.token.address\r\n            )\r\n\r\n            if (asset) {\r\n                onAssetChange(asset)\r\n            }\r\n        },\r\n        [assetList],\r\n        (prevDeps, nextDeps) => {\r\n            const prevAssets = prevDeps[0]\r\n            const nextAssets = nextDeps[0]\r\n\r\n            // No selected token, skip effect.\r\n            if (!selectedAsset || !prevAssets || !nextAssets) return true\r\n\r\n            const prevToken = prevAssets.find(\r\n                (t) => t.token.address === selectedAsset.token.address\r\n            )\r\n\r\n            // Token not found, skip effect\r\n            if (!prevToken) return true\r\n\r\n            const nextToken = nextAssets.find(\r\n                (t) => t.token.address === selectedAsset.token.address\r\n            )\r\n\r\n            // Token not found, skip effect\r\n            if (!nextToken) return true\r\n\r\n            // Compare balances\r\n            const oldBalance = BigNumber.from(prevToken.balance)\r\n            const newBalance = BigNumber.from(nextToken.balance)\r\n\r\n            // If equal, skip effect\r\n            return oldBalance.eq(newBalance)\r\n        }\r\n    )\r\n\r\n    const assetBalance: string | undefined = selectedAsset?.balance\r\n        ? formatRounded(\r\n              formatUnits(\r\n                  selectedAsset.balance || 0,\r\n                  selectedAsset.token.decimals\r\n              ),\r\n              4\r\n          )\r\n        : undefined\r\n\r\n    return (\r\n        <DropDownSelector\r\n            display={\r\n                <AssetDropdownDisplay\r\n                    selectedAsset={selectedAsset}\r\n                    displayIcon={displayIcon}\r\n                    customAmount={customAmount}\r\n                    assetBalance={assetBalance}\r\n                    assetBalanceClassName={assetBalanceClassName}\r\n                />\r\n            }\r\n            error={error}\r\n            topMargin={topMargin || 0}\r\n            bottomMargin={bottomMargin || 0}\r\n            popupMargin={popupMargin || 16}\r\n            customWidth={dropdownWidth}\r\n        >\r\n            <div className=\"w-full p-3\">\r\n                <SearchInput\r\n                    name=\"tokenName\"\r\n                    placeholder=\"Search tokens by name or address\"\r\n                    disabled={false}\r\n                    autoFocus={true}\r\n                    onChange={onSearchInputChange}\r\n                    defaultValue={search ?? \"\"}\r\n                />\r\n            </div>\r\n            <AssetList\r\n                addTokenState={addTokenState}\r\n                assets={searchResult}\r\n                onAssetClick={onAssetClick}\r\n                register={register}\r\n                searchValue={search}\r\n                selectedAddress={selectedAsset?.token.address}\r\n            />\r\n        </DropDownSelector>\r\n    )\r\n}\r\n","const GasIcon = () => (\r\n    <svg\r\n        width=\"16\"\r\n        height=\"16\"\r\n        viewBox=\"0 0 16 16\"\r\n        fill=\"none\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n        <path\r\n            fillRule=\"evenodd\"\r\n            clipRule=\"evenodd\"\r\n            d=\"M12 3V2C12 0.89697 11.103 0 10 0H2C0.89697 0 0 0.89697 0 2V16H12V12.8157C12.3143 12.9277 12.6476 13 13 13C14.6543 13 16 11.6543 16 10V3H12ZM14 10C14 10.5513 13.5513 11 13 11C12.4487 11 12 10.5513 12 10V5H14V10ZM3 3H9V8H3V3Z\"\r\n            fill=\"currentColor\"\r\n        />\r\n    </svg>\r\n)\r\n\r\nexport default GasIcon\r\n","export default __webpack_public_path__ + \"static/media/car.65fda5bf.svg\";","export default __webpack_public_path__ + \"static/media/scooter.42da906d.svg\";","export default __webpack_public_path__ + \"static/media/plane.cf60fcc3.svg\";","import { FC, useState } from \"react\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport classnames from \"classnames\"\r\nimport { GasPriceLevels } from \"@block-wallet/background/controllers/GasPricesController\"\r\nimport Dialog from \"../dialog/Dialog\"\r\n\r\nimport AnimatedIcon, { AnimatedIconName } from \"../AnimatedIcon\"\r\n\r\n// icons\r\nimport CloseIcon from \"../icons/CloseIcon\"\r\nimport GasIcon from \"../icons/GasIcon\"\r\nimport Tooltip from \"../label/Tooltip\"\r\nimport { AiFillInfoCircle } from \"react-icons/ai\"\r\n\r\n// hooks\r\nimport { useGasPriceData } from \"../../context/hooks/useGasPriceData\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport {\r\n    gasPriceToNativeCurrency,\r\n    getTransactionFees,\r\n} from \"../../util/gasPrice\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { FeeData } from \"@ethersproject/abstract-provider\"\r\nimport { SEND_GAS_COST } from \"../../util/constants\"\r\nimport car from \"../../assets/images/icons/car.svg\"\r\nimport scooter from \"../../assets/images/icons/scooter.svg\"\r\nimport plane from \"../../assets/images/icons/plane.svg\"\r\n\r\nexport type DisplayGasPricesData = {\r\n    baseFee?: string\r\n    priority?: string\r\n    totalGwei: string\r\n    totalTransactionCost: BigNumber\r\n}\r\n\r\ntype DisplayGasPricesLevels = {\r\n    slow: DisplayGasPricesData\r\n    average: DisplayGasPricesData\r\n    fast: DisplayGasPricesData\r\n}\r\n\r\nconst defaultObj = {\r\n    totalGwei: \"\",\r\n    totalTransactionCost: BigNumber.from(0),\r\n}\r\n\r\nconst getDisplayGasPrices = (\r\n    isEIP1559Compatible: boolean,\r\n    gasPrices: GasPriceLevels,\r\n    estimatedBaseFee: BigNumber,\r\n    gasLimit: BigNumber\r\n): DisplayGasPricesLevels | undefined => {\r\n    if (gasPrices) {\r\n        return (\r\n            Object.entries(gasPrices) as Array<[keyof GasPriceLevels, FeeData]>\r\n        ).reduce(\r\n            (acc: DisplayGasPricesLevels, [level, gasPrice]) => {\r\n                return {\r\n                    ...acc,\r\n                    [level]: getTransactionFees(\r\n                        isEIP1559Compatible,\r\n                        gasPrice,\r\n                        estimatedBaseFee,\r\n                        gasLimit\r\n                    ),\r\n                }\r\n            },\r\n            { slow: defaultObj, average: defaultObj, fast: defaultObj }\r\n        )\r\n    }\r\n\r\n    return undefined\r\n}\r\n\r\nconst GasData = ({ children }: { children: React.ReactNode }) => {\r\n    return (\r\n        <div className=\"flex flex-col p-3 space-y-1\">\r\n            <ul className=\"list-none\">{children}</ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst GasDataInfo: FC<{ label: string; value: string }> = ({\r\n    label,\r\n    value,\r\n}) => {\r\n    return (\r\n        <li className=\"flex flex-row space-x-2 justify-between space-y-1\">\r\n            <span className=\"font-semibold text-xs\">{label}:</span>\r\n            <span className=\"text-xs text-gray-500\">{value}</span>\r\n        </li>\r\n    )\r\n}\r\n\r\nconst INFO_BY_LEVEL = {\r\n    slow: {\r\n        icon: scooter,\r\n        title: \"Low\",\r\n        color: \"text-green-500\",\r\n    },\r\n    average: {\r\n        icon: car,\r\n        title: \"Medium\",\r\n        color: \"text-yellow-500\",\r\n    },\r\n    fast: {\r\n        icon: plane,\r\n        title: \"Fast\",\r\n        color: \"text-red-600\",\r\n    },\r\n}\r\n\r\nconst GasPricesInfo: FC = () => {\r\n    const [active, setActive] = useState(false)\r\n    const [calculateGasCost] = useState<\"SEND\">(\"SEND\")\r\n    const {\r\n        exchangeRates,\r\n        nativeCurrency,\r\n        localeInfo,\r\n        networkNativeCurrency,\r\n        isNetworkChanging,\r\n        isRatesChangingAfterNetworkChange,\r\n    } = useBlankState()!\r\n\r\n    const {\r\n        showGasLevels,\r\n        isEIP1559Compatible,\r\n        nativeCurrency: { decimals: nativeCurrencyDecimals },\r\n    } = useSelectedNetwork()\r\n    const { gasPricesLevels, estimatedBaseFee } = useGasPriceData()\r\n\r\n    const GAS_LIMITS = {\r\n        SEND: SEND_GAS_COST,\r\n    }\r\n    const displayGasPrices = getDisplayGasPrices(\r\n        !!isEIP1559Compatible,\r\n        gasPricesLevels,\r\n        estimatedBaseFee!,\r\n        GAS_LIMITS[calculateGasCost]\r\n    )\r\n\r\n    const isLoading =\r\n        isNetworkChanging ||\r\n        isRatesChangingAfterNetworkChange ||\r\n        !displayGasPrices\r\n\r\n    return (\r\n        <>\r\n            {/* Label */}\r\n            <div\r\n                className={`flex flex-row items-center space-x-1 ${\r\n                    showGasLevels\r\n                        ? \"transition duration-300 hover:text-primary-300  cursor-pointer\"\r\n                        : \"\"\r\n                }`}\r\n                onClick={() => {\r\n                    if (showGasLevels) setActive(!active)\r\n                }}\r\n            >\r\n                {isLoading ? (\r\n                    <AnimatedIcon\r\n                        icon={AnimatedIconName.GreyLineLoadingSkeleton}\r\n                        className=\"h-4 w-6 rotate-180\"\r\n                        svgClassName=\"rounded-md\"\r\n                    />\r\n                ) : (\r\n                    <span className=\"text-sm font-bold\">\r\n                        {displayGasPrices.average.totalGwei}\r\n                    </span>\r\n                )}\r\n                <GasIcon />\r\n            </div>\r\n\r\n            {/* Modal */}\r\n            <div style={undefined}>\r\n                <Dialog open={active} onClickOutside={() => setActive(false)}>\r\n                    <span className=\"absolute top-0 right-0 p-4 z-50\">\r\n                        <div\r\n                            onClick={() => setActive(false)}\r\n                            className=\" cursor-pointer p-2 ml-auto -mr-2 text-gray-900 transition duration-300 rounded-full hover:bg-primary-100 hover:text-primary-300\"\r\n                        >\r\n                            <CloseIcon size=\"10\" />\r\n                        </div>\r\n                    </span>\r\n                    <div className=\"flex flex-col w-full space-y-2\">\r\n                        <div className=\"z-10 flex flex-row items-center p-2 bg-white bg-opacity-75\">\r\n                            <h2 className=\"px-2 pr-0 text-lg font-bold\">\r\n                                Gas Prices\r\n                            </h2>\r\n                            <div className=\"group relative\">\r\n                                <a\r\n                                    href=\"https://ethereum.org/en/developers/docs/gas/\"\r\n                                    target=\"_blank\"\r\n                                    rel=\"noreferrer\"\r\n                                >\r\n                                    <AiFillInfoCircle\r\n                                        size={26}\r\n                                        className=\"pl-2 text-primary-200 cursor-pointer hover:text-primary-300\"\r\n                                    />\r\n                                </a>\r\n                                <Tooltip\r\n                                    content={\r\n                                        <div className=\"flex flex-col font-normal items-start text-xs text-white-500\">\r\n                                            <div className=\"flex flex-row items-end space-x-7\">\r\n                                                <span>\r\n                                                    Gas is used to operate on\r\n                                                    the network.\r\n                                                </span>{\" \"}\r\n                                            </div>\r\n                                            <div className=\"flex flex-row items-end space-x-4\">\r\n                                                <span>\r\n                                                    Click on this icon to learn\r\n                                                    more.\r\n                                                </span>{\" \"}\r\n                                            </div>\r\n                                        </div>\r\n                                    }\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                            <div className=\"flex flex-col px-4 space-y-4\">\r\n                                {displayGasPrices &&\r\n                                    Object.entries(displayGasPrices).map(\r\n                                        ([level, gasPriceData]) => {\r\n                                            const info =\r\n                                                INFO_BY_LEVEL[\r\n                                                    level as keyof DisplayGasPricesLevels\r\n                                                ]\r\n                                            return (\r\n                                                <div\r\n                                                    className=\"flex flex-col border border-gray-200 rounded-lg space-y-1\"\r\n                                                    key={level}\r\n                                                >\r\n                                                    <div\r\n                                                        className={classnames(\r\n                                                            \"flex flex-row  items-center space-x-1 p-3\",\r\n                                                            isEIP1559Compatible &&\r\n                                                                \"border-b border-gray-200\"\r\n                                                        )}\r\n                                                    >\r\n                                                        <img\r\n                                                            src={info.icon}\r\n                                                            alt={`gas-prices-${info.title}`}\r\n                                                            className=\"mr-1\"\r\n                                                        />\r\n                                                        <span className=\"font-semibold text-xs\">\r\n                                                            {info.title} /\r\n                                                        </span>\r\n                                                        <span\r\n                                                            className={classnames(\r\n                                                                \"font-semibold text-xs ml-6 flex-1\"\r\n                                                            )}\r\n                                                        >\r\n                                                            {\r\n                                                                gasPriceData.totalGwei\r\n                                                            }{\" \"}\r\n                                                            GWEI\r\n                                                        </span>\r\n                                                        <span className=\"text-gray-500 text-xs\">\r\n                                                            ~\r\n                                                            {gasPriceToNativeCurrency(\r\n                                                                gasPriceData.totalTransactionCost,\r\n                                                                {\r\n                                                                    exchangeRates,\r\n                                                                    localeInfo:\r\n                                                                        {\r\n                                                                            currency:\r\n                                                                                nativeCurrency,\r\n                                                                            language:\r\n                                                                                localeInfo,\r\n                                                                        },\r\n                                                                    minValue: 0.01,\r\n                                                                    networkNativeCurrency:\r\n                                                                        {\r\n                                                                            symbol: networkNativeCurrency.symbol,\r\n                                                                            decimals:\r\n                                                                                nativeCurrencyDecimals,\r\n                                                                        },\r\n                                                                }\r\n                                                            )}\r\n                                                        </span>\r\n                                                    </div>\r\n                                                    {isEIP1559Compatible && (\r\n                                                        <GasData>\r\n                                                            <GasDataInfo\r\n                                                                label=\"Base Fee\"\r\n                                                                value={`${gasPriceData.baseFee} GWEI`}\r\n                                                            />\r\n                                                            <GasDataInfo\r\n                                                                label=\"Tip\"\r\n                                                                value={`${gasPriceData.priority} GWEI`}\r\n                                                            />\r\n                                                        </GasData>\r\n                                                    )}\r\n                                                </div>\r\n                                            )\r\n                                        }\r\n                                    )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </Dialog>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default GasPricesInfo\r\n","export default __webpack_public_path__ + \"static/media/vector_right.b686501a.svg\";","import React, { FunctionComponent } from \"react\"\r\nimport styled, { keyframes } from \"styled-components\"\r\n\r\nimport vector from \"../../assets/images/icons/vector_right.svg\"\r\n\r\nconst HoverAnimation = styled.div`\r\n    background-repeat: repeat;\r\n    background-position-y: 0;\r\n    a:hover > div > & {\r\n        .left-animation {\r\n            animation: ${keyframes`\r\n            from {\r\n              background-position-x: 0rem;\r\n            }\r\n            to {\r\n              background-position-x: 3.5rem;\r\n            }\r\n          `} 0.8s backwards;\r\n        }\r\n\r\n        .right-animation {\r\n            animation: ${keyframes`\r\n            from {\r\n              background-position-x: 0rem;\r\n            }\r\n            to {\r\n              background-position-x: 3.5rem;\r\n            }\r\n          `} 0.8s;\r\n        }\r\n    }\r\n`\r\n\r\nconst DoubleArrowHoverAnimation: FunctionComponent<{\r\n    children?: React.ReactNode\r\n}> = ({ children }) => (\r\n    <HoverAnimation className=\"flex flex-col items-center w-full h-full p-2\">\r\n        <div\r\n            className=\"w-full h-full right-animation\"\r\n            style={{\r\n                backgroundImage: `url(${vector})`,\r\n                backgroundSize: \"32px 100%\",\r\n                backgroundPosition: \"center\",\r\n            }}\r\n        >\r\n            {children}\r\n        </div>\r\n        <div\r\n            className=\"w-full h-full left-animation\"\r\n            style={{\r\n                backgroundImage: `url(${vector})`,\r\n                backgroundSize: \"32px 100%\",\r\n                backgroundPosition: \"center\",\r\n                transform: \"rotate(180deg)\",\r\n            }}\r\n        >\r\n            {children}\r\n        </div>\r\n    </HoverAnimation>\r\n)\r\n\r\nexport default DoubleArrowHoverAnimation\r\n","/*\r\n * Transparent overlay component to prevent clicks on all the extension buttons while loading.\r\n */\r\nconst TransparentOverlay = () => (\r\n    <div className=\"fixed inset-0 w-full h-screen z-40\"></div>\r\n)\r\n\r\nexport default TransparentOverlay\r\n","import { useState } from \"react\"\r\nimport classnames from \"classnames\"\r\nimport { Link, useHistory } from \"react-router-dom\"\r\nimport { formatUnits } from \"@ethersproject/units\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { BiCircle } from \"react-icons/bi\"\r\n\r\n// Components\r\nimport PageLayout from \"../components/PageLayout\"\r\nimport CopyTooltip from \"../components/label/Ð¡opyToClipboardTooltip\"\r\nimport GearIcon from \"../components/icons/GearIcon\"\r\nimport QRIcon from \"../components/icons/QRIcon\"\r\nimport NetworkSelect from \"../components/input/NetworkSelect\"\r\nimport ArrowHoverAnimation from \"../components/icons/ArrowHoverAnimation\"\r\nimport ErrorDialog from \"../components/dialog/ErrorDialog\"\r\nimport AccountIcon from \"../components/icons/AccountIcon\"\r\nimport ActivityAssetsView from \"../components/ActivityAssetsView\"\r\nimport GenericTooltip from \"../components/label/GenericTooltip\"\r\nimport AnimatedIcon, { AnimatedIconName } from \"../components/AnimatedIcon\"\r\nimport Tooltip from \"../components/label/Tooltip\"\r\n\r\n// Utils\r\nimport { formatHash, formatName } from \"../util/formatAccount\"\r\nimport { formatCurrency, toCurrencyAmount } from \"../util/formatCurrency\"\r\nimport { getAccountColor } from \"../util/getAccountColor\"\r\nimport { formatRounded } from \"../util/formatRounded\"\r\nimport { HiOutlineExclamationCircle } from \"react-icons/hi\"\r\n\r\n// Context\r\nimport { useBlankState } from \"../context/background/backgroundHooks\"\r\nimport { useSelectedAccount } from \"../context/hooks/useSelectedAccount\"\r\nimport { useSelectedNetwork } from \"../context/hooks/useSelectedNetwork\"\r\nimport { session } from \"../context/setup\"\r\nimport { useConnectedSite } from \"../context/hooks/useConnectedSite\"\r\nimport { useTokensList } from \"../context/hooks/useTokensList\"\r\n\r\n// Utils\r\nimport { useSelectedAddressWithChainIdChecksum } from \"../util/hooks/useSelectedAddressWithChainIdChecksum\"\r\n\r\n// Assets\r\nimport TokenSummary from \"../components/token/TokenSummary\"\r\nimport GasPricesInfo from \"../components/gas/GasPricesInfo\"\r\nimport DoubleArrowHoverAnimation from \"../components/icons/DoubleArrowHoverAnimation\"\r\nimport TransparentOverlay from \"../components/loading/TransparentOverlay\"\r\n\r\nconst AccountDisplay = () => {\r\n    const accountAddress = useSelectedAddressWithChainIdChecksum()\r\n    const account = useSelectedAccount()\r\n    const [copied, setCopied] = useState(false)\r\n    const copy = async () => {\r\n        await navigator.clipboard.writeText(accountAddress)\r\n        setCopied(true)\r\n        await new Promise((resolve) => setTimeout(resolve, 1000))\r\n        setCopied(false)\r\n    }\r\n    return (\r\n        <button\r\n            type=\"button\"\r\n            className=\"relative flex flex-col group\"\r\n            onClick={copy}\r\n        >\r\n            <span className=\"text-sm font-bold\" data-testid=\"account-name\">\r\n                {formatName(account.name, 18)}\r\n            </span>\r\n            <span className=\"text-xs text-gray-600 truncate\">\r\n                {formatHash(accountAddress)}\r\n            </span>\r\n            <CopyTooltip copied={copied} />\r\n        </button>\r\n    )\r\n}\r\n\r\nconst DAppConnection = () => {\r\n    const dAppConnected = useConnectedSite()\r\n    const history = useHistory()!\r\n    return (\r\n        <GenericTooltip\r\n            bottom\r\n            className=\"p-2 w-150 overflow-auto -m-4 transition delay-300 hover:delay-0 ease-in-out\"\r\n            content={\r\n                <div>\r\n                    <p className=\"w-100 text-center\">\r\n                        {dAppConnected === \"connected\" ? (\r\n                            <span>You are connected to the open site</span>\r\n                        ) : (\r\n                            <span>You are not connected to the open site</span>\r\n                        )}\r\n                    </p>\r\n                </div>\r\n            }\r\n        >\r\n            <div\r\n                onClick={() => {\r\n                    if (dAppConnected !== \"not-connected\") {\r\n                        history.push({\r\n                            pathname:\r\n                                \"/accounts/menu/connectedSites/accountList\",\r\n                            state: {\r\n                                origin: session?.origin,\r\n                                fromRoot: true,\r\n                            },\r\n                        })\r\n                    }\r\n                }}\r\n                className={classnames(\r\n                    \"relative flex flex-row items-center p-1 px-2 pr-1  text-gray-600 rounded-md group border border-primary-200  text-xs cursor-pointer\",\r\n                    dAppConnected === \"connected\" &&\r\n                        \"bg-green-100 hover:border-green-300\",\r\n                    dAppConnected === \"connected-warning\" &&\r\n                        \"bg-yellow-100 hover:border-yellow-300\",\r\n                    dAppConnected === \"not-connected\" && \"pointer-events-none\"\r\n                )}\r\n            >\r\n                {dAppConnected === \"connected\" && (\r\n                    <span className=\"relative inline-flex rounded-full h-2 w-2 mr-2 animate-pulse bg-green-400 pointer-events-none\"></span>\r\n                )}\r\n\r\n                {dAppConnected === \"connected-warning\" && (\r\n                    <HiOutlineExclamationCircle\r\n                        size={16}\r\n                        className=\"mr-1 text-yellow-600\"\r\n                    />\r\n                )}\r\n\r\n                {dAppConnected === \"not-connected\" && (\r\n                    <BiCircle className=\"mr-1 w-2\" />\r\n                )}\r\n\r\n                <span\r\n                    className={classnames(\r\n                        \"mr-1 pointer-events-none\",\r\n                        dAppConnected === \"connected\" && \"text-green-600\",\r\n                        dAppConnected === \"connected-warning\" &&\r\n                            \"text-yellow-600\"\r\n                    )}\r\n                >\r\n                    {dAppConnected === \"not-connected\"\r\n                        ? \"Not connected\"\r\n                        : \"Connected\"}\r\n                </span>\r\n            </div>\r\n        </GenericTooltip>\r\n    )\r\n}\r\n\r\nconst PopupPage = () => {\r\n    const error = (useHistory().location.state as { error: string })?.error\r\n    const state = useBlankState()!\r\n    const history = useHistory()\r\n    const { nativeToken } = useTokensList()\r\n    const { nativeCurrency, isSendEnabled, isSwapEnabled, isBridgeEnabled } =\r\n        useSelectedNetwork()\r\n    const checksumAddress = useSelectedAddressWithChainIdChecksum()\r\n    const [hasErrorDialog, setHasErrorDialog] = useState(!!error)\r\n\r\n    const isLoading =\r\n        state.isNetworkChanging || state.isRatesChangingAfterNetworkChange\r\n\r\n    return (\r\n        <PageLayout screen className=\"max-h-screen popup-layout\">\r\n            <ErrorDialog\r\n                title=\"Error!\"\r\n                message={error}\r\n                open={hasErrorDialog}\r\n                onClickOutside={() => {\r\n                    setHasErrorDialog(false)\r\n                }}\r\n                onDone={() => setHasErrorDialog(false)}\r\n            />\r\n            {state.isNetworkChanging && <TransparentOverlay />}\r\n            <div\r\n                className=\"absolute top-0 left-0 z-10 flex flex-col items-start w-full p-6 bg-white bg-opacity-75 border-b border-b-gray-200 popup-layout\"\r\n                style={{ backdropFilter: \"blur(4px)\" }}\r\n            >\r\n                <div className=\"flex flex-row items-center justify-between w-full\">\r\n                    <div className=\"flex flex-row items-center space-x-3\">\r\n                        <div className=\"relative flex flex-col items-start group\">\r\n                            <Link\r\n                                to=\"/accounts\"\r\n                                className=\"transition duration-300\"\r\n                                draggable={false}\r\n                                data-testid=\"navigate-account-link\"\r\n                            >\r\n                                <AccountIcon\r\n                                    className=\"w-8 h-8 transition-transform duration-200 ease-in transform hover:rotate-180\"\r\n                                    fill={getAccountColor(checksumAddress)}\r\n                                />\r\n                            </Link>\r\n                            <Tooltip\r\n                                className=\"pointer-events-none absolute bottom-0 -mb-2 transform !translate-x-0 !translate-y-full p-2 rounded-md text-xs font-bold bg-gray-900 text-white\"\r\n                                content={\r\n                                    <>\r\n                                        <div className=\"border-t-4 border-r-4 border-gray-900 absolute top-0 left-2 w-2 h-2 -mt-2.5 transform -rotate-45 -translate-x-1/2\" />\r\n                                        <span>My Accounts</span>\r\n                                    </>\r\n                                }\r\n                            />\r\n                        </div>\r\n                        <div className=\"flex flex-row items-center space-x-1\">\r\n                            <AccountDisplay />\r\n                            <Link\r\n                                to=\"/accounts/menu/receive\"\r\n                                draggable={false}\r\n                                onClick={(e) => {\r\n                                    e.preventDefault()\r\n\r\n                                    history.push(\"/accounts/menu/receive\")\r\n                                }}\r\n                                className=\"p-2 transition duration-300 rounded-full hover:bg-primary-100 hover:text-primary-300\"\r\n                            >\r\n                                <QRIcon />\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex flex-row items-center -mr-1 space-x-2\">\r\n                        <GasPricesInfo />\r\n                        <Link\r\n                            to=\"/settings\"\r\n                            draggable={false}\r\n                            onClick={(e) => {\r\n                                e.preventDefault()\r\n\r\n                                history.push(\"/settings\")\r\n                            }}\r\n                            className=\"p-2 transition duration-300 rounded-full hover:bg-primary-100 hover:text-primary-300\"\r\n                        >\r\n                            <GearIcon />\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"flex flex-col items-start flex-1 w-full h-0 max-h-screen p-6 pt-24 space-y-2 overflow-auto hide-scroll\">\r\n                <div className=\"w-full\">\r\n                    <div className=\"flex flex-row items-start w-full justify-between pt-1 pb-2\">\r\n                        <GenericTooltip\r\n                            bottom\r\n                            disabled={!state.isImportingDeposits}\r\n                            content={\r\n                                <p className=\"w-40 text-center\">\r\n                                    Please wait until deposits are done loading\r\n                                    to change networks. This can take up to 15\r\n                                    minutes.\r\n                                </p>\r\n                            }\r\n                        >\r\n                            <NetworkSelect />\r\n                        </GenericTooltip>\r\n                        <DAppConnection />\r\n                    </div>\r\n                    <TokenSummary className=\"p-4\">\r\n                        <TokenSummary.Balances>\r\n                            <TokenSummary.TokenBalance\r\n                                title={\r\n                                    formatUnits(\r\n                                        nativeToken.balance || \"0\",\r\n                                        nativeCurrency.decimals\r\n                                    ) + ` ${nativeCurrency.symbol}`\r\n                                }\r\n                            >\r\n                                {formatRounded(\r\n                                    formatUnits(\r\n                                        nativeToken.balance || \"0\",\r\n                                        nativeCurrency.decimals\r\n                                    ),\r\n                                    5\r\n                                )}{\" \"}\r\n                                {nativeCurrency.symbol}\r\n                            </TokenSummary.TokenBalance>\r\n                            <TokenSummary.ExchangeRateBalance>\r\n                                {formatCurrency(\r\n                                    toCurrencyAmount(\r\n                                        nativeToken.balance ||\r\n                                            BigNumber.from(0),\r\n                                        state.exchangeRates[\r\n                                            state.networkNativeCurrency.symbol\r\n                                        ],\r\n                                        nativeCurrency.decimals\r\n                                    ),\r\n                                    {\r\n                                        currency: state.nativeCurrency,\r\n                                        locale_info: state.localeInfo,\r\n                                        returnNonBreakingSpace: true,\r\n                                        showSymbol: true,\r\n                                    }\r\n                                )}\r\n                            </TokenSummary.ExchangeRateBalance>\r\n                        </TokenSummary.Balances>\r\n                        <TokenSummary.Actions>\r\n                            <Link\r\n                                to=\"/send\"\r\n                                draggable={false}\r\n                                className={classnames(\r\n                                    \"flex flex-col items-center space-y-2 group\",\r\n                                    !isSendEnabled && \"pointer-events-none\"\r\n                                )}\r\n                            >\r\n                                <div\r\n                                    className={classnames(\r\n                                        \"w-8 h-8 overflow-hidden transition duration-300 rounded-full group-hover:opacity-75\",\r\n                                        !isSendEnabled\r\n                                            ? \"bg-gray-300\"\r\n                                            : \"bg-primary-300\"\r\n                                    )}\r\n                                    style={{ transform: \"scaleY(-1)\" }}\r\n                                >\r\n                                    {isLoading ? (\r\n                                        <div className=\"flex flex-row items-center justify-center w-full h-full\">\r\n                                            <AnimatedIcon\r\n                                                icon={\r\n                                                    AnimatedIconName.BlueCircleLoadingSkeleton\r\n                                                }\r\n                                                className=\"w-4 h-4 pointer-events-none\"\r\n                                            />\r\n                                        </div>\r\n                                    ) : (\r\n                                        <ArrowHoverAnimation />\r\n                                    )}\r\n                                </div>\r\n                                <span className=\"text-xs font-medium\">\r\n                                    Send\r\n                                </span>\r\n                            </Link>\r\n                            {isSwapEnabled && (\r\n                                <Link\r\n                                    to=\"/swap\"\r\n                                    draggable={false}\r\n                                    className={classnames(\r\n                                        \"flex flex-col items-center space-y-2 group\",\r\n                                        (!isSendEnabled ||\r\n                                            !state.isUserNetworkOnline) &&\r\n                                            \"pointer-events-none\"\r\n                                    )}\r\n                                >\r\n                                    <div\r\n                                        className={classnames(\r\n                                            \"w-8 h-8 overflow-hidden transition duration-300 rounded-full group-hover:opacity-75\",\r\n                                            !isSendEnabled ||\r\n                                                !state.isUserNetworkOnline\r\n                                                ? \"bg-gray-300\"\r\n                                                : \"bg-primary-300\"\r\n                                        )}\r\n                                        style={{ transform: \"scaleY(-1)\" }}\r\n                                    >\r\n                                        {isLoading ? (\r\n                                            <div className=\"flex flex-row items-center justify-center w-full h-full\">\r\n                                                <AnimatedIcon\r\n                                                    icon={\r\n                                                        AnimatedIconName.BlueCircleLoadingSkeleton\r\n                                                    }\r\n                                                    className=\"w-4 h-4 pointer-events-none rotate-180\"\r\n                                                />\r\n                                            </div>\r\n                                        ) : (\r\n                                            <DoubleArrowHoverAnimation />\r\n                                        )}\r\n                                    </div>\r\n                                    <span className=\"text-xs font-medium\">\r\n                                        Swap\r\n                                    </span>\r\n                                </Link>\r\n                            )}\r\n                            {isBridgeEnabled && (\r\n                                <Link\r\n                                    to=\"/bridge\"\r\n                                    draggable={false}\r\n                                    className={classnames(\r\n                                        \"flex flex-col items-center space-y-2 group\",\r\n                                        (!isSendEnabled ||\r\n                                            !state.isUserNetworkOnline) &&\r\n                                            \"pointer-events-none\"\r\n                                    )}\r\n                                >\r\n                                    <div\r\n                                        className={classnames(\r\n                                            \"w-8 h-8 overflow-hidden transition duration-300 rounded-full group-hover:opacity-75\",\r\n                                            !isSendEnabled ||\r\n                                                !state.isUserNetworkOnline\r\n                                                ? \"bg-gray-300\"\r\n                                                : \"bg-primary-300\"\r\n                                        )}\r\n                                        style={{ transform: \"scaleY(-1)\" }}\r\n                                    >\r\n                                        {isLoading ? (\r\n                                            <div className=\"flex flex-row items-center justify-center w-full h-full\">\r\n                                                <AnimatedIcon\r\n                                                    icon={\r\n                                                        AnimatedIconName.BlueCircleLoadingSkeleton\r\n                                                    }\r\n                                                    className=\"w-4 h-4 pointer-events-none\"\r\n                                                />\r\n                                            </div>\r\n                                        ) : (\r\n                                            <AnimatedIcon\r\n                                                icon={AnimatedIconName.Bridge}\r\n                                                className=\"cursor-pointer\"\r\n                                            />\r\n                                        )}\r\n                                    </div>\r\n                                    <span className=\"text-xs font-medium\">\r\n                                        Bridge\r\n                                    </span>\r\n                                </Link>\r\n                            )}\r\n                        </TokenSummary.Actions>\r\n                    </TokenSummary>\r\n                    <ActivityAssetsView initialTab={state.popupTab} />\r\n                </div>\r\n            </div>\r\n        </PageLayout>\r\n    )\r\n}\r\n\r\nexport default PopupPage\r\n","import { useEffect, useState } from \"react\"\r\nimport { useBlankState } from \"../background/backgroundHooks\"\r\nimport { session } from \"../setup\"\r\n\r\nexport type connectedSiteStatus =\r\n    | \"not-connected\"\r\n    | \"connected\"\r\n    | \"connected-warning\"\r\n\r\nexport const useConnectedSite = () => {\r\n    const [isConnected, setIsConnected] = useState<connectedSiteStatus>(\r\n        \"not-connected\"\r\n    )\r\n    const { permissions, selectedAddress } = useBlankState()!\r\n\r\n    useEffect(() => {\r\n        // Status:\r\n        //      Not connected: site does not have permissions.\r\n        //      Connected: origin is in permissions array and active address is the selected address.\r\n        //      Connected with warning: selected address differs from active/connected one.\r\n        let status: connectedSiteStatus = \"not-connected\"\r\n        if (session !== null && session.origin) {\r\n            const siteHasPermissions =\r\n                session !== null &&\r\n                Object.keys(permissions).includes(session.origin!)\r\n\r\n            if (siteHasPermissions) {\r\n                const activeAccountIsSelected =\r\n                    permissions[session.origin].activeAccount ===\r\n                    selectedAddress\r\n                status = activeAccountIsSelected\r\n                    ? \"connected\"\r\n                    : \"connected-warning\"\r\n            }\r\n        }\r\n\r\n        setIsConnected(status)\r\n    }, [permissions, selectedAddress])\r\n\r\n    return isConnected\r\n}\r\n","const OpenExplorerIcon = () => (\r\n    <svg\r\n        width=\"16\"\r\n        height=\"16\"\r\n        viewBox=\"0 0 16 16\"\r\n        fill=\"none\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n        <g clipPath=\"url(#clip0_6362_1978)\">\r\n            <path\r\n                d=\"M15.0008 0H8.00078V2H12.6008L6.30078 8.3L7.70078 9.7L14.0008 3.4V8H16.0008V1C16.0008 0.4 15.6008 0 15.0008 0Z\"\r\n                fill=\"currentColor\"\r\n            />\r\n            <path\r\n                d=\"M14 16H1C0.4 16 0 15.6 0 15V2C0 1.4 0.4 1 1 1H5V3H2V14H13V11H15V15C15 15.6 14.6 16 14 16Z\"\r\n                fill=\"currentColor\"\r\n            />\r\n        </g>\r\n        <defs>\r\n            <clipPath id=\"clip0_6362_1978\">\r\n                <rect width=\"16\" height=\"16\" fill=\"white\" />\r\n            </clipPath>\r\n        </defs>\r\n    </svg>\r\n)\r\n\r\nexport default OpenExplorerIcon\r\n","import { FunctionComponent } from \"react\"\r\nimport openIcon from \"../../assets/images/icons/open_external.svg\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { generateExplorerLink, getExplorerTitle } from \"../../util/getExplorer\"\r\nimport OpenExplorerIcon from \"../icons/OpenExplorerIcon\"\r\n\r\nexport const ViewOnExplorerButton: FunctionComponent<{\r\n    type?: \"tx\" | \"address\"\r\n    hash: string\r\n    mode?: \"button\" | \"icon\"\r\n}> = ({ type = \"tx\", hash, mode = \"button\" }) => {\r\n    const { selectedNetwork, availableNetworks } = useBlankState()!\r\n    const explorerName = getExplorerTitle(availableNetworks, selectedNetwork)\r\n    const explorerLink = generateExplorerLink(\r\n        availableNetworks,\r\n        selectedNetwork,\r\n        hash,\r\n        type\r\n    )\r\n\r\n    return mode === \"button\" ? (\r\n        <a\r\n            className=\"flex flex-row items-center justify-start py-4 px-4 mt-4 w-full space-x-2 bg-primary-100 rounded-md text-black text-sm font-bold hover:bg-primary-200\"\r\n            href={explorerLink}\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n        >\r\n            <img src={openIcon} alt=\"visit\" className=\"w-5 h-5 mr-1\" />\r\n            <span>View on {explorerName}</span>\r\n        </a>\r\n    ) : (\r\n        <a\r\n            className=\"text-black hover:text-primary-300 cursor-pointer\"\r\n            href={explorerLink}\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            title={\"View on \" + explorerName}\r\n        >\r\n            <OpenExplorerIcon />\r\n        </a>\r\n    )\r\n}\r\n","import { useState } from \"react\"\r\nimport PopupLayout from \"../components/popup/PopupLayout\"\r\nimport PopupHeader from \"../components/popup/PopupHeader\"\r\nimport CopyTooltip from \"../components/label/Ð¡opyToClipboardTooltip\"\r\nimport QRCode from \"qrcode.react\"\r\nimport { useSelectedAccount } from \"../context/hooks/useSelectedAccount\"\r\nimport { useOnMountHistory } from \"../context/hooks/useOnMount\"\r\nimport { ViewOnExplorerButton } from \"../components/button/ViewOnExplorerButtons\"\r\n\r\nconst ReceivePage = () => {\r\n    const history = useOnMountHistory()\r\n    const account = useSelectedAccount()!\r\n    const accountAddress = history.location.state?.address ?? account.address\r\n    const [copied, setCopied] = useState(false)\r\n    const copyToClipboard = async () => {\r\n        await navigator.clipboard.writeText(accountAddress)\r\n        setCopied(true)\r\n        await new Promise((resolve) => setTimeout(resolve, 1000))\r\n        setCopied(false)\r\n    }\r\n\r\n    return (\r\n        <PopupLayout header={<PopupHeader title=\"Receive Funds\" keepState />}>\r\n            <div className=\"flex items-center justify-center my-6\">\r\n                <QRCode value={accountAddress} />\r\n            </div>\r\n            <hr />\r\n            <div className=\"flex flex-col items-center justify-center w-full mt-6 px-6\">\r\n                <button\r\n                    type=\"button\"\r\n                    className=\"flex flex-row items-stretch justify-between group relative w-full bg-primary-100 rounded-md hover:bg-primary-200 cursor-pointer\"\r\n                    onClick={copyToClipboard}\r\n                >\r\n                    <span className=\"flex-grow py-4 px-4 \">\r\n                        <input\r\n                            value={accountAddress}\r\n                            disabled\r\n                            className=\"flex flex-row items-center justify-start w-full bg-opacity-0 truncate text-black text-sm font-bold outline-none cursor-pointer\"\r\n                        />\r\n                    </span>\r\n                    <CopyTooltip copied={copied}></CopyTooltip>\r\n                </button>\r\n                <ViewOnExplorerButton type=\"address\" hash={accountAddress} />\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\nexport default ReceivePage\r\n","import { useState, useRef, useEffect, FC, Children, cloneElement } from \"react\"\r\nimport arrowDown from \"../../assets/images/icons/arrow_down.svg\"\r\nimport classNames from \"classnames\"\r\nimport { Classes, classnames } from \"../../styles\"\r\n\r\n// Types\r\ntype DropDownSelectorProps = {\r\n    display: any\r\n    topMargin: number\r\n    bottomMargin: number\r\n    popupMargin: number\r\n    children: any\r\n    error?: string\r\n    disabled?: boolean\r\n    customWidth?: string\r\n    className?: string\r\n}\r\n\r\n/**\r\n * DropDownSelector\r\n * Creates a Dropdown selector who can contain anything passed as a child.\r\n * On click will show a responsive Popup who will take maximum size available between his Display and parent container's top or bottom.\r\n *\r\n * @param display - Display element\r\n * @param topMargin - The space between the top of DropDownSelector and the top of the page (size of header for example).\r\n * @param bottomMargin - The space between the bottom of DropDownSelector and the bottom of the page (size of footer for example).\r\n * @param popupMargin - Margin between top / bottom of the popup and the top / bottom of DropDownSelector parent.\r\n * @param error - If needed, the error to display.\r\n * @param disabled - Shows popup on click or not.\r\n * @param customWidth - Custom dropdown width\r\n */\r\nconst DropDownSelector: FC<DropDownSelectorProps> = ({\r\n    display,\r\n    topMargin,\r\n    bottomMargin,\r\n    className,\r\n    popupMargin,\r\n    error,\r\n    disabled,\r\n    children,\r\n    customWidth,\r\n}) => {\r\n    // State\r\n    const [active, setActive] = useState<boolean>(false)\r\n    const [midToTopDistance, setMidToTopDistance] = useState<number>(0)\r\n    const [maxHeightInPx, setMaxHeightInPx] = useState<number>(0)\r\n\r\n    // Refs\r\n    const displayRef = useRef<HTMLDivElement | null>(null)\r\n    const popupRef = useRef<HTMLDivElement | null>(null)\r\n\r\n    const viewHeight = 600 / 2 - (topMargin + bottomMargin) // Total Height - (Space between top of the page and DropDownSelector container's top + Space between bottom of the page and DropDownSelector container's bottom)\r\n\r\n    // Check if click is outside popup & close if true\r\n    const checkTargetClick = (target: any) => {\r\n        if (popupRef.current && displayRef.current) {\r\n            if (\r\n                !popupRef.current.contains(target) &&\r\n                !displayRef.current.contains(target)\r\n            ) {\r\n                setActive(false)\r\n            }\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        window.addEventListener(\"click\", (e: any) => {\r\n            checkTargetClick(e.target)\r\n        })\r\n\r\n        if (displayRef.current !== null) {\r\n            const midToTopDistanceCalc =\r\n                displayRef.current.getBoundingClientRect().top +\r\n                displayRef.current.getBoundingClientRect().height / 2 -\r\n                164 // Distance from the middle of DropDownSelector container to the top of DropDownSelector container.\r\n\r\n            const maxHeightInPxCalc =\r\n                midToTopDistanceCalc < viewHeight\r\n                    ? 600 - // Total Window Height\r\n                      (topMargin + bottomMargin) - // Top margin + Bottom margin\r\n                      16 - // Padding Bottom\r\n                      popupMargin - // Popup margin\r\n                      displayRef.current.getBoundingClientRect().bottom + // Top of Display element\r\n                      displayRef.current.getBoundingClientRect().height\r\n                    : displayRef.current.getBoundingClientRect().top - // Top of Display element\r\n                      16 - // Padding Top\r\n                      topMargin - // Top margin\r\n                      popupMargin // Popup margin\r\n\r\n            setMaxHeightInPx(maxHeightInPxCalc)\r\n            setMidToTopDistance(midToTopDistanceCalc)\r\n        }\r\n        // eslint-disable-next-line\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"relative\">\r\n            {/* Display */}\r\n            <div\r\n                className={classNames(\r\n                    Classes.blueSection,\r\n                    \"h-[4.5rem]\",\r\n                    \"space-x-1\",\r\n                    active && Classes.blueSectionActive,\r\n                    disabled && Classes.blueSelectionDisabled,\r\n                    error\r\n                        ? \"border-red-400\"\r\n                        : \"border-opacity-0 border-transparent\",\r\n                    className\r\n                )}\r\n                onClick={() => !disabled && setActive(!active)}\r\n                ref={displayRef}\r\n            >\r\n                {display}\r\n                <div className=\"flex justify-center items-center\">\r\n                    <img\r\n                        alt=\"active-arrow\"\r\n                        src={arrowDown}\r\n                        className={classnames(\r\n                            \"w-3 h-2 text-black\",\r\n                            active && \"rotate-180\"\r\n                        )}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {/* Popup */}\r\n            <div\r\n                className={classNames(\r\n                    \"absolute shadow-lg bg-white rounded-md z-30 my-2 overflow-y-auto select-none border-[0.5px] border-gray-200\",\r\n                    customWidth || \"w-full\",\r\n                    active ? \"opacity-1\" : \"opacity-0 pointer-events-none\", // Avoid reading size problem when not display\r\n                    midToTopDistance < viewHeight ? \"top-full\" : \"bottom-full\" // Determine if Popup should appear on top or on bottom of the Display element\r\n                )}\r\n                style={{\r\n                    maxHeight: `${maxHeightInPx}px`,\r\n                    minHeight:\r\n                        midToTopDistance > viewHeight\r\n                            ? `${maxHeightInPx}px`\r\n                            : undefined,\r\n                }}\r\n                ref={popupRef}\r\n            >\r\n                {/* Pass setActive method to children - To access it, call props.setActive on direct children react components*/}\r\n                {active &&\r\n                    Children.map(children, (child) => {\r\n                        return child.type !== \"div\"\r\n                            ? cloneElement(child, { setActive, ...child.props })\r\n                            : cloneElement(child, { ...child.props })\r\n                    })}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DropDownSelector\r\n","/**\r\n * useMergeRefs:\r\n * Allow using multiples refs on the same element.\r\n *\r\n * However this is very specific and is only used on SearchInput for now.\r\n * It allows yup ref & useOnClickOutside ref to be on the same element.\r\n */\r\nexport const useMergeRefs = (...refs: any) => {\r\n    const filteredRefs = refs.filter(Boolean)\r\n    if (!filteredRefs.length) return null\r\n    if (filteredRefs.length === 0) return filteredRefs[0]\r\n    return (inst: any) => {\r\n        for (const ref of filteredRefs) {\r\n            if (typeof ref === \"function\") {\r\n                ref(inst)\r\n            } else if (ref) {\r\n                ref.current = inst\r\n            }\r\n        }\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/search.58d978b7.svg\";","type CheckmarkCircleProps = {\r\n    color?: string\r\n    animate?: boolean\r\n    classes?: string\r\n    size?: string\r\n}\r\n\r\nconst CheckmarkCircle = (props: CheckmarkCircleProps) => {\r\n    const { color = \"#3DCA75\", classes = \"\", size = \"16\" } = props\r\n\r\n    return (\r\n        <svg\r\n            width={size}\r\n            height={size}\r\n            viewBox=\"0 0 24 24\"\r\n            fill=\"none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            className={classes}\r\n        >\r\n            <rect opacity=\"0.1\" width=\"24\" height=\"24\" rx=\"12\" fill={color} />\r\n            <path\r\n                d=\"M16.2929 7.29341L9.99992 13.5864L7.70692 11.2934C7.51832 11.1112 7.26571 11.0105 7.00352 11.0127C6.74132 11.015 6.49051 11.1202 6.3051 11.3056C6.11969 11.491 6.01452 11.7418 6.01224 12.004C6.00997 12.2662 6.11076 12.5188 6.29292 12.7074L9.29292 15.7074C9.48045 15.8949 9.73475 16.0002 9.99992 16.0002C10.2651 16.0002 10.5194 15.8949 10.7069 15.7074L17.7069 8.70741C17.8891 8.5188 17.9899 8.2662 17.9876 8.00401C17.9853 7.74181 17.8801 7.491 17.6947 7.30559C17.5093 7.12018 17.2585 7.01501 16.9963 7.01273C16.7341 7.01045 16.4815 7.11125 16.2929 7.29341Z\"\r\n                fill={color}\r\n            />\r\n        </svg>\r\n    )\r\n}\r\n\r\nexport default CheckmarkCircle\r\n","import { forwardRef, useState, useRef } from \"react\"\r\n\r\n// Style\r\nimport classnames from \"classnames\"\r\nimport { Classes } from \"../../styles/classes\"\r\n\r\n// Hooks\r\nimport { useOnClickOutside } from \"../../util/useOnClickOutside\"\r\nimport { useMergeRefs } from \"../../context/hooks/useMergeRefs\"\r\n\r\n// Assets\r\nimport searchIcon from \"../../assets/images/icons/search.svg\"\r\nimport CheckmarkCircle from \"../icons/CheckmarkCircle\"\r\n\r\n// Types\r\ntype SearchInputProps = {\r\n    label?: string\r\n    placeholder?: string\r\n    register?: any\r\n    name?: string\r\n    error?: string\r\n    warning?: string\r\n    disabled?: boolean\r\n    autoFocus?: boolean\r\n    autoComplete?: boolean\r\n    isValid?: boolean\r\n    onChange?: (event: any) => void\r\n    onPaste?: (event: any) => void\r\n    debounced?: boolean\r\n    debounceTime?: number\r\n    minSearchChar?: number\r\n    defaultValue?: string\r\n    inputClassName?: string\r\n}\r\n\r\n/**\r\n * SearchInput:\r\n * Creates a search text input.\r\n * On focus will hide search icon, and when isValid props is set to true, display a green outline & checkmark.\r\n *\r\n * @param label - Display label above input.\r\n * @param placeholder - Placeholder for the input.\r\n * @param name - Name of the input, for yup validation.\r\n * @param register - Yup reference.\r\n * @param error - Yup error or message to display as red error under input.\r\n * @param warning - Warning orange message to display under input.\r\n * @param disabled - Disabling input if true.\r\n * @param autoFocus - Auto focus input when entering page if true.\r\n * @param autoComplete - Enable browser autocomplete suggestions if true.\r\n * @param isValid - Display a green outline & checkmark if true.\r\n * @param onChange - Function to execute on input change.\r\n * @param onPaste - Function to execute when user paste into the input.\r\n * @param debounced - If set to true, onChange will only be triggered after the user didn't change the input for `debounceTime`.\r\n * @param debounceTime - Set the debouncing time.\r\n * @param minSearchChar - Set a minimum char before triggering `onChange`. Note that this has the priority over `onChange` and `debounce`.\r\n * @param defaultValue - In AssetSelection we already have a value which was previously looked for. So we paste it as default in case of \"add new token\"\r\n */\r\nconst SearchInput = forwardRef<HTMLInputElement, SearchInputProps>(\r\n    (\r\n        {\r\n            label,\r\n            placeholder,\r\n            name,\r\n            error = \"\",\r\n            warning = \"\",\r\n            disabled,\r\n            autoFocus,\r\n            autoComplete,\r\n            isValid,\r\n            onChange,\r\n            onPaste,\r\n            debounced = false,\r\n            debounceTime = 300,\r\n            minSearchChar = 0,\r\n            register,\r\n            defaultValue,\r\n            inputClassName,\r\n        }: SearchInputProps,\r\n        ref\r\n    ) => {\r\n        const inputRef = useRef(null)\r\n        const timeoutIdRef = useRef<ReturnType<typeof setTimeout>>()\r\n        // State\r\n        const [isFocus, setIsFocus] = useState<boolean>(false)\r\n        const [search, setSearch] = useState<string>(\"\")\r\n\r\n        // Hooks\r\n\r\n        useOnClickOutside(inputRef, () => {\r\n            if (search === \"\") setIsFocus(false)\r\n        })\r\n\r\n        const onValueChanged = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n            setSearch(e.target.value)\r\n            if (onChange) onChange(e)\r\n        }\r\n\r\n        return (\r\n            <>\r\n                {/* LABEL */}\r\n                {label ? (\r\n                    <label htmlFor=\"accountName\" className={Classes.inputLabel}>\r\n                        {label}\r\n                    </label>\r\n                ) : null}\r\n\r\n                {/* SEARCH */}\r\n                <div\r\n                    className={classnames(\r\n                        \"flex justify-start items-center relative\",\r\n                        label ? \"mt-2\" : \"\",\r\n                        error !== \"\" || warning !== \"\" ? \"mb-2\" : \"\"\r\n                    )}\r\n                >\r\n                    <img\r\n                        src={searchIcon}\r\n                        alt=\"search\"\r\n                        className={classnames(\r\n                            \"h-4 ml-3 absolute z-10 transition-all delay-100\",\r\n                            isFocus ? \"opacity-0 w-0\" : \"opacity-100 w-4\"\r\n                        )}\r\n                    />\r\n\r\n                    <input\r\n                        name={name ? name : \"Search\"}\r\n                        type=\"text\"\r\n                        ref={useMergeRefs(\r\n                            inputRef,\r\n                            ref,\r\n                            register ? register : null\r\n                        )}\r\n                        className={classnames(\r\n                            Classes.inputBordered,\r\n                            \"w-full relative z-0 outline-none\ttransition-all delay-100\",\r\n                            isFocus ? \"pl-2\" : \"pl-9\",\r\n                            inputClassName,\r\n                            isValid\r\n                                ? \"border-green-400 focus:border-green-400\"\r\n                                : \"\"\r\n                        )}\r\n                        placeholder={placeholder ? placeholder : \"\"}\r\n                        autoFocus={autoFocus ? autoFocus : false}\r\n                        disabled={disabled ? disabled : false}\r\n                        autoComplete={autoComplete ? \"on\" : \"off\"}\r\n                        onChange={(e) => {\r\n                            const value = e.target.value\r\n\r\n                            // If user emptied the input, trigger change to clear filters\r\n                            if (value === \"\") return onValueChanged(e)\r\n\r\n                            if (value.length < minSearchChar) return\r\n\r\n                            if (debounced) {\r\n                                if (timeoutIdRef.current)\r\n                                    clearTimeout(timeoutIdRef.current)\r\n\r\n                                timeoutIdRef.current = setTimeout(\r\n                                    () => onValueChanged(e),\r\n                                    debounceTime\r\n                                )\r\n                            } else {\r\n                                onValueChanged(e)\r\n                            }\r\n                        }}\r\n                        onPaste={onPaste}\r\n                        onFocus={() => setIsFocus(true)}\r\n                        defaultValue={defaultValue ?? \"\"}\r\n                    />\r\n\r\n                    <CheckmarkCircle\r\n                        classes={`\r\n              h-4 transition-all delay-100\r\n              ${isValid ? \"opacity-100 w-4 ml-3\" : \"opacity-0 w-0 ml-0\"}\r\n            `}\r\n                        animate={isValid}\r\n                    />\r\n                </div>\r\n\r\n                {/* ERROR */}\r\n                <span\r\n                    className={classnames(\r\n                        \"text-xs\",\r\n                        error !== \"\" ? \"text-red-500\" : \"\",\r\n                        warning !== \"\" ? \"text-yellow-500\" : \"\",\r\n                        error === \"\" && warning === \"\" ? \"m-0 h-0\" : \"\"\r\n                    )}\r\n                >\r\n                    {error || warning || \"\"}\r\n                </span>\r\n            </>\r\n        )\r\n    }\r\n)\r\n\r\nexport default SearchInput\r\n","import unknownTokenIcon from \"../../assets/images/unknown_token.svg\"\r\nimport { FunctionComponent } from \"react\"\r\nimport { classnames } from \"../../styles\"\r\n\r\ninterface TokenLogoProps {\r\n    name: string\r\n    logo?: string\r\n    bigLogo?: boolean\r\n    className?: string\r\n}\r\n\r\nconst TokenLogo: FunctionComponent<TokenLogoProps> = ({\r\n    logo = unknownTokenIcon,\r\n    name,\r\n    bigLogo = false,\r\n    className,\r\n}) => {\r\n    return (\r\n        <div\r\n            className={classnames(\r\n                \"flex flex-none items-center justify-center\",\r\n                bigLogo ? \"w-8 h-8\" : \"w-6 h-6\",\r\n                className\r\n            )}\r\n        >\r\n            <img\r\n                className={\"rounded-full\"}\r\n                src={logo}\r\n                alt={name}\r\n                onError={(e) => {\r\n                    ;(e.target as any).onerror = null\r\n                    ;(e.target as any).src = unknownTokenIcon\r\n                }}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TokenLogo\r\n","import { formatUnits } from \"@ethersproject/units\"\r\nimport { FC } from \"react\"\r\nimport classnames from \"classnames\"\r\nimport { formatNumberLength } from \"../../util/formatNumberLength\"\r\nimport { formatRounded } from \"../../util/formatRounded\"\r\nimport TokenLogo from \"../token/TokenLogo\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { TokenWithBalance } from \"../../context/hooks/useTokensList\"\r\n\r\ninterface AssetDropdownDisplayProps {\r\n    selectedAsset?: TokenWithBalance\r\n    customAmount?: BigNumber\r\n    displayIcon?: boolean\r\n    assetBalanceClassName?: string\r\n    assetBalance?: string\r\n}\r\n\r\nconst AssetDropdownDisplay: FC<AssetDropdownDisplayProps> = ({\r\n    selectedAsset,\r\n    displayIcon,\r\n    customAmount,\r\n    assetBalance,\r\n    assetBalanceClassName,\r\n}) => {\r\n    return selectedAsset ? (\r\n        <div className=\"flex flex-row flex-grow justify-between items-center\">\r\n            {displayIcon && (\r\n                <TokenLogo\r\n                    logo={selectedAsset.token.logo}\r\n                    name={selectedAsset.token.name}\r\n                    className=\"mr-2\"\r\n                />\r\n            )}\r\n            <div className=\"flex flex-grow justify-between space-x-1\">\r\n                <div className=\"flex flex-col justify-center\">\r\n                    <span className=\"text-base font-semibold\">\r\n                        {selectedAsset.token.symbol}\r\n                    </span>\r\n                    {!customAmount && (\r\n                        <span\r\n                            title={assetBalance}\r\n                            className={classnames(\r\n                                \"text-xs text-gray-600 mt-1 truncate\",\r\n                                assetBalanceClassName\r\n                            )}\r\n                        >\r\n                            {assetBalance}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n                {customAmount && (\r\n                    <span\r\n                        className=\"text-base font-semibold ml-auto mr-2 truncate max-w-lg\"\r\n                        title={customAmount?.toString()}\r\n                        style={{ maxWidth: \"8.5rem\" }}\r\n                    >\r\n                        {formatNumberLength(\r\n                            formatRounded(\r\n                                formatUnits(\r\n                                    customAmount,\r\n                                    selectedAsset.token.decimals\r\n                                ),\r\n                                9\r\n                            ),\r\n                            12\r\n                        )}\r\n                    </span>\r\n                )}\r\n            </div>\r\n        </div>\r\n    ) : (\r\n        <div className=\"flex flex-col justify-center w-full\">\r\n            <div className=\"text-base font-semibold\">Select...</div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AssetDropdownDisplay\r\n","import TokenLogo from \"./TokenLogo\"\r\nimport checkmarkMiniIcon from \"../../assets/images/icons/checkmark_mini.svg\"\r\nimport classnames from \"classnames\"\r\nimport { TokenResponse } from \"../../routes/settings/AddTokensPage\"\r\nimport { useState, FunctionComponent } from \"react\"\r\nimport { formatName } from \"../../util/formatAccount\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { formatRounded } from \"../../util/formatRounded\"\r\nimport { formatUnits } from \"@ethersproject/units\"\r\n\r\ntype TokenDisplayType = {\r\n    data: TokenResponse\r\n    clickable?: boolean\r\n    active?: boolean | false\r\n    hoverable?: boolean | false\r\n    textSize?: \"base\" | \"sm\"\r\n    isSmall?: boolean | false\r\n    balance?: BigNumber | undefined\r\n}\r\n\r\n/**\r\n * TokenDisplay:\r\n * Creates a display element to show token information.\r\n * Can or cannot be clicked to show a selected style.\r\n * Can show a selected style.\r\n *\r\n * @param data - Object containing token to display's informations.\r\n * @param clickable - Determines if you can click element to show selected style.\r\n * @param active - Determines if the element is already showing selected style.\r\n * @param hoverable - Determines if the element shows a hover style.\r\n * @param isSmall - small font size, to fit into popup for example\r\n * @param balance - Contains the asset balance in case it exists. e.g. if it is a New Asset there is no balance\r\n */\r\nconst TokenDisplay: FunctionComponent<TokenDisplayType> = ({\r\n    data,\r\n    clickable,\r\n    active,\r\n    hoverable,\r\n    textSize = \"base\",\r\n    isSmall,\r\n    balance,\r\n}) => {\r\n    const [selected, setSelected] = useState<boolean>(active ? active : false)\r\n\r\n    // Render\r\n    return (\r\n        <div\r\n            className={classnames(\r\n                \"relative flex items-center p-3 my-0.5 rounded-md transition-all duration-300 active:scale-95\",\r\n                clickable && \"cursor-pointer\",\r\n                selected && \"bg-primary-200\",\r\n                hoverable && \"hover:bg-primary-100\"\r\n            )}\r\n            onClick={() => (clickable ? setSelected(!selected) : null)}\r\n        >\r\n            <TokenLogo logo={data.logo} name={data.name} />\r\n            <div className=\"flex flex-col ml-4 truncate\">\r\n                <span className={\"text-sm text-black font-semibold\"}>\r\n                    {formatName(data.name, 22)}\r\n                </span>\r\n                {balance && (\r\n                    <span\r\n                        className={\"text-xs text-gray-600 mt-1\"}\r\n                        title={formatUnits(balance, data.decimals)}\r\n                    >\r\n                        {formatRounded(formatUnits(balance, data.decimals), 6)}\r\n                    </span>\r\n                )}\r\n            </div>\r\n            <p className={\"text-sm text-gray-400 ml-auto pl-1 pr-6\"}>\r\n                {data.symbol}\r\n            </p>\r\n            <img\r\n                src={checkmarkMiniIcon}\r\n                alt=\"checkmark\"\r\n                className={classnames(\r\n                    \"absolute right-3\",\r\n                    selected ? \"visible\" : \"hidden\"\r\n                )}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default TokenDisplay\r\n","import { FC } from \"react\"\r\nimport { TokenWithBalance } from \"../../context/hooks/useTokensList\"\r\nimport TokenDisplay from \"../token/TokenDisplay\"\r\nimport plusIcon from \"../../assets/images/icons/plus.svg\"\r\nimport { ActionButton } from \"../button/ActionButton\"\r\n\r\nconst AssetList: FC<{\r\n    setActive?: () => void\r\n    onAssetClick: (asset: TokenWithBalance, setActive?: () => void) => void\r\n    selectedAddress?: string\r\n    assets: TokenWithBalance[]\r\n    searchValue: string | null\r\n    addTokenState: any\r\n    register: any\r\n}> = ({\r\n    onAssetClick,\r\n    setActive,\r\n    selectedAddress,\r\n    assets,\r\n    searchValue,\r\n    addTokenState,\r\n    register,\r\n}) => {\r\n    return (\r\n        <div className=\"pb-6\">\r\n            <input\r\n                readOnly\r\n                name=\"asset\"\r\n                ref={register ? register.ref : null}\r\n                className=\"hidden\"\r\n                value={selectedAddress}\r\n            />\r\n            {assets.map((asset) => {\r\n                return (\r\n                    <div\r\n                        className=\"cursor-pointer\"\r\n                        key={asset.token.address}\r\n                        onClick={() => onAssetClick(asset, setActive)}\r\n                    >\r\n                        <TokenDisplay\r\n                            data={{\r\n                                ...asset.token,\r\n                            }}\r\n                            clickable={false}\r\n                            active={selectedAddress === asset.token.address}\r\n                            hoverable={true}\r\n                            balance={asset.balance}\r\n                        />\r\n                    </div>\r\n                )\r\n            })}\r\n            {searchValue && assets.length === 0 && (\r\n                <div className=\"px-3\">\r\n                    <p className=\"text-xs text-black text-center p-4\">\r\n                        The asset couldn&#8217;t be found, try adding it\r\n                        manually.\r\n                    </p>\r\n                    <ActionButton\r\n                        icon={plusIcon}\r\n                        label=\"Add Token\"\r\n                        to=\"/settings/tokens/add\"\r\n                        state={{\r\n                            addTokenState,\r\n                            searchValue,\r\n                        }}\r\n                    />\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AssetList\r\n","import { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { useBlankState } from \"../background/backgroundHooks\"\r\nimport { TransactionCategories } from \"../commTypes\"\r\nimport { useSelectedAccount } from \"./useSelectedAccount\"\r\nimport { useSelectedNetwork } from \"./useSelectedNetwork\"\r\nimport { TokenList, useTokensList } from \"./useTokensList\"\r\n\r\n/**\r\n *  Returns the list of swapped assets\r\n */\r\nexport const useSwappedTokenList = (): TokenList => {\r\n    const { balances } = useSelectedAccount()\r\n    const { chainId } = useSelectedNetwork()\r\n    const { transactions } = useBlankState()!\r\n    const { nativeToken } = useTokensList()\r\n\r\n    const swapTransactionList = transactions.filter(\r\n        (t) => t.transactionCategory === TransactionCategories.EXCHANGE\r\n    )\r\n\r\n    // Get asset from swap transaction\r\n    const assetList: string[] = []\r\n\r\n    for (let i = 0; i < swapTransactionList.length; i++) {\r\n        const address = swapTransactionList[i].exchangeParams?.toToken.address\r\n\r\n        if (address) {\r\n            assetList.push(address.toLowerCase())\r\n        }\r\n    }\r\n\r\n    if (chainId in balances) {\r\n        const { tokens } = balances[chainId]\r\n\r\n        // Place tokens with balance on top\r\n        const currentNetworkTokens = Object.values(tokens)\r\n            .filter((token) => {\r\n                return assetList.includes(token.token.address.toLowerCase())\r\n            })\r\n            .sort((a, b) => {\r\n                const firstNumber = BigNumber.from(b.balance)\r\n\r\n                return firstNumber.gt(a.balance)\r\n                    ? 1\r\n                    : firstNumber.eq(a.balance)\r\n                    ? 0\r\n                    : -1\r\n            })\r\n\r\n        return [nativeToken].concat(currentNetworkTokens)\r\n    } else {\r\n        return [nativeToken]\r\n    }\r\n}\r\n","import React, { FunctionComponent } from \"react\"\r\nimport { classnames } from \"../../styles/classes\"\r\n\r\nconst ErrorMessage: FunctionComponent<{\r\n    children?: React.ReactNode\r\n    className?: string | undefined\r\n}> = ({ children = \"\", className }) => {\r\n    return (\r\n        <span\r\n            className={classnames(\r\n                \"text-red-500 text-xs break-words\",\r\n                children ? \"\" : \"hidden\",\r\n                className\r\n            )}\r\n        >\r\n            {children}\r\n        </span>\r\n    )\r\n}\r\n\r\nexport default ErrorMessage\r\n","import { TransactionMeta } from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport { useBlankState } from \"../background/backgroundHooks\"\r\nimport {\r\n    MetaType,\r\n    TransactionCategories,\r\n    TransactionStatus,\r\n} from \"../commTypes\"\r\n\r\nexport interface TransactionFilters {\r\n    categories?: TransactionCategories[]\r\n}\r\n\r\nconst applyCustomFilters = (\r\n    transaction: TransactionMeta,\r\n    filters: TransactionFilters\r\n) => {\r\n    let matched = true\r\n    if (filters?.categories) {\r\n        matched =\r\n            matched &&\r\n            filters.categories.includes(transaction.transactionCategory!)\r\n    }\r\n    return matched\r\n}\r\n\r\n/**\r\n * useWaitingForSigningTransaction\r\n *\r\n * @returns The transaction that is awaiting signing\r\n */\r\nexport const useWaitingForSigningInternalTransaction = (\r\n    txFilters: TransactionFilters = {}\r\n) => {\r\n    const { transactions } = useBlankState()!\r\n\r\n    const validStates = [\r\n        TransactionStatus.UNAPPROVED,\r\n        TransactionStatus.APPROVED,\r\n        TransactionStatus.SIGNED,\r\n    ]\r\n    const filteredTransactions = transactions.filter(\r\n        (t) =>\r\n            validStates.includes(t.status) &&\r\n            t.metaType === MetaType.REGULAR &&\r\n            t.origin === \"blank\" &&\r\n            applyCustomFilters(t, txFilters)\r\n    )\r\n    return filteredTransactions.length > 0 ? filteredTransactions[0] : undefined\r\n}\r\n","import { useCallback, useEffect, useState } from \"react\"\r\nimport {\r\n    TransactionFilters,\r\n    useWaitingForSigningInternalTransaction,\r\n} from \"./useWaitingForSigningInternalTransaction\"\r\nimport { useTransactionById } from \"./useTransactionById\"\r\n\r\nexport const useInProgressInternalTransaction = (\r\n    txFilters: TransactionFilters = {}\r\n) => {\r\n    // The code below gets information about the last transaction that was in progress in the current window.\r\n    // If there is no transaction, and the form has been submitted,\r\n    // means that the user SHOULD not be here (he may have declined the transaction in the HW device with th pop-up closed), so that we should go to the home page.\r\n    // If there is a pending transaction, we should store its ID and attach it to this form, listening to its state changes.\r\n    const lastPendingTransaction =\r\n        useWaitingForSigningInternalTransaction(txFilters)\r\n    const [currentTxId, setCurrentTxId] = useState(lastPendingTransaction?.id)\r\n    const { transaction } = useTransactionById(currentTxId)\r\n\r\n    useEffect(() => {\r\n        if (lastPendingTransaction?.id && !currentTxId) {\r\n            setCurrentTxId(lastPendingTransaction.id)\r\n        }\r\n    }, [lastPendingTransaction?.id, currentTxId])\r\n\r\n    return {\r\n        transaction,\r\n        clearTransaction: useCallback(\r\n            () => setCurrentTxId(undefined),\r\n            [setCurrentTxId]\r\n        ),\r\n    }\r\n}\r\n","import { FunctionComponent, useState } from \"react\"\r\nimport { formatHash, formatName } from \"../../util/formatAccount\"\r\nimport { isNativeTokenAddress } from \"../../util/tokenUtils\"\r\nimport CollapsableWarning from \"../CollapsableWarning\"\r\nimport CheckmarkCircle from \"../icons/CheckmarkCircle\"\r\nimport ExclamationCircleIconFull from \"../icons/ExclamationCircleIconFull\"\r\n\r\nconst NATIVE_ADDRESS_MESSAGE =\r\n    \"This address is not owned by any user, is often associated with token burn & mint/genesis events and used as a generic null address. Please, make sure the information is correct otherwise your assets will be permanently lost.\"\r\n\r\nexport const AddressDisplay: FunctionComponent<{\r\n    receivingAddress: string\r\n    selectedAccountName: string | undefined\r\n}> = ({ receivingAddress, selectedAccountName }) => {\r\n    const [showingTheWholeAddress, setShowingTheWholeAddress] = useState(false)\r\n    const isNativeToken = isNativeTokenAddress(receivingAddress)\r\n    const addressToDisplay = formatHash(receivingAddress)\r\n    const fullAddressToDisplay = formatHash(\r\n        receivingAddress,\r\n        receivingAddress.length\r\n    )\r\n    let accountNameToDisplay = selectedAccountName\r\n        ? formatName(selectedAccountName, 20)\r\n        : addressToDisplay\r\n\r\n    const displayAddressSpan =\r\n        accountNameToDisplay !== addressToDisplay || isNativeToken\r\n\r\n    return (\r\n        <>\r\n            {!isNativeToken ? (\r\n                <div\r\n                    className=\"flex flex-row items-center w-full px-6 py-3\"\r\n                    style={{ maxWidth: \"100vw\" }}\r\n                    title={formatHash(\r\n                        receivingAddress,\r\n                        receivingAddress.length\r\n                    )}\r\n                    onClick={() =>\r\n                        setShowingTheWholeAddress(!showingTheWholeAddress)\r\n                    }\r\n                >\r\n                    <CheckmarkCircle classes=\"w-4 h-4\" />\r\n                    <span\r\n                        className={\r\n                            displayAddressSpan\r\n                                ? \"font-bold text-green-500 ml-1 truncate\"\r\n                                : \"font-bold text-green-500 ml-1 truncate cursor-pointer\"\r\n                        }\r\n                        title={receivingAddress}\r\n                    >\r\n                        {showingTheWholeAddress &&\r\n                        !(accountNameToDisplay !== addressToDisplay)\r\n                            ? fullAddressToDisplay\r\n                            : accountNameToDisplay}\r\n                    </span>\r\n\r\n                    {displayAddressSpan && (\r\n                        <span className=\"text-gray truncate ml-1\">\r\n                            {addressToDisplay}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            ) : (\r\n                <CollapsableWarning\r\n                    dialog={{\r\n                        title: \"Warning\",\r\n                        message: <span>{NATIVE_ADDRESS_MESSAGE}</span>,\r\n                    }}\r\n                    isCollapsedByDefault\r\n                    collapsedMessage={\r\n                        <div className=\"flex flex-row items-center w-full px-6 py-3\">\r\n                            <ExclamationCircleIconFull\r\n                                className=\"w-4 h-4\"\r\n                                size=\"16\"\r\n                            />\r\n                            <span\r\n                                className=\"font-bold text-yellow-500 ml-1 truncate\"\r\n                                title={receivingAddress}\r\n                            >\r\n                                Null Address\r\n                            </span>\r\n                            <span className=\"text-gray truncate ml-1\">\r\n                                {addressToDisplay}\r\n                            </span>\r\n                        </div>\r\n                    }\r\n                />\r\n            )}\r\n        </>\r\n    )\r\n}\r\n","import { useCallback, useEffect, useState } from \"react\"\r\n\r\nimport { useForm } from \"react-hook-form\"\r\n\r\n// Components\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport {\r\n    AssetListType,\r\n    AssetSelection,\r\n} from \"../../components/assets/AssetSelection\"\r\nimport { GasPriceSelector } from \"../../components/transactions/GasPriceSelector\"\r\nimport ErrorMessage from \"../../components/error/ErrorMessage\"\r\n\r\n// Style\r\nimport classnames from \"classnames\"\r\n\r\n// Utils\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport * as yup from \"yup\"\r\nimport { InferType } from \"yup\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { formatUnits, parseUnits } from \"@ethersproject/units\"\r\nimport { Zero, One } from \"@ethersproject/constants\"\r\nimport { formatCurrency, toCurrencyAmount } from \"../../util/formatCurrency\"\r\nimport { DEFAULT_DECIMALS, SEND_GAS_COST } from \"../../util/constants\"\r\n\r\n// Hooks\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport {\r\n    getLatestGasPrice,\r\n    getSendTransactionGasLimit,\r\n    sendEther,\r\n    sendToken,\r\n} from \"../../context/commActions\"\r\n\r\nimport { useSelectedAccountBalance } from \"../../context/hooks/useSelectedAccountBalance\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport {\r\n    TokenWithBalance,\r\n    useTokensList,\r\n} from \"../../context/hooks/useTokensList\"\r\nimport GasPriceComponent from \"../../components/transactions/GasPriceComponent\"\r\n\r\n// Types\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport { useGasPriceData } from \"../../context/hooks/useGasPriceData\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport { Classes } from \"../../styles\"\r\nimport WaitingDialog from \"../../components/dialog/WaitingDialog\"\r\nimport WarningDialog from \"../../components/dialog/WarningDialog\"\r\nimport HardwareDeviceNotLinkedDialog from \"../../components/dialog/HardwareDeviceNotLinkedDialog\"\r\nimport { AdvancedSettings } from \"../../components/transactions/AdvancedSettings\"\r\nimport { TransactionFeeData } from \"@block-wallet/background/controllers/erc-20/transactions/SignedTransaction\"\r\nimport { TransactionAdvancedData } from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport { useSelectedAccount } from \"../../context/hooks/useSelectedAccount\"\r\nimport { useLocationRecovery } from \"../../util/hooks/useLocationRecovery\"\r\nimport useLocalStorageState from \"../../util/hooks/useLocalStorageState\"\r\nimport useCheckAccountDeviceLinked from \"../../util/hooks/useCheckAccountDeviceLinked\"\r\nimport { getDeviceFromAccountType } from \"../../util/hardwareDevice\"\r\nimport { isHardwareWallet } from \"../../util/account\"\r\nimport { useTransactionWaitingDialog } from \"../../context/hooks/useTransactionWaitingDialog\"\r\nimport { HardwareWalletOpTypes } from \"../../context/commTypes\"\r\nimport { useInProgressInternalTransaction } from \"../../context/hooks/useInProgressInternalTransaction\"\r\nimport { rejectTransaction } from \"../../context/commActions\"\r\nimport { getValueByKey } from \"../../util/objectUtils\"\r\nimport { AddressDisplay } from \"../../components/addressBook/AddressDisplay\"\r\nimport { useAccountNameByAddress } from \"../../context/hooks/useAccountNameByAddress\"\r\n\r\n// Schema\r\nconst GetAmountYupSchema = (\r\n    balance: BigNumber,\r\n    asset: TokenWithBalance | undefined,\r\n    selectedGas: TransactionFeeData,\r\n    isEIP1559Compatible: boolean | undefined\r\n) => {\r\n    return yup.object({\r\n        asset: yup\r\n            .string()\r\n            .required(\"No asset selected.\")\r\n            .test(\"is-valid\", \"Please select an asset\", (value) => {\r\n                return !!value || value !== \"\" || value.length !== 42\r\n            }),\r\n        amount: yup\r\n            .string()\r\n            .test(\"is-correct\", \"Please select an asset.\", () => {\r\n                if (!asset) {\r\n                    return false\r\n                }\r\n                return true\r\n            })\r\n            .required(\"No transaction amount provided\")\r\n            .test(\"is-number\", \"Please enter a number.\", (value) => {\r\n                if (typeof value != \"string\") return false\r\n                return !isNaN(parseFloat(value))\r\n            })\r\n            .test(\"is-correct\", \"Please enter a number.\", (value) => {\r\n                if (typeof value != \"string\") return false\r\n                const regexp = /^\\d+(\\.\\d+)?$/\r\n                return regexp.test(value)\r\n            })\r\n            .test(\r\n                \"is-correct\",\r\n                \"Amount must be a positive number.\",\r\n                (value) => {\r\n                    if (typeof value != \"string\") return false\r\n                    return value === \"0\" || parseFloat(value) > 0\r\n                }\r\n            )\r\n            .test(\"is-decimals\", \"Too many decimal numbers.\", (value) => {\r\n                if (typeof value != \"string\") return false\r\n                if (!value.includes(\".\")) return true\r\n                const decimals = asset?.token.decimals || DEFAULT_DECIMALS\r\n                const valueDecimals = value.split(\".\")[1].length\r\n                return valueDecimals <= decimals\r\n            })\r\n            .test(\"is-correct\", \"Insufficient balance for gas cost.\", () => {\r\n                return GasCostBalanceValidation(\r\n                    balance,\r\n                    selectedGas,\r\n                    isEIP1559Compatible\r\n                )\r\n            })\r\n            .test(\"is-correct\", \"Insufficient balance.\", (value) => {\r\n                try {\r\n                    if (!asset) return false\r\n                    const decimals = asset.token.decimals || DEFAULT_DECIMALS\r\n                    const txAmount: BigNumber = parseUnits(\r\n                        value!.toString(),\r\n                        decimals\r\n                    )\r\n\r\n                    if (asset.token.address === \"0x0\") {\r\n                        return EtherSendBalanceValidation(\r\n                            asset.balance,\r\n                            txAmount,\r\n                            selectedGas,\r\n                            isEIP1559Compatible\r\n                        )\r\n                    } else {\r\n                        if (\r\n                            !GasCostBalanceValidation(\r\n                                balance,\r\n                                selectedGas,\r\n                                isEIP1559Compatible\r\n                            )\r\n                        ) {\r\n                            return false\r\n                        }\r\n                        return TokenSendBalanceValidation(\r\n                            asset.balance,\r\n                            txAmount\r\n                        )\r\n                    }\r\n                } catch (e: any) {\r\n                    return false\r\n                }\r\n            }),\r\n        selectedGas: yup.string(),\r\n        isEIP1559Compatible: yup.boolean(),\r\n    })\r\n}\r\nconst schema = GetAmountYupSchema(\r\n    BigNumber.from(\"0\"),\r\n    undefined,\r\n    {\r\n        gasPrice: BigNumber.from(\"0\"),\r\n        gasLimit: BigNumber.from(\"0\"),\r\n        maxFeePerGas: BigNumber.from(\"0\"),\r\n        maxPriorityFeePerGas: BigNumber.from(\"0\"),\r\n    },\r\n    false\r\n)\r\ntype AmountFormData = InferType<typeof schema>\r\n\r\n// Tools\r\n\r\nconst BalanceValidation = (balance: BigNumber, amount: BigNumber): boolean => {\r\n    return BigNumber.from(balance).gte(BigNumber.from(amount))\r\n}\r\n\r\nconst GasCostBalanceValidation = (\r\n    balance: BigNumber,\r\n    selectedGas: TransactionFeeData,\r\n    isEIP1559Compatible?: boolean\r\n): boolean => {\r\n    return BalanceValidation(\r\n        BigNumber.from(balance),\r\n        BigNumber.from(selectedGas.gasLimit).mul(\r\n            BigNumber.from(\r\n                isEIP1559Compatible\r\n                    ? selectedGas.maxFeePerGas\r\n                    : selectedGas.gasPrice\r\n            )\r\n        )\r\n    )\r\n}\r\nconst EtherSendBalanceValidation = (\r\n    balance: BigNumber,\r\n    txAmount: BigNumber,\r\n    selectedGas: TransactionFeeData,\r\n    isEIP1559Compatible?: boolean\r\n): boolean => {\r\n    balance = BigNumber.from(balance)\r\n    txAmount = BigNumber.from(txAmount)\r\n    selectedGas.gasLimit = BigNumber.from(selectedGas.gasLimit)\r\n    const gasPrice: BigNumber = BigNumber.from(\r\n        isEIP1559Compatible ? selectedGas.maxFeePerGas : selectedGas.gasPrice\r\n    )\r\n\r\n    txAmount = txAmount.add(selectedGas.gasLimit.mul(gasPrice))\r\n    return BalanceValidation(balance, txAmount)\r\n}\r\nconst TokenSendBalanceValidation = (\r\n    balance: BigNumber,\r\n    amount: BigNumber\r\n): boolean => {\r\n    return BalanceValidation(BigNumber.from(balance), BigNumber.from(amount))\r\n}\r\n\r\nconst HasBalance = (selectedToken: TokenWithBalance): boolean => {\r\n    return selectedToken && !BigNumber.from(selectedToken.balance).isZero()\r\n}\r\n\r\ninterface SendConfirmPersistedState {\r\n    amount: string\r\n    submitted: boolean\r\n    asset: TokenWithBalance | null\r\n}\r\n\r\nconst INITIAL_VALUE_PERSISTED_DATA = {\r\n    asset: null,\r\n    amount: \"\",\r\n    submitted: false,\r\n}\r\n\r\n// Page\r\nconst SendConfirmPage = () => {\r\n    // Blank Hooks\r\n    const { clear: clearLocationRecovery } = useLocationRecovery()\r\n    const blankState = useBlankState()!\r\n    const network = useSelectedNetwork()\r\n    const history: any = useOnMountHistory()\r\n    const balance = useSelectedAccountBalance()\r\n    const { address, accountType } = useSelectedAccount()\r\n\r\n    // Get data from window.localStorage\r\n    const [persistedData, setPersistedData] =\r\n        useLocalStorageState<SendConfirmPersistedState>(\"send.form\", {\r\n            initialValue: {\r\n                ...INITIAL_VALUE_PERSISTED_DATA,\r\n                submitted: false,\r\n            },\r\n            volatile: true,\r\n        })\r\n\r\n    const { transaction: currentTransaction, clearTransaction } =\r\n        useInProgressInternalTransaction()\r\n\r\n    useEffect(() => {\r\n        // Tx was either rejected or submitted when the pop-up was closed.\r\n        // If we opened back the pop-up, and there aren't any pending transactions,\r\n        // we should redirect to the home page (this is only checked on component mount)\r\n        if (!currentTransaction?.id && persistedData.submitted) {\r\n            setPersistedData(() => ({\r\n                ...INITIAL_VALUE_PERSISTED_DATA,\r\n                submitted: false,\r\n            }))\r\n            history.push(\"/\")\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    // Restore persisted data on component mount in case the page\r\n    // is being restored from a popup close\r\n    const isEIP1559Compatible = network.isEIP1559Compatible\r\n    const receivingAddress = history.location.state.address\r\n    const selectedAccountName =\r\n        history.location.state.name ?? useAccountNameByAddress(receivingAddress)\r\n    const preSelectedAsset = persistedData?.asset\r\n        ? persistedData.asset\r\n        : (history.location.state.asset as TokenWithBalance)\r\n\r\n    // Tokens\r\n    const { nativeToken } = useTokensList()\r\n\r\n    // State\r\n    const [error, setError] = useState(\"\")\r\n    const [\r\n        showSendingToTokenAddressWarning,\r\n        setShowSendingToTokenAddressWarning,\r\n    ] = useState(false)\r\n\r\n    const [isGasLoading, setIsGasLoading] = useState(true)\r\n    const [usingMax, setUsingMax] = useState(false)\r\n    const [nativeCurrencyAmt, setNativeCurrency] = useState(0)\r\n\r\n    const [selectedToken, setSelectedToken] = useState<TokenWithBalance>(\r\n        preSelectedAsset ? preSelectedAsset : nativeToken\r\n    )\r\n\r\n    const { gasPricesLevels } = useGasPriceData()\r\n\r\n    const [selectedGas, setSelectedGas] = useState<TransactionFeeData>({\r\n        gasLimit: BigNumber.from(0),\r\n        gasPrice: isEIP1559Compatible ? undefined : BigNumber.from(0),\r\n        maxPriorityFeePerGas: isEIP1559Compatible\r\n            ? BigNumber.from(0)\r\n            : undefined,\r\n        maxFeePerGas: isEIP1559Compatible ? BigNumber.from(0) : undefined,\r\n    })\r\n\r\n    const [defaultGas, setDefaultGas] = useState<TransactionFeeData>({\r\n        gasLimit: SEND_GAS_COST,\r\n        gasPrice: BigNumber.from(gasPricesLevels.average.gasPrice ?? 0),\r\n    })\r\n\r\n    const [gasEstimationFailed, setGasEstimationFailed] = useState(false)\r\n\r\n    const [transactionAdvancedData, setTransactionAdvancedData] =\r\n        useState<TransactionAdvancedData>({})\r\n\r\n    const { status, isOpen, dispatch, texts, titles, closeDialog, gifs } =\r\n        useTransactionWaitingDialog(\r\n            currentTransaction\r\n                ? {\r\n                      id: currentTransaction?.id,\r\n                      status: currentTransaction?.status,\r\n                      error: currentTransaction?.error as Error,\r\n                      epochTime: currentTransaction?.approveTime,\r\n                  }\r\n                : undefined,\r\n            HardwareWalletOpTypes.SIGN_TRANSACTION,\r\n            accountType,\r\n            {\r\n                reject: useCallback(() => {\r\n                    if (currentTransaction?.id) {\r\n                        rejectTransaction(currentTransaction?.id)\r\n                    }\r\n                }, [currentTransaction?.id]),\r\n            }\r\n        )\r\n\r\n    const isLoading = status === \"loading\" && isOpen\r\n\r\n    const calcNativeCurrency = () => {\r\n        if (!selectedToken) return\r\n\r\n        try {\r\n            const amount: number = Number(getValues().amount)\r\n            const assetAmount: number = !isNaN(amount) && amount ? amount : 0\r\n            const decimals = selectedToken?.token.decimals || DEFAULT_DECIMALS\r\n            const symbol =\r\n                selectedToken?.token.symbol.toUpperCase() ||\r\n                network.nativeCurrency.symbol\r\n            const txAmount: BigNumber = parseUnits(\r\n                assetAmount.toString(),\r\n                decimals\r\n            )\r\n            setNativeCurrency(\r\n                toCurrencyAmount(\r\n                    txAmount,\r\n                    getValueByKey(blankState.exchangeRates, symbol, 0),\r\n                    decimals\r\n                )\r\n            )\r\n        } catch {}\r\n    }\r\n\r\n    const schema = GetAmountYupSchema(\r\n        balance,\r\n        selectedToken,\r\n        selectedGas,\r\n        isEIP1559Compatible\r\n    )\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        clearErrors,\r\n        setValue,\r\n        getValues,\r\n        trigger,\r\n\r\n        formState: { errors },\r\n    } = useForm<AmountFormData>({\r\n        resolver: yupResolver(schema),\r\n        defaultValues: { asset: selectedToken.token.address },\r\n    })\r\n    const { checkDeviceIsLinked, isDeviceUnlinked, resetDeviceLinkStatus } =\r\n        useCheckAccountDeviceLinked()\r\n\r\n    const onSubmit = handleSubmit(async (data: AmountFormData) => {\r\n        if (!selectedToken) return setError(\"Select a token first.\")\r\n\r\n        // Value\r\n        const value = usingMax\r\n            ? getMaxTransactionAmount()\r\n            : parseUnits(\r\n                  data.amount.toString(),\r\n                  selectedToken!.token.decimals || DEFAULT_DECIMALS // Default to eth decimals\r\n              )\r\n\r\n        dispatch({ type: \"open\", payload: { status: \"loading\" } })\r\n\r\n        const isLinked = await checkDeviceIsLinked()\r\n        if (!isLinked) {\r\n            closeDialog()\r\n            return\r\n        }\r\n\r\n        // Validation\r\n        let balanceValidation: boolean = false\r\n        let errorMessage: string = \"\"\r\n        if (selectedToken.token.address === nativeToken.token.address) {\r\n            balanceValidation = EtherSendBalanceValidation(\r\n                balance,\r\n                value,\r\n                selectedGas,\r\n                isEIP1559Compatible\r\n            )\r\n            errorMessage = `You don't have enough funds to send ${formatUnits(\r\n                value,\r\n                network.nativeCurrency.decimals\r\n            )} ${network.nativeCurrency.symbol} + ${formatUnits(\r\n                selectedGas.gasPrice ?? selectedGas.maxFeePerGas!,\r\n                network.nativeCurrency.decimals\r\n            )} ${network.nativeCurrency.symbol} (Gas cost)`\r\n        } else {\r\n            balanceValidation = GasCostBalanceValidation(\r\n                balance,\r\n                selectedGas,\r\n                isEIP1559Compatible\r\n            )\r\n            errorMessage = `You don't have enough funds for the transaction gas cost ${formatUnits(\r\n                selectedGas.gasPrice ?? selectedGas.maxFeePerGas!,\r\n                network.nativeCurrency.decimals\r\n            )} ${network.nativeCurrency.symbol}`\r\n            if (balanceValidation) {\r\n                balanceValidation = TokenSendBalanceValidation(\r\n                    selectedToken.balance,\r\n                    value\r\n                )\r\n                errorMessage = `You don't have enough funds to send ${formatUnits(\r\n                    value,\r\n                    selectedToken.token.decimals\r\n                )} ${selectedToken.token.symbol}`\r\n            }\r\n        }\r\n\r\n        if (!balanceValidation) {\r\n            setError(errorMessage)\r\n            dispatch({\r\n                type: \"setStatus\",\r\n                payload: { status: \"error\", texts: { error: errorMessage } },\r\n            })\r\n            return\r\n        }\r\n\r\n        // Send\r\n        try {\r\n            let sendPromise = null\r\n            if (selectedToken.token.address === nativeToken.token.address) {\r\n                sendPromise = sendEther(\r\n                    receivingAddress,\r\n                    selectedGas as TransactionFeeData,\r\n                    value,\r\n                    transactionAdvancedData\r\n                )\r\n            } else {\r\n                sendPromise = sendToken(\r\n                    selectedToken.token.address,\r\n                    receivingAddress,\r\n                    selectedGas as TransactionFeeData,\r\n                    value,\r\n                    transactionAdvancedData\r\n                )\r\n            }\r\n\r\n            setPersistedData((prev: SendConfirmPersistedState) => ({\r\n                ...prev,\r\n                submitted: true,\r\n            }))\r\n\r\n            // clear history so that the user comes back to the home page if he clicks away\r\n            // Hw accounts needs user interaction before submitting the TX, so that we may want the\r\n            // user come back to this screen after reopening.\r\n            if (!isHardwareWallet(accountType)) {\r\n                clearLocationRecovery()\r\n                //clean the window.localStorage\r\n                setPersistedData(INITIAL_VALUE_PERSISTED_DATA)\r\n            }\r\n\r\n            //await for the send promise.\r\n            await sendPromise\r\n        } catch (error: any) {\r\n            setPersistedData((prev: SendConfirmPersistedState) => ({\r\n                ...prev,\r\n                submitted: false,\r\n            }))\r\n            console.error(error)\r\n        }\r\n    })\r\n\r\n    const getMaxTransactionAmount = (): BigNumber => {\r\n        if (!selectedToken?.balance) return BigNumber.from(\"0\")\r\n\r\n        let maxTransactionAmount = BigNumber.from(\"0\")\r\n\r\n        // Check against balance only if selected token is native network currency, otherwise set max as selectedToken balance\r\n        // and run the gas check on yup validation\r\n        if (\r\n            selectedToken?.token.address === nativeToken.token.address &&\r\n            GasCostBalanceValidation(balance, selectedGas, isEIP1559Compatible)\r\n        ) {\r\n            maxTransactionAmount = BigNumber.from(balance).sub(\r\n                BigNumber.from(\r\n                    isEIP1559Compatible\r\n                        ? selectedGas.maxFeePerGas\r\n                        : selectedGas.gasPrice\r\n                ).mul(BigNumber.from(selectedGas.gasLimit))\r\n            )\r\n        } else {\r\n            maxTransactionAmount = BigNumber.from(selectedToken?.balance)\r\n        }\r\n\r\n        return maxTransactionAmount\r\n    }\r\n\r\n    const setMaxTransactionAmount = (_usingMax: boolean = usingMax) => {\r\n        setUsingMax(_usingMax)\r\n        if (_usingMax) {\r\n            const maxTransactionAmount = getMaxTransactionAmount()\r\n            const decimals = selectedToken?.token.decimals || DEFAULT_DECIMALS\r\n            const formatAmount = formatUnits(\r\n                BigNumber.from(maxTransactionAmount),\r\n                decimals\r\n            )\r\n            setValue(\"amount\", formatAmount, {\r\n                shouldValidate: true,\r\n            })\r\n        } else {\r\n            setValue(\"amount\", \"\", {\r\n                shouldValidate: false,\r\n            })\r\n            clearErrors(\"amount\")\r\n        }\r\n        calcNativeCurrency()\r\n    }\r\n\r\n    const handleChangeAmount = (newAmount: string) => {\r\n        let value = newAmount\r\n            ? newAmount\r\n                  .replace(/[^0-9.,]/g, \"\")\r\n                  .replace(\",\", \".\")\r\n                  .replace(/(\\..*?)\\..*/g, \"$1\")\r\n            : \"\"\r\n\r\n        if (value === \".\") {\r\n            value = \"\"\r\n        }\r\n\r\n        if (value === \"\") {\r\n            setValue(\"amount\", \"\")\r\n            clearErrors(\"amount\")\r\n        } else {\r\n            setValue(\"amount\", value, {\r\n                shouldValidate: true,\r\n            })\r\n        }\r\n\r\n        calcNativeCurrency()\r\n\r\n        setPersistedData((prev: SendConfirmPersistedState) => ({\r\n            ...prev,\r\n            amount: value,\r\n        }))\r\n    }\r\n\r\n    const handleChangeAsset = (asset: TokenWithBalance, cleanAmount = true) => {\r\n        setUsingMax(false)\r\n        if (cleanAmount) {\r\n            handleChangeAmount(\"\")\r\n        }\r\n        setValue(\"asset\", asset.token.address, {\r\n            shouldValidate: true,\r\n        })\r\n        setSelectedToken(asset)\r\n        setPersistedData((prev: SendConfirmPersistedState) => ({\r\n            ...prev,\r\n            asset,\r\n        }))\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (persistedData?.asset) {\r\n            handleChangeAsset(persistedData.asset, false)\r\n        }\r\n        if (persistedData?.amount) {\r\n            handleChangeAmount(persistedData.amount)\r\n        }\r\n        //do this only on mounting.\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        const fetch = async () => {\r\n            try {\r\n                setIsGasLoading(true)\r\n\r\n                const hasTokenBalance = BigNumber.from(\r\n                    selectedToken.balance\r\n                ).gt(Zero)\r\n\r\n                const estimateValue = hasTokenBalance ? One : Zero\r\n\r\n                let { gasLimit, estimationSucceeded } =\r\n                    await getSendTransactionGasLimit(\r\n                        selectedToken.token.address,\r\n                        receivingAddress,\r\n                        estimateValue\r\n                    )\r\n\r\n                // In case the estimation failed but user has no balance on the selected token, we won't display the estimation error.\r\n                if (!hasTokenBalance && !estimationSucceeded) {\r\n                    estimationSucceeded = true\r\n                }\r\n\r\n                setGasEstimationFailed(!estimationSucceeded)\r\n\r\n                let gasPrice\r\n                if (!isEIP1559Compatible) {\r\n                    gasPrice = await getLatestGasPrice()\r\n                }\r\n\r\n                setDefaultGas({\r\n                    gasLimit: BigNumber.from(gasLimit),\r\n                    gasPrice: isEIP1559Compatible\r\n                        ? undefined\r\n                        : BigNumber.from(gasPrice),\r\n                })\r\n\r\n                setSelectedGas({\r\n                    ...selectedGas,\r\n                    gasLimit: BigNumber.from(gasLimit),\r\n                })\r\n            } catch (error) {\r\n                console.log(\"error \", error)\r\n            } finally {\r\n                setIsGasLoading(false)\r\n            }\r\n        }\r\n\r\n        const checkIfSendingToTokenAddress = async () => {\r\n            if (\r\n                receivingAddress.toLowerCase() ===\r\n                selectedToken.token.address.toLowerCase()\r\n            ) {\r\n                setShowSendingToTokenAddressWarning(true)\r\n            }\r\n        }\r\n\r\n        fetch()\r\n        checkIfSendingToTokenAddress()\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [selectedToken])\r\n\r\n    // Effect triggered on selected gas change to update max amount if needed and recalculate validations.\r\n    useEffect(() => {\r\n        usingMax && setMaxTransactionAmount(usingMax)\r\n        getValues().amount && trigger(\"amount\")\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [selectedGas])\r\n\r\n    const [inputFocus, setInputFocus] = useState(false)\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    title=\"Send\"\r\n                    disabled={isLoading}\r\n                    keepState\r\n                    networkIndicator\r\n                />\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        type=\"submit\"\r\n                        label=\"Confirm\"\r\n                        isLoading={isGasLoading || isLoading}\r\n                        disabled={\r\n                            errors.amount !== undefined ||\r\n                            isLoading ||\r\n                            isGasLoading\r\n                        }\r\n                        onClick={onSubmit}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <WaitingDialog\r\n                open={isOpen}\r\n                status={status}\r\n                titles={{\r\n                    loading: titles?.loading || \"Sending...\",\r\n                    success: titles?.success || \"Success\",\r\n                    error: titles?.error || \"Error\",\r\n                }}\r\n                texts={{\r\n                    loading: texts?.loading || \"Initiating the transfer...\",\r\n                    success: texts?.success || \"You've initiated the transfer.\",\r\n                    error: texts?.error || error,\r\n                }}\r\n                txHash={currentTransaction?.transactionParams.hash}\r\n                clickOutsideToClose={false}\r\n                timeout={2900}\r\n                gifs={gifs}\r\n                onDone={() => {\r\n                    if (status === \"error\") {\r\n                        closeDialog()\r\n                        setPersistedData((prev: SendConfirmPersistedState) => ({\r\n                            ...prev,\r\n                            submitted: false,\r\n                        }))\r\n                        clearTransaction()\r\n                        return\r\n                    }\r\n                    history.push(\"/\")\r\n                }}\r\n            />\r\n            <WarningDialog\r\n                open={showSendingToTokenAddressWarning}\r\n                onDone={() => setShowSendingToTokenAddressWarning(false)}\r\n                title=\"Sending to token contract address\"\r\n                message=\"You are trying to send tokens to the selected token's contract address. This might lead to a loss of funds. Please make sure you selected the correct address!\"\r\n            />\r\n            <HardwareDeviceNotLinkedDialog\r\n                onDone={resetDeviceLinkStatus}\r\n                isOpen={isDeviceUnlinked}\r\n                vendor={getDeviceFromAccountType(accountType)}\r\n                address={address}\r\n            />\r\n            <div className=\"w-full h-full\">\r\n                <div\r\n                    className=\"flex flex-col w-full h-full\"\r\n                    style={{ maxHeight: \"452px\" }}\r\n                >\r\n                    <AddressDisplay\r\n                        receivingAddress={history.location.state.address}\r\n                        selectedAccountName={selectedAccountName}\r\n                    />\r\n\r\n                    <div\r\n                        className=\"flex flex-col px-6\"\r\n                        style={{ maxWidth: \"100vw\" }}\r\n                    >\r\n                        {/* Asset */}\r\n                        <div\r\n                            className={classnames(\r\n                                !errors.asset?.message && \"mb-3\"\r\n                            )}\r\n                        >\r\n                            <p className=\"ml-1 mb-2 text-sm text-gray-600\">\r\n                                Asset\r\n                            </p>\r\n                            <AssetSelection\r\n                                register={register}\r\n                                selectedAssetList={AssetListType.DEFAULT}\r\n                                selectedAsset={selectedToken}\r\n                                onAssetChange={handleChangeAsset}\r\n                                error={errors.asset?.message}\r\n                                topMargin={100}\r\n                                bottomMargin={45}\r\n                            />\r\n                            {errors.asset?.message && (\r\n                                <div className=\"pl-1 my-2\">\r\n                                    <ErrorMessage>\r\n                                        {errors.asset?.message}\r\n                                    </ErrorMessage>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Amount */}\r\n                        <div\r\n                            className={classnames(\r\n                                \"flex flex-col\",\r\n                                !errors.amount && \"mb-3\"\r\n                            )}\r\n                        >\r\n                            <div className=\"flex flex-row\">\r\n                                <div className=\"flex items-start w-1/3\">\r\n                                    <label\r\n                                        htmlFor=\"amount\"\r\n                                        className=\"ml-1 mb-2 text-sm text-gray-600\"\r\n                                    >\r\n                                        Amount\r\n                                    </label>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div\r\n                                className={classnames(\r\n                                    Classes.blueSection,\r\n                                    inputFocus && \"bg-primary-200\",\r\n                                    errors.amount && \"border-red-400\"\r\n                                )}\r\n                            >\r\n                                <div className=\"flex flex-col items-start\">\r\n                                    <input\r\n                                        id=\"amount\"\r\n                                        type=\"text\"\r\n                                        {...register(\"amount\")}\r\n                                        className={classnames(\r\n                                            Classes.blueSectionInput\r\n                                        )}\r\n                                        placeholder={`0 ${\r\n                                            selectedToken\r\n                                                ? selectedToken.token.symbol\r\n                                                : \"\"\r\n                                        }`}\r\n                                        autoComplete=\"off\"\r\n                                        autoFocus={true}\r\n                                        onFocus={() => setInputFocus(true)}\r\n                                        onBlur={() => setInputFocus(false)}\r\n                                        onKeyDown={(e) => {\r\n                                            setUsingMax(false)\r\n                                            const amt = Number(\r\n                                                e.currentTarget.value\r\n                                            )\r\n                                            if (\r\n                                                !isNaN(Number(e.key)) &&\r\n                                                !isNaN(amt) &&\r\n                                                amt >= Number.MAX_SAFE_INTEGER\r\n                                            ) {\r\n                                                e.preventDefault()\r\n                                                e.stopPropagation()\r\n                                            }\r\n                                        }}\r\n                                        onInput={(e: any) =>\r\n                                            handleChangeAmount(e.target.value)\r\n                                        }\r\n                                    />\r\n                                    <span className=\"text-xs text-gray-600\">\r\n                                        {formatCurrency(nativeCurrencyAmt, {\r\n                                            currency: blankState.nativeCurrency,\r\n                                            locale_info: blankState.localeInfo,\r\n                                            showSymbol: true,\r\n                                        })}\r\n                                    </span>\r\n                                </div>\r\n                                <div className=\"w-1/5\">\r\n                                    <span\r\n                                        className={classnames(\r\n                                            \"float-right rounded-md cursor-pointer border p-1\",\r\n                                            usingMax\r\n                                                ? \"bg-primary-300 border-primary-300 text-white hover:bg-blue-600 hover:border-blue-600\"\r\n                                                : \"bg-blue-200 border-blue-200 hover:bg-blue-300 hover:border-blue-300\",\r\n                                            !HasBalance(selectedToken) &&\r\n                                                \"pointer-events-none text-gray-600\"\r\n                                        )}\r\n                                        title=\"Use all the available funds\"\r\n                                        onClick={() => {\r\n                                            if (HasBalance(selectedToken)) {\r\n                                                setMaxTransactionAmount(\r\n                                                    !usingMax\r\n                                                )\r\n                                            }\r\n                                        }}\r\n                                    >\r\n                                        max\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n                            <div\r\n                                className={`${\r\n                                    errors.amount?.message ? \"pl-1 my-2\" : null\r\n                                }`}\r\n                            >\r\n                                <ErrorMessage>\r\n                                    {errors.amount?.message}\r\n                                </ErrorMessage>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Speed */}\r\n                        <label className=\"ml-1 mb-2 text-sm text-gray-600\">\r\n                            Gas Price\r\n                        </label>\r\n\r\n                        {!isEIP1559Compatible ? (\r\n                            <GasPriceSelector\r\n                                defaultLevel={\r\n                                    blankState.defaultGasOption || \"medium\"\r\n                                }\r\n                                defaultGasLimit={defaultGas.gasLimit!}\r\n                                defaultGasPrice={defaultGas.gasPrice!}\r\n                                setGasPriceAndLimit={(gasPrice, gasLimit) => {\r\n                                    setSelectedGas({ gasPrice, gasLimit })\r\n                                }}\r\n                                isParentLoading={isGasLoading}\r\n                                showEstimationError={gasEstimationFailed}\r\n                            />\r\n                        ) : (\r\n                            <GasPriceComponent\r\n                                defaultGas={{\r\n                                    defaultLevel:\r\n                                        blankState.defaultGasOption || \"medium\",\r\n                                    feeData: {\r\n                                        gasLimit: defaultGas.gasLimit!,\r\n                                    },\r\n                                }}\r\n                                isParentLoading={isGasLoading}\r\n                                setGas={(gasFees) => {\r\n                                    setSelectedGas({\r\n                                        ...gasFees,\r\n                                    })\r\n                                }}\r\n                                showEstimationError={gasEstimationFailed}\r\n                                displayOnlyMaxValue\r\n                            />\r\n                        )}\r\n                        <div className={`${error ? \"pl-1 my-2\" : null}`}>\r\n                            <ErrorMessage>{error}</ErrorMessage>\r\n                        </div>\r\n\r\n                        <div className=\"mt-3\">\r\n                            <AdvancedSettings\r\n                                address={address}\r\n                                advancedSettings={transactionAdvancedData}\r\n                                display={{\r\n                                    nonce: true,\r\n                                    flashbots: false,\r\n                                    slippage: false,\r\n                                }}\r\n                                setAdvancedSettings={(\r\n                                    newSettings: TransactionAdvancedData\r\n                                ) => {\r\n                                    setTransactionAdvancedData({\r\n                                        customNonce: newSettings.customNonce,\r\n                                    })\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default SendConfirmPage\r\n","import { useBlankState } from \"../background/backgroundHooks\"\r\nimport { useAddressBook } from \"./useAddressBook\"\r\n\r\nexport const useAccountNameByAddress = (\r\n    address: string\r\n): string | undefined => {\r\n    const { accounts } = useBlankState()!\r\n    const addressBook = useAddressBook()\r\n\r\n    if (address in accounts) {\r\n        return accounts[address].name\r\n    }\r\n\r\n    if (address in addressBook) {\r\n        return addressBook[address].name\r\n    }\r\n\r\n    return undefined\r\n}\r\n","import { AccountInfo } from \"@block-wallet/background/controllers/AccountTrackerController\"\r\nimport { NetworkAddressBook } from \"@block-wallet/background/controllers/AddressBookController\"\r\nimport { useAddressBook } from \"./useAddressBook\"\r\n\r\n\r\nexport const useAddressBookAccounts = () => {\r\n    const addressBook: NetworkAddressBook = useAddressBook()\r\n    const addresses = Object.values(addressBook)\r\n    const accountArray = addresses\r\n        .sort((a, b) => a.name.localeCompare(b.name))\r\n        .map((a) => {\r\n            return { name: a.name, address: a.address } as AccountInfo\r\n        })\r\n    return accountArray\r\n}","import { isValidAddress } from \"ethereumjs-util\"\r\nimport { AccountResult } from \"../components/account/AccountSearchResults\"\r\nimport { resolveEnsName, lookupAddressEns } from \"../context/commActions\"\r\n\r\nexport const searchEns = async (\r\n    search: string\r\n): Promise<AccountResult | undefined> => {\r\n    if (search === \"\") return undefined\r\n\r\n    const isValid = isValidAddress(`${search}`)\r\n\r\n    // Search from address\r\n    if (isValid) {\r\n        const result = await lookupAddressEns(search)\r\n        return result ? { name: result, address: search } : undefined\r\n    }\r\n    // Search from ENS\r\n    else {\r\n        let suffixValue\r\n        search.includes(\".\")\r\n            ? (suffixValue = search)\r\n            : (suffixValue = search + \".eth\")\r\n\r\n        // Check result\r\n        const result = await resolveEnsName(suffixValue)\r\n        return result ? { name: suffixValue, address: result } : undefined\r\n    }\r\n}\r\n","import { AccountResult } from \"../components/account/AccountSearchResults\"\r\nimport { resolveUDName } from \"../context/commActions\"\r\nimport { isAddress } from \"@ethersproject/address\"\r\n\r\nexport const supportedSuffixes = [\r\n    \"crypto\",\r\n    \"nft\",\r\n    \"x\",\r\n    \"wallet\",\r\n    \"bitcoin\",\r\n    \"dao\",\r\n    \"888\",\r\n    \"coin\",\r\n    \"zil\",\r\n]\r\n\r\nexport const searchUD = async (\r\n    search: string\r\n): Promise<AccountResult | undefined> => {\r\n    if (search === \"\") return undefined\r\n\r\n    const _isAddress = isAddress(`${search}`)\r\n\r\n    // Search from address\r\n    if (_isAddress) {\r\n        return undefined\r\n    }\r\n\r\n    let suffix\r\n\r\n    search.includes(\".\")\r\n        ? (suffix = search.split(\".\").pop()) // suffix last part of seach after dot\r\n        : (suffix = undefined)\r\n\r\n    if (!suffix || !supportedSuffixes.includes(suffix)) return undefined\r\n\r\n    // Check result\r\n    const result = await resolveUDName(search)\r\n    return result ? { name: search, address: result } : undefined\r\n}\r\n","import { AccountInfo } from \"@block-wallet/background/controllers/AccountTrackerController\"\r\nimport { isValidAddress, toChecksumAddress } from \"ethereumjs-util\"\r\nimport { useRef, useEffect, useReducer } from \"react\"\r\nimport { useAddressBookAccounts } from \"../../context/hooks/useAddressBookAccounts\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport { useSortedAccounts } from \"../../context/hooks/useSortedAccounts\"\r\nimport { filterAccounts } from \"../../util/filterAccounts\"\r\nimport { mergeReducer } from \"../../util/reducerUtils\"\r\nimport { searchEns } from \"../../util/searchEns\"\r\nimport { searchUD } from \"../../util/searchUD\"\r\nimport AccountDisplay from \"./AccountDisplay\"\r\nimport AccountsList from \"./AccountsList\"\r\n\r\ntype AccountSearchResultsProps = {\r\n    filter: string\r\n    resultsToDisplay?: {\r\n        wallet?: boolean\r\n        addressBook?: boolean\r\n        ens?: boolean\r\n        ud?: boolean\r\n    }\r\n    onSelect: (account: any) => void\r\n}\r\n\r\nexport type AccountResult = {\r\n    name: string\r\n    address: string\r\n}\r\n\r\ntype AccountsResultsType = {\r\n    wallet: AccountInfo[]\r\n    addressBook: AccountInfo[]\r\n    ens?: AccountResult\r\n    ud?: AccountResult\r\n}\r\n\r\nconst AccountSearchResults = ({\r\n    filter,\r\n    onSelect,\r\n    resultsToDisplay = { wallet: true, addressBook: true, ens: true, ud: true },\r\n}: AccountSearchResultsProps) => {\r\n    // Hooks\r\n    const { ens } = useSelectedNetwork()\r\n\r\n    // Default values\r\n    const defaultAccounts = useRef<AccountInfo[]>(\r\n        useSortedAccounts({\r\n            filterCurrentAccount: true,\r\n        })\r\n    )\r\n    const addressBookAccounts = useRef<AccountInfo[]>(useAddressBookAccounts())\r\n    const ensEnabled = useRef<boolean>(ens)\r\n\r\n    // State\r\n    const [results, setResults] = useReducer(\r\n        mergeReducer<AccountsResultsType, Partial<AccountsResultsType>>(),\r\n        {\r\n            wallet: defaultAccounts.current,\r\n            addressBook: addressBookAccounts.current,\r\n        }\r\n    )\r\n\r\n    const noWalletResults =\r\n        !resultsToDisplay.wallet || results.wallet.length === 0\r\n    const noAddressBookResults =\r\n        !resultsToDisplay.addressBook || results.addressBook.length === 0\r\n\r\n    const noEnsResults = !resultsToDisplay.ens || !results.ens\r\n    const noUDResults = !resultsToDisplay.ud || !results.ud\r\n    const displayEmptyResultsMessage = (): boolean => {\r\n        return (\r\n            noWalletResults &&\r\n            noAddressBookResults &&\r\n            noEnsResults &&\r\n            noUDResults &&\r\n            !isValidAddress(filter) &&\r\n            filter !== \"\"\r\n        )\r\n    }\r\n\r\n    useEffect(() => {\r\n        const search = async () => {\r\n            // Filter Wallet Accounts\r\n            const newResults = {\r\n                ...results,\r\n                wallet: filterAccounts(defaultAccounts.current, {\r\n                    term: filter.toLowerCase(),\r\n                }),\r\n            }\r\n\r\n            // If any, filter address book accounts\r\n            if (addressBookAccounts.current.length > 0) {\r\n                newResults.addressBook = filterAccounts(\r\n                    addressBookAccounts.current,\r\n                    {\r\n                        term: filter.toLowerCase(),\r\n                    }\r\n                )\r\n            }\r\n\r\n            // If Ens enabled, search for it\r\n            if (ensEnabled && ensEnabled.current) {\r\n                newResults.ens = filter ? await searchEns(filter) : undefined\r\n            }\r\n\r\n            // Unstoppable Domains\r\n            newResults.ud = filter ? await searchUD(filter) : undefined\r\n\r\n            setResults(newResults)\r\n        }\r\n\r\n        search()\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [filter])\r\n\r\n    return (\r\n        <>\r\n            {!noWalletResults && (\r\n                <div className=\"flex flex-col px-6\">\r\n                    <AccountsList title=\"OTHER ACCOUNTS\">\r\n                        {results.wallet.map((account) => (\r\n                            <AccountDisplay\r\n                                key={account.address}\r\n                                account={account}\r\n                                selected={filter === account.address}\r\n                                showAddress={true}\r\n                                onClickAccount={() => onSelect(account)}\r\n                            />\r\n                        ))}\r\n                    </AccountsList>\r\n                </div>\r\n            )}\r\n\r\n            {!noAddressBookResults && (\r\n                <div className=\"flex flex-col px-6\">\r\n                    <AccountsList title=\"ADDRESS BOOK CONTACTS\">\r\n                        {results.addressBook.map((account) => (\r\n                            <AccountDisplay\r\n                                key={account.address}\r\n                                account={account}\r\n                                selected={\r\n                                    isValidAddress(filter) &&\r\n                                    toChecksumAddress(filter) ===\r\n                                        account.address\r\n                                }\r\n                                showAddress={true}\r\n                                onClickAccount={() => onSelect(account)}\r\n                            />\r\n                        ))}\r\n                    </AccountsList>\r\n                </div>\r\n            )}\r\n\r\n            {!noEnsResults && results.ens && (\r\n                <div className=\"flex flex-col px-6  \">\r\n                    <AccountsList title=\"ENS RESULT\">\r\n                        <AccountDisplay\r\n                            key={results.ens.address}\r\n                            account={\r\n                                {\r\n                                    name: results.ens.name,\r\n                                    address: results.ens.address,\r\n                                } as AccountInfo\r\n                            }\r\n                            selected={filter === results.ens.address}\r\n                            showAddress={true}\r\n                            onClickAccount={() => onSelect(results.ens)}\r\n                        />\r\n                    </AccountsList>\r\n                </div>\r\n            )}\r\n\r\n            {!noUDResults && results.ud && (\r\n                <div className=\"flex flex-col px-6  \">\r\n                    <AccountsList title=\"UD RESULT\">\r\n                        <AccountDisplay\r\n                            key={results.ud.address}\r\n                            account={\r\n                                {\r\n                                    name: results.ud.name,\r\n                                    address: results.ud.address,\r\n                                } as AccountInfo\r\n                            }\r\n                            selected={filter === results.ud.address}\r\n                            showAddress={true}\r\n                            onClickAccount={() => onSelect(results.ud)}\r\n                        />\r\n                    </AccountsList>\r\n                </div>\r\n            )}\r\n\r\n            {displayEmptyResultsMessage() && (\r\n                <div className=\"text-base font-bold text-black w-full text-center mt-4\">\r\n                    <span>No results found.</span>\r\n                </div>\r\n            )}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AccountSearchResults\r\n","import classnames from \"classnames\"\r\n\r\n/**\r\n * Checkbox Input component.\r\n * @param label Label for the checkbox. can be a string or a react element\r\n * @param checked If true the checkbox will be checked\r\n * @param onChange Function to be called when the checkbox is clicked\r\n * @param disabled If true the checkbox will be disabled\r\n * @param className Custom class name for the checkbox\r\n * @param right If true the checkbox and label will be on the end of the div\r\n */\r\nconst Checkbox = ({\r\n    label,\r\n    className,\r\n    checked,\r\n    onChange,\r\n    disabled = false,\r\n    right = false,\r\n}: {\r\n    label: string | JSX.Element\r\n    className?: string\r\n    checked: boolean\r\n    onChange: (checked: boolean) => void\r\n    disabled?: boolean\r\n    right?: boolean\r\n}) => (\r\n    <div\r\n        className={classnames(\r\n            \"pt-2 flex flex-row items-center\",\r\n            right && \"justify-end\"\r\n        )}\r\n    >\r\n        <input\r\n            type=\"checkbox\"\r\n            checked={checked}\r\n            className={classnames(\r\n                \" cursor-pointer w-4 h-4 border-1 border-gray-200 rounded-md focus:ring-0\",\r\n                className && className\r\n            )}\r\n            onChange={() => {\r\n                onChange(!checked)\r\n            }}\r\n            id=\"checkbox\"\r\n            disabled={disabled}\r\n        />\r\n        <label htmlFor=\"checkbox\" className=\" cursor-pointer text-xs pl-2\">\r\n            {label}\r\n        </label>\r\n    </div>\r\n)\r\n\r\nexport default Checkbox\r\n","import { useState, useEffect, useRef } from \"react\"\r\nimport { useMergeRefs } from \"../../context/hooks/useMergeRefs\"\r\nimport { addressBookSet } from \"../../context/commActions\"\r\n\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport SearchInput from \"../../components/input/SearchInput\"\r\n\r\nimport classnames from \"classnames\"\r\n\r\nimport * as yup from \"yup\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport { useForm } from \"react-hook-form\"\r\n\r\nimport { useSelectedAccount } from \"../../context/hooks/useSelectedAccount\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport { TokenWithBalance } from \"../../context/hooks/useTokensList\"\r\nimport { useAddressBookAccounts } from \"../../context/hooks/useAddressBookAccounts\"\r\nimport { useSortedAccounts } from \"../../context/hooks/useSortedAccounts\"\r\n\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport AccountSearchResults, {\r\n    AccountResult,\r\n} from \"../../components/account/AccountSearchResults\"\r\nimport Checkbox from \"../../components/input/Checkbox\"\r\nimport { isValidAddress, toChecksumAddress } from \"ethereumjs-util\"\r\nimport { formatHashLastChars } from \"../../util/formatAccount\"\r\n\r\n// Schema\r\nconst schema = yup.object().shape({\r\n    address: yup\r\n        .string()\r\n        .required(\"No address provided.\")\r\n        .test(\"is-correct\", \"Address is incorrect\", (address) => {\r\n            return isValidAddress(`${address}`)\r\n        }),\r\n})\r\ntype AddressFormData = { address: string }\r\n\r\nconst SendPage = () => {\r\n    const history = useOnMountHistory()\r\n\r\n    const defaultAsset = history.location.state?.asset\r\n    const fromAssetPage = defaultAsset ?? false\r\n    const currentAccount = useSelectedAccount()\r\n\r\n    const myAccounts = useSortedAccounts({\r\n        filterCurrentAccount: true,\r\n    })\r\n\r\n    const addressBookAccounts = useAddressBookAccounts()\r\n\r\n    // State\r\n    const [selectedAccount, setSelectedAccount] = useState<AccountResult>()\r\n    const [searchString, setSearchString] = useState<string>(\"\")\r\n    const [warning, setWarning] = useState<string>(\"\")\r\n    const [preSelectedAsset, setPreSelectedAsset] = useState<TokenWithBalance>()\r\n    const [isAddress, setIsAddress] = useState<boolean>(false)\r\n\r\n    const [addContact, setAddContact] = useState(false)\r\n    const [canAddContact, setCanAddContact] = useState(false)\r\n\r\n    const searchInputRef = useRef<HTMLInputElement>(null)\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        setValue,\r\n\r\n        formState: { errors },\r\n    } = useForm<AddressFormData>({\r\n        resolver: yupResolver(schema),\r\n    })\r\n\r\n    // Hooks\r\n    useEffect(() => {\r\n        defaultAsset && setPreSelectedAsset(defaultAsset)\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    // Handlers\r\n    const onSubmit = handleSubmit(async (data: AddressFormData) => {\r\n        if (addContact) {\r\n            await addressBookSet(\r\n                data.address,\r\n                `Account ${formatHashLastChars(data.address)}`,\r\n                \"\"\r\n            )\r\n        }\r\n        history.push({\r\n            pathname: \"/send/confirm\",\r\n            state: {\r\n                address: toChecksumAddress(data.address),\r\n                asset: preSelectedAsset,\r\n                name: selectedAccount?.name,\r\n                fromAssetPage: fromAssetPage,\r\n            },\r\n        })\r\n    })\r\n    const { ref } = register(\"address\")\r\n\r\n    const onChangeHandler = (event: any) => {\r\n        // Bind\r\n        const value = event.target.value\r\n        setValue(\"address\", value)\r\n        setSearchString(value)\r\n        setAddContact(false)\r\n    }\r\n\r\n    useEffect(() => {\r\n        const checkAddress = () => {\r\n            const validAddress = isValidAddress(searchString)\r\n\r\n            setIsAddress(validAddress)\r\n            setCanAddContact(false)\r\n            setWarning(\"\")\r\n\r\n            if (validAddress) {\r\n                const normalizedAddress = toChecksumAddress(searchString)\r\n\r\n                const isCurrentAccount =\r\n                    normalizedAddress === currentAccount.address\r\n\r\n                if (isCurrentAccount) {\r\n                    setWarning(\r\n                        \"Warning: You are trying to send to your own address.\"\r\n                    )\r\n                }\r\n\r\n                const isInAddressBook = (addressBookAccounts || []).some(\r\n                    ({ address }) => address === normalizedAddress\r\n                )\r\n\r\n                const isInMyAccounts = (myAccounts || []).some(\r\n                    ({ address }) => address === normalizedAddress\r\n                )\r\n\r\n                setCanAddContact(\r\n                    !isCurrentAccount && !isInAddressBook && !isInMyAccounts\r\n                )\r\n            }\r\n        }\r\n\r\n        checkAddress()\r\n    }, [searchString])\r\n\r\n    const onAccountSelect = (account: any) => {\r\n        setSelectedAccount(account)\r\n        setValue(\"address\", account.address, {\r\n            shouldValidate: true,\r\n        })\r\n        setSearchString(account.address)\r\n        setIsAddress(true)\r\n    }\r\n\r\n    const goToSide = () => {\r\n        if (!searchInputRef.current) return\r\n\r\n        const len = searchInputRef.current.value.length\r\n        searchInputRef.current.setSelectionRange(len, len)\r\n    }\r\n\r\n    // Component\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    title=\"Send\"\r\n                    networkIndicator\r\n                    onBack={() => {\r\n                        history.push(\r\n                            fromAssetPage\r\n                                ? {\r\n                                      pathname: \"/asset/details\",\r\n                                      state: {\r\n                                          address: defaultAsset.token.address,\r\n                                          transitionDirection: \"right\",\r\n                                      },\r\n                                  }\r\n                                : { pathname: \"/home\" }\r\n                        )\r\n                    }}\r\n                />\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        label=\"Next\"\r\n                        disabled={!isAddress}\r\n                        onClick={onSubmit}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            {/* Search or Input */}\r\n            <div className=\"flex flex-col space-y-2 fixed w-full bg-white z-10\">\r\n                <div className=\"w-full p-6 pb-0\">\r\n                    <SearchInput\r\n                        label=\"Enter public address, name or select contact\"\r\n                        placeholder=\"Enter public address, name or select contact\"\r\n                        name=\"address\"\r\n                        ref={useMergeRefs(ref, searchInputRef)}\r\n                        error={errors.address?.message}\r\n                        warning={warning}\r\n                        autoFocus={false}\r\n                        isValid={isAddress}\r\n                        onChange={onChangeHandler}\r\n                        onPaste={() => {\r\n                            setTimeout(() => {\r\n                                if (!searchInputRef.current) return\r\n\r\n                                searchInputRef.current.blur()\r\n                                searchInputRef.current.focus()\r\n\r\n                                goToSide()\r\n                            }, 300)\r\n                        }}\r\n                        debounced\r\n                    />\r\n                    {canAddContact && (\r\n                        <Checkbox\r\n                            label=\"Add to contacts\"\r\n                            checked={addContact}\r\n                            onChange={() => setAddContact(!addContact)}\r\n                        />\r\n                    )}\r\n                </div>\r\n            </div>\r\n            <div\r\n                className={classnames(\r\n                    \"pt-28 pb-6 space-y-4\",\r\n                    warning !== \"\" || canAddContact ? \"mt-5\" : \"mt-1\"\r\n                )}\r\n            >\r\n                <AccountSearchResults\r\n                    filter={searchString}\r\n                    onSelect={onAccountSelect}\r\n                />\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default SendPage\r\n","import { AriaAttributes } from \"react\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport { openHardwareConnect } from \"../../context/commActions\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport Icon, { IconName } from \"../../components/ui/Icon\"\r\nimport classNames from \"classnames\"\r\nimport { PropsWithChildren } from \"react\"\r\n\r\nconst CardFrame: React.FC<\r\n    PropsWithChildren<{\r\n        onClick: () => void\r\n        role?: string\r\n        disabled?: boolean\r\n    }> &\r\n        AriaAttributes\r\n> = ({ children, onClick, role, disabled = false, ...ariaProps }) => {\r\n    return (\r\n        <div\r\n            role={role}\r\n            onClick={onClick}\r\n            {...ariaProps}\r\n            className={classNames(\r\n                \"rounded-md border border-gray-200 flex flex-row p-4 h-26 justify-between hover:border-black hover:cursor-pointer\",\r\n                disabled && \"opacity-50 pointer-events-none\"\r\n            )}\r\n        >\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst CreateAccountCard: React.FC<{\r\n    iconName: IconName\r\n    title: string\r\n    description: string\r\n    onClick: () => void\r\n    disabled?: boolean\r\n}> = ({ iconName, title, description, onClick, disabled = false }) => {\r\n    return (\r\n        <CardFrame\r\n            onClick={onClick}\r\n            aria-label={title}\r\n            role=\"link\"\r\n            disabled={disabled}\r\n        >\r\n            <Icon className=\"mr-3\" name={iconName} size=\"lg\" />\r\n            <div className=\"flex-1 flex flex-col justify-start space-y-2\">\r\n                <span className=\"font-bold text-sm leading-6\">{title}</span>\r\n                <p className=\"text-xs text-gray-500 leading-5\">{description}</p>\r\n            </div>\r\n            <div className=\"w-6 m-auto\">\r\n                <Icon name={IconName.RIGHT_CHEVRON} />\r\n            </div>\r\n        </CardFrame>\r\n    )\r\n}\r\n\r\nconst CreateAccountPage = () => {\r\n    const history = useOnMountHistory()\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    title=\"Create New Account\"\r\n                    onBack={() => history.replace(\"/accounts\")}\r\n                />\r\n            }\r\n        >\r\n            <div className=\"flex flex-col space-y-6 p-6\">\r\n                <CreateAccountCard\r\n                    title=\"Create Account\"\r\n                    iconName={IconName.WALLET}\r\n                    description=\"Create a new account from the seed stored in BlockWallet.\"\r\n                    onClick={() => history.push(\"/accounts/create/add\")}\r\n                />\r\n                <CreateAccountCard\r\n                    title=\"Import Account\"\r\n                    iconName={IconName.IMPORT}\r\n                    description=\"Import a new account from a private key.\"\r\n                    onClick={() => history.push(\"/accounts/create/import\")}\r\n                />\r\n                <CreateAccountCard\r\n                    title=\"Connect Hardware Wallet\"\r\n                    iconName={IconName.USB}\r\n                    description=\"Connect accounts from a hardware wallet.\"\r\n                    onClick={() => openHardwareConnect()}\r\n                />\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default CreateAccountPage\r\n","import { forwardRef, useState, HTMLInputTypeAttribute } from \"react\"\r\n\r\nimport EndLabel from \"./EndLabel\"\r\n// Style\r\nimport { Classes, classnames } from \"../../styles/classes\"\r\nimport classNames from \"classnames\"\r\nimport { AiFillInfoCircle } from \"react-icons/ai\"\r\nimport Tooltip from \"../label/Tooltip\"\r\n\r\n// Types\r\ntype TextInputProps = {\r\n    appearance: \"outline\" | \"blue-section\" | \"border\"\r\n    label?: string\r\n    placeholder?: string\r\n    value?: string\r\n    defaultValue?: string | number\r\n    name?: string\r\n    error?: string\r\n    warning?: string\r\n    disabled?: boolean\r\n    autoFocus?: boolean\r\n    autoComplete?: boolean\r\n    maxLength?: number\r\n    onChange?: (value: any) => void\r\n    onKeyDown?: (value: React.KeyboardEvent<HTMLInputElement>) => void\r\n    readOnly?: boolean\r\n    endLabel?: string | JSX.Element\r\n    className?: string\r\n    type?: HTMLInputTypeAttribute\r\n    info?: string | JSX.Element\r\n    onClickInfo?: () => void\r\n    spellCheck?: boolean\r\n}\r\n\r\n/**\r\n * TextInput:\r\n * Creates a text input.\r\n *\r\n * @param label - Display label above input.\r\n * @param placeholder - Placeholder for the input.\r\n * @param value - Value to make controlled input.\r\n * @param defaultValue - Default value for the input.\r\n * @param name - Name of the input, for yup validation.\r\n * @param register - Yup reference.\r\n * @param error - Yup error or message to display as red error under input.\r\n * @param warning - Warning orange message to display under input.\r\n * @param disabled - Disabling input if true.\r\n * @param autoFocus - Auto focus input when entering page if true.\r\n * @param autoComplete - Enable browser autocomplete suggestions if true.\r\n * @param maxLength - Limit size of the input value.\r\n * @param onChange - Function to execute on input change.\r\n * @param onKeyDown - Function to execute on input key down.\r\n * @param readOnly - readOnly attribute\r\n * @param spellCheck - spellCheck attribute\r\n */\r\nconst TextInput = forwardRef<HTMLInputElement, TextInputProps>(\r\n    (props: TextInputProps, ref) => {\r\n        const {\r\n            appearance,\r\n            label,\r\n            placeholder,\r\n            value,\r\n            defaultValue,\r\n            name,\r\n            error = \"\",\r\n            warning = \"\",\r\n            autoFocus,\r\n            autoComplete,\r\n            maxLength,\r\n            disabled,\r\n            onChange,\r\n            onKeyDown,\r\n            endLabel,\r\n            readOnly = false,\r\n            className,\r\n            type,\r\n            info,\r\n            onClickInfo,\r\n            spellCheck = true,\r\n        } = props\r\n\r\n        const [hasFocus, setHasFocus] = useState(autoFocus)\r\n\r\n        const input = (\r\n            <input\r\n                name={name}\r\n                type={type || \"text\"}\r\n                id={name}\r\n                value={value}\r\n                defaultValue={defaultValue}\r\n                ref={ref}\r\n                className={classNames(\r\n                    appearance === \"outline\"\r\n                        ? Classes.input\r\n                        : appearance === \"border\"\r\n                        ? Classes.inputBorder\r\n                        : Classes.blueSectionInput,\r\n                    error !== \"\" ? \"border-red-400 focus:border-red-400\" : \"\",\r\n                    warning !== \"\"\r\n                        ? \"border-yellow-400 focus:border-yellow-400\"\r\n                        : \"\",\r\n                    readOnly || disabled ? \"cursor-not-allowed\" : \"\",\r\n                    !endLabel ? \"\" : \"mt-0 items-center\",\r\n                    className\r\n                )}\r\n                placeholder={placeholder ? placeholder : \"\"}\r\n                autoFocus={autoFocus ? autoFocus : false}\r\n                autoComplete={autoComplete ? \"on\" : \"off\"}\r\n                maxLength={maxLength ? maxLength : -1}\r\n                disabled={disabled ? disabled : false}\r\n                onChange={onChange}\r\n                readOnly={readOnly}\r\n                onKeyDown={onKeyDown}\r\n                onFocus={() => setHasFocus(true)}\r\n                onBlur={() => {\r\n                    setHasFocus(false)\r\n                }}\r\n                spellCheck={spellCheck}\r\n            />\r\n        )\r\n\r\n        return (\r\n            <div\r\n                className={classnames(\r\n                    appearance === \"blue-section\" && Classes.blueSection,\r\n                    appearance === \"blue-section\" &&\r\n                        hasFocus &&\r\n                        Classes.blueSectionActive\r\n                )}\r\n            >\r\n                {/* LABEL */}\r\n                {label ? (\r\n                    <label\r\n                        htmlFor={name}\r\n                        className={classnames(\r\n                            Classes.inputLabel,\r\n                            \"flex flex-row items-center space-x-2\"\r\n                        )}\r\n                    >\r\n                        <span>{label}</span>\r\n                        {info && (\r\n                            <div className=\"group relative\">\r\n                                <AiFillInfoCircle\r\n                                    size={16}\r\n                                    onClick={onClickInfo}\r\n                                    className={classnames(\r\n                                        \"text-primary-200 hover:text-primary-300 cursor-default\",\r\n                                        onClickInfo && \"!cursor-pointer\"\r\n                                    )}\r\n                                />\r\n                                <Tooltip\r\n                                    className=\"!w-60 !break-word !whitespace-normal border boder-gray-300 !-translate-y-6 translate-x-1\"\r\n                                    content={info}\r\n                                />\r\n                            </div>\r\n                        )}\r\n                    </label>\r\n                ) : null}\r\n\r\n                {/* INPUT */}\r\n                {!endLabel ? (\r\n                    input\r\n                ) : (\r\n                    <EndLabel label={endLabel}>{input}</EndLabel>\r\n                )}\r\n\r\n                {/* ERROR */}\r\n                <span\r\n                    className={classNames(\r\n                        \"text-xs text-ellipsis overflow-hidden\",\r\n                        error !== \"\" ? \"text-red-500\" : \"\",\r\n                        warning !== \"\" ? \"text-yellow-500\" : \"\",\r\n                        error === \"\" && warning === \"\" ? \"m-0 h-0\" : \"\"\r\n                    )}\r\n                >\r\n                    {error || warning || \"\"}\r\n                </span>\r\n            </div>\r\n        )\r\n    }\r\n)\r\n\r\nexport default TextInput\r\n","import { useEffect, useRef, useState } from \"react\"\r\n\r\n// Context\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\n\r\n// Components\r\nimport Spinner from \"../spinner/Spinner\"\r\nimport TextInput from \"../input/TextInput\"\r\n\r\nimport * as yup from \"yup\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport { InferType } from \"yup\"\r\n\r\n// Comm\r\nimport { searchTokenInAssetsList } from \"../../context/commActions\"\r\n\r\n// Assets\r\nimport { isValidAddress } from \"ethereumjs-util\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useAccountTokens } from \"../../context/hooks/useAccountTokens\"\r\nimport { MdRefresh } from \"react-icons/md\"\r\nimport classNames from \"classnames\"\r\nimport WarningDialog from \"../dialog/WarningDialog\"\r\n\r\nexport interface addTokenManualViewProps {\r\n    manualTokenAddress?: string\r\n    setSubmitEnabled?: (value: any) => Promise<any>\r\n}\r\n\r\nconst AddTokenManualView = ({\r\n    manualTokenAddress = \"\",\r\n    setSubmitEnabled = undefined,\r\n}: addTokenManualViewProps) => {\r\n    const addManualTokenSchema = yup.object({\r\n        tokenAddress: yup\r\n            .string()\r\n            .required(\"Please enter a contract address\")\r\n            .test(\"invalid-contract\", \"Token contract is not valid\", (s) => {\r\n                return !(!s || s.length !== 42 || s.substring(0, 2) !== \"0x\")\r\n            }),\r\n        tokenSymbol: yup.string().required(\"Please enter a token symbol\"),\r\n        tokenDecimals: yup\r\n            .string()\r\n            .required(\"Could not fetch token decimals. Please refresh.\")\r\n            .test(\"not-valid-decimals\", \"Please enter valid decimals\", (s) => {\r\n                return !(!s || isNaN(parseInt(s)) || s.length > 2)\r\n            }),\r\n        tokenLogo: yup.string(),\r\n        tokenName: yup.string(),\r\n        tokenType: yup.string(),\r\n    })\r\n    type addManualTokenFormData = InferType<typeof addManualTokenSchema>\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        setError,\r\n        setValue,\r\n        watch,\r\n        reset,\r\n        formState: { errors },\r\n    } = useForm<addManualTokenFormData>({\r\n        defaultValues: {\r\n            tokenAddress: \"\",\r\n            tokenDecimals: undefined,\r\n            tokenLogo: \"\",\r\n            tokenName: \"\",\r\n            tokenSymbol: \"\",\r\n            tokenType: \"\",\r\n        },\r\n        resolver: yupResolver(addManualTokenSchema),\r\n    })\r\n\r\n    const values = watch()\r\n    const history = useOnMountHistory()\r\n    const tokens = useAccountTokens()\r\n\r\n    const tokenAddresses = useRef(\r\n        Object.keys(tokens ?? {}).map((v) => v.toLowerCase())\r\n    ).current\r\n    const tokenSymbols = useRef(\r\n        Object.keys(tokens ?? {}).map((key) => tokens[key].symbol.toLowerCase())\r\n    ).current\r\n    const [message, setMessage] = useState(\"\")\r\n    const [isLoading, setIsLoading] = useState(false)\r\n\r\n    const [refetchOption, setRefetchOption] = useState(false)\r\n    const [refetchAnimation, setRefetchAnimation] = useState(false)\r\n    const [shouldShowWarningDialog, setShouldShowWarningDialog] =\r\n        useState(false)\r\n\r\n    const onSubmit = handleSubmit(async (data: addManualTokenFormData) => {\r\n        try {\r\n            const tokenToAdd = {\r\n                address: data.tokenAddress,\r\n                decimals: data.tokenDecimals,\r\n                logo: values.tokenLogo,\r\n                name: data.tokenName ?? data.tokenSymbol.toUpperCase(),\r\n                symbol: data.tokenSymbol,\r\n                type: values.tokenType,\r\n            }\r\n            history.push({\r\n                pathname: \"/settings/tokens/add/confirm\",\r\n                state: {\r\n                    tokens: [tokenToAdd],\r\n                    ...(history.location.state || {}),\r\n                },\r\n            })\r\n        } catch (event) {\r\n            // Invalid form data\r\n            setError(\"tokenAddress\", event.toString())\r\n        }\r\n    })\r\n\r\n    useEffect(() => {\r\n        let msg = \"\"\r\n        if (tokenAddresses.includes(values.tokenAddress.toLowerCase())) {\r\n            msg = \"You've already added this token\"\r\n        } else if (tokenSymbols.includes(values.tokenSymbol.toLowerCase())) {\r\n            setShouldShowWarningDialog(true)\r\n        }\r\n\r\n        setMessage(msg)\r\n        if (setSubmitEnabled && (msg !== \"\" || shouldShowWarningDialog)) {\r\n            setSubmitEnabled(false)\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [values.tokenSymbol, values.tokenAddress, setMessage])\r\n\r\n    const onAddressChange = async (value: string) => {\r\n        fetchTokenData(value)\r\n    }\r\n\r\n    const fetchTokenData = async (tokenAddress: string) => {\r\n        if (!setSubmitEnabled) return\r\n        if (!isValidAddress(tokenAddress)) return\r\n\r\n        setSubmitEnabled(false)\r\n        setRefetchOption(false)\r\n        setError(\"tokenAddress\", { message: undefined })\r\n        setIsLoading(true)\r\n\r\n        const tokenSearchResponse = await searchTokenInAssetsList(tokenAddress)\r\n\r\n        setIsLoading(false)\r\n\r\n        if (\r\n            !tokenSearchResponse ||\r\n            !tokenSearchResponse.tokens ||\r\n            tokenSearchResponse.tokens.length === 0 ||\r\n            (!tokenSearchResponse.tokens[0].name &&\r\n                !tokenSearchResponse.tokens[0].symbol)\r\n        ) {\r\n            reset()\r\n            setError(\"tokenAddress\", {\r\n                message: \"Invalid contract address for this network.\",\r\n            })\r\n            setValue(\"tokenAddress\", tokenAddress)\r\n            return\r\n        }\r\n\r\n        const token = tokenSearchResponse.tokens[0]\r\n\r\n        if (tokenSearchResponse.fetchFailed) {\r\n            reset()\r\n            setError(\"tokenAddress\", {\r\n                message: \"Could not fetch token data. Please try again.\",\r\n            })\r\n            setValue(\"tokenAddress\", tokenAddress)\r\n            setRefetchOption(true)\r\n            setTimeout(() => {\r\n                setRefetchAnimation(true)\r\n            }, 500)\r\n\r\n            return\r\n        }\r\n\r\n        setValue(\"tokenAddress\", token.address)\r\n        setValue(\"tokenDecimals\", token.decimals.toString())\r\n        setValue(\"tokenLogo\", token.logo)\r\n        setValue(\"tokenName\", token.name)\r\n        setValue(\"tokenSymbol\", token.symbol)\r\n        setValue(\"tokenType\", token.type)\r\n\r\n        setSubmitEnabled(true)\r\n    }\r\n\r\n    useEffect(() => {\r\n        onAddressChange(manualTokenAddress)\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [manualTokenAddress])\r\n\r\n    useEffect(() => {\r\n        if (refetchAnimation) {\r\n            setTimeout(() => {\r\n                setRefetchAnimation(false)\r\n            }, 1500)\r\n        }\r\n    }, [refetchAnimation])\r\n\r\n    return (\r\n        <>\r\n            {/* Add Manual token form */}\r\n            <form\r\n                id=\"manualViewForm\"\r\n                className=\"flex flex-col justify-between h-4/5 mt-20\"\r\n                onSubmit={onSubmit}\r\n            >\r\n                <div className=\"flex justify-center items-center space-x-2 pb-3\">\r\n                    <div className=\"text-base font-bold text-black text-center\">\r\n                        Custom Token\r\n                    </div>\r\n\r\n                    <MdRefresh\r\n                        size={18}\r\n                        className={classNames(\r\n                            \"hover:cursor-pointer transition duration-300 rounded-full hover:bg-primary-100 hover:text-primary-300\",\r\n                            refetchAnimation &&\r\n                                \"bg-primary-100 text-primary-300 animate-[bounce_1.5s]\",\r\n                            (!refetchOption || isLoading) && \"invisible\"\r\n                        )}\r\n                        onClick={() => {\r\n                            fetchTokenData(values.tokenAddress)\r\n                        }}\r\n                        title=\"Refetch token data\"\r\n                    />\r\n                </div>\r\n                <div className=\"h-full\">\r\n                    {isLoading ? (\r\n                        <div className=\"w-full h-4/5 flex justify-center items-center\">\r\n                            <Spinner size=\"24px\" />\r\n                        </div>\r\n                    ) : (\r\n                        <>\r\n                            {/* ADDRESS */}\r\n                            <div className=\"flex flex-col flex-1 p-6 pt-0 pb-3 space-y-1\">\r\n                                <TextInput\r\n                                    appearance=\"outline\"\r\n                                    label=\"Token Contract Address\"\r\n                                    placeholder={\r\n                                        values.tokenAddress || \"Address\"\r\n                                    }\r\n                                    {...register(\"tokenAddress\", {\r\n                                        onChange: (e) => {\r\n                                            onAddressChange(e.target.value)\r\n                                        },\r\n                                    })}\r\n                                    error={errors.tokenAddress?.message}\r\n                                    autoFocus={true}\r\n                                    maxLength={42}\r\n                                    defaultValue={values.tokenAddress}\r\n                                    spellCheck={false}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* NAME */}\r\n                            <div className=\"flex flex-col flex-1 p-6 pt-0 pb-3 space-y-1\">\r\n                                <TextInput\r\n                                    appearance=\"outline\"\r\n                                    label=\"Token Name\"\r\n                                    placeholder={values.tokenName || \"Ether\"}\r\n                                    defaultValue={values.tokenName}\r\n                                    error={errors.tokenName?.message}\r\n                                    {...register(\"tokenName\")}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* SYMBOL */}\r\n                            <div className=\"flex flex-col flex-1 p-6 pt-0 pb-3 space-y-1\">\r\n                                <TextInput\r\n                                    appearance=\"outline\"\r\n                                    label=\"Token Symbol\"\r\n                                    placeholder={values.tokenSymbol || \"ETH\"}\r\n                                    defaultValue={values.tokenSymbol}\r\n                                    error={errors.tokenSymbol?.message}\r\n                                    {...register(\"tokenSymbol\")}\r\n                                    disabled={true}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* DECIMALS */}\r\n                            <div className=\"flex flex-col flex-1 p-6 pt-0 pb-3 space-y-1\">\r\n                                <TextInput\r\n                                    appearance=\"outline\"\r\n                                    label=\"Decimals of Precision\"\r\n                                    placeholder={\r\n                                        values.tokenDecimals\r\n                                            ? values.tokenDecimals.toString()\r\n                                            : \"\"\r\n                                    }\r\n                                    defaultValue={values.tokenDecimals || \"\"}\r\n                                    error={errors.tokenDecimals?.message}\r\n                                    {...register(\"tokenDecimals\")}\r\n                                    disabled={true}\r\n                                />\r\n                            </div>\r\n\r\n                            {/* ERROR */}\r\n                            <div\r\n                                className={`text-xs px-6 text-red-500 ${\r\n                                    message === \"\" ? \"pt-0 h-0\" : \"pt-2\"\r\n                                }`}\r\n                            >\r\n                                {message || <>&nbsp;</>}\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            </form>\r\n            <WarningDialog\r\n                useClickOutside={true}\r\n                title=\"Duplicated symbol\"\r\n                message=\"We detected a duplicate symbol that already exists in your account. You may be exposed to potential scams by adding this token. Would you still like to proceed?\"\r\n                open={shouldShowWarningDialog}\r\n                onDone={() => setShouldShowWarningDialog(false)}\r\n                buttonLabel=\"Yes, I understand the risk\"\r\n            />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default AddTokenManualView\r\n","import { useBlankState } from \"../background/backgroundHooks\"\r\nimport { useSelectedAccount } from \"./useSelectedAccount\"\r\nimport { useSelectedNetwork } from \"./useSelectedNetwork\"\r\n\r\nexport const useAccountTokens = (accountAddress?: string, chainId?: number) => {\r\n    // use current network if chainId is empty\r\n    // use current selected account if accountAddress is empty\r\n    const { userTokens } = useBlankState()!\r\n    const account = useSelectedAccount()\r\n    const network = useSelectedNetwork()\r\n\r\n    if (!accountAddress) {\r\n        accountAddress = account.address\r\n    }\r\n\r\n    if (!chainId) {\r\n        chainId = network.chainId\r\n    }\r\n\r\n    const tokens =\r\n        userTokens &&\r\n        userTokens[account.address] &&\r\n        userTokens[account.address][network.chainId]\r\n            ? userTokens[account.address][network.chainId]\r\n            : {}\r\n\r\n    return tokens\r\n}\r\n","import AutoSizer from \"react-virtualized-auto-sizer\"\r\nimport { FixedSizeList as List } from \"react-window\"\r\n\r\n// Components\r\nimport TokenDisplay from \"./TokenDisplay\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\n\r\n// Assets\r\nimport searchIcon from \"../../assets/images/icons/search.svg\"\r\nimport { TokenResponse } from \"../../routes/settings/AddTokensPage\"\r\nimport { useEffect, useState } from \"react\"\r\nimport useSubmitOnEnter from \"../../util/hooks/useSubmitOnEnter\"\r\n\r\nexport interface addTokenListView {\r\n    results?: TokenResponse[]\r\n    searchedValue?: string\r\n    setSubmitEnabled?: (value: any) => Promise<any> | void\r\n}\r\n\r\nconst AddTokenListView = ({\r\n    results = [],\r\n    searchedValue = \"\",\r\n    setSubmitEnabled = undefined,\r\n}: addTokenListView) => {\r\n    const history = useOnMountHistory()\r\n    // const [message, setMessage] = useState<string>(\"\")\r\n    const [selected, setSelected] = useState<TokenResponse[]>([])\r\n\r\n    // Handlers\r\n    const onSubmit = async (e?: any) => {\r\n        e?.preventDefault()\r\n\r\n        // Valid form data\r\n        if (selected.length > 0) {\r\n            history.push({\r\n                pathname: \"/settings/tokens/add/confirm\",\r\n                state: {\r\n                    tokens: selected,\r\n                    searchedValue: searchedValue,\r\n                    ...(history.location.state || {}),\r\n                },\r\n            })\r\n        }\r\n    }\r\n\r\n    useSubmitOnEnter({ onSubmit, isEnabled: selected.length > 0 })\r\n\r\n    // Functions\r\n    const onClick = (token: TokenResponse) => {\r\n        // Check if the token is already selected\r\n        if (!selected.some((el) => el.address === token.address)) {\r\n            // Add selected token\r\n            setSelected((prev) => prev.concat(token))\r\n        } else {\r\n            // Remove selected token\r\n            setSelected((prev) =>\r\n                prev.filter((el) => el.address !== token.address)\r\n            )\r\n        }\r\n    }\r\n\r\n    const filteredResults = results.filter(\r\n        (result: { address: string }) =>\r\n            !selected.some((el) => el.address === result.address)\r\n    )\r\n\r\n    useEffect(() => {\r\n        if (setSubmitEnabled) {\r\n            setSubmitEnabled(selected.length > 0)\r\n        }\r\n    }, [selected, setSubmitEnabled])\r\n\r\n    return (\r\n        <div className=\"h-full\">\r\n            {/* HINT */}\r\n            {searchedValue === \"\" && selected.length <= 0 ? (\r\n                <div className=\"flex flex-col pt-20\">\r\n                    <div className=\"flex justify-center items-center mb-6\">\r\n                        <img\r\n                            src={searchIcon}\r\n                            alt=\"search\"\r\n                            className=\"w-7 h-7 absolute z-10\"\r\n                        />\r\n                        <div className=\"w-20 h-20 bg-primary-100 rounded-full relative z-0\"></div>\r\n                    </div>\r\n                    <span className=\"text-sm text-gray-600 text-center\">\r\n                        Add the tokens that you've acquired using BlockWallet.\r\n                        <br />\r\n                        Enter an address for adding a custom token.\r\n                    </span>\r\n                </div>\r\n            ) : (\r\n                <form\r\n                    id=\"listViewForm\"\r\n                    className=\"w-full h-0 max-h-screen px-6 pb-0 mt-16\"\r\n                    onSubmit={onSubmit}\r\n                >\r\n                    <div>\r\n                        <div\r\n                            className={`text-xs text-gray-500 pt-4 pb-0 ${\r\n                                selected.length <= 0 ? \"hidden\" : \"visible\"\r\n                            }`}\r\n                        >\r\n                            SELECTED TOKENS\r\n                        </div>\r\n                        <div className=\"flex flex-col\">\r\n                            {selected.map((select) => {\r\n                                // Selected tokens\r\n                                return (\r\n                                    <div\r\n                                        className=\"cursor-pointer\"\r\n                                        key={`selected-${select.address}`}\r\n                                        onClick={() => onClick(select)}\r\n                                    >\r\n                                        <TokenDisplay\r\n                                            data={select}\r\n                                            clickable={false}\r\n                                            active={true}\r\n                                            hoverable={true}\r\n                                        />\r\n                                    </div>\r\n                                )\r\n                            })}\r\n                        </div>\r\n                        <div\r\n                            className={`text-xs text-gray-500 pt-4 pb-1 ${\r\n                                searchedValue === \"\" ? \"hidden\" : \"visible\"\r\n                            }`}\r\n                        >\r\n                            SEARCH TOKENS\r\n                        </div>\r\n                        <div className=\"flex flex-col\">\r\n                            {results.length < 1 && selected.length <= 0 ? (\r\n                                <div className=\"text-base font-bold text-black w-full text-center mt-4\">\r\n                                    No match\r\n                                </div>\r\n                            ) : (\r\n                                <div\r\n                                    style={{\r\n                                        height: 314,\r\n                                    }}\r\n                                    className=\"w-full\"\r\n                                >\r\n                                    <AutoSizer>\r\n                                        {({ width, height }) => (\r\n                                            <List\r\n                                                height={height}\r\n                                                width={width}\r\n                                                itemCount={\r\n                                                    filteredResults.length\r\n                                                }\r\n                                                itemSize={60}\r\n                                                itemData={filteredResults}\r\n                                            >\r\n                                                {({ style, data, index }) => (\r\n                                                    <div\r\n                                                        style={style}\r\n                                                        className=\"cursor-pointer\"\r\n                                                        key={`result-${data[index].address}`}\r\n                                                        onClick={() =>\r\n                                                            onClick(data[index])\r\n                                                        }\r\n                                                    >\r\n                                                        <TokenDisplay\r\n                                                            data={data[index]}\r\n                                                            clickable={false}\r\n                                                            active={false}\r\n                                                            hoverable={true}\r\n                                                        />\r\n                                                    </div>\r\n                                                )}\r\n                                            </List>\r\n                                        )}\r\n                                    </AutoSizer>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AddTokenListView\r\n","import { useState, useEffect } from \"react\"\r\n\r\n// Components\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport SearchInput from \"../../components/input/SearchInput\"\r\nimport AddTokenManualView from \"../../components/token/AddTokenManualView\"\r\nimport AddTokenListView from \"../../components/token/AddTokenListView\"\r\n\r\n// Comm\r\nimport { searchTokenInAssetsList } from \"../../context/commActions\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\n\r\n// Assets\r\nimport { isAddress } from \"@ethersproject/address\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport useLocalStorageState from \"../../util/hooks/useLocalStorageState\"\r\n\r\n// Types\r\nexport type TokenResponse = {\r\n    address: string\r\n    decimals: number | undefined\r\n    logo: string\r\n    name: string\r\n    symbol: string\r\n    type: string\r\n}\r\n\r\n// Main component\r\nconst AddTokensPage = () => {\r\n    const history = useOnMountHistory()\r\n\r\n    // State\r\n    const [results, setResults] = useState<TokenResponse[]>([])\r\n    const [submitEnabled, setSubmitEnabled] = useState<boolean>(false)\r\n    const [searchedValue, setSearchedValue] = useLocalStorageState<string>(\r\n        \"addTokenSearch\",\r\n        { initialValue: history.location.state?.searchValue ?? \"\" }\r\n    )\r\n\r\n    const isManualTokenView = isAddress(searchedValue)\r\n    useEffect(() => {\r\n        if (searchedValue && !isManualTokenView) {\r\n            if (/^[a-zA-Z0-9_.-]{3,}$/.test(searchedValue)) {\r\n                // Accept only number, letters and - . _\r\n                searchTokenInAssetsList(searchedValue.toUpperCase())\r\n                    .then((res) => {\r\n                        const exacts = res.tokens.filter(\r\n                            (r) =>\r\n                                r.symbol.toLowerCase() ===\r\n                                searchedValue.toLowerCase()\r\n                        )\r\n                        const others = res.tokens.filter(\r\n                            (r) =>\r\n                                r.symbol.toLowerCase() !==\r\n                                searchedValue.toLowerCase()\r\n                        )\r\n\r\n                        return setResults([...exacts, ...others])\r\n                    })\r\n                    .catch((err) => console.log(err))\r\n            } else {\r\n                setResults([])\r\n            }\r\n        } else {\r\n            setResults([])\r\n        }\r\n    }, [searchedValue])\r\n\r\n    const handleSubmitEnabled = async (value: boolean) => {\r\n        setSubmitEnabled(value)\r\n    }\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    title=\"Add Tokens\"\r\n                    onClose={(e) => {\r\n                        e.preventDefault()\r\n                        history.push(\"/\")\r\n                    }}\r\n                    onBack={(e) => {\r\n                        e.preventDefault()\r\n                        const state =\r\n                            history.location.state?.addTokenState || {}\r\n                        if (state.redirectTo) {\r\n                            history.replace({\r\n                                pathname: state.redirectTo,\r\n                                state,\r\n                            })\r\n                        } else {\r\n                            history.replace(\"/\")\r\n                        }\r\n                    }}\r\n                    networkIndicator\r\n                />\r\n            }\r\n            // submitOnEnter={{ isEnabled: submitEnabled }}\r\n        >\r\n            <div className=\"flex flex-col flex-1 w-full\">\r\n                <div className=\"h-full max-h-screen overflow-auto hide-scroll\">\r\n                    {/* INPUT */}\r\n                    <div className=\"w-full p-6 pb-2 bg-white fixed z-20\">\r\n                        <SearchInput\r\n                            // {...register(\"tokenName\")}\r\n                            name=\"tokenName\"\r\n                            placeholder=\"Search Tokens by name or fill in Address\"\r\n                            disabled={false}\r\n                            onChange={(e: any) =>\r\n                                setSearchedValue(e.target.value)\r\n                            }\r\n                            autoFocus={true}\r\n                            debounced\r\n                            minSearchChar={3}\r\n                            defaultValue={searchedValue}\r\n                        />\r\n                    </div>\r\n\r\n                    {!isManualTokenView ? (\r\n                        <AddTokenListView\r\n                            results={results}\r\n                            searchedValue={searchedValue}\r\n                            setSubmitEnabled={handleSubmitEnabled}\r\n                        />\r\n                    ) : (\r\n                        <AddTokenManualView\r\n                            manualTokenAddress={searchedValue}\r\n                            setSubmitEnabled={handleSubmitEnabled}\r\n                        />\r\n                    )}\r\n                </div>\r\n                <hr className=\"border-0.5 border-gray-200 w-full\" />\r\n                {/* FOOTER */}\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        label=\"Next\"\r\n                        disabled={!submitEnabled}\r\n                        type=\"submit\"\r\n                        formId={\r\n                            isManualTokenView\r\n                                ? \"manualViewForm\"\r\n                                : \"listViewForm\"\r\n                        }\r\n                    />\r\n                </PopupFooter>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default AddTokensPage\r\n","import { useState } from \"react\"\r\n\r\n// External components\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport TokenDisplay from \"../../components/token/TokenDisplay\"\r\n\r\n// Utils\r\nimport { addCustomTokens } from \"../../context/commActions\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\n\r\n// Types\r\nimport { TokenResponse } from \"./AddTokensPage\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport { useLocationRecovery } from \"../../util/hooks/useLocationRecovery\"\r\n\r\nconst AddTokensConfirmPage = (props: any) => {\r\n    const history: any = useOnMountHistory()\r\n    const [addingTokens, setAddingTokens] = useState(false)\r\n    const tokenList: any = history.location.state.tokens\r\n\r\n    const state = {\r\n        ...(history.location.state?.addTokenState || {}),\r\n        token: tokenList[0],\r\n    }\r\n\r\n    const { clear: clearLocationRecovery } = useLocationRecovery()\r\n\r\n    // Handlers\r\n    const onSubmit = async () => {\r\n        try {\r\n            setAddingTokens(true)\r\n            clearLocationRecovery()\r\n            addCustomTokens(tokenList)\r\n            state.redirectTo\r\n                ? history.push({\r\n                      pathname: state.redirectTo,\r\n                      state,\r\n                  })\r\n                : history.push(\"/\")\r\n        } finally {\r\n            setAddingTokens(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    title=\"Add Tokens\"\r\n                    onBack={() => {\r\n                        history.push({\r\n                            pathname: \"/settings/tokens/add\",\r\n                            state: {\r\n                                searchValue:\r\n                                    tokenList.length > 1 ||\r\n                                    history.location.state?.searchedValue\r\n                                        ? history.location.state?.searchedValue\r\n                                        : state.token.address,\r\n                            },\r\n                        })\r\n                    }}\r\n                />\r\n            }\r\n            submitOnEnter={{ onSubmit }}\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        type=\"button\"\r\n                        onClick={onSubmit}\r\n                        isLoading={addingTokens}\r\n                        label={\"Add Tokens\"}\r\n                    ></ButtonWithLoading>\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            {/* MAIN */}\r\n            <div className=\"flex-1 flex flex-col w-full h-0 max-h-screen pb-0\">\r\n                <div className=\"text-sm text-grey-200 p-6 pb-3\">\r\n                    {tokenList.length > 1\r\n                        ? \"Would you like to add these tokens?\"\r\n                        : \"Would you like to add this token?\"}\r\n                </div>\r\n                <div className=\"p-3 pt-0\">\r\n                    {tokenList.map((token: TokenResponse) => {\r\n                        // Selected tokens\r\n                        return (\r\n                            <div key={`selected-${token.address}`}>\r\n                                <TokenDisplay\r\n                                    data={token}\r\n                                    clickable={false}\r\n                                    active={false}\r\n                                />\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>\r\n            </div>\r\n\r\n            {/* FOOTER */}\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default AddTokensConfirmPage\r\n","import {\r\n    FC,\r\n    FunctionComponent,\r\n    useRef,\r\n    useState,\r\n    ReactNode,\r\n    ReactElement,\r\n    Children,\r\n    cloneElement,\r\n    memo,\r\n    useMemo,\r\n} from \"react\"\r\n\r\nimport { useOnClickOutside } from \"../../util/useOnClickOutside\"\r\nimport classnames from \"classnames\"\r\nimport { RiArrowDownSLine, RiArrowUpSLine } from \"react-icons/ri\"\r\nimport { BsCheck } from \"react-icons/bs\"\r\nimport { Classes } from \"../../styles\"\r\n\r\nconst getClassnamesForType = ({\r\n    disabled,\r\n    showMenu,\r\n    type,\r\n}: {\r\n    disabled?: boolean\r\n    showMenu: boolean\r\n    type: string\r\n}): string => {\r\n    if (type === \"select\") {\r\n        return classnames(\r\n            !disabled ? Classes.selectStyle : Classes.selectStyleDisabled,\r\n            showMenu ? \"border-primary-300\" : \"\"\r\n        )\r\n    }\r\n    return Classes.selectInlineStyle\r\n}\r\n\r\nconst getMenuClassnamesForType = ({\r\n    type,\r\n}: {\r\n    type: string\r\n}): Array<string> => {\r\n    if (type === \"select\") {\r\n        return [\"w-full\"]\r\n    }\r\n\r\n    return [\"w-fit\"]\r\n}\r\n\r\ninterface CompoundMember {\r\n    compoundName?: string\r\n}\r\n\r\ninterface CompoundProps {\r\n    Option: FunctionComponent<ItemProps> & CompoundMember\r\n}\r\n\r\ntype ValueType = string | number | undefined\r\n\r\ninterface ItemProps {\r\n    onClick?: (value: ValueType) => void\r\n    value?: ValueType\r\n    selected?: boolean\r\n    disabled?: boolean\r\n    children: ReactNode\r\n}\r\n\r\ninterface SelectProps {\r\n    label?: string\r\n    onChange: (selected: any) => void\r\n    currentValue: ValueType\r\n    placeholder?: string\r\n    error?: string\r\n    id?: string\r\n    type?: \"select\" | \"text\"\r\n    children: React.ReactNode\r\n    disabled?: boolean\r\n}\r\n\r\nconst Select: FC<SelectProps> & CompoundProps = ({\r\n    label,\r\n    onChange,\r\n    currentValue,\r\n    children,\r\n    disabled,\r\n    placeholder,\r\n    id,\r\n    error,\r\n    type = \"select\",\r\n}) => {\r\n    const [showMenu, setShowMenu] = useState(false)\r\n    const ref = useRef(null)\r\n    useOnClickOutside(ref, () => setShowMenu(false))\r\n    const handleItemChange = (value: number | string) => {\r\n        setShowMenu(false)\r\n        onChange(value)\r\n    }\r\n\r\n    const selectLabel = useMemo(() => {\r\n        if (currentValue !== null && currentValue !== undefined) {\r\n            let label = \"\"\r\n            Children.forEach(\r\n                children as ReactElement[],\r\n                (child: ReactElement) => {\r\n                    if (currentValue === child?.props.value) {\r\n                        label = child.props.label || child.props.children\r\n                    }\r\n                }\r\n            )\r\n            return label\r\n        }\r\n        return null\r\n    }, [currentValue, children])\r\n    return (\r\n        <div className=\"space-y-1\">\r\n            {label ? (\r\n                <label\r\n                    htmlFor={id || \"selectMenu\"}\r\n                    className={classnames(Classes.inputLabel, \"mb-1\")}\r\n                >\r\n                    {label}\r\n                </label>\r\n            ) : null}\r\n            <div\r\n                className=\"relative\"\r\n                role=\"combobox\"\r\n                aria-controls=\"menu\"\r\n                aria-expanded={showMenu}\r\n                id={id || \"selectMenu\"}\r\n                ref={ref}\r\n            >\r\n                <div\r\n                    onClick={() => {\r\n                        !disabled && setShowMenu(!showMenu)\r\n                    }}\r\n                    className={getClassnamesForType({\r\n                        showMenu,\r\n                        type,\r\n                        disabled,\r\n                    })}\r\n                >\r\n                    <span>{selectLabel || placeholder}</span>\r\n                    {showMenu ? (\r\n                        <RiArrowUpSLine size={20} />\r\n                    ) : (\r\n                        <RiArrowDownSLine size={20} />\r\n                    )}\r\n                </div>\r\n                <div\r\n                    hidden={!showMenu}\r\n                    className={classnames(\r\n                        \"absolute shadow-md rounded-md mt-1 bg-white select-none h-auto max-h-52 overflow-y-scroll select-menu z-[20000]\",\r\n                        getMenuClassnamesForType({ type })\r\n                    )}\r\n                    style={{ maxWidth: \"305px\" }}\r\n                    id=\"menu\"\r\n                    role=\"menu\"\r\n                >\r\n                    <ul>\r\n                        {Children.map(\r\n                            children as ReactElement[],\r\n                            (child: ReactElement) => {\r\n                                const { props, type } = child\r\n                                if (\r\n                                    (type as typeof SelectOption)\r\n                                        .compoundName !== \"SelectOption\"\r\n                                ) {\r\n                                    throw new Error(\r\n                                        \"Only Select.Option children are allowed\"\r\n                                    )\r\n                                }\r\n                                return cloneElement(child, {\r\n                                    ...props,\r\n                                    onClick: handleItemChange,\r\n                                    disabled,\r\n                                    selected:\r\n                                        currentValue === child.props.value,\r\n                                })\r\n                            }\r\n                        )}\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            {/* ERROR */}\r\n            <span\r\n                role=\"alert\"\r\n                className={classnames(\r\n                    \"text-xs text-red-500\",\r\n                    error === \"\" ? \"m-0 h-0\" : \"\"\r\n                )}\r\n            >\r\n                {error || \"\"}\r\n            </span>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst SelectOption: FC<ItemProps> & CompoundMember = ({\r\n    onClick,\r\n    value,\r\n    selected,\r\n    children,\r\n    disabled,\r\n}) => {\r\n    return (\r\n        <li\r\n            className={classnames(\r\n                \"cursor-pointer flex flex-row justify-between px-3 py-2 items-center hover:bg-gray-100 space-x-3\",\r\n                disabled && \"!cursor-default !bg-gray-200 !hover:bg-gray-200\"\r\n            )}\r\n            onClick={() => (onClick && !disabled ? onClick(value) : void 0)}\r\n        >\r\n            <span\r\n                className={classnames(\"leading-loose\", selected && \"font-bold\")}\r\n            >\r\n                {children}\r\n            </span>\r\n            <span className={classnames(!selected && \"invisible\")}>\r\n                <BsCheck size={14} />\r\n            </span>\r\n        </li>\r\n    )\r\n}\r\n\r\nSelect.Option = memo(SelectOption)\r\n\r\nSelect.Option.compoundName = \"SelectOption\"\r\n\r\nexport default Select\r\n","import CheckmarkCircle from \"../icons/CheckmarkCircle\"\r\nimport Tooltip from \"../label/Tooltip\"\r\nimport Spinner from \"../../components/spinner/ThinSpinner\"\r\nimport { CgDanger } from \"react-icons/cg\"\r\nimport { AiOutlineWarning } from \"react-icons/ai\"\r\nimport classnames from \"classnames\"\r\n\r\nexport enum IconURLValidation {\r\n    CUSTOM_ICON = \"CUSTOM_ICON\",\r\n}\r\n\r\nexport enum ChainIdValidation {\r\n    KNOWN_CHAIN_ID = \"KNOWN_CHAIN_ID\",\r\n    UNKNOWN_CHAIN_ID = \"UNKNOWN_CHAIN_ID\",\r\n}\r\n\r\nexport enum BlockExplorerValidation {\r\n    KNOWN_EXPLORER = \"KNOWN_EXPLORER\",\r\n    UNKNOWN_EXPLORER = \"UNKNOWN_EXPLORER\",\r\n}\r\n\r\nexport enum RPCUrlValidation {\r\n    //Empty URL\r\n    EMPTY,\r\n    //Empty validation as we don't know the specified chain id.\r\n    EMPTY_UNKNOWN_CHAIN,\r\n    //Chain ID matches with the one configured, and the endpoint is recognized by the background\r\n    VERIFIED_ENDPOINT,\r\n    //Chain ID doesn't match the one configured\r\n    CHAIN_ID_DOESNT_MATCH,\r\n    //Chain ID matches with the one configured, but the endpoint is not recognized by the background\r\n    UNVERIFIED_ENDPOINT,\r\n    //Invalid URL\r\n    INVALID_URL,\r\n    //The URL is valid but it's not a node endpoint\r\n    INVALID_ENDPOINT,\r\n}\r\n\r\nconst RPCValidationEndLabelInfo = ({\r\n    isValidating,\r\n    toolTipClassName,\r\n    wrapperClassName,\r\n    rpcValidation,\r\n    currentChainId,\r\n    rpcChainId,\r\n}: {\r\n    isValidating: boolean\r\n    toolTipClassName?: string\r\n    wrapperClassName?: string\r\n    rpcValidation:\r\n        | RPCUrlValidation\r\n        | BlockExplorerValidation\r\n        | ChainIdValidation\r\n        | IconURLValidation\r\n    currentChainId?: string\r\n    rpcChainId?: number\r\n}) => {\r\n    if (isValidating) {\r\n        return <Spinner />\r\n    }\r\n    const withWrapper = (child: any) => {\r\n        return (\r\n            <span\r\n                className={classnames(\r\n                    \"flex flex-row items-center text-xxs z-20 group relative\",\r\n                    wrapperClassName\r\n                )}\r\n            >\r\n                {child}\r\n            </span>\r\n        )\r\n    }\r\n    switch (rpcValidation) {\r\n        case RPCUrlValidation.CHAIN_ID_DOESNT_MATCH: {\r\n            return withWrapper(\r\n                <>\r\n                    <CgDanger className=\"w-4 h-4 text-red-700 z-20\" />\r\n                    <Tooltip\r\n                        className={classnames(\r\n                            \"!-translate-x-3/4 !border !border-gray-200 !w-40 !break-word !whitespace-normal\",\r\n                            toolTipClassName\r\n                        )}\r\n                        content={`Invalid node endpoint, Chain ID ${currentChainId} does not match with node's Chain ID ${rpcChainId}.`}\r\n                    />\r\n                </>\r\n            )\r\n        }\r\n        case RPCUrlValidation.INVALID_URL: {\r\n            return withWrapper(\r\n                <>\r\n                    <CgDanger className=\"w-4 h-4 text-red-700 z-20\" />\r\n                    <Tooltip\r\n                        className={classnames(\r\n                            \"!-translate-x-3/4 !border !border-gray-200 !w-40 !break-word !whitespace-normal\",\r\n                            toolTipClassName\r\n                        )}\r\n                        content=\"An invalid URL can't be verified.\"\r\n                    />\r\n                </>\r\n            )\r\n        }\r\n        case RPCUrlValidation.INVALID_ENDPOINT: {\r\n            return withWrapper(\r\n                <>\r\n                    <CgDanger className=\"w-4 h-4 text-red-700 z-20\" />\r\n                    <Tooltip\r\n                        className={classnames(\r\n                            \"!-translate-x-3/4 !border !border-gray-200 !w-40 !break-word !whitespace-normal\",\r\n                            toolTipClassName\r\n                        )}\r\n                        content=\"Invalid endpoint, could not connect to an RPC node in that URL.\"\r\n                    />\r\n                </>\r\n            )\r\n        }\r\n        case RPCUrlValidation.UNVERIFIED_ENDPOINT: {\r\n            return withWrapper(\r\n                <>\r\n                    <AiOutlineWarning\r\n                        className={classnames(\r\n                            \"w-4 h-4 z-20\",\r\n                            \"text-yellow-400\"\r\n                        )}\r\n                    />\r\n                    <Tooltip\r\n                        className={classnames(\r\n                            \"!-translate-x-full !border !border-gray-200 !w-56 !break-word !whitespace-normal\",\r\n                            toolTipClassName\r\n                        )}\r\n                        content=\"This node endpoint is not recognized by BlockWallet. Please make sure that this configuration will not compromise your funds.\"\r\n                    />\r\n                </>\r\n            )\r\n        }\r\n        case RPCUrlValidation.EMPTY_UNKNOWN_CHAIN: {\r\n            return withWrapper(\r\n                <>\r\n                    <AiOutlineWarning\r\n                        className={classnames(\r\n                            \"w-4 h-4 z-20\",\r\n                            \"text-yellow-400\"\r\n                        )}\r\n                    />\r\n                    <Tooltip\r\n                        className={classnames(\r\n                            \"!-translate-x-full !border !border-gray-200 !w-56 !break-word !whitespace-normal\",\r\n                            toolTipClassName\r\n                        )}\r\n                        content=\"This network is not recognized by BlockWallet. Please make sure that this configuration will not compromise your funds.\"\r\n                    />\r\n                </>\r\n            )\r\n        }\r\n        case RPCUrlValidation.VERIFIED_ENDPOINT: {\r\n            return withWrapper(\r\n                <>\r\n                    <CheckmarkCircle classes=\"w-4 h-4 z-20\" />\r\n                    <Tooltip\r\n                        className={classnames(\r\n                            \"!-translate-x-3/4 !border !border-gray-200 !w-40 !break-word !whitespace-normal\",\r\n                            toolTipClassName\r\n                        )}\r\n                        content=\"Verified endpoint.\"\r\n                    />\r\n                </>\r\n            )\r\n        }\r\n        case BlockExplorerValidation.KNOWN_EXPLORER: {\r\n            return withWrapper(\r\n                <>\r\n                    <CheckmarkCircle classes=\"w-4 h-4 z-20\" />\r\n                    <Tooltip\r\n                        className={classnames(\r\n                            \"!-translate-x-3/4 !border !border-gray-200 !w-40 !break-word !whitespace-normal\",\r\n                            toolTipClassName\r\n                        )}\r\n                        content=\"Verified explorer.\"\r\n                    />\r\n                </>\r\n            )\r\n        }\r\n        case BlockExplorerValidation.UNKNOWN_EXPLORER: {\r\n            return withWrapper(\r\n                <>\r\n                    <AiOutlineWarning\r\n                        className={classnames(\r\n                            \"w-4 h-4 z-20\",\r\n                            \"text-yellow-400\"\r\n                        )}\r\n                    />\r\n                    <Tooltip\r\n                        className={classnames(\r\n                            \"!-translate-x-full !border !border-gray-200 !w-56 !break-word !whitespace-normal\",\r\n                            toolTipClassName\r\n                        )}\r\n                        content=\"This explorer is not recognized by BlockWallet.\"\r\n                    />\r\n                </>\r\n            )\r\n        }\r\n        case ChainIdValidation.KNOWN_CHAIN_ID: {\r\n            return withWrapper(\r\n                <>\r\n                    <CheckmarkCircle classes=\"w-4 h-4 z-20\" />\r\n                    <Tooltip\r\n                        className={classnames(\r\n                            \"!-translate-x-3/5 !border !border-gray-200 !w-40 !break-word !whitespace-normal\",\r\n                            toolTipClassName\r\n                        )}\r\n                        content=\"Verified network.\"\r\n                    />\r\n                </>\r\n            )\r\n        }\r\n        case ChainIdValidation.UNKNOWN_CHAIN_ID: {\r\n            return withWrapper(\r\n                <>\r\n                    <CgDanger className=\"w-4 h-4 text-red-700 z-20\" />\r\n                    <Tooltip\r\n                        className={classnames(\r\n                            \"!-translate-x-full !border !border-gray-200 !w-56 !break-word !whitespace-normal\",\r\n                            toolTipClassName\r\n                        )}\r\n                        content=\"This network is not recognized by BlockWallet. Please make sure that this configuration will not compromise your funds.\"\r\n                    />\r\n                </>\r\n            )\r\n        }\r\n        case IconURLValidation.CUSTOM_ICON: {\r\n            return withWrapper(\r\n                <>\r\n                    <AiOutlineWarning\r\n                        className={classnames(\r\n                            \"w-4 h-4 z-20\",\r\n                            \"text-yellow-400\"\r\n                        )}\r\n                    />\r\n                    <Tooltip\r\n                        className={classnames(\r\n                            \"!-translate-x-full !border !border-gray-200 !w-56 !break-word !whitespace-normal\",\r\n                            toolTipClassName\r\n                        )}\r\n                        content=\"Your IP address will be exposed to this domain if you choose to save the image URL\"\r\n                    />\r\n                </>\r\n            )\r\n        }\r\n    }\r\n\r\n    return null\r\n}\r\n\r\nexport default RPCValidationEndLabelInfo\r\n","import { useState } from \"react\"\r\n\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport PasswordInput from \"../../components/input/PasswordInput\"\r\nimport AntiPhishing from \"../../components/phishing/AntiPhishing\"\r\n\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport WarningTip from \"../../components/label/WarningTip\"\r\nimport * as yup from \"yup\"\r\nimport { InferType } from \"yup\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport {\r\n    verifyPassword,\r\n    exportAccountPrivateKey,\r\n    exportAccountJson,\r\n    requestSeedPhrase,\r\n} from \"../../context/commActions\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport Select from \"../../components/input/Select\"\r\nimport { useSelectedAccount } from \"../../context/hooks/useSelectedAccount\"\r\nimport { HARDWARE_TYPES, isInternalAccount } from \"../../util/account\"\r\nimport Tooltip from \"../../components/label/Tooltip\"\r\n\r\nconst schema = yup.object({\r\n    password: yup.string().required(\"No password provided.\"),\r\n    exportType: yup\r\n        .string()\r\n        .default(\"key\")\r\n        .required(\"Please select an export format\"),\r\n    encryptingPassword: yup.string().when(\"exportType\", {\r\n        is: (value: any) => value === \"json\",\r\n        then: (rule) => rule.required(\"Please enter an encrypting password\"),\r\n    }),\r\n    encryptingPasswordConfirmation: yup\r\n        .string()\r\n        .nullable()\r\n        .notRequired()\r\n        .when(\"encryptingPassword\", {\r\n            is: (value: any) => !!value,\r\n            then: (rule: any) =>\r\n                rule\r\n                    .required(\"Please confirm the encrypting password\")\r\n                    .oneOf(\r\n                        [yup.ref(\"encryptingPassword\"), null],\r\n                        \"Encrypting passwords must match.\"\r\n                    ),\r\n        }),\r\n})\r\n\r\ntype ExportAccountFormData = InferType<typeof schema>\r\n\r\nconst ExportAccountPage = () => {\r\n    const history = useOnMountHistory()\r\n    const fromAccountList = history.location.state?.fromAccountList\r\n\r\n    const account = useSelectedAccount()\r\n    const blankState = useBlankState()!\r\n    const [isVerificationInProgress, setIsVerificationInProgress] =\r\n        useState<boolean>(false)\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        setError,\r\n        watch,\r\n        setValue,\r\n\r\n        formState: { errors },\r\n    } = useForm<ExportAccountFormData>({\r\n        defaultValues: {\r\n            exportType: \"key\",\r\n        },\r\n        resolver: yupResolver(schema),\r\n        shouldUnregister: false,\r\n    })\r\n\r\n    const exportType = watch(\"exportType\")\r\n    const onSubmit = handleSubmit(async (data: ExportAccountFormData) => {\r\n        setIsVerificationInProgress(true)\r\n        try {\r\n            if (HARDWARE_TYPES.includes(account.accountType)) {\r\n                throw new Error(\r\n                    \"Can't export data from a Hardware Wallet account\"\r\n                )\r\n            }\r\n            const isValidPassword = await verifyPassword(data.password)\r\n            if (!isValidPassword) {\r\n                throw new Error(\"Incorrect password\")\r\n            }\r\n\r\n            let exportData = \"\"\r\n\r\n            switch (data.exportType) {\r\n                case \"key\":\r\n                    exportData = await exportAccountPrivateKey(\r\n                        account.address,\r\n                        data.password\r\n                    )\r\n                    break\r\n                case \"json\":\r\n                    exportData = await exportAccountJson(\r\n                        account.address,\r\n                        data.password,\r\n                        data.encryptingPassword!\r\n                    )\r\n                    break\r\n                case \"seedphrase\":\r\n                    exportData = await requestSeedPhrase(data.password)\r\n                    break\r\n            }\r\n\r\n            setIsVerificationInProgress(false)\r\n            history.push({\r\n                pathname: \"/accounts/menu/export/done\",\r\n                state: { exportData, exportType: data.exportType },\r\n            })\r\n        } catch (e) {\r\n            setError(\r\n                \"password\",\r\n                {\r\n                    message: e.message,\r\n                },\r\n                {\r\n                    shouldFocus: true,\r\n                }\r\n            )\r\n            setIsVerificationInProgress(false)\r\n\r\n            return Promise.reject()\r\n        }\r\n    })\r\n\r\n    return (\r\n        <form className=\"w-full h-full\">\r\n            <div className=\"flex flex-col w-full h-full\" id=\"export-key-form\">\r\n                <PopupLayout\r\n                    submitOnEnter={{\r\n                        onSubmit,\r\n                        isFormValid: Object.keys(errors).length === 0,\r\n                    }}\r\n                    header={\r\n                        <PopupHeader\r\n                            title=\"Export Account Data\"\r\n                            onBack={() => {\r\n                                history.push({\r\n                                    pathname: \"/accounts/menu\",\r\n                                    state: { fromAccountList },\r\n                                })\r\n                            }}\r\n                        />\r\n                    }\r\n                    footer={\r\n                        <PopupFooter>\r\n                            <ButtonWithLoading\r\n                                label=\"Export\"\r\n                                type=\"submit\"\r\n                                isLoading={isVerificationInProgress}\r\n                                onClick={onSubmit}\r\n                                disabled={HARDWARE_TYPES.includes(\r\n                                    account.accountType\r\n                                )}\r\n                            />\r\n                        </PopupFooter>\r\n                    }\r\n                >\r\n                    <div className=\"flex flex-col p-6 space-y-4\">\r\n                        <div className=\"flex flex-col space-y-1\">\r\n                            <PasswordInput\r\n                                label=\"Your Password\"\r\n                                placeholder=\"Your Password\"\r\n                                {...register(\"password\")}\r\n                                error={errors.password?.message}\r\n                                autoFocus={true}\r\n                            />\r\n                        </div>\r\n                        <div className=\"flex flex-col space-y-1 mb-5\">\r\n                            <Select\r\n                                onChange={(value: string) => {\r\n                                    setValue(\"exportType\", value)\r\n                                }}\r\n                                currentValue={exportType}\r\n                                label=\"Format\"\r\n                                id=\"exportType\"\r\n                                error={errors.exportType?.message}\r\n                            >\r\n                                <Select.Option value=\"key\">\r\n                                    Private Key\r\n                                </Select.Option>\r\n                                <Select.Option value=\"json\">\r\n                                    JSON Data\r\n                                </Select.Option>\r\n                                <Select.Option\r\n                                    value=\"seedphrase\"\r\n                                    disabled={\r\n                                        !isInternalAccount(account.accountType)\r\n                                    }\r\n                                >\r\n                                    <div className=\"group relative\">\r\n                                        <div>Seed Phrase</div>\r\n                                        {!isInternalAccount(\r\n                                            account.accountType\r\n                                        ) && (\r\n                                            <Tooltip\r\n                                                className=\"!w-60 !break-word !whitespace-normal !-translate-y-8 !translate-x-3 border boder-gray-300\"\r\n                                                content={\r\n                                                    <span>\r\n                                                        Seed Phrase can only be\r\n                                                        exported while using an\r\n                                                        internal account.\r\n                                                    </span>\r\n                                                }\r\n                                            />\r\n                                        )}\r\n                                    </div>\r\n                                </Select.Option>\r\n                            </Select>\r\n                        </div>\r\n                        <div className=\"flex flex-col space-y-1\">\r\n                            {exportType === \"json\" && (\r\n                                <>\r\n                                    <div className=\"mb-5\">\r\n                                        <PasswordInput\r\n                                            label=\"Encrypting Password\"\r\n                                            placeholder=\"Encrypting Password\"\r\n                                            {...register(\"encryptingPassword\")}\r\n                                            error={\r\n                                                errors.encryptingPassword\r\n                                                    ?.message\r\n                                            }\r\n                                            autoFocus={false}\r\n                                            name=\"encryptingPassword\"\r\n                                        />\r\n                                    </div>\r\n                                    <PasswordInput\r\n                                        label=\"Confirm Encrypting Password\"\r\n                                        placeholder=\"Confirm Encrypting Password\"\r\n                                        {...register(\r\n                                            \"encryptingPasswordConfirmation\"\r\n                                        )}\r\n                                        error={\r\n                                            errors\r\n                                                .encryptingPasswordConfirmation\r\n                                                ?.message\r\n                                        }\r\n                                        autoFocus={false}\r\n                                        name=\"encryptingPasswordConfirmation\"\r\n                                    />\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                        {exportType === \"json\" && (\r\n                            <WarningTip\r\n                                text={\r\n                                    \"Encrypting password is used to encrypt your export. You will need it when importing the account data later. Please create a strong encrypting password and store it securely.\"\r\n                                }\r\n                                fontSize=\"text-xs\"\r\n                                justify=\"justify-start\"\r\n                            />\r\n                        )}\r\n                        {blankState.settings.useAntiPhishingProtection && (\r\n                            <div className=\"pt-1\">\r\n                                <AntiPhishing\r\n                                    image={blankState.antiPhishingImage}\r\n                                />\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </PopupLayout>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default ExportAccountPage\r\n","export default __webpack_public_path__ + \"static/media/copy.a98d3d0f.svg\";","import {\r\n    useOnMountHistory,\r\n    useOnMountLocation,\r\n} from \"../../context/hooks/useOnMount\"\r\nimport { Classes, classnames } from \"../../styles/classes\"\r\n\r\nconst LinkButton = ({\r\n    text = \"Cancel\",\r\n    classes = \"w-full\",\r\n    location = \"\",\r\n    state = {},\r\n    passState = false,\r\n    lite = false,\r\n    disabled = false,\r\n}) => {\r\n    const history = useOnMountHistory()\r\n    const currentState = useOnMountLocation().state\r\n    const handleTo = () => {\r\n        if (location) {\r\n            if (state) {\r\n                history.push({\r\n                    pathname: location,\r\n                    state,\r\n                })\r\n            } else {\r\n                history.push(location, passState ? currentState : undefined)\r\n            }\r\n        } else {\r\n            history.goBack()\r\n        }\r\n    }\r\n    return (\r\n        <button\r\n            onClick={handleTo}\r\n            className={classnames(\r\n                lite ? Classes.liteButton : Classes.darkButton,\r\n                disabled ? \"opacity-50\" : \"\",\r\n                classes\r\n            )}\r\n            type=\"button\"\r\n            disabled={disabled}\r\n        >\r\n            {text}\r\n        </button>\r\n    )\r\n}\r\n\r\nexport default LinkButton\r\n","export default __webpack_public_path__ + \"static/media/lock.6ffb6c41.svg\";","import { FunctionComponent } from \"react\"\r\nimport lockIcon from \"../../assets/images/icons/lock.svg\"\r\n\r\nconst ClickToReveal: FunctionComponent<{\r\n    hiddenText: string\r\n    revealMessage: string\r\n    revealed: boolean\r\n    onClick: () => void\r\n}> = ({ hiddenText, revealMessage, revealed, onClick }) => (\r\n    <div className=\"relative p-8 overflow-hidden text-gray-900 rounded-md bg-primary-200\">\r\n        {!revealed ? (\r\n            <button\r\n                type=\"button\"\r\n                onClick={onClick}\r\n                className=\"absolute top-0 left-0 z-10 flex flex-col items-center justify-center w-full h-full space-y-2 bg-opacity-25 bg-primary-200\"\r\n            >\r\n                <img src={lockIcon} alt=\"lock\" className=\"w-5 h-5\" />\r\n                <span className=\"font-bold\">{revealMessage}</span>\r\n            </button>\r\n        ) : null}\r\n        <span\r\n            className=\"font-bold break-words allow-select\"\r\n            style={revealed ? {} : { filter: \"blur(0.15rem)\" }}\r\n        >\r\n            {hiddenText}\r\n        </span>\r\n    </div>\r\n)\r\n\r\nexport default ClickToReveal\r\n","export default __webpack_public_path__ + \"static/media/download.6e0f3b56.svg\";","import { useState } from \"react\"\r\n\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\n\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport copy from \"../../assets/images/icons/copy.svg\"\r\nimport CopyTooltip from \"../../components/label/Ð¡opyToClipboardTooltip\"\r\nimport LinkButton from \"../../components/button/LinkButton\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport ClickToReveal from \"../../components/label/ClickToReveal\"\r\nimport ReactJson from \"react-json-view\"\r\nimport DownloadIcon from \"../../assets/images/icons/download.svg\"\r\n\r\nconst ExportDonePage = () => {\r\n    const history: any = useOnMountHistory()\r\n    const { exportData, exportType } = history.location.state\r\n\r\n    const [revealed, setRevealed] = useState<boolean>(false)\r\n    const [copied, setCopied] = useState(false)\r\n    const copyToClipboard = async () => {\r\n        await navigator.clipboard.writeText(exportData)\r\n        setCopied(true)\r\n        await new Promise((resolve) => setTimeout(resolve, 1000))\r\n        setCopied(false)\r\n    }\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    title=\"Export Account Data\"\r\n                    close=\"/\"\r\n                    backButton={false}\r\n                />\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    <LinkButton location=\"/\" text=\"Done\" classes=\"w-full\" />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <div className=\"flex flex-col p-6 space-y-6\">\r\n                {exportType !== \"json\" ? (\r\n                    <div className=\"flex flex-col space-y-4\">\r\n                        <ClickToReveal\r\n                            hiddenText={exportData}\r\n                            revealMessage={`Click here to reveal ${exportType}`}\r\n                            revealed={revealed}\r\n                            onClick={() => setRevealed(true)}\r\n                        />\r\n                        <button\r\n                            type=\"button\"\r\n                            className=\"relative flex flex-row items-stretch justify-between w-full rounded group bg-primary-100 hover:bg-primary-200\"\r\n                            onClick={copyToClipboard}\r\n                        >\r\n                            <span className=\"flex-grow px-4 py-4 text-sm \">\r\n                                Copy {exportType} to clipboard\r\n                            </span>\r\n                            <span className=\"flex items-center justify-center px-4 transition duration-300 outline-none cursor-pointer border-1\">\r\n                                <img\r\n                                    src={copy}\r\n                                    alt=\"copy\"\r\n                                    className=\"w-4 h-4 mr-1\"\r\n                                />\r\n                            </span>\r\n                            <CopyTooltip copied={copied}></CopyTooltip>\r\n                        </button>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"flex flex-col space-y-4 overflow-x-hidden\">\r\n                        <ReactJson\r\n                            src={JSON.parse(exportData)}\r\n                            name={false}\r\n                            enableClipboard={false}\r\n                            indentWidth={1}\r\n                            displayDataTypes={false}\r\n                            quotesOnKeys={false}\r\n                            iconStyle={\"triangle\"}\r\n                            collapseStringsAfterLength={32}\r\n                            collapsed={1}\r\n                        />\r\n                        <a\r\n                            type=\"button\"\r\n                            className=\"relative flex flex-row items-stretch justify-between w-full rounded group bg-primary-100 hover:bg-primary-200\"\r\n                            href={`data:text/json;charset=utf-8,${encodeURIComponent(\r\n                                exportData\r\n                            )}`}\r\n                            download=\"blockwallet.json\"\r\n                        >\r\n                            <span className=\"flex-grow px-4 py-4 text-sm \">\r\n                                Download JSON file\r\n                            </span>\r\n                            <span className=\"flex items-center justify-center px-4 transition duration-300 outline-none cursor-pointer border-1\">\r\n                                <img\r\n                                    src={DownloadIcon}\r\n                                    alt=\"Download JSON file\"\r\n                                />\r\n                            </span>\r\n                        </a>\r\n                    </div>\r\n                )}\r\n                <div className=\"w-full px-4 py-4 text-sm text-center text-red-500 bg-red-100 rounded\">\r\n                    <strong className=\"font-bold\">Warning: </strong>\r\n                    <span>\r\n                        Never disclose this information. Anyone with your\r\n                        private keys can steal any assets held in your account.\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default ExportDonePage\r\n","import { FunctionComponent } from \"react\"\r\nimport { classnames } from \"../../styles\"\r\nimport Tooltip from \"../label/Tooltip\"\r\n\r\nconst VerticalSelect: FunctionComponent<{\r\n    options: any[]\r\n    value: any\r\n    onChange?: (value: any) => void\r\n    display: (option: any, i: number) => React.ReactNode\r\n    disableStyles?: boolean\r\n    disabledOptions?: boolean[] | { [k: string]: boolean }\r\n    containerClassName?: string\r\n    containerStyle?: any\r\n    isActive?: (option: any) => boolean\r\n    isDisabled?: (option: any, i: number) => boolean\r\n    tooltipOptions?: { [k: string]: string }\r\n}> = ({\r\n    options,\r\n    value,\r\n    onChange = () => void 0,\r\n    display,\r\n    disableStyles = false,\r\n    containerClassName,\r\n    containerStyle,\r\n    disabledOptions,\r\n    isActive = (option) =>\r\n        option === value || (option.label && option.label === value),\r\n    isDisabled = (option: any, i: number) =>\r\n        disabledOptions &&\r\n        (Array.isArray(disabledOptions)\r\n            ? disabledOptions[i]\r\n            : disabledOptions[option.label]),\r\n    tooltipOptions,\r\n}) => (\r\n    <div\r\n        className={containerClassName || \"flex flex-col space-y-2\"}\r\n        style={containerStyle}\r\n    >\r\n        {options.map((option, i) => (\r\n            <div\r\n                key={`${i}-${option.label}`}\r\n                className={classnames(\"group relative\")}\r\n            >\r\n                <button\r\n                    type=\"button\"\r\n                    disabled={isDisabled(option, i)}\r\n                    key={option.label || option.name || option}\r\n                    className={\r\n                        !disableStyles\r\n                            ? `w-full flex flex-row items-center justify-between p-4 rounded-md text-sm transform transition-all duration-300 active:scale-95\r\n                    disabled:pointer-events-none\r\n                    ${\r\n                        isActive(option)\r\n                            ? \"bg-primary-300 text-white font-bold\"\r\n                            : \"bg-primary-100 hover:bg-primary-200\"\r\n                    }\r\n                    ${\r\n                        isDisabled(option, i)\r\n                            ? \"pointer-events-none opacity-50\"\r\n                            : \"\"\r\n                    }`\r\n                            : \"\"\r\n                    }\r\n                    onClick={() => onChange && onChange(option)}\r\n                >\r\n                    {display(option, i)}\r\n                </button>\r\n                {tooltipOptions && option.label in tooltipOptions ? (\r\n                    <Tooltip\r\n                        className=\"-translate-y-10 !translate-x-1\"\r\n                        content={\r\n                            <div>\r\n                                <span className=\"font-normal\">\r\n                                    {tooltipOptions &&\r\n                                        tooltipOptions[option.label]}\r\n                                </span>\r\n                            </div>\r\n                        }\r\n                    />\r\n                ) : (\r\n                    <></>\r\n                )}\r\n            </div>\r\n        ))}\r\n    </div>\r\n)\r\n\r\nexport default VerticalSelect\r\n","export default __webpack_public_path__ + \"static/media/book.d2db7398.svg\";","export default __webpack_public_path__ + \"static/media/spanner.7c90806f.svg\";","export default __webpack_public_path__ + \"static/media/logout.8d016a65.svg\";","export default __webpack_public_path__ + \"static/media/account.4f603e83.svg\";","export default __webpack_public_path__ + \"static/media/about.f83d4390.svg\";","export default __webpack_public_path__ + \"static/media/network_cloud.46d4db40.svg\";","export default __webpack_public_path__ + \"static/media/usb.a60487c1.svg\";","const AppVersion = () =>\r\n    process.env.VERSION ? (\r\n        <span className=\"text-gray-500\">Version: v{process.env.VERSION}</span>\r\n    ) : (\r\n        <span className=\"text-gray-500\">DEVELOPMENT</span>\r\n    )\r\n\r\nexport default AppVersion\r\n","import { useErrorHandler } from \"react-error-boundary\"\r\n\r\n// Components\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport VerticalSelect from \"../../components/input/VerticalSelect\"\r\n\r\n// Style\r\nimport { Classes } from \"../../styles/classes\"\r\nimport { classnames } from \"../../styles/classes\"\r\n\r\n// Assets\r\nimport book from \"../../assets/images/icons/book.svg\"\r\nimport spanner from \"../../assets/images/icons/spanner.svg\"\r\n\r\nimport logoutIcon from \"../../assets/images/icons/logout.svg\"\r\nimport account from \"../../assets/images/icons/account.svg\"\r\nimport about from \"../../assets/images/icons/about.svg\"\r\nimport networkCloud from \"../../assets/images/icons/network_cloud.svg\"\r\nimport usb from \"../../assets/images/icons/usb.svg\"\r\n\r\n// Context\r\nimport { lockApp } from \"../../context/commActions\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport classNames from \"classnames\"\r\nimport GenericTooltip from \"../../components/label/GenericTooltip\"\r\nimport AppVersion from \"../../components/AppVersion\"\r\nimport { openHardwareConnect } from \"../../context/commActions\"\r\n\r\nconst SettingsPage = () => {\r\n    const { isSeedPhraseBackedUp, isImportingDeposits } = useBlankState()!\r\n    const handleError = useErrorHandler()\r\n    const history = useOnMountHistory()\r\n\r\n    const options = [\r\n        {\r\n            icon: account,\r\n            label: \"Account\",\r\n            to: \"/accounts/menu\",\r\n        },\r\n        {\r\n            icon: networkCloud,\r\n            label: \"Networks\",\r\n            to: \"/settings/networks\",\r\n        },\r\n        {\r\n            icon: book,\r\n            label: \"Address Book\",\r\n            to: \"/settings/addressBook\",\r\n        },\r\n        {\r\n            icon: spanner,\r\n            label: \"Preferences\",\r\n            to: \"/settings/preferences\",\r\n        },\r\n        {\r\n            icon: usb,\r\n            label: \"Connect Hardware Wallet\",\r\n            onClick: () => openHardwareConnect(),\r\n        },\r\n        {\r\n            icon: about,\r\n            label: \"About\",\r\n            to: \"/settings/about\",\r\n        },\r\n    ]\r\n\r\n    const logout = () => {\r\n        try {\r\n            if (!isImportingDeposits) {\r\n                lockApp()\r\n            }\r\n        } catch {\r\n            handleError(\"Error logging out\")\r\n        }\r\n    }\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    title=\"Settings\"\r\n                    close=\"/\"\r\n                    onBack={() => history.push(\"/\")}\r\n                />\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    <GenericTooltip\r\n                        top\r\n                        divFull\r\n                        disabled={!isImportingDeposits}\r\n                        content={\r\n                            <p className=\"w-full text-center\">\r\n                                Please wait until deposits are done loading\r\n                                before locking the wallet. This can take up to\r\n                                15 minutes\r\n                            </p>\r\n                        }\r\n                    >\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={logout}\r\n                            className={classnames(\r\n                                !isImportingDeposits\r\n                                    ? Classes.logoutButton\r\n                                    : Classes.disabledLogoutButton,\r\n                                \"w-full\"\r\n                            )}\r\n                            disabled={isImportingDeposits}\r\n                        >\r\n                            <img\r\n                                alt=\"Logout\"\r\n                                src={logoutIcon}\r\n                                className={classnames(\r\n                                    Classes.buttonIcon,\r\n                                    isImportingDeposits && \"opacity-30\"\r\n                                )}\r\n                            />\r\n                            Logout\r\n                        </button>\r\n                    </GenericTooltip>\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <div className=\"flex flex-col space-y-6 p-6\">\r\n                <div className=\"flex flex-col space-y-1\">\r\n                    <div className=\"flex flex-col space-y-4\">\r\n                        <VerticalSelect\r\n                            options={options}\r\n                            value={undefined}\r\n                            onChange={(option) => {\r\n                                if (option.onClick) {\r\n                                    option.onClick()\r\n                                    return\r\n                                }\r\n                                option.to.includes(\"https://\")\r\n                                    ? chrome.tabs.create({ url: option.to })\r\n                                    : history.push({\r\n                                          pathname: option.to,\r\n                                          state: {\r\n                                              from: \"/settings\",\r\n                                              ...(option.state ?? {}),\r\n                                          },\r\n                                      })\r\n                            }}\r\n                            containerClassName=\"flex flex-col space-y-4\"\r\n                            display={(option, i) => {\r\n                                const className =\r\n                                    \"flex flex-row space-x-3 items-center text-gray-900\"\r\n                                const children = (\r\n                                    <>\r\n                                        <div\r\n                                            className={classnames(\r\n                                                option.classes ?? \"\"\r\n                                            )}\r\n                                        >\r\n                                            <img\r\n                                                src={option.icon}\r\n                                                alt=\"icon\"\r\n                                                className={\r\n                                                    option.size ?? \"w-5 h-5\"\r\n                                                }\r\n                                            />\r\n                                        </div>\r\n                                        <span className=\"font-bold\">\r\n                                            {option.label}\r\n                                        </span>\r\n                                    </>\r\n                                )\r\n                                return (\r\n                                    <div className={classnames(className)}>\r\n                                        {children}\r\n                                    </div>\r\n                                )\r\n                            }}\r\n                        />\r\n                        {!isSeedPhraseBackedUp && (\r\n                            <div className=\"w-full border border-gray-200 rounded-md flex justify-between items-center p-4\">\r\n                                <span className=\"text-xs mr-2\">\r\n                                    Back your seed phrase up and store it in a\r\n                                    safe place.\r\n                                </span>\r\n                                <button\r\n                                    className={classNames(Classes.smallButton)}\r\n                                    onClick={() => {\r\n                                        history.push(\"/reminder\")\r\n                                    }}\r\n                                >\r\n                                    Backup\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"mb-1 mx-auto mt-auto text-xxs \">\r\n                <AppVersion />\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default SettingsPage\r\n","import { ResponseGetState } from \"@block-wallet/background/utils/types/communication\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\n\r\n/**\r\n * A hook that returns a function that downloads the state logs (excluding sensitive data)\r\n *\r\n * @returns {downloadStateLogsHandler} - A function that downloads the state logs\r\n */\r\nconst useStateLogs = () => {\r\n    const state = useBlankState()!\r\n    const downloadStateLogsHandler = () => {\r\n        let stateLogs: Partial<ResponseGetState> = state\r\n        // Remove user sensitive data from state logs\r\n        delete stateLogs.hiddenAccounts\r\n        delete stateLogs.antiPhishingImage\r\n        delete stateLogs.addressBook\r\n        delete stateLogs.recentAddresses\r\n\r\n        delete stateLogs.previousWithdrawals\r\n        delete stateLogs.pendingDeposits\r\n        delete stateLogs.depositsCount\r\n        delete stateLogs.pendingWithdrawals\r\n        delete stateLogs.areDepositsPending\r\n        delete stateLogs.areWithdrawalsPending\r\n        delete stateLogs.isVaultInitialized\r\n        delete stateLogs.isImportingDeposits\r\n        delete stateLogs.importingErrors\r\n\r\n        const stateJsonString = `data:text/json;charset=utf-8,${encodeURIComponent(\r\n            JSON.stringify(stateLogs)\r\n        )}`\r\n\r\n        const fileName = \"StateLogs\"\r\n\r\n        const link = document.createElement(\"a\")\r\n        link.href = stateJsonString\r\n        link.download = fileName + \".json\"\r\n\r\n        link.click()\r\n    }\r\n\r\n    return {\r\n        downloadStateLogsHandler,\r\n    }\r\n}\r\n\r\nexport default useStateLogs\r\n","import PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport AppVersion from \"../../components/AppVersion\"\r\n\r\nimport { IoLogoTwitter } from \"react-icons/io\"\r\nimport { HiGlobeAlt } from \"react-icons/hi\"\r\nimport { FaGithub, FaTelegramPlane } from \"react-icons/fa\"\r\nimport classNames from \"classnames\"\r\nimport logo from \"../../assets/images/logo.svg\"\r\nimport { LINKS } from \"../../util/constants\"\r\nimport { FiDownload } from \"react-icons/fi\"\r\nimport { Classes } from \"../../styles\"\r\nimport useStateLogs from \"../../util/hooks/useStateLogs\"\r\n\r\nconst links = [\r\n    {\r\n        icon: <HiGlobeAlt className=\"w-5 h-5\" />,\r\n        link: LINKS.WEBSITE,\r\n        text: \"blockwallet.io\",\r\n    },\r\n    {\r\n        icon: <FaTelegramPlane className=\"w-5 h-5\" />,\r\n        link: LINKS.TELEGRAM,\r\n        text: \"t.me/blockwallet\",\r\n    },\r\n    {\r\n        icon: <FaGithub className=\"w-5 h-5\" />,\r\n        link: LINKS.GITHUB,\r\n        text: \"github.com/block-wallet\",\r\n    },\r\n    {\r\n        icon: <IoLogoTwitter className=\"w-5 h-5\" />,\r\n        link: LINKS.TWITTER,\r\n        text: \"twitter.com/GetBlockWallet\",\r\n    },\r\n]\r\nconst AboutPage = () => {\r\n    const { downloadStateLogsHandler } = useStateLogs()\r\n    return (\r\n        <PopupLayout header={<PopupHeader title={\"About\"} close=\"/\" />}>\r\n            <div className=\"space-y-4 p-6 py-4\">\r\n                <div className=\"rounded border border-gray-200 p-4\">\r\n                    <div className=\"flex items-center\">\r\n                        <img\r\n                            src={logo}\r\n                            alt=\"Blockwallet logo\"\r\n                            className=\"w-5 h-5\"\r\n                        />\r\n                        <span className=\"ml-2 text-lg font-bold\">\r\n                            BlockWallet\r\n                        </span>\r\n                    </div>\r\n                    <p className=\"mt-4\">\r\n                        BlockWallet is the most private, non-custodial browser\r\n                        extension wallet where users can store funds and\r\n                        interact with their favorite blockchain applications\r\n                        anonymously.\r\n                    </p>\r\n                    <p>Join us today and reclaim your privacy.</p>\r\n                    <div className=\"mt-4\">\r\n                        <AppVersion />\r\n                    </div>\r\n                </div>\r\n                <div className=\"rounded border border-gray-200 p-4\">\r\n                    <span className=\"text-lg font-bold\">Contacts</span>\r\n                    <div className=\"space-y-4 mt-4\">\r\n                        {links.map(({ text, link, icon }) => (\r\n                            <a\r\n                                href={link}\r\n                                target=\"_blank\"\r\n                                className=\"text-sm font-bold hover:underline flex items-center\"\r\n                                rel=\"noopener noreferrer\"\r\n                            >\r\n                                {icon}\r\n                                <span className=\"ml-2\">{text}</span>\r\n                            </a>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n                <div className=\"w-full border border-gray-200 rounded-md flex justify-between items-center p-4 py-2\">\r\n                    <span className=\"text-xs mr-2\">\r\n                        Download state logs for support\r\n                    </span>\r\n                    <button\r\n                        className={classNames(Classes.smallButton, \"px-4\")}\r\n                        onClick={downloadStateLogsHandler}\r\n                    >\r\n                        <FiDownload size={18} />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default AboutPage\r\n","import { useEffect, useState } from \"react\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport * as yup from \"yup\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport { useForm } from \"react-hook-form\"\r\n\r\n// Components\r\nimport PopupHeader from \"../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../components/popup/PopupLayout\"\r\nimport PopupFooter from \"../components/popup/PopupFooter\"\r\nimport ClickToReveal from \"../components/label/ClickToReveal\"\r\nimport { ButtonWithLoading } from \"../components/button/ButtonWithLoading\"\r\nimport PasswordInput from \"../components/input/PasswordInput\"\r\n\r\n// Comms\r\nimport { useBlankState } from \"../context/background/backgroundHooks\"\r\nimport getRequestRouteAndStatus from \"../context/util/getRequestRouteAndStatus\"\r\nimport { verifyPassword, requestSeedPhrase } from \"../context/commActions\"\r\n\r\nconst schema = yup.object().shape({\r\n    password: yup.string().required(\"Password required.\"),\r\n})\r\ntype PasswordFormData = { password: string }\r\n\r\nconst ReminderPage = () => {\r\n    const history: any = useHistory()\r\n    const [revealed, setRevealed] = useState<boolean>(false)\r\n    const [seedPhrase, setSeedPhrase] = useState<string | undefined>(\"\")\r\n    const [password, setPassword] = useState<string | undefined>(\"\")\r\n\r\n    const hasBack = history.location.state?.hasBack ?? true\r\n\r\n    const { permissionRequests, unapprovedTransactions, dappRequests } =\r\n        useBlankState()!\r\n\r\n    const [showRequests, requestRoute] = getRequestRouteAndStatus(\r\n        permissionRequests,\r\n        unapprovedTransactions,\r\n        dappRequests\r\n    )\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        setError,\r\n        formState: { errors },\r\n    } = useForm<PasswordFormData>({\r\n        resolver: yupResolver(schema),\r\n    })\r\n\r\n    const onSubmit = handleSubmit((data) => {\r\n        verifyPassword(data.password)\r\n            .then(async (isValid) => {\r\n                if (!isValid)\r\n                    return setError(\r\n                        \"password\",\r\n                        {\r\n                            message: \"Incorrect password\",\r\n                        },\r\n                        {\r\n                            shouldFocus: true,\r\n                        }\r\n                    )\r\n\r\n                const seedPhrase = await requestSeedPhrase(data.password)\r\n\r\n                setPassword(data.password)\r\n                setSeedPhrase(seedPhrase)\r\n            })\r\n            .catch(console.log)\r\n    })\r\n\r\n    useEffect(() => {\r\n        setSeedPhrase(history.location?.state?.seedPhrase)\r\n        setPassword(history.location?.state?.password)\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    const shouldEnterPassword = !seedPhrase || !password\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    title=\"You Havenât Set Up a Backup\"\r\n                    backButton={hasBack}\r\n                    close={showRequests ? requestRoute : undefined}\r\n                />\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        disabled={!shouldEnterPassword && !revealed}\r\n                        label={shouldEnterPassword ? \"Next\" : \"Backup now\"}\r\n                        onClick={() => {\r\n                            if (shouldEnterPassword) {\r\n                                onSubmit()\r\n                                return\r\n                            }\r\n\r\n                            history.push({\r\n                                pathname: \"/reminder/backup\",\r\n                                state: {\r\n                                    seedPhrase,\r\n                                    isReminder: true,\r\n                                    password,\r\n                                },\r\n                            })\r\n                        }}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n            submitOnEnter={{\r\n                onSubmit,\r\n                isEnabled: shouldEnterPassword,\r\n                isFormValid: Object.keys(errors).length === 0,\r\n            }}\r\n        >\r\n            {shouldEnterPassword ? (\r\n                <div className=\"p-6 flex flex-col space-y-8\">\r\n                    <div className=\"flex flex-col space-y-2\">\r\n                        <span className=\"text-center text-base font-bold font-title\">\r\n                            Enter your password to back up your seed phrase.\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"flex flex-col space-y-2\">\r\n                        <PasswordInput\r\n                            label=\"Password\"\r\n                            placeholder=\"Enter Password\"\r\n                            {...register(\"password\")}\r\n                            error={errors.password?.message}\r\n                            autoFocus\r\n                        />\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                <div className=\"flex-1 flex flex-col items-center justify-center w-full h-0 max-h-screen p-6\">\r\n                    <div className=\"flex flex-col space-y-8 p-2 text-gray-600 text-sm\">\r\n                        <span>\r\n                            Your seed phrase is the key to your wallet. It makes\r\n                            it possible to restore your wallet after losing\r\n                            access. Import your seed phrase to gain access to\r\n                            the funds held on your BlockWallet. Backup your seed\r\n                            phrase and store it in a safe place.\r\n                        </span>\r\n                        <span>\r\n                            <b className=\"text-gray-900\">Warning:</b> Never\r\n                            disclose your seed phrase. Anyone asking for your\r\n                            seed phrase is most likely trying to steal your\r\n                            funds.\r\n                        </span>\r\n                        <ClickToReveal\r\n                            hiddenText={seedPhrase}\r\n                            revealMessage={\"Click here to reveal secret words\"}\r\n                            revealed={revealed}\r\n                            onClick={() => setRevealed(true)}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default ReminderPage\r\n","import { SeedPhraseWord } from '../routes/setup/BackupConfirmPage'\r\n\r\nexport const findPositionOfSelectedWord = (\r\n    wordsArray: SeedPhraseWord[],\r\n    word: SeedPhraseWord\r\n) => {\r\n    return wordsArray.findIndex(\r\n        wordObj => wordObj.word === word.word && wordObj.isSelected\r\n    )\r\n}\r\n","/**\r\n * Checks for runtime error\r\n *\r\n */\r\nconst checkForError = () => {\r\n    const error = chrome.runtime.lastError\r\n    if (!error) {\r\n        return undefined\r\n    }\r\n    return new Error(error.message)\r\n}\r\n\r\n/**\r\n * Closes the current selected tab\r\n *\r\n */\r\nexport const closeCurrentTab = (): Promise<void> => {\r\n    return new Promise<void>((resolve, reject) => {\r\n        chrome.tabs &&\r\n            chrome.tabs.getCurrent((tab) => {\r\n                const error = checkForError()\r\n                if (error) {\r\n                    reject(error)\r\n                }\r\n                chrome.tabs.remove(tab?.id!, () => {\r\n                    const error = checkForError()\r\n                    if (error) {\r\n                        reject(error)\r\n                    }\r\n                    resolve()\r\n                })\r\n            })\r\n    })\r\n}\r\n","import { useIdleTimer } from \"react-idle-timer\"\r\nimport { setLastUserActiveTime } from \"../context/commActions\"\r\n\r\nconst IdleComponent = ({ children }: { children: React.ReactNode }) => {\r\n    const handleOnAction = async () => {\r\n        setLastUserActiveTime()\r\n    }\r\n\r\n    useIdleTimer({\r\n        onAction: handleOnAction,\r\n        debounce: 1000,\r\n        eventsThrottle: 200,\r\n    })\r\n\r\n    return <>{children}</>\r\n}\r\n\r\nexport default IdleComponent\r\n","import { FunctionComponent, useEffect, useMemo, useState } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\n\r\nimport PageLayout from \"../../components/PageLayout\"\r\nimport Divider from \"../../components/Divider\"\r\nimport Spinner from \"../../components/spinner/Spinner\"\r\nimport classnames from \"classnames\"\r\nimport { Classes } from \"../../styles/classes\"\r\nimport { verifySeedPhrase } from \"../../context/commActions\"\r\nimport { findPositionOfSelectedWord, shuffleArray } from \"../../util\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { closeCurrentTab } from \"../../util/window\"\r\nimport IdleComponent from \"../../components/IdleComponent\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\n\r\nexport interface SeedPhraseWord {\r\n    word: string\r\n    isSelected: boolean\r\n}\r\n\r\nconst SeedWordsInput: FunctionComponent<{\r\n    words: SeedPhraseWord[]\r\n    value: SeedPhraseWord[]\r\n    onChange: (words: SeedPhraseWord[]) => void\r\n}> = ({ words, value, onChange }) => {\r\n    const [availableWords, setAvailableWords] = useState([...words])\r\n\r\n    const handleWordClick = (\r\n        seedWord: SeedPhraseWord,\r\n        wordIndex: number,\r\n        isInputClick: boolean\r\n    ) => {\r\n        let newValue = [...value]\r\n        let updatedAvailableWords = [...availableWords]\r\n\r\n        if (isInputClick) {\r\n            // remove the word from the input\r\n            newValue.splice(wordIndex, 1)\r\n            const wordIndexInWords = findPositionOfSelectedWord(\r\n                updatedAvailableWords,\r\n                seedWord\r\n            )\r\n            updatedAvailableWords[wordIndexInWords].isSelected = false\r\n        } else {\r\n            if (seedWord.isSelected) {\r\n                // find the word in the input and remove it\r\n                const wordIndexInInput = findPositionOfSelectedWord(\r\n                    newValue,\r\n                    seedWord\r\n                )\r\n                newValue.splice(\r\n                    wordIndexInInput,\r\n                    wordIndexInInput !== -1 ? 1 : 0\r\n                )\r\n            } else {\r\n                newValue = [...value, { word: seedWord.word, isSelected: true }]\r\n            }\r\n            updatedAvailableWords[wordIndex].isSelected = !seedWord.isSelected\r\n        }\r\n        setAvailableWords(updatedAvailableWords)\r\n        onChange(newValue)\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex flex-col space-y-4\">\r\n            <div className=\"p-2 border border-primary-100 rounded-md grid grid-cols-4 grid-rows-3 gap-2 h-36\">\r\n                {value.map((wordObj, index) => (\r\n                    <button\r\n                        type=\"button\"\r\n                        key={`${wordObj.word}_${index}`}\r\n                        className=\"bg-gray-900 text-white rounded-md py-2\"\r\n                        style={{ height: \"fit-content\" }}\r\n                        onClick={() => handleWordClick(wordObj, index, true)}\r\n                    >\r\n                        {wordObj.word}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n            <div className=\"grid grid-cols-4 gap-2\">\r\n                {availableWords.map((wordObj, index) => (\r\n                    <button\r\n                        type=\"button\"\r\n                        key={`${wordObj.word}_${index}`}\r\n                        className={classnames(\r\n                            \"rounded-md py-3 border\",\r\n                            wordObj.isSelected\r\n                                ? \"border-transparent bg-gray-900 text-white\"\r\n                                : \"border-primary-100 text-gray-900\"\r\n                        )}\r\n                        onClick={() => {\r\n                            return handleWordClick(wordObj, index, false)\r\n                        }}\r\n                    >\r\n                        {wordObj.word}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n// subcomponent\r\nconst SeedPhraseBlock = (props: any) => {\r\n    const {\r\n        isReminder,\r\n        verificationError,\r\n        seedWords,\r\n        inputWords,\r\n        onSeedWordsChange,\r\n    } = props\r\n\r\n    return (\r\n        <div\r\n            className={classnames(\r\n                \"flex flex-col text-gray-600 text-sm\",\r\n                isReminder ? \"space-y-6 p-4\" : \"space-y-8 p-8\"\r\n            )}\r\n        >\r\n            <span>\r\n                Make sure that you've got it right - type out your phrase by\r\n                selecting the words below in the correct order.\r\n            </span>\r\n\r\n            <span\r\n                className={classnames(\r\n                    \"text-red-500 text-xs\",\r\n                    verificationError ? \"\" : \"hidden\"\r\n                )}\r\n            >\r\n                verificationError || <>&nbsp;</>\r\n            </span>\r\n            <SeedWordsInput\r\n                words={seedWords}\r\n                value={inputWords}\r\n                onChange={(words) => onSeedWordsChange(words)}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst BackupConfirmPage = () => {\r\n    const { isUnlocked } = useBlankState()!\r\n    useEffect(() => {\r\n        if (!isUnlocked) {\r\n            alert(\r\n                \"For security reasons the extension is now blocked. Login again in the extension to continue with the backup process.\"\r\n            )\r\n            closeCurrentTab()\r\n        }\r\n    }, [isUnlocked])\r\n    const history: any = useOnMountHistory()\r\n    const { seedPhrase, isReminder, password } = history.location.state\r\n    const backLink = isReminder ? \"/reminder\" : \"/setup/create/notice\"\r\n    const doneLink = isReminder ? \"/reminder/backup/done\" : \"/setup/done\"\r\n    const [inputWords, setInputWords] = useState<SeedPhraseWord[]>([])\r\n    const [isVerificationInProgress, setIsVerificationInProgress] =\r\n        useState<boolean>(false)\r\n    const [verificationError, setVerificationError] = useState<string>(\"\")\r\n    const seedWords = useMemo(() => {\r\n        let wordsForSeedPhrase: SeedPhraseWord[] = []\r\n        const words = seedPhrase.split(\" \")\r\n        shuffleArray(words)\r\n        wordsForSeedPhrase = []\r\n        words.forEach((word: string) => {\r\n            wordsForSeedPhrase.push({\r\n                word,\r\n                isSelected: false,\r\n            })\r\n        })\r\n        return wordsForSeedPhrase\r\n    }, [seedPhrase])\r\n\r\n    const isPhraseValid = () => {\r\n        let inputPhrase: string[] = []\r\n        inputWords.forEach((wordObj) => {\r\n            inputPhrase.push(wordObj.word)\r\n        }, \"\")\r\n        return seedPhrase === inputPhrase.join(\" \")\r\n    }\r\n\r\n    const confirmSeedPhrase = async () => {\r\n        setIsVerificationInProgress(true)\r\n        try {\r\n            const isSeedPhraseVerified = await verifySeedPhrase(\r\n                seedPhrase,\r\n                password\r\n            )\r\n            if (isSeedPhraseVerified) {\r\n                setVerificationError(\"\")\r\n                setIsVerificationInProgress(false)\r\n                history.push({ pathname: doneLink })\r\n            } else {\r\n                setVerificationError(\"Verification failed\")\r\n            }\r\n        } catch {\r\n            setVerificationError(\"Error verificating the seed phrase\")\r\n        }\r\n        setIsVerificationInProgress(false)\r\n    }\r\n\r\n    return (\r\n        <IdleComponent>\r\n            {isReminder ? (\r\n                // reminder view in app\r\n                <PopupLayout\r\n                    header={\r\n                        <PopupHeader title=\"Confirm Seed Phrase\" keepState />\r\n                    }\r\n                    footer={\r\n                        <PopupFooter>\r\n                            <ButtonWithLoading\r\n                                label=\"Confirm\"\r\n                                isLoading={isVerificationInProgress}\r\n                                onClick={confirmSeedPhrase}\r\n                                disabled={!isPhraseValid()}\r\n                            />\r\n                        </PopupFooter>\r\n                    }\r\n                >\r\n                    <SeedPhraseBlock\r\n                        isReminder={true}\r\n                        verificationError={verificationError}\r\n                        seedWords={seedWords}\r\n                        inputWords={inputWords}\r\n                        onSeedWordsChange={(words: any) => setInputWords(words)}\r\n                    />\r\n                </PopupLayout>\r\n            ) : (\r\n                // browser tab version during installation\r\n                <PageLayout\r\n                    screen={isReminder}\r\n                    header={!isReminder}\r\n                    maxWidth={isReminder ? \"\" : \"max-w-md\"}\r\n                    className={\"text-center\"}\r\n                >\r\n                    <span className=\"font-bold my-6 font-title text-lg\">\r\n                        Confirm Seed Phrase\r\n                    </span>\r\n                    <Divider />\r\n                    <SeedPhraseBlock\r\n                        isReminder={isReminder}\r\n                        verificationError={verificationError}\r\n                        seedWords={seedWords}\r\n                        inputWords={inputWords}\r\n                        onSeedWordsChange={(words: any) => setInputWords(words)}\r\n                    />\r\n                    <Divider />\r\n\r\n                    <div className=\"flex flex-row p-6 space-x-4\">\r\n                        <Link\r\n                            to={{\r\n                                pathname: backLink,\r\n                                state: { seedPhrase, password },\r\n                            }}\r\n                            className={Classes.liteButton}\r\n                            draggable={false}\r\n                        >\r\n                            Back\r\n                        </Link>\r\n                        <button\r\n                            type=\"button\"\r\n                            className={classnames(\r\n                                Classes.button,\r\n                                \"font-bold border-2 border-primary-300\",\r\n                                (!isPhraseValid() ||\r\n                                    isVerificationInProgress) &&\r\n                                    \"opacity-50 pointer-events-none\"\r\n                            )}\r\n                            onClick={confirmSeedPhrase}\r\n                        >\r\n                            {!isVerificationInProgress ? (\r\n                                \"Confirm\"\r\n                            ) : (\r\n                                <Spinner />\r\n                            )}\r\n                        </button>\r\n                    </div>\r\n                </PageLayout>\r\n            )}\r\n        </IdleComponent>\r\n    )\r\n}\r\n\r\nexport default BackupConfirmPage\r\n","export const shuffleArray = <T>(array: T[]) => {\r\n    for (let i = array.length - 1; i > 0; i--) {\r\n        const j = Math.floor(Math.random() * (i + 1))\r\n            ;[array[i], array[j]] = [array[j], array[i]]\r\n    }\r\n}\r\n","import PopupLayout from \"../components/popup/PopupLayout\"\r\nimport PopupHeader from \"../components/popup/PopupHeader\"\r\nimport LinkButton from \"../components/button/LinkButton\"\r\nimport logo from \"../assets/images/logo.svg\"\r\nimport PopupFooter from \"../components/popup/PopupFooter\"\r\n\r\nconst BackupDonePage = () => {\r\n    return (\r\n        <PopupLayout\r\n            header={<PopupHeader title=\"Youâre Now Safe!\" backButton={false} />}\r\n            footer={\r\n                <PopupFooter>\r\n                    <LinkButton location=\"/\" text=\"Done\" lite />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <div className=\"flex flex-col items-center justify-center w-full h-full space-y-6 p-6\">\r\n                <span className=\" text-center font-base font-semibold text-base\">\r\n                    Youâve successfully backed your seed phrase.\r\n                </span>\r\n                <img src={logo} alt=\"logo\" className=\"w-12 h-12 mx-auto\" />\r\n                <span className=\"font-base text-center text-sm\">\r\n                    You can now continue using BlockWallet.\r\n                </span>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default BackupDonePage\r\n","import { FunctionComponent, useState } from \"react\"\r\nimport { FiDownload } from \"react-icons/fi\"\r\nimport classNames from \"classnames\"\r\nimport { MdError } from \"react-icons/md\"\r\nimport { FaGithub, FaTelegram, FaGlobe } from \"react-icons/fa\"\r\nimport { Classes, classnames } from \"../../styles\"\r\nimport PopupFooter from \"../popup/PopupFooter\"\r\nimport PopupHeader from \"../popup/PopupHeader\"\r\nimport PopupLayout from \"../popup/PopupLayout\"\r\nimport { LINKS } from \"../../util/constants\"\r\nimport { resetAccount } from \"../../context/commActions\"\r\nimport { useSelectedAccount } from \"../../context/hooks/useSelectedAccount\"\r\nimport WaitingDialog, { useWaitingDialog } from \"../dialog/WaitingDialog\"\r\n\r\nimport useStateLogs from \"../../util/hooks/useStateLogs\"\r\nimport ConfirmDialog from \"../dialog/ConfirmDialog\"\r\n\r\nconst ErrorFallbackPage: FunctionComponent<{\r\n    error: Error\r\n    resetErrorBoundary: any\r\n}> = ({\r\n    error = Error(\"ð£ð ----ERROR FALLBACK---- ðð£\"),\r\n    resetErrorBoundary,\r\n}) => {\r\n    const { downloadStateLogsHandler } = useStateLogs()\r\n    const account = useSelectedAccount()\r\n\r\n    const [confirmOpen, setConfirmOpen] = useState(false)\r\n\r\n    const { isOpen, status, dispatch } = useWaitingDialog()\r\n\r\n    const handleReset = async () => {\r\n        dispatch({\r\n            type: \"open\",\r\n            payload: { status: \"loading\" },\r\n        })\r\n        try {\r\n            await resetAccount(account.address)\r\n            setTimeout(() => {\r\n                dispatch({\r\n                    type: \"setStatus\",\r\n                    payload: { status: \"success\" },\r\n                })\r\n            }, 1000)\r\n        } catch (error) {\r\n            dispatch({\r\n                type: \"setStatus\",\r\n                payload: { status: \"error\" },\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader title=\"Error\" close={false} backButton={false} />\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    <button\r\n                        onClick={resetErrorBoundary}\r\n                        type=\"button\"\r\n                        className={classnames(Classes.darkButton)}\r\n                    >\r\n                        Restart Wallet\r\n                    </button>\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <WaitingDialog\r\n                status={status}\r\n                open={isOpen}\r\n                titles={{\r\n                    loading: \"Resetting account...\",\r\n                    error: \"Error\",\r\n                    success: \"Success!\",\r\n                }}\r\n                texts={{\r\n                    loading: \"Please wait while the account is being reset...\",\r\n                    error: \"There was an error while resetting the account\",\r\n                    success: `Resetting account was successful.`,\r\n                }}\r\n                onDone={resetErrorBoundary}\r\n                timeout={1100}\r\n            />\r\n\r\n            <ConfirmDialog\r\n                title=\"Reset Account\"\r\n                message={`Resetting this account will clear its transaction history and added tokens. You will not need to re-import your seed phrase. Are you sure you want to proceed?`}\r\n                open={confirmOpen}\r\n                onClose={() => setConfirmOpen(false)}\r\n                onConfirm={handleReset}\r\n            />\r\n            <div className=\"flex flex-col space-y-4 p-6 py-4 justify-center items-center\">\r\n                <div className=\"flex flex-col space-y-6 p-4 items-center justify-center bg-primary-100 rounded-md\">\r\n                    <div className=\"text-sm\">\r\n                        <p>\r\n                            An error ocurred while using{\" \"}\r\n                            <b>BlockWallet v{process.env.VERSION}</b>.\r\n                            <br />\r\n                            <br />\r\n                            Please collect the information and report back to\r\n                            the team describing your case and the following log:\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-row items-center justify-start max-w-full self-start space-x-2\">\r\n                        <MdError size={24} className=\"flex text-red-400\" />\r\n                        <span className=\"flex text-red-400 text-xs break-all\">\r\n                            {error.message}\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"text-sm\">\r\n                        <p>\r\n                            Please try restarting the wallet and contacting\r\n                            support. If the issue persists, you can{\" \"}\r\n                            <a\r\n                                className=\"text-red-600 cursor-pointer\"\r\n                                onClick={() => setConfirmOpen(true)}\r\n                            >\r\n                                reset this account\r\n                            </a>{\" \"}\r\n                            state.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex flex-col w-full space-y-4 px-4 py-4 bg-primary-100 rounded-md\">\r\n                    <div className=\"flex flex-col space-y-4 text-xs\">\r\n                        <a\r\n                            href={LINKS.GITHUB_BUG_REPORT}\r\n                            target=\"_blank\"\r\n                            rel=\"noreferrer\"\r\n                            className=\"flex flex-row items-center space-x-3 hover:text-blue-600 hover:cursor-pointer\"\r\n                        >\r\n                            <FaGithub size={22} />\r\n                            <p>Create an Issue in GitHub.</p>\r\n                        </a>\r\n                        <a\r\n                            href={LINKS.WEBSITE_BUG_REPORT}\r\n                            target=\"_blank\"\r\n                            rel=\"noreferrer\"\r\n                            className=\"flex flex-row items-center space-x-3 hover:text-blue-600 hover:cursor-pointer\"\r\n                        >\r\n                            <FaGlobe size={22} />\r\n                            <p>Report it using our Bug Report Form.</p>\r\n                        </a>\r\n                        <a\r\n                            href={LINKS.TELEGRAM}\r\n                            target=\"_blank\"\r\n                            rel=\"noreferrer\"\r\n                            className=\"flex flex-row items-center space-x-3 hover:text-blue-600 hover:cursor-pointer\"\r\n                        >\r\n                            <FaTelegram size={22} />\r\n                            <p>Contact us on Telegram.</p>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n                <div className=\"w-full border border-gray-200 rounded-md flex justify-between items-center p-4 py-2\">\r\n                    <span className=\"text-xs mr-2\">\r\n                        Download state logs for support\r\n                    </span>\r\n                    <button\r\n                        className={classNames(Classes.smallButton, \"px-4\")}\r\n                        onClick={downloadStateLogsHandler}\r\n                    >\r\n                        <FiDownload size={18} />\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default ErrorFallbackPage\r\n","import { FunctionComponent } from \"react\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport AccountDisplay from \"../../components/account/AccountDisplay\"\r\nimport { AccountInfo } from \"../../../../background/src/controllers/AccountTrackerController\"\r\nimport { addressBookDelete } from \"../../context/commActions\"\r\nimport {\r\n    useAddressBook,\r\n    useAddressBookRecentAddresses,\r\n} from \"../../context/hooks/useAddressBook\"\r\nimport { ActionButton } from \"../../components/button/ActionButton\"\r\nimport accountAdd from \"../../assets/images/icons/account_add.svg\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { AccountMenuOptionType } from \"../../components/account/AccountDisplayMenu\"\r\nimport AccountsList from \"../../components/account/AccountsList\"\r\nimport Icon, { IconName } from \"../../components/ui/Icon\"\r\n\r\nconst AddressBookPage: FunctionComponent<{\r\n    addresses: AccountInfo[]\r\n}> = () => {\r\n    const history = useHistory()\r\n    const addressBook = useAddressBook()\r\n    const recentAddresses = useAddressBookRecentAddresses({\r\n        filterContacts: true,\r\n    })\r\n    const removeContact = async (address: string) => {\r\n        try {\r\n            await addressBookDelete(address)\r\n        } catch {\r\n            // TODO: show error\r\n            //  setError(error.message)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    title=\"Address Book\"\r\n                    onBack={() => history.push(\"/settings\")}\r\n                />\r\n            }\r\n        >\r\n            <div className=\"flex flex-col p-6 space-y-5 text-sm text-gray-500\">\r\n                <ActionButton\r\n                    icon={accountAdd}\r\n                    label=\"Create New Contact\"\r\n                    to=\"/settings/addressBook/add\"\r\n                    state={{ editMode: false, contact: null }}\r\n                />\r\n                {Object.keys(addressBook).length !== 0 && (\r\n                    <AccountsList title=\"CURRENT CONTACTS\">\r\n                        {Object.values(addressBook).map((entry) => (\r\n                            <AccountDisplay\r\n                                key={entry.address}\r\n                                account={\r\n                                    {\r\n                                        address: entry.address,\r\n                                        name: entry.name,\r\n                                    } as AccountInfo\r\n                                }\r\n                                selected={false}\r\n                                showAddress\r\n                                copyAddressToClipboard\r\n                                menu={[\r\n                                    {\r\n                                        optionType: AccountMenuOptionType.EDIT,\r\n                                        handler: () =>\r\n                                            history.push({\r\n                                                pathname:\r\n                                                    \"/settings/addressBook/add\",\r\n                                                state: {\r\n                                                    editMode: true,\r\n                                                    contact: {\r\n                                                        address: entry.address,\r\n                                                        name: entry.name,\r\n                                                    } as AccountInfo,\r\n                                                },\r\n                                            }),\r\n                                    },\r\n                                    {\r\n                                        optionType:\r\n                                            AccountMenuOptionType.REMOVE_CONTACT,\r\n                                        handler: removeContact,\r\n                                    },\r\n                                ]}\r\n                            />\r\n                        ))}\r\n                    </AccountsList>\r\n                )}\r\n                {Object.keys(recentAddresses).length !== 0 && (\r\n                    <AccountsList title=\"RECENT ADDRESSES\">\r\n                        {Object.values(recentAddresses).map((entry) => (\r\n                            <AccountDisplay\r\n                                key={entry.address}\r\n                                account={\r\n                                    {\r\n                                        address: entry.address,\r\n                                        name: entry.name,\r\n                                    } as AccountInfo\r\n                                }\r\n                                selected={false}\r\n                                showAddress\r\n                                copyAddressToClipboard\r\n                                menu={[\r\n                                    {\r\n                                        optionType:\r\n                                            AccountMenuOptionType.CUSTOM,\r\n                                        component: () => (\r\n                                            <div\r\n                                                className=\"flex flex-row justify-start items-center p-1 cursor-pointer text-black hover:bg-gray-100 hover:rounded-t-md w-36\"\r\n                                                onClick={() =>\r\n                                                    history.push({\r\n                                                        pathname:\r\n                                                            \"/settings/addressBook/add\",\r\n                                                        state: {\r\n                                                            contact: {\r\n                                                                address:\r\n                                                                    entry.address,\r\n                                                            },\r\n                                                        },\r\n                                                    })\r\n                                                }\r\n                                            >\r\n                                                <div className=\"pr-2\">\r\n                                                    <Icon\r\n                                                        name={IconName.PLUS}\r\n                                                    />\r\n                                                </div>\r\n                                                <span>Add Contact</span>\r\n                                            </div>\r\n                                        ),\r\n                                    },\r\n                                ]}\r\n                            />\r\n                        ))}\r\n                    </AccountsList>\r\n                )}\r\n                {!Object.keys(addressBook).length &&\r\n                    !Object.keys(recentAddresses).length && (\r\n                        <span className=\"text-sm text-gray-500\">\r\n                            No contacts.\r\n                        </span>\r\n                    )}\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default AddressBookPage\r\n","import { useState } from \"react\"\r\n\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport Divider from \"../../components/Divider\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport TextInput from \"../../components/input/TextInput\"\r\n\r\nimport * as yup from \"yup\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport {\r\n    useAddressBook,\r\n    useAddressBookRecentAddresses,\r\n} from \"../../context/hooks/useAddressBook\"\r\nimport { isValidAddress } from \"ethereumjs-util\"\r\nimport { addressBookSet } from \"../../context/commActions\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport WaitingDialog, {\r\n    useWaitingDialog,\r\n} from \"../../components/dialog/WaitingDialog\"\r\n\r\n// new contact schema\r\nconst contactSchema = yup.object().shape({\r\n    contactName: yup\r\n        .string()\r\n        .test(\"is-empty\", \"Contact name is empty.\", (s) => {\r\n            return !!s && s.trim().length > 0\r\n        })\r\n        .max(40, \"Contact name is too long\"),\r\n    contactAddress: yup\r\n        .string()\r\n        .required(\"No address provided.\")\r\n        .test(\"is-correct\", \"Address is incorrect.\", (address) => {\r\n            return isValidAddress(address || \"\")\r\n        }),\r\n})\r\ntype contactFormData = { contactName: string; contactAddress: string }\r\n\r\nconst AddContactPage = () => {\r\n    const history = useOnMountHistory()\r\n    const addressBook = useAddressBook()\r\n    const recentAddresses = useAddressBookRecentAddresses()\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        setError,\r\n\r\n        formState: { errors },\r\n    } = useForm<contactFormData>({\r\n        resolver: yupResolver(contactSchema),\r\n    })\r\n    const { status, isOpen, dispatch } = useWaitingDialog()\r\n\r\n    const { editMode, contact } = history.location.state\r\n\r\n    const [canUpdate, setCanUpdate] = useState(!editMode)\r\n\r\n    const pageTitle = editMode ? \"Edit Contact\" : \"New Contact\"\r\n    const buttonTitle = editMode ? \"Update\" : \"Create\"\r\n\r\n    const placeholderÐ¡ontactName = `Contact ${\r\n        Object.keys(addressBook).length + 1\r\n    }`\r\n\r\n    const contactNameExists = (name: string) => {\r\n        return (\r\n            Object.values(addressBook).some((a) => a.name === name) ||\r\n            Object.values(recentAddresses).some((a) => a.name === name)\r\n        )\r\n    }\r\n\r\n    const onSubmit = handleSubmit(async (data: contactFormData) => {\r\n        try {\r\n            if (contactNameExists(data.contactName || \"\")) {\r\n                setError(\r\n                    \"contactName\",\r\n                    {\r\n                        message: \"Contact Name already in use\",\r\n                    },\r\n                    {\r\n                        shouldFocus: true,\r\n                    }\r\n                )\r\n\r\n                return Promise.reject()\r\n            }\r\n            dispatch({ type: \"open\", payload: { status: \"loading\" } })\r\n\r\n            await addressBookSet(\r\n                data.contactAddress,\r\n                data.contactName ? data.contactName : placeholderÐ¡ontactName,\r\n                \"\"\r\n            )\r\n\r\n            dispatch({ type: \"setStatus\", payload: { status: \"success\" } })\r\n        } catch {\r\n            setError(\r\n                \"contactName\",\r\n                {\r\n                    message: \"Error saving the new contact.\",\r\n                },\r\n                {\r\n                    shouldFocus: true,\r\n                }\r\n            )\r\n            dispatch({ type: \"setStatus\", payload: { status: \"error\" } })\r\n\r\n            return Promise.reject()\r\n        }\r\n    })\r\n\r\n    return (\r\n        <PopupLayout\r\n            submitOnEnter={{\r\n                onSubmit,\r\n                isFormValid: Object.keys(errors).length === 0,\r\n            }}\r\n            header={<PopupHeader title={pageTitle} close=\"/\" />}\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        label={buttonTitle}\r\n                        onClick={onSubmit}\r\n                        disabled={!canUpdate}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <Divider />\r\n            <div className=\"flex flex-col w-full justify-between flex-1 h-full\">\r\n                <div className=\"flex flex-col flex-1 p-6 space-y-3\">\r\n                    <div className=\"flex flex-col space-y-1\">\r\n                        <TextInput\r\n                            appearance=\"outline\"\r\n                            label=\"Contact Name\"\r\n                            {...register(\"contactName\", {\r\n                                onChange: () => {\r\n                                    setCanUpdate(true)\r\n                                },\r\n                            })}\r\n                            placeholder={placeholderÐ¡ontactName}\r\n                            error={errors.contactName?.message}\r\n                            autoFocus={true}\r\n                            maxLength={40}\r\n                            defaultValue={\r\n                                contact?.name || placeholderÐ¡ontactName\r\n                            }\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex flex-col space-y-1\">\r\n                        <TextInput\r\n                            appearance=\"outline\"\r\n                            label=\"Contact Address\"\r\n                            placeholder=\"Address\"\r\n                            error={errors.contactAddress?.message}\r\n                            autoFocus={false}\r\n                            defaultValue={contact?.address}\r\n                            {...register(\"contactAddress\", {\r\n                                onChange: () => {\r\n                                    setCanUpdate(true)\r\n                                },\r\n                            })}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <hr className=\"border-0.5 border-gray-200 w-full\" />\r\n            </div>\r\n            <WaitingDialog\r\n                open={isOpen}\r\n                status={status}\r\n                titles={{\r\n                    loading: \"Loading\",\r\n                    success: \"Congratulations\",\r\n                    error: \"Error\",\r\n                }}\r\n                texts={{\r\n                    loading: \"Saving your changes...\",\r\n                    success: \"Your changes have been succesfully saved!\",\r\n                    error:\r\n                        errors.contactName?.message ??\r\n                        \"There was an error while saving your changes.\",\r\n                }}\r\n                timeout={800}\r\n                onDone={() => {\r\n                    if (status === \"error\") {\r\n                        dispatch({ type: \"close\" })\r\n                        return\r\n                    }\r\n\r\n                    history.push({\r\n                        pathname: \"/settings/addressBook\",\r\n                        state: { fromAction: true },\r\n                    })\r\n                }}\r\n            />\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default AddContactPage\r\n","export default __webpack_public_path__ + \"static/media/info_circle.ace7db61.svg\";","import { FunctionComponent, PropsWithChildren } from \"react\"\r\nimport infoIcon from \"../assets/images/icons/info_circle.svg\"\r\nimport { classnames } from \"../styles\"\r\n\r\nconst InfoComponent: FunctionComponent<\r\n    PropsWithChildren<{ className?: string }>\r\n> = ({ children, className }) => (\r\n    <div\r\n        className={classnames(\r\n            \"flex flex-row items-start space-x-4 text-xs text-gray-500\",\r\n            className\r\n        )}\r\n    >\r\n        <img\r\n            src={infoIcon}\r\n            alt=\"info\"\r\n            className=\"w-3 h-3 mt-1\"\r\n            draggable={false}\r\n        />\r\n        <span>{children}</span>\r\n    </div>\r\n)\r\n\r\nexport default InfoComponent\r\n","import { FunctionComponent, useEffect, useState } from \"react\"\r\nimport { CgArrowsExchangeV } from \"react-icons/cg\"\r\n\r\nimport { DappRequestParams } from \"@block-wallet/background/utils/types/ethereum\"\r\n\r\nimport { DappReq } from \"../../context/hooks/useDappRequest\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { confirmDappRequest } from \"../../context/commActions\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\n\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport InfoComponent from \"../../components/InfoComponent\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport NetworkDisplayBadge from \"../../components/chain/NetworkDisplayBadge\"\r\nimport WaitingDialog, {\r\n    useWaitingDialog,\r\n} from \"../../components/dialog/WaitingDialog\"\r\n\r\nimport { getNetworkFromChainId } from \"../../util/getExplorer\"\r\nimport { Classes } from \"../../styles\"\r\nimport { DappRequest, DappRequestProps } from \"./DappRequest\"\r\nimport { DAPP_FEEDBACK_WINDOW_TIMEOUT } from \"../../util/constants\"\r\nimport Divider from \"../../components/Divider\"\r\nimport DAppPopupHeader from \"../../components/dApp/DAppPopupHeader\"\r\nimport DAppOrigin from \"../../components/dApp/DAppOrigin\"\r\n\r\nconst SwitchEthereumChainPage = () => {\r\n    return (\r\n        <DappRequest\r\n            requestType={DappReq.SWITCH_NETWORK}\r\n            layoutRender={(props: DappRequestProps) => {\r\n                return <SwitchEthereumChain {...props} />\r\n            }}\r\n        />\r\n    )\r\n}\r\n\r\nconst SwitchEthereumChain: FunctionComponent<DappRequestProps> = ({\r\n    requestId,\r\n    siteMetadata,\r\n    dappReqData,\r\n}) => {\r\n    const { availableNetworks } = useBlankState()!\r\n    const network = useSelectedNetwork()\r\n    const { status, isOpen, dispatch, texts, titles } = useWaitingDialog()\r\n\r\n    const currentNetworkChainId = network.chainId\r\n\r\n    // Get the network names\r\n    const { chainId: newNetworkChainId } =\r\n        dappReqData as DappRequestParams[DappReq.SWITCH_NETWORK]\r\n\r\n    const [currentNetwork] = useState(\r\n        getNetworkFromChainId(availableNetworks, currentNetworkChainId)\r\n    )\r\n    const [newNetwork] = useState(\r\n        getNetworkFromChainId(availableNetworks, newNetworkChainId)\r\n    )\r\n\r\n    const [currentSiteMetadata] = useState(siteMetadata)\r\n\r\n    const approve = async () => {\r\n        try {\r\n            dispatch({ type: \"open\", payload: { status: \"loading\" } })\r\n            await confirmDappRequest(requestId, true)\r\n            dispatch({ type: \"setStatus\", payload: { status: \"success\" } })\r\n        } catch (err) {\r\n            dispatch({\r\n                type: \"setStatus\",\r\n                payload: {\r\n                    status: \"error\",\r\n                    texts: {\r\n                        error: err.message,\r\n                    },\r\n                },\r\n            })\r\n        }\r\n    }\r\n\r\n    const reject = async () => {\r\n        dispatch({\r\n            type: \"open\",\r\n            payload: {\r\n                status: \"loading\",\r\n                titles: { loading: \"Rejecting...\" },\r\n                texts: { loading: \"Rejecting network switch...\" },\r\n            },\r\n        })\r\n        await new Promise<void>((resolve) => {\r\n            setTimeout(resolve, 300)\r\n        })\r\n        await confirmDappRequest(requestId, false)\r\n        dispatch({\r\n            type: \"setStatus\",\r\n            payload: {\r\n                status: \"error\",\r\n                titles: { error: \"Request Rejected\" },\r\n                texts: {\r\n                    error: \"Switching network request was rejected.\",\r\n                },\r\n            },\r\n        })\r\n    }\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={<DAppPopupHeader title=\"Switch Network\" />}\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        onClick={reject}\r\n                        buttonClass={Classes.liteButton}\r\n                        label=\"Reject\"\r\n                    ></ButtonWithLoading>\r\n                    <ButtonWithLoading\r\n                        onClick={approve}\r\n                        label=\"Switch\"\r\n                    ></ButtonWithLoading>\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <WaitingDialog\r\n                clickOutsideToClose={false}\r\n                status={status}\r\n                open={isOpen}\r\n                titles={{\r\n                    loading: titles?.loading || \"Switching...\",\r\n                    success: titles?.success || \"Success\",\r\n                    error: titles?.error || \"Error\",\r\n                }}\r\n                texts={{\r\n                    loading: texts?.loading || \"Switching networks....\",\r\n                    success: texts?.success || \"You've switched the network.\",\r\n                    error:\r\n                        texts?.error ||\r\n                        \"There was an error switching the network.\",\r\n                }}\r\n                onDone={() => {\r\n                    dispatch({ type: \"close\" })\r\n                }}\r\n                timeout={DAPP_FEEDBACK_WINDOW_TIMEOUT}\r\n                hideButton\r\n            />\r\n            <DAppOrigin\r\n                iconURL={currentSiteMetadata.iconURL}\r\n                name={currentSiteMetadata.name}\r\n            />\r\n            <Divider />\r\n            <div className=\"flex flex-col p-6 space-y-4 h-full justify-between\">\r\n                {/* Header */}\r\n                <div className=\"flex flex-col space-y-2 text-sm\">\r\n                    <span className=\"font-bold text-black\">\r\n                        Allow this site to switch the network?\r\n                    </span>\r\n                    <span className=\"text-gray-500\">\r\n                        This will switch the selected network within BlockWallet\r\n                        to a previously added network:\r\n                    </span>\r\n                </div>\r\n\r\n                <div className=\"flex flex-col space-y-6\">\r\n                    {/* Current network */}\r\n                    {currentNetwork && (\r\n                        <NetworkDisplayBadge\r\n                            className=\"min-w-[50%] py-1 m-auto\"\r\n                            network={currentNetwork}\r\n                            truncate={false}\r\n                            fill={false}\r\n                        />\r\n                    )}\r\n\r\n                    {/* Switch Line */}\r\n                    <div className=\"flex flex-row items-center justify-center\">\r\n                        <div\r\n                            className=\"absolute border-t z-0\"\r\n                            style={{ width: \"calc(100%)\" }}\r\n                        ></div>\r\n                        {/* Arrow icon */}\r\n                        <div className=\"flex flex-row items-center justify-center w-9 h-9 p-1.5 bg-white border border-gray-200 rounded-full z-0\">\r\n                            <CgArrowsExchangeV fontStyle=\"bold\" fontSize=\"48\" />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* New network */}\r\n                    {newNetwork && (\r\n                        <NetworkDisplayBadge\r\n                            className=\"min-w-[50%] py-1 m-auto\"\r\n                            network={newNetwork}\r\n                            truncate={false}\r\n                            fill={false}\r\n                        />\r\n                    )}\r\n                </div>\r\n                {/* Info component */}\r\n                <InfoComponent className=\"mt-12\">\r\n                    Switching networks will cancel all pending confirmations\r\n                </InfoComponent>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default SwitchEthereumChainPage\r\n","import { FunctionComponent, useState, useEffect, useRef } from \"react\"\r\nimport classnames from \"classnames\"\r\n\r\nimport Dialog from \"./Dialog\"\r\nimport Divider from \"../Divider\"\r\n\r\nimport CloseIcon from \"../icons/CloseIcon\"\r\nimport { Classes } from \"../../styles\"\r\n\r\ntype option = {\r\n    title: string | JSX.Element\r\n    content: string | JSX.Element | undefined\r\n    expandable?: boolean\r\n}\r\n\r\ntype TextSizes = \"text-base\" | \"text-lg\" | \"text-sm\" | \"text-xs\"\r\n\r\ntype DetailsDialogProps = {\r\n    title: string\r\n    itemTitleSize?: TextSizes\r\n    itemContentSize?: TextSizes\r\n    titleSize?: TextSizes\r\n    fixedTitle?: boolean\r\n    open: boolean\r\n    onClose: () => void\r\n    options: option[]\r\n    onOption?: (option: option) => React.ReactNode\r\n    showUndefined?: boolean\r\n}\r\n\r\nconst DetailsDialog: FunctionComponent<DetailsDialogProps> = ({\r\n    title,\r\n    open,\r\n    onClose,\r\n    options,\r\n    itemTitleSize = \"text-base\",\r\n    itemContentSize = \"text-sm\",\r\n    titleSize = \"text-lg\",\r\n    fixedTitle = false,\r\n    onOption,\r\n    showUndefined = false,\r\n}) => {\r\n    const [expends, setExpends] = useState<boolean[]>(\r\n        new Array(options.length).fill(false)\r\n    )\r\n\r\n    const previousLengthRef = useRef(options.length)\r\n\r\n    useEffect(() => {\r\n        if (options.length === previousLengthRef.current) return\r\n\r\n        setExpends(new Array(options.length).fill(false))\r\n    }, [options])\r\n\r\n    return (\r\n        <Dialog open={open} onClickOutside={() => onClose()}>\r\n            <div\r\n                className={classnames(\"flex flex-col\", !fixedTitle && \"px-3\")}\r\n                style={{ height: \"calc(100vh - 8rem)\" }}\r\n            >\r\n                {fixedTitle && (\r\n                    <div className=\"w-full\">\r\n                        <h2\r\n                            className={classnames(\r\n                                titleSize,\r\n                                \"font-bold pl-2 pb-3\"\r\n                            )}\r\n                        >\r\n                            {title}\r\n                        </h2>\r\n                        <div className=\"-mx-3\">\r\n                            <Divider />\r\n                        </div>\r\n                    </div>\r\n                )}\r\n                <div\r\n                    className={classnames(\r\n                        \"grow mb-auto overflow-auto -mr-3\",\r\n                        fixedTitle && \"px-3\"\r\n                    )}\r\n                >\r\n                    <span className=\"absolute top-0 right-0 p-4\">\r\n                        <div\r\n                            onClick={() => onClose()}\r\n                            className=\" cursor-pointer p-2 ml-auto -mr-2 text-gray-900 transition duration-300 rounded-full hover:bg-primary-100 hover:text-primary-300\"\r\n                        >\r\n                            <CloseIcon size=\"10\" />\r\n                        </div>\r\n                    </span>\r\n                    {!fixedTitle && (\r\n                        <h2 className={classnames(titleSize, \"font-bold\")}>\r\n                            {title}\r\n                        </h2>\r\n                    )}\r\n                    <div className=\"flex flex-col space-y-4 mt-6 mb-6\">\r\n                        {options\r\n                            .filter(\r\n                                (option) => !!option.content || showUndefined\r\n                            )\r\n                            .map((option, i) => {\r\n                                if (onOption) return onOption(option)\r\n\r\n                                return (\r\n                                    <div\r\n                                        key={\r\n                                            typeof option.title === \"string\"\r\n                                                ? option.title\r\n                                                : i\r\n                                        }\r\n                                    >\r\n                                        {typeof option.title === \"string\" ? (\r\n                                            <h3\r\n                                                className={classnames(\r\n                                                    itemTitleSize,\r\n                                                    \"font-bold\"\r\n                                                )}\r\n                                            >\r\n                                                {option.title}\r\n                                            </h3>\r\n                                        ) : (\r\n                                            option.title\r\n                                        )}\r\n                                        <div className=\"flex w-full\">\r\n                                            <p\r\n                                                className={classnames(\r\n                                                    itemContentSize,\r\n                                                    \"mt-1 w-5/6\",\r\n                                                    expends[i]\r\n                                                        ? \"break-words\"\r\n                                                        : \"truncate\",\r\n                                                    option.expandable\r\n                                                        ? \"cursor-pointer\"\r\n                                                        : \"\"\r\n                                                )}\r\n                                                onClick={(_) => {\r\n                                                    if (!option.expandable)\r\n                                                        return\r\n\r\n                                                    const newExpends = [\r\n                                                        ...expends,\r\n                                                    ]\r\n                                                    newExpends[i] = !expends[i]\r\n\r\n                                                    setExpends(newExpends)\r\n                                                }}\r\n                                                title={\r\n                                                    typeof option.content ===\r\n                                                    \"string\"\r\n                                                        ? option.content ??\r\n                                                          \"N/A\"\r\n                                                        : \"\"\r\n                                                }\r\n                                            >\r\n                                                {option.content ?? \"N/A\"}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                )\r\n                            })}\r\n                    </div>\r\n                </div>\r\n                <div className=\"mt-auto w-full\">\r\n                    <div className=\"-mx-6\">\r\n                        <Divider />\r\n                    </div>\r\n                    <button\r\n                        className={classnames(\r\n                            Classes.liteButton,\r\n                            \"mt-4 w-full\"\r\n                        )}\r\n                        onClick={onClose}\r\n                    >\r\n                        Close\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default DetailsDialog\r\n","import { FunctionComponent, useState } from \"react\"\r\nimport { NormalizedAddEthereumChainParameter } from \"@block-wallet/background/utils/types/ethereum\"\r\n\r\nimport { DappReq } from \"../../context/hooks/useDappRequest\"\r\nimport { confirmDappRequest } from \"../../context/commActions\"\r\n\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport WaitingDialog, {\r\n    useWaitingDialog,\r\n} from \"../../components/dialog/WaitingDialog\"\r\nimport InfoComponent from \"../../components/InfoComponent\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport { Classes } from \"../../styles\"\r\nimport { DappRequest, DappRequestProps } from \"./DappRequest\"\r\nimport { DAPP_FEEDBACK_WINDOW_TIMEOUT, LINKS } from \"../../util/constants\"\r\nimport ClickableText from \"../../components/button/ClickableText\"\r\nimport DetailsDialog from \"../../components/dialog/DetailsDialog\"\r\nimport RPCValidationEndLabelInfo, {\r\n    BlockExplorerValidation,\r\n    ChainIdValidation,\r\n    IconURLValidation,\r\n    RPCUrlValidation,\r\n} from \"../../components/chain/RPCValidationEndLabelInfo\"\r\n\r\nimport unknownChainIcon from \"../../assets/images/unknown_token.svg\"\r\nimport ExpandableText from \"../../components/ExpandableText\"\r\nimport Spinner from \"../../components/spinner/Spinner\"\r\nimport DAppPopupHeader from \"../../components/dApp/DAppPopupHeader\"\r\nimport DAppOrigin from \"../../components/dApp/DAppOrigin\"\r\nimport Divider from \"../../components/Divider\"\r\n\r\nconst AddEthereumChainPage = () => {\r\n    return (\r\n        <DappRequest\r\n            requestType={DappReq.ADD_ETHEREUM_CHAIN}\r\n            layoutRender={(props: DappRequestProps) => {\r\n                return <AddEthereumChain {...props} />\r\n            }}\r\n        />\r\n    )\r\n}\r\n\r\nconst ChainIcon: FunctionComponent<{ iconUrl: string; hide: boolean }> = ({\r\n    iconUrl,\r\n    hide,\r\n}) => {\r\n    const [loaded, setLoaded] = useState(false)\r\n    return (\r\n        <div className=\"flex flex-row items-center justify-center w-6 h-6 rounded-full bg-primary-100 mr-2\">\r\n            {!hide && !loaded && <Spinner />}\r\n            <img\r\n                alt=\"icon\"\r\n                draggable={false}\r\n                className=\"rounded-full\"\r\n                style={!hide && !loaded ? { display: \"none\" } : {}}\r\n                src={hide ? unknownChainIcon : iconUrl}\r\n                onLoad={() => !hide && setLoaded(true)}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst AddEthereumChain: FunctionComponent<DappRequestProps> = ({\r\n    requestId,\r\n    siteMetadata,\r\n    dappReqData,\r\n    requestCount,\r\n}) => {\r\n    const { status, isOpen, dispatch, texts, titles } = useWaitingDialog()\r\n    const {\r\n        chainId,\r\n        blockExplorerUrl,\r\n        chainName,\r\n        iconUrl,\r\n        nativeCurrency,\r\n        rpcUrl,\r\n        validations,\r\n    } = dappReqData as NormalizedAddEthereumChainParameter\r\n\r\n    const [hasDialog, setHasDialog] = useState(false)\r\n    const [isImageSaved, setIsImageSaved] = useState(false)\r\n\r\n    const approve = async () => {\r\n        try {\r\n            dispatch({ type: \"open\", payload: { status: \"loading\" } })\r\n            await confirmDappRequest<DappReq.ADD_ETHEREUM_CHAIN>(\r\n                requestId,\r\n                true,\r\n                {\r\n                    saveImage: isImageSaved,\r\n                }\r\n            )\r\n            dispatch({ type: \"setStatus\", payload: { status: \"success\" } })\r\n        } catch (err) {\r\n            dispatch({\r\n                type: \"setStatus\",\r\n                payload: {\r\n                    status: \"error\",\r\n                    texts: {\r\n                        error: err.message,\r\n                    },\r\n                },\r\n            })\r\n        }\r\n    }\r\n\r\n    const reject = async () => {\r\n        dispatch({\r\n            type: \"open\",\r\n            payload: {\r\n                status: \"loading\",\r\n                titles: { loading: \"Rejecting...\" },\r\n                texts: { loading: \"Rejecting add new network...\" },\r\n            },\r\n        })\r\n        await new Promise<void>((resolve) => {\r\n            setTimeout(resolve, 300)\r\n        })\r\n        await confirmDappRequest(requestId, false)\r\n        dispatch({\r\n            type: \"setStatus\",\r\n            payload: {\r\n                status: \"error\",\r\n                titles: { error: \"Request Rejected\" },\r\n                texts: {\r\n                    error: \"Add new network request was rejected.\",\r\n                },\r\n            },\r\n        })\r\n    }\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <DAppPopupHeader\r\n                    title=\"Add Network\"\r\n                    requestCount={requestCount}\r\n                    className=\"justify-between\"\r\n                />\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        onClick={reject}\r\n                        buttonClass={Classes.liteButton}\r\n                        label=\"Reject\"\r\n                    ></ButtonWithLoading>\r\n                    <ButtonWithLoading\r\n                        onClick={approve}\r\n                        label=\"Add Network\"\r\n                    ></ButtonWithLoading>\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <WaitingDialog\r\n                clickOutsideToClose={false}\r\n                status={status}\r\n                open={isOpen}\r\n                titles={{\r\n                    loading: titles?.loading || \"Adding...\",\r\n                    success: titles?.success || \"Success\",\r\n                    error: titles?.error || \"Error\",\r\n                }}\r\n                texts={{\r\n                    loading: texts?.loading || \"Adding new network....\",\r\n                    success:\r\n                        texts?.success ||\r\n                        \"You've succesfully added the network.\",\r\n                    error:\r\n                        texts?.error ||\r\n                        \"There was an error adding the network.\",\r\n                }}\r\n                onDone={() => {\r\n                    dispatch({ type: \"close\" })\r\n                }}\r\n                timeout={DAPP_FEEDBACK_WINDOW_TIMEOUT}\r\n                hideButton\r\n            />\r\n            <DetailsDialog\r\n                open={hasDialog}\r\n                fixedTitle\r\n                titleSize=\"text-base\"\r\n                itemTitleSize=\"text-sm\"\r\n                itemContentSize=\"text-xs\"\r\n                title=\"Network Details\"\r\n                onClose={() => setHasDialog(false)}\r\n                options={[\r\n                    {\r\n                        title: \"Network Name\",\r\n                        content: chainName,\r\n                    },\r\n                    {\r\n                        title: (\r\n                            <div className=\"flex flex-row w-full\">\r\n                                <h3 className=\"text-sm font-bold mr-2\">\r\n                                    Chain ID\r\n                                </h3>\r\n                                <RPCValidationEndLabelInfo\r\n                                    isValidating={false}\r\n                                    rpcValidation={\r\n                                        validations.knownChainId\r\n                                            ? ChainIdValidation.KNOWN_CHAIN_ID\r\n                                            : ChainIdValidation.UNKNOWN_CHAIN_ID\r\n                                    }\r\n                                    toolTipClassName=\"!-translate-x-16\"\r\n                                />\r\n                            </div>\r\n                        ),\r\n                        content: chainId.toString(),\r\n                    },\r\n                    {\r\n                        title: (\r\n                            <div className=\"flex flex-row w-full\">\r\n                                <h3 className=\"text-sm font-bold mr-2\">\r\n                                    Network URL\r\n                                </h3>\r\n                                {validations.knownChainId && (\r\n                                    <RPCValidationEndLabelInfo\r\n                                        isValidating={false}\r\n                                        rpcValidation={\r\n                                            validations.knownRpcUrl\r\n                                                ? RPCUrlValidation.VERIFIED_ENDPOINT\r\n                                                : RPCUrlValidation.UNVERIFIED_ENDPOINT\r\n                                        }\r\n                                        toolTipClassName=\"!-translate-x-20\"\r\n                                    />\r\n                                )}\r\n                            </div>\r\n                        ),\r\n                        content: rpcUrl,\r\n                        expandable: true,\r\n                    },\r\n                    {\r\n                        title: \"Currency Icon URL\",\r\n                        content: iconUrl,\r\n                        expandable: true,\r\n                    },\r\n                    {\r\n                        title: \"Currency Symbol\",\r\n                        content: nativeCurrency.symbol,\r\n                    },\r\n                    {\r\n                        title: \"Currency Decimals\",\r\n                        content: nativeCurrency.decimals.toString(),\r\n                    },\r\n                    {\r\n                        title: (\r\n                            <div className=\"flex flex-row w-full\">\r\n                                <h3 className=\"text-sm font-bold mr-2\">\r\n                                    Block Explorer URL\r\n                                </h3>\r\n                                {validations.knownChainId && (\r\n                                    <RPCValidationEndLabelInfo\r\n                                        isValidating={false}\r\n                                        rpcValidation={\r\n                                            validations.knownBlockExplorer\r\n                                                ? BlockExplorerValidation.KNOWN_EXPLORER\r\n                                                : BlockExplorerValidation.UNKNOWN_EXPLORER\r\n                                        }\r\n                                        toolTipClassName=\"!-translate-x-24\"\r\n                                    />\r\n                                )}\r\n                            </div>\r\n                        ),\r\n                        content: blockExplorerUrl,\r\n                        expandable: true,\r\n                    },\r\n                ]}\r\n            />\r\n            <DAppOrigin\r\n                iconURL={siteMetadata.iconURL}\r\n                name={siteMetadata.name}\r\n            />\r\n            <Divider />\r\n            <div className=\"flex flex-col px-6 pt-3 pb-1 space-y-2 h-full justify-between\">\r\n                {/* Header */}\r\n                <div className=\"flex flex-col space-y-1 text-sm\">\r\n                    <span className=\"font-bold text-black\">\r\n                        Allow this site to add a network?\r\n                    </span>\r\n                    <span className=\"text-gray-500\">\r\n                        This will allow this network to be used within\r\n                        BlockWallet\r\n                    </span>\r\n                </div>\r\n                <div className=\"flex flex-col border border-gray-200 rounded-lg space-y-2 px-4 py-3\">\r\n                    <div>\r\n                        <p className=\"font-bold text-black\">Network Name</p>\r\n                        <p className=\"text-gray-500\">{chainName || \"-\"}</p>\r\n                    </div>\r\n                    <div>\r\n                        <div className=\"flex flex-row w-full\">\r\n                            <p className=\"font-bold text-black mr-2\">\r\n                                Chain ID\r\n                            </p>\r\n                            <RPCValidationEndLabelInfo\r\n                                isValidating={false}\r\n                                rpcValidation={\r\n                                    validations.knownChainId\r\n                                        ? ChainIdValidation.KNOWN_CHAIN_ID\r\n                                        : ChainIdValidation.UNKNOWN_CHAIN_ID\r\n                                }\r\n                                toolTipClassName=\"!translate-x-6\"\r\n                                wrapperClassName=\"z-0\"\r\n                            />\r\n                        </div>\r\n                        <p className=\"text-gray-500\">{chainId}</p>\r\n                    </div>\r\n                    <div>\r\n                        <div className=\"flex flex-row w-full\">\r\n                            <p className=\"font-bold text-black mr-2\">\r\n                                Network URL\r\n                            </p>\r\n                            {validations.knownChainId && (\r\n                                <RPCValidationEndLabelInfo\r\n                                    isValidating={false}\r\n                                    rpcValidation={\r\n                                        validations.knownRpcUrl\r\n                                            ? RPCUrlValidation.VERIFIED_ENDPOINT\r\n                                            : RPCUrlValidation.UNVERIFIED_ENDPOINT\r\n                                    }\r\n                                    toolTipClassName=\"!translate-x-0\"\r\n                                    wrapperClassName=\"z-0\"\r\n                                />\r\n                            )}\r\n                        </div>\r\n                        <ExpandableText className=\"text-gray-500\">\r\n                            {rpcUrl}\r\n                        </ExpandableText>\r\n                    </div>\r\n\r\n                    {iconUrl && (\r\n                        <div>\r\n                            <div className=\"flex flex-row w-full\">\r\n                                <p className=\"font-bold text-black mr-2\">\r\n                                    {validations.knownIcon\r\n                                        ? \"Currency Icon\"\r\n                                        : \"Currency Icon URL\"}\r\n                                </p>\r\n                                {!validations.knownIcon && (\r\n                                    <RPCValidationEndLabelInfo\r\n                                        isValidating={false}\r\n                                        rpcValidation={\r\n                                            IconURLValidation.CUSTOM_ICON\r\n                                        }\r\n                                        toolTipClassName=\"!-translate-x-16\"\r\n                                        wrapperClassName=\"z-0\"\r\n                                    />\r\n                                )}\r\n                            </div>\r\n                            {!validations.knownIcon ? (\r\n                                <>\r\n                                    <ExpandableText className=\"text-gray-500\">\r\n                                        {iconUrl}\r\n                                    </ExpandableText>\r\n                                    <div className=\"pt-1 flex flex-row items-center\">\r\n                                        <ChainIcon\r\n                                            iconUrl={iconUrl}\r\n                                            hide={!isImageSaved}\r\n                                        />\r\n                                        <input\r\n                                            type=\"checkbox\"\r\n                                            checked={isImageSaved}\r\n                                            className={Classes.checkbox}\r\n                                            onChange={() => {\r\n                                                setIsImageSaved(!isImageSaved)\r\n                                            }}\r\n                                        />\r\n                                        <span className=\"text-xs pl-2\">\r\n                                            Save image URL\r\n                                        </span>\r\n                                    </div>\r\n                                </>\r\n                            ) : (\r\n                                <ChainIcon iconUrl={iconUrl} hide={false} />\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                    <div>\r\n                        <ClickableText\r\n                            className=\"font-bold\"\r\n                            onClick={(e) => {\r\n                                e.preventDefault()\r\n                                setHasDialog(true)\r\n                            }}\r\n                        >\r\n                            View all details\r\n                        </ClickableText>\r\n                    </div>\r\n                </div>\r\n                {/* Info component */}\r\n                <InfoComponent className=\"pb-2\">\r\n                    BlockWallet does not verify custom networks. Make sure you\r\n                    understand{\" \"}\r\n                    <a\r\n                        className=\"underline text-blue-600 hover:text-blue-800\"\r\n                        href={LINKS.ARTICLES.CUSTOM_NETWORK_RISKS}\r\n                        target=\"_blank\"\r\n                        rel=\"noreferrer\"\r\n                    >\r\n                        the potential risks adding a custom network may pose\r\n                    </a>\r\n                    .\r\n                </InfoComponent>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default AddEthereumChainPage\r\n","import { useState, useEffect, useCallback } from \"react\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport { getIdleTimeout, setIdleTimeout } from \"../../context/commActions\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport WaitingDialog, {\r\n    useWaitingDialog,\r\n} from \"../../components/dialog/WaitingDialog\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport ToggleButton from \"../../components/button/ToggleButton\"\r\nimport Select from \"../../components/input/Select\"\r\n\r\nconst LockTimeout = () => {\r\n    const history = useOnMountHistory()!\r\n    const [currentTimeout, setCurrentTimeout] = useState(5)\r\n    const [selectedTimeout, setSelectedTimeout] = useState(5)\r\n    const [timeoutEnabled, setTimeoutEnabled] = useState(false)\r\n\r\n    const { isOpen, status, dispatch } = useWaitingDialog()\r\n\r\n    useEffect(() => {\r\n        getIdleTimeout().then((timeout) => {\r\n            setTimeoutEnabled(timeout !== 0)\r\n            setCurrentTimeout(timeout)\r\n            setSelectedTimeout(timeout)\r\n        })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        setSelectedTimeout(\r\n            timeoutEnabled ? (currentTimeout === 0 ? 5 : currentTimeout) : 0\r\n        )\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [timeoutEnabled])\r\n\r\n    const onSave = useCallback(async () => {\r\n        try {\r\n            dispatch({ type: \"open\", payload: { status: \"loading\" } })\r\n\r\n            await setIdleTimeout(selectedTimeout)\r\n\r\n            dispatch({ type: \"setStatus\", payload: { status: \"success\" } })\r\n        } catch (error) {\r\n            dispatch({ type: \"setStatus\", payload: { status: \"error\" } })\r\n            // throw new Error(\"Could not update the lock timeout\")\r\n        }\r\n    }, [dispatch, selectedTimeout])\r\n\r\n    return (\r\n        <PopupLayout\r\n            submitOnEnter={{\r\n                onSubmit: onSave,\r\n                isEnabled: selectedTimeout !== currentTimeout,\r\n            }}\r\n            header={<PopupHeader title=\"Lock Timeout\" />}\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        label=\"Save\"\r\n                        disabled={selectedTimeout === currentTimeout}\r\n                        onClick={onSave}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <WaitingDialog\r\n                open={isOpen}\r\n                status={status}\r\n                titles={{\r\n                    loading: \"Loading\",\r\n                    success: \"Congratulations\",\r\n                    error: \"Error\",\r\n                }}\r\n                texts={{\r\n                    loading: \"Saving your changes...\",\r\n                    success: \"Your changes have been succesfully saved!\",\r\n                    error: \"There was an error while updating the lock timeout\",\r\n                }}\r\n                timeout={800}\r\n                onDone={() => {\r\n                    if (status === \"error\") {\r\n                        dispatch({ type: \"close\" })\r\n                        return\r\n                    }\r\n\r\n                    history.push(\"/\")\r\n                }}\r\n            />\r\n            <div className=\"flex flex-col p-6 space-y-6 w-full\">\r\n                <span className=\"text-sm text-gray-500\">\r\n                    BlockWallet will automatically lock and require an\r\n                    additional login after the selected period.\r\n                </span>\r\n                <ToggleButton\r\n                    label=\"Enabled\"\r\n                    defaultChecked={timeoutEnabled}\r\n                    onToggle={(checked: boolean) => {\r\n                        setTimeoutEnabled(checked)\r\n                    }}\r\n                />\r\n                {timeoutEnabled && selectedTimeout !== 0 && (\r\n                    <div className=\"flex flex-col space-y-2\">\r\n                        <Select\r\n                            onChange={setSelectedTimeout}\r\n                            currentValue={selectedTimeout}\r\n                            id=\"period\"\r\n                            label=\"Period\"\r\n                        >\r\n                            <Select.Option value={1}>1 minute</Select.Option>\r\n                            <Select.Option value={3}>3 minutes</Select.Option>\r\n                            <Select.Option value={5}>5 minutes</Select.Option>\r\n                            <Select.Option value={15}>15 minutes</Select.Option>\r\n                            <Select.Option value={30}>30 minutes</Select.Option>\r\n                            <Select.Option value={60}>1 hour</Select.Option>\r\n                            <Select.Option value={180}>3 hours</Select.Option>\r\n                            <Select.Option value={360}>6 hours</Select.Option>\r\n                            <Select.Option value={720}>12 hours</Select.Option>\r\n                            <Select.Option value={1440}>1 day</Select.Option>\r\n                        </Select>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default LockTimeout\r\n","export default __webpack_public_path__ + \"static/media/export.51202c93.svg\";","export default __webpack_public_path__ + \"static/media/trash_bin.202d9f6f.svg\";","export default __webpack_public_path__ + \"static/media/accounts.49bd1b98.svg\";","export default __webpack_public_path__ + \"static/media/reset.6b0c150b.svg\";","export default __webpack_public_path__ + \"static/media/qr_icon.8001714a.svg\";","export default __webpack_public_path__ + \"static/media/connected_sites.a74da41d.svg\";","export default __webpack_public_path__ + \"static/media/pencil.b544c7c3.svg\";","import { useSelectedAccount } from \"../../context/hooks/useSelectedAccount\"\r\nimport { useSelectedAddressWithChainIdChecksum } from \"../../util/hooks/useSelectedAddressWithChainIdChecksum\"\r\nimport VerticalSelect from \"../input/VerticalSelect\"\r\nimport PopupHeader from \"../popup/PopupHeader\"\r\nimport PopupLayout from \"../popup/PopupLayout\"\r\nimport AccountDisplay from \"./AccountDisplay\"\r\n\r\nimport exportIcon from \"../../assets/images/icons/export.svg\"\r\nimport trashBinIcon from \"../../assets/images/icons/trash_bin.svg\"\r\nimport openExternal from \"../../assets/images/icons/open_external.svg\"\r\nimport accountsIcon from \"../../assets/images/icons/accounts.svg\"\r\nimport resetIcon from \"../../assets/images/icons/reset.svg\"\r\nimport qrIcon from \"../../assets/images/icons/qr_icon.svg\"\r\nimport sites from \"../../assets/images/icons/connected_sites.svg\"\r\nimport editIcon from \"../../assets/images/icons/pencil.svg\"\r\nimport { generateExplorerLink, getExplorerTitle } from \"../../util/getExplorer\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport classnames from \"classnames\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport { HARDWARE_TYPES } from \"../../util/account\"\r\nimport { openHardwareRemove } from \"../../context/commActions\"\r\n\r\nconst AccountMenu = () => {\r\n    const { availableNetworks, selectedNetwork } = useBlankState()!\r\n    const account = useSelectedAccount()\r\n    const checksumAddress = useSelectedAddressWithChainIdChecksum()\r\n    const history = useOnMountHistory()\r\n    const fromAccountList = history.location.state?.fromAccountList\r\n    const explorerName = getExplorerTitle(availableNetworks, selectedNetwork)\r\n    const exportAccountDataLabel = \"Export Account Data\"\r\n    const removeHWLabel = \"Remove Hardware Wallet\"\r\n    const options: {\r\n        icon: string\r\n        label: string\r\n        to: string | undefined\r\n        next?: () => void\r\n    }[] = [\r\n        {\r\n            icon: qrIcon,\r\n            label: \"Receive Funds\",\r\n            to: \"/accounts/menu/receive\",\r\n        },\r\n        {\r\n            icon: sites,\r\n            label: \"Connected Sites\",\r\n            to: \"/accounts/menu/connectedSites\",\r\n        },\r\n        {\r\n            icon: exportIcon,\r\n            label: exportAccountDataLabel,\r\n            to: \"/accounts/menu/export\",\r\n        },\r\n        {\r\n            icon: openExternal,\r\n            label: \"View on \" + explorerName,\r\n            to: generateExplorerLink(\r\n                availableNetworks,\r\n                selectedNetwork,\r\n                checksumAddress,\r\n                \"address\"\r\n            ),\r\n        },\r\n    ]\r\n\r\n    const disabledOptions: { [k: string]: boolean } = {}\r\n    const tooltipOptions: { [k: string]: string } = {}\r\n\r\n    if (HARDWARE_TYPES.includes(account.accountType)) {\r\n        disabledOptions[exportAccountDataLabel] = true\r\n        tooltipOptions[exportAccountDataLabel] =\r\n            \"Not available for Hardware Wallets accounts.\"\r\n        options.push({\r\n            icon: trashBinIcon,\r\n            label: removeHWLabel,\r\n            to: undefined,\r\n            next: () => {\r\n                openHardwareRemove()\r\n            },\r\n        })\r\n    }\r\n\r\n    options.push({\r\n        icon: accountsIcon,\r\n        label: \"My Accounts\",\r\n        to: \"/accounts\",\r\n    })\r\n\r\n    options.push({\r\n        icon: resetIcon,\r\n        label: \"Reset Account\",\r\n        to: \"/accounts/menu/reset\",\r\n    })\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    title=\"Account\"\r\n                    onBack={() => {\r\n                        history.push({\r\n                            pathname: history.location.state?.fromAccountList\r\n                                ? \"/accounts\"\r\n                                : \"/settings\",\r\n                        })\r\n                    }}\r\n                />\r\n            }\r\n        >\r\n            <div className=\"flex flex-col p-6 space-y-4 text-sm text-gray-500\">\r\n                <div className=\"flex flex-col\">\r\n                    <AccountDisplay\r\n                        account={account}\r\n                        actionButtons={[\r\n                            <div\r\n                                key={`current-account-action-button-1`}\r\n                                onClick={() => {\r\n                                    history.push({\r\n                                        pathname: \"/accounts/menu/edit\",\r\n                                        state: {\r\n                                            fromAccountList:\r\n                                                history.location.state\r\n                                                    ?.fromAccountList,\r\n                                        },\r\n                                    })\r\n                                }}\r\n                                className=\"cursor-pointer p-2 transition duration-300 rounded-full hover:bg-primary-100 hover:text-primary-300\"\r\n                            >\r\n                                <img src={editIcon} alt=\"Edit\"></img>\r\n                            </div>,\r\n                        ]}\r\n                    />\r\n                </div>\r\n                <div className=\"flex flex-col space-y-4\">\r\n                    <span className=\"text-xs\">ACCOUNT SETTINGS</span>\r\n                    <div className=\"flex flex-col space-y-1\">\r\n                        <VerticalSelect\r\n                            options={options}\r\n                            disabledOptions={disabledOptions}\r\n                            tooltipOptions={tooltipOptions}\r\n                            value={undefined}\r\n                            onChange={(option) =>\r\n                                option.to\r\n                                    ? option.to.includes(\"https://\")\r\n                                        ? chrome.tabs.create({ url: option.to })\r\n                                        : history.push({\r\n                                              pathname: option.to,\r\n                                              state: {\r\n                                                  from: \"/accounts/menu\",\r\n                                                  fromAccountList,\r\n                                              },\r\n                                          })\r\n                                    : option.next()\r\n                            }\r\n                            containerClassName=\"flex flex-col space-y-4\"\r\n                            display={(option, i) => {\r\n                                const className =\r\n                                    \"flex flex-row space-x-3 items-center text-gray-900 h-5\"\r\n                                const children = (\r\n                                    <>\r\n                                        <div\r\n                                            className={classnames(\r\n                                                option.classes ?? \"\"\r\n                                            )}\r\n                                        >\r\n                                            <img\r\n                                                src={option.icon}\r\n                                                alt=\"icon\"\r\n                                                className={\r\n                                                    option.size ?? \"w-5 h-5\"\r\n                                                }\r\n                                            />\r\n                                        </div>\r\n                                        <span className=\"font-bold\">\r\n                                            {option.label}\r\n                                        </span>\r\n                                    </>\r\n                                )\r\n                                return (\r\n                                    <div className={classnames(className)}>\r\n                                        {children}\r\n                                    </div>\r\n                                )\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default AccountMenu\r\n","import classNames from \"classnames\"\r\nimport { FiDownload } from \"react-icons/fi\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\n\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\n\r\nimport { resetAccount, lockApp } from \"../../context/commActions\"\r\nimport { useSelectedAccount } from \"../../context/hooks/useSelectedAccount\"\r\nimport { Classes } from \"../../styles\"\r\nimport useStateLogs from \"../../util/hooks/useStateLogs\"\r\nimport WaitingDialog, {\r\n    useWaitingDialog,\r\n} from \"../../components/dialog/WaitingDialog\"\r\n\r\nconst ResetAccountPage = ({}) => {\r\n    const account = useSelectedAccount()\r\n    const { downloadStateLogsHandler } = useStateLogs()\r\n\r\n    const { isOpen, status, dispatch } = useWaitingDialog()\r\n\r\n    const handleReset = async () => {\r\n        dispatch({\r\n            type: \"open\",\r\n            payload: { status: \"loading\" },\r\n        })\r\n        try {\r\n            await resetAccount(account.address)\r\n            setTimeout(() => {\r\n                dispatch({\r\n                    type: \"setStatus\",\r\n                    payload: { status: \"success\" },\r\n                })\r\n            }, 1000)\r\n        } catch (error) {\r\n            dispatch({\r\n                type: \"setStatus\",\r\n                payload: { status: \"error\" },\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={<PopupHeader title=\"Reset Account\" />}\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        label={\"Reset\"}\r\n                        type=\"reset\"\r\n                        onClick={handleReset}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <WaitingDialog\r\n                status={status}\r\n                open={isOpen}\r\n                titles={{\r\n                    loading: \"Resetting account...\",\r\n                    error: \"Error\",\r\n                    success: \"Success!\",\r\n                }}\r\n                texts={{\r\n                    loading: \"Please wait while the account is being reset...\",\r\n                    error: \"There was an error while resetting the account\",\r\n                    success: `Resetting account was successful.`,\r\n                }}\r\n                onDone={lockApp}\r\n                timeout={1100}\r\n            />\r\n            <div className=\"flex flex-col p-6 space-y-6 w-full\">\r\n                <div className=\"text-sm text-gray-500\">\r\n                    <span>\r\n                        Resetting your account will clear the transaction\r\n                        history and added tokens. You will not need to re-import\r\n                        your seed phrase and your on-chain balance will not\r\n                        change. You will be able to use your account normally.\r\n                    </span>\r\n                    <div className=\"w-full border border-gray-200 rounded-md flex justify-between items-center p-4 py-2 my-6\">\r\n                        <span className=\"text-xs mr-2\">\r\n                            Download state logs for support\r\n                        </span>\r\n                        <button\r\n                            className={classNames(Classes.smallButton, \"px-4\")}\r\n                            onClick={downloadStateLogsHandler}\r\n                        >\r\n                            <FiDownload size={18} />\r\n                        </button>\r\n                    </div>\r\n                    <span>\r\n                        Please download your state logs if you need support\r\n                        before resetting your account.\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default ResetAccountPage\r\n","import { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport * as yup from \"yup\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport { useSelectedAccount } from \"../../context/hooks/useSelectedAccount\"\r\nimport TextInput from \"../../components/input/TextInput\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport { renameAccount } from \"../../context/commActions\"\r\nimport WaitingDialog, {\r\n    useWaitingDialog,\r\n} from \"../../components/dialog/WaitingDialog\"\r\nimport { accountNameExists } from \"../../util/account\"\r\n\r\n// Schema\r\nconst editAccountSchema = yup.object().shape({\r\n    accountName: yup\r\n        .string()\r\n        .trim()\r\n        .required(\"Please enter an account name\")\r\n        .max(40, \"Account name is too long\"),\r\n})\r\ntype editAccountFormData = { accountName: string }\r\nconst EditAccountPage = () => {\r\n    const { accounts, hiddenAccounts } = useBlankState()!\r\n    const account = useSelectedAccount()\r\n    const history = useOnMountHistory()\r\n\r\n    const fromAccountList = history.location.state?.fromAccountList\r\n\r\n    const { status, isOpen, dispatch } = useWaitingDialog()\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        setError,\r\n\r\n        formState: { errors },\r\n    } = useForm<editAccountFormData>({\r\n        resolver: yupResolver(editAccountSchema),\r\n    })\r\n\r\n    const onSubmit = handleSubmit(async (data: editAccountFormData) => {\r\n        try {\r\n            if (accountNameExists(accounts, data.accountName || \"\")) {\r\n                setError(\r\n                    \"accountName\",\r\n                    {\r\n                        message:\r\n                            \"Account name is already in use, please use a different one.\",\r\n                    },\r\n                    {\r\n                        shouldFocus: true,\r\n                    }\r\n                )\r\n                return Promise.reject()\r\n            }\r\n\r\n            if (accountNameExists(hiddenAccounts, data.accountName || \"\")) {\r\n                setError(\r\n                    \"accountName\",\r\n                    {\r\n                        message:\r\n                            \"Account name is already in use on a hidden account, please use a different one.\",\r\n                    },\r\n                    {\r\n                        shouldFocus: true,\r\n                    }\r\n                )\r\n                return Promise.reject()\r\n            }\r\n\r\n            dispatch({\r\n                type: \"open\",\r\n                payload: { status: \"loading\" },\r\n            })\r\n\r\n            await renameAccount(account.address, data.accountName)\r\n\r\n            dispatch({ type: \"setStatus\", payload: { status: \"success\" } })\r\n        } catch {\r\n            setError(\r\n                \"accountName\",\r\n                {\r\n                    message: \"Error renaming the account\",\r\n                },\r\n                {\r\n                    shouldFocus: true,\r\n                }\r\n            )\r\n\r\n            dispatch({ type: \"setStatus\", payload: { status: \"error\" } })\r\n\r\n            return Promise.reject()\r\n        }\r\n    })\r\n\r\n    return (\r\n        <PopupLayout\r\n            submitOnEnter={{\r\n                onSubmit,\r\n                isFormValid: Object.keys(errors).length === 0,\r\n            }}\r\n            header={\r\n                <PopupHeader\r\n                    title=\"Edit Account\"\r\n                    disabled={isOpen}\r\n                    onBack={() =>\r\n                        history.push({\r\n                            pathname: \"/accounts/menu\",\r\n                            state: {\r\n                                fromAccountList,\r\n                            },\r\n                        })\r\n                    }\r\n                />\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        type=\"button\"\r\n                        isLoading={isOpen && status === \"loading\"}\r\n                        label={\"Save\"}\r\n                        onClick={onSubmit}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <WaitingDialog\r\n                status={status}\r\n                open={isOpen}\r\n                titles={{\r\n                    loading: \"Renaming...\",\r\n                    success: \"Congratulations\",\r\n                    error: \"Error\",\r\n                }}\r\n                timeout={2900}\r\n                texts={{\r\n                    loading: \"Account is being renamed...\",\r\n                    success: \"Your changes have been succesfully saved!\",\r\n                    error: errors.accountName?.message ?? \"\",\r\n                }}\r\n                onDone={() => {\r\n                    if (status === \"error\") {\r\n                        dispatch({ type: \"close\" })\r\n                        return\r\n                    }\r\n\r\n                    history.push({\r\n                        pathname: \"/accounts/menu\",\r\n                        state: { fromAccountList },\r\n                    })\r\n                }}\r\n            />\r\n            <div className=\"flex flex-col justify-between flex-1 h-full\">\r\n                <div className=\"flex flex-col flex-1 p-6 space-y-1\">\r\n                    <TextInput\r\n                        appearance=\"outline\"\r\n                        label=\"Account Name\"\r\n                        {...register(\"accountName\")}\r\n                        placeholder={account.name}\r\n                        error={errors.accountName?.message}\r\n                        autoFocus={true}\r\n                        maxLength={40}\r\n                        defaultValue={account.name}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default EditAccountPage\r\n","import type { DappRequestParams } from \"@block-wallet/background/utils/types/ethereum\"\r\nimport AccountIcon from \"../../components/icons/AccountIcon\"\r\nimport CopyTooltip from \"../../components/label/Ð¡opyToClipboardTooltip\"\r\nimport Divider from \"../../components/Divider\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport { useState, useEffect, FunctionComponent } from \"react\"\r\nimport blankIcon from \"../../assets/images/logo.svg\"\r\nimport { AiFillQuestionCircle } from \"react-icons/ai\"\r\nimport { Classes } from \"../../styles/classes\"\r\nimport { DappReq } from \"../../context/hooks/useDappRequest\"\r\nimport { capitalize } from \"../../util/capitalize\"\r\nimport { confirmDappRequest, getTokenBalance } from \"../../context/commActions\"\r\nimport { formatHash, formatName } from \"../../util/formatAccount\"\r\nimport { formatNumberLength } from \"../../util/formatNumberLength\"\r\nimport { formatUnits } from \"@ethersproject/units\"\r\nimport { getAccountColor } from \"../../util/getAccountColor\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport { useTokensList } from \"../../context/hooks/useTokensList\"\r\nimport { useSelectedAccount } from \"../../context/hooks/useSelectedAccount\"\r\nimport WarningTip from \"../../components/label/WarningTip\"\r\nimport { formatRounded } from \"../../util/formatRounded\"\r\nimport unknownTokenIcon from \"../../assets/images/unknown_token.svg\"\r\nimport GenericTooltip from \"../../components/label/GenericTooltip\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport { DappRequestProps, DappRequest } from \"./DappRequest\"\r\nimport WaitingDialog, {\r\n    useWaitingDialog,\r\n} from \"../../components/dialog/WaitingDialog\"\r\nimport { DAPP_FEEDBACK_WINDOW_TIMEOUT } from \"../../util/constants\"\r\nimport DAppPopupHeader from \"../../components/dApp/DAppPopupHeader\"\r\nimport DAppOrigin from \"../../components/dApp/DAppOrigin\"\r\n\r\nconst UNKNOWN_BALANCE = \"UNKNOWN_BALANCE\"\r\nconst IS_BASE64_IMAGE = \"IS_BASE64_IMAGE\"\r\n\r\nconst WatchAssetPage = () => {\r\n    return (\r\n        <DappRequest\r\n            requestType={DappReq.ASSET}\r\n            layoutRender={(props: DappRequestProps) => {\r\n                return <WatchAsset {...props} />\r\n            }}\r\n        />\r\n    )\r\n}\r\n\r\nconst WatchAsset: FunctionComponent<DappRequestProps> = ({\r\n    requestCount,\r\n    requestId,\r\n    dappReqData,\r\n    siteMetadata,\r\n}) => {\r\n    const network = useSelectedNetwork()\r\n    const { accounts } = useBlankState()!\r\n    const selectedAccount = useSelectedAccount()\r\n    const { nativeToken } = useTokensList()\r\n    const { status, isOpen, dispatch, texts, titles } = useWaitingDialog()\r\n\r\n    const [copied, setCopied] = useState(false)\r\n    const [balance, setBalance] = useState(\"\")\r\n    const [isImageSaved, setIsImageSaved] = useState(false)\r\n\r\n    const {\r\n        params: token,\r\n        activeAccount,\r\n        isUpdate,\r\n        savedToken,\r\n    } = dappReqData as DappRequestParams[DappReq.ASSET]\r\n\r\n    // Default to selected account if no active account is found for the dapp\r\n    const accountData = accounts[activeAccount ?? selectedAccount.address]\r\n\r\n    const isBase64Image = token.image === IS_BASE64_IMAGE\r\n\r\n    const assetImageSrc = (): string => {\r\n        if (isBase64Image || !isImageSaved) {\r\n            return unknownTokenIcon\r\n        }\r\n\r\n        return token.image ?? unknownTokenIcon\r\n    }\r\n\r\n    const addToken = async () => {\r\n        try {\r\n            dispatch({ type: \"open\", payload: { status: \"loading\" } })\r\n            await confirmDappRequest<DappReq.ASSET>(requestId, true, {\r\n                symbol: token.symbol,\r\n                decimals: token.decimals,\r\n                image: assetImageSrc(),\r\n            })\r\n            dispatch({ type: \"setStatus\", payload: { status: \"success\" } })\r\n        } catch (err) {\r\n            dispatch({\r\n                type: \"setStatus\",\r\n                payload: {\r\n                    status: \"error\",\r\n                    texts: {\r\n                        error: err.message,\r\n                    },\r\n                },\r\n            })\r\n        }\r\n    }\r\n\r\n    const reject = async () => {\r\n        dispatch({\r\n            type: \"open\",\r\n            payload: {\r\n                status: \"loading\",\r\n                titles: { loading: \"Rejecting...\" },\r\n                texts: { loading: \"Rejecting watch asset request...\" },\r\n            },\r\n        })\r\n        await new Promise<void>((resolve) => {\r\n            setTimeout(resolve, 300)\r\n        })\r\n        await confirmDappRequest(requestId, false)\r\n        dispatch({\r\n            type: \"setStatus\",\r\n            payload: {\r\n                status: \"error\",\r\n                titles: { error: \"Request Rejected\" },\r\n                texts: {\r\n                    error: \"Watch Asset request was rejected.\",\r\n                },\r\n            },\r\n        })\r\n    }\r\n\r\n    const copyAssetAddress = async () => {\r\n        await navigator.clipboard.writeText(token.address)\r\n        setCopied(true)\r\n        await new Promise((resolve) => setTimeout(resolve, 1000))\r\n        setCopied(false)\r\n    }\r\n\r\n    useEffect(() => {\r\n        getTokenBalance(token.address, accountData.address)\r\n            .then((fetchedBalance) => {\r\n                setBalance(\r\n                    formatRounded(\r\n                        formatUnits(fetchedBalance || \"0\", token.decimals)\r\n                    )\r\n                )\r\n            })\r\n            .catch((error: Error) => {\r\n                // If this happens the asset doesn't exist\r\n                // (At least on current chain)\r\n                if (error.message.includes(\"code=CALL_EXCEPTION\")) {\r\n                    setBalance(UNKNOWN_BALANCE)\r\n                }\r\n            })\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    const UpdateAssetLayout = () => {\r\n        return (\r\n            <>\r\n                <div className=\"px-6 pt-3\">\r\n                    <WarningTip\r\n                        text=\"Updating existing assets could put your privacy at risk or be used to scam you.\"\r\n                        fontSize=\"text-xs\"\r\n                    />\r\n                </div>\r\n                <div className=\"flex flex-row items-center px-6 py-3\">\r\n                    <div className=\"flex flex-row items-center justify-center w-10 h-10 rounded-full bg-primary-100\">\r\n                        <img\r\n                            alt=\"icon\"\r\n                            src={\r\n                                savedToken!.image\r\n                                    ? savedToken!.image\r\n                                    : blankIcon\r\n                            }\r\n                        />\r\n                    </div>\r\n                    <button\r\n                        type=\"button\"\r\n                        className=\"relative flex flex-col group space-y-1 ml-4\"\r\n                        onClick={() => copyAssetAddress()}\r\n                    >\r\n                        <span className=\"text-sm font-bold\">\r\n                            {savedToken!.symbol}\r\n                        </span>\r\n                        <span className=\"text-xs text-gray-600\">\r\n                            {formatHash(savedToken!.address)}\r\n                        </span>\r\n                        <CopyTooltip copied={copied} />\r\n                    </button>\r\n                </div>\r\n                <span className=\"font-medium px-6 text-xxs text-gray-500\">\r\n                    WITH ASSET:\r\n                </span>\r\n            </>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <DAppPopupHeader\r\n                    title={`${isUpdate ? \"Update\" : \"Add\"} Asset`}\r\n                    requestCount={requestCount}\r\n                />\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        onClick={reject}\r\n                        buttonClass={Classes.liteButton}\r\n                        label=\"Reject\"\r\n                    ></ButtonWithLoading>\r\n                    <ButtonWithLoading\r\n                        label={`${isUpdate ? \"Update\" : \"Add\"} asset`}\r\n                        onClick={addToken}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <WaitingDialog\r\n                status={status}\r\n                open={isOpen}\r\n                titles={{\r\n                    loading: titles?.loading || \"Connecting...\",\r\n                    success: titles?.success || \"Success\",\r\n                    error: titles?.error || \"Error\",\r\n                }}\r\n                texts={{\r\n                    loading: texts?.loading || \"Loading...\",\r\n                    success:\r\n                        texts?.success ||\r\n                        `You've ${isUpdate ? \"updated\" : \"added\"} the asset.`,\r\n                    error:\r\n                        texts?.error ||\r\n                        `There was an error ${\r\n                            isUpdate ? \"updating\" : \"adding\"\r\n                        } the asset.`,\r\n                }}\r\n                onDone={() => {\r\n                    dispatch({ type: \"close\" })\r\n                }}\r\n                timeout={DAPP_FEEDBACK_WINDOW_TIMEOUT}\r\n                clickOutsideToClose={false}\r\n                hideButton\r\n            />\r\n            <DAppOrigin\r\n                name={siteMetadata.name}\r\n                iconURL={siteMetadata.iconURL}\r\n            />\r\n            <Divider />\r\n            {isUpdate ? UpdateAssetLayout() : null}\r\n            <div className=\"flex flex-row items-center px-6 pt-6 pb-3\">\r\n                <div className=\"flex flex-row items-center justify-center w-10 h-10 rounded-full bg-primary-100\">\r\n                    <img alt=\"icon\" src={assetImageSrc()} />\r\n                </div>\r\n                <button\r\n                    type=\"button\"\r\n                    className=\"relative ml-4 flex flex-col group space-y-1\"\r\n                    onClick={() => copyAssetAddress()}\r\n                >\r\n                    <span className=\"text-sm font-bold\">{token.symbol}</span>\r\n                    <span className=\"text-xs text-gray-600\">\r\n                        {formatHash(token.address)}\r\n                    </span>\r\n                    <CopyTooltip copied={copied} />\r\n                </button>\r\n                <div className=\"flex flex-col ml-auto h-full\">\r\n                    <span className=\"text-sm font-bold mb-auto text-left\">\r\n                        Balance\r\n                    </span>\r\n                    {balance === UNKNOWN_BALANCE ? (\r\n                        <div className=\"flex flex-row items-end\">\r\n                            <span className=\"pr-1 text-xs text-gray-600\">\r\n                                Unknown\r\n                            </span>\r\n                            <GenericTooltip\r\n                                bottom\r\n                                className=\"right-0\"\r\n                                content={\r\n                                    <p className=\"w-40 text-center\">\r\n                                        Make sure this address corresponds to a\r\n                                        valid {capitalize(network.name)} asset.\r\n                                    </p>\r\n                                }\r\n                            >\r\n                                <AiFillQuestionCircle\r\n                                    size={18}\r\n                                    className=\"cursor-pointer text-primary-200 hover:text-primary-300\"\r\n                                />\r\n                            </GenericTooltip>\r\n                        </div>\r\n                    ) : (\r\n                        <span className=\"text-xs text-gray-600\">\r\n                            {balance} {token.symbol}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            </div>\r\n            <span className=\"font-medium px-6 pt-3 text-xxs text-gray-500\">\r\n                {isUpdate ? \"IN \" : \"TO \"} ACCOUNT:\r\n            </span>\r\n            <div className=\"flex flex-col px-6 pb-6 pt-3\">\r\n                <div className=\"flex flex-row items-center space-x-4\">\r\n                    <AccountIcon\r\n                        className=\"w-10 h-10\"\r\n                        fill={getAccountColor(accountData.address)}\r\n                    />\r\n                    <div className=\"relative flex flex-col group space-y-1\">\r\n                        <span className=\"text-sm font-bold\">\r\n                            {formatName(accountData.name, 15)}\r\n                            {\" (\"}\r\n                            {formatNumberLength(\r\n                                formatUnits(\r\n                                    nativeToken.balance,\r\n                                    nativeToken.token.decimals\r\n                                ),\r\n                                5\r\n                            )}\r\n                            {` ${nativeToken.token.symbol})`}\r\n                        </span>\r\n                        <span className=\"text-xs text-gray-600\">\r\n                            {formatHash(accountData.address)}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <Divider />\r\n            <div className=\"flex flex-col px-6 py-3 space-y-2 text-xs text-gray-800 break-words\">\r\n                <div className=\"flex flex-col space-y-0.5\">\r\n                    <span className=\"font-bold\">Decimals</span>\r\n                    <span className=\"text-gray-600\">{token.decimals}</span>\r\n                </div>\r\n                {token!.image && !isBase64Image ? (\r\n                    <div className=\"flex flex-col space-y-0.5\">\r\n                        <span className=\"font-bold pt-1\">Image URL</span>\r\n                        <span className=\"text-gray-600 pb-2\">\r\n                            {token!.image}\r\n                        </span>\r\n                        <WarningTip\r\n                            text={\r\n                                <span>\r\n                                    <span className=\"font-bold\">\r\n                                        Attention!{\" \"}\r\n                                    </span>\r\n                                    Your IP address will be exposed to this\r\n                                    domain if you choose to save the image URL.\r\n                                </span>\r\n                            }\r\n                            fontSize=\"text-xs\"\r\n                        />\r\n                        <div className=\"pt-2 flex flex-row items-center\">\r\n                            <input\r\n                                id=\"save_asset_image_checkbox\"\r\n                                type=\"checkbox\"\r\n                                checked={isImageSaved}\r\n                                className={Classes.checkbox}\r\n                                onChange={() => {\r\n                                    setIsImageSaved(!isImageSaved)\r\n                                }}\r\n                            />\r\n                            <label\r\n                                className=\"text-xs pl-2\"\r\n                                htmlFor=\"save_asset_image_checkbox\"\r\n                            >\r\n                                Save image URL\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                ) : null}\r\n                {isBase64Image && (\r\n                    <div className=\"text-xs py-2\">\r\n                        <WarningTip\r\n                            text={\r\n                                \"BlockWallet does not currently support Base64 encoded images. It will be replaced by a default image.\"\r\n                            }\r\n                            fontSize=\"text-xs\"\r\n                        />\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default WatchAssetPage\r\n","import { useMemo, useState, useEffect, useCallback } from \"react\"\r\nimport * as yup from \"yup\"\r\nimport { InferType } from \"yup\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { formatUnits, parseUnits } from \"@ethersproject/units\"\r\nimport classnames from \"classnames\"\r\n\r\n// Components\r\nimport PopupFooter from \"./popup/PopupFooter\"\r\nimport PopupHeader from \"./popup/PopupHeader\"\r\nimport PopupLayout from \"./popup/PopupLayout\"\r\nimport { ButtonWithLoading } from \"./button/ButtonWithLoading\"\r\nimport ClickableText from \"./button/ClickableText\"\r\nimport TextInput from \"./input/TextInput\"\r\nimport DetailsDialog from \"./dialog/DetailsDialog\"\r\nimport WaitingDialog from \"./dialog/WaitingDialog\"\r\n\r\n// Assets\r\nimport eth from \"../assets/images/icons/ETH.svg\"\r\n\r\n// Hooks\r\nimport { useOnMountHistory } from \"../context/hooks/useOnMount\"\r\nimport { useSelectedNetwork } from \"../context/hooks/useSelectedNetwork\"\r\nimport { useGasPriceData } from \"../context/hooks/useGasPriceData\"\r\nimport { useSelectedAccountBalance } from \"../context/hooks/useSelectedAccountBalance\"\r\n\r\n// Comms\r\nimport {\r\n    HardwareWalletOpTypes,\r\n    TransactionStatus,\r\n    TransactionType,\r\n} from \"../context/commTypes\"\r\n\r\nimport { rejectReplacementTransaction } from \"../context/commActions\"\r\n\r\n// Utils\r\nimport { getTransactionType } from \"../util/getTransactionType\"\r\nimport {\r\n    makeStringNumberFormField,\r\n    handleChangeAmountGwei,\r\n    handleChangeAmountWei,\r\n    handleKeyDown,\r\n} from \"../util/form\"\r\nimport formatTransactionValue from \"../util/formatTransactionValue\"\r\nimport {\r\n    FeeMarketEIP1559Values,\r\n    GasPriceValue,\r\n} from \"@block-wallet/background/controllers/transactions/TransactionController\"\r\nimport { TransactionFeeData } from \"@block-wallet/background/controllers/erc-20/transactions/SignedTransaction\"\r\nimport { useTransactionById } from \"../context/hooks/useTransactionById\"\r\nimport { useTransactionWaitingDialog } from \"../context/hooks/useTransactionWaitingDialog\"\r\nimport { useSelectedAccount } from \"../context/hooks/useSelectedAccount\"\r\nimport useCheckAccountDeviceLinked from \"../util/hooks/useCheckAccountDeviceLinked\"\r\nimport HardwareDeviceNotLinkedDialog from \"./dialog/HardwareDeviceNotLinkedDialog\"\r\nimport { getDeviceFromAccountType } from \"../util/hardwareDevice\"\r\n\r\n// Schema\r\nexport const formSchema = yup.object({\r\n    gasLimit: makeStringNumberFormField(\"Gas limit is required\", false),\r\n    gasPrice: makeStringNumberFormField(\"Gas price is required\", true),\r\n    maxPriorityFeePerGas: makeStringNumberFormField(\r\n        \"Max tip is required\",\r\n        true\r\n    ),\r\n    maxFeePerGas: makeStringNumberFormField(\"Max fee is required\", false),\r\n})\r\nexport type formData = InferType<typeof formSchema>\r\n\r\ntype fees = {\r\n    gasLimit: BigNumber\r\n    gasPrice: BigNumber\r\n    maxPriorityFeePerGas: BigNumber\r\n    maxFeePerGas: BigNumber\r\n}\r\n\r\ntype CancelAndSpeedUpProps = {\r\n    title: string\r\n    type: \"cancel\" | \"speed up\"\r\n    children: (\r\n        type: TransactionType,\r\n        oldFees: fees,\r\n        newFees: fees\r\n    ) => React.ReactNode\r\n    getSuggestedFees: (\r\n        id: string\r\n    ) => Promise<GasPriceValue | FeeMarketEIP1559Values>\r\n    submitAction: (\r\n        id: string,\r\n        gasLimit: BigNumber,\r\n        fees: FeeMarketEIP1559Values | GasPriceValue\r\n    ) => Promise<void>\r\n}\r\n\r\nconst calcGasPrice = (\r\n    type: TransactionType,\r\n    fees: Omit<fees, \"maxPriorityFeePerGas\">\r\n) => {\r\n    return (\r\n        type !== TransactionType.FEE_MARKET_EIP1559\r\n            ? fees.gasPrice\r\n            : fees.maxFeePerGas\r\n    ).mul(fees.gasLimit)\r\n}\r\n\r\nconst CancelAndSpeedUpComponent = ({\r\n    title,\r\n    type,\r\n    children,\r\n    getSuggestedFees,\r\n    submitAction,\r\n}: CancelAndSpeedUpProps) => {\r\n    const history: any = useOnMountHistory()\r\n    const {\r\n        nativeCurrency: networkNativeCurrency,\r\n        iconUrls,\r\n        gasLowerCap,\r\n    } = useSelectedNetwork()\r\n    const { estimatedBaseFee: baseFeePerGas } = useGasPriceData()\r\n    const currentBalance = BigNumber.from(useSelectedAccountBalance())\r\n    const { accountType, address } = useSelectedAccount()\r\n\r\n    const [hasDialog, setHasDialog] = useState(false)\r\n    const [isLoading, setIsLoading] = useState(true)\r\n    const [customErrors, setCustomErrors] = useState({\r\n        maxPriorityFeePerGas: \"\",\r\n        maxFeePerGas: \"\",\r\n        gasPrice: \"\",\r\n    })\r\n    const [warning, setWarning] = useState({\r\n        gasLimit: \"\",\r\n        maxPriorityFeePerGas: \"\",\r\n        maxFeePerGas: \"\",\r\n        gasPrice: \"\",\r\n    })\r\n\r\n    const txObj = useTransactionById(\r\n        (\r\n            history.location.state as {\r\n                txId: string\r\n            }\r\n        ).txId\r\n    )\r\n\r\n    if (!txObj.transaction) {\r\n        history.push(\"/\")\r\n    }\r\n\r\n    const transaction = txObj.transaction!\r\n    const [currentReplacementTxId, setCurrentReplacementTxId] = useState<\r\n        string | undefined\r\n    >(transaction?.replacedBy)\r\n\r\n    const { transaction: replacementTx } = useTransactionById(\r\n        currentReplacementTxId\r\n    )\r\n\r\n    useEffect(() => {\r\n        if (!currentReplacementTxId && transaction?.replacedBy) {\r\n            setCurrentReplacementTxId(transaction.replacedBy)\r\n        }\r\n    }, [transaction.replacedBy, currentReplacementTxId])\r\n\r\n    useEffect(() => {\r\n        // Tx was either rejected or submitted when the pop-up was closed.\r\n        // If we opened back the pop-up, and there aren't any pending transactions,\r\n        // we should redirect to the home page (this is only checked on component mount)\r\n        if (\r\n            (replacementTx &&\r\n                [\r\n                    TransactionStatus.SUBMITTED,\r\n                    TransactionStatus.CONFIRMED,\r\n                    TransactionStatus.FAILED,\r\n                    TransactionStatus.DROPPED,\r\n                ].includes(replacementTx?.status)) ||\r\n            transaction?.status === TransactionStatus.CONFIRMED\r\n        ) {\r\n            history.push(\"/\")\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    const {\r\n        oldGasLimit,\r\n        oldGasPrice,\r\n        oldMaxFeePerGas,\r\n        oldMaxPriorityFeePerGas,\r\n    } = useMemo(() => {\r\n        const params = transaction?.transactionParams\r\n\r\n        return {\r\n            oldGasLimit: BigNumber.from(params?.gasLimit ?? 1),\r\n            oldGasPrice: BigNumber.from(params?.gasPrice ?? 1),\r\n            oldMaxFeePerGas: BigNumber.from(params?.maxFeePerGas ?? 1),\r\n            oldMaxPriorityFeePerGas: BigNumber.from(\r\n                params?.maxPriorityFeePerGas ?? 1\r\n            ),\r\n        }\r\n    }, [transaction])\r\n\r\n    const [newFees, setNewFees] = useState({\r\n        gasLimit: formatUnits(oldGasLimit, \"wei\"),\r\n        gasPrice: formatUnits(oldGasPrice, \"gwei\"),\r\n        maxPriorityFeePerGas: formatUnits(oldMaxPriorityFeePerGas, \"gwei\"),\r\n        maxFeePerGas: formatUnits(oldMaxFeePerGas, \"gwei\"),\r\n    })\r\n\r\n    const [suggestedAmount, setSuggestedAmount] = useState({\r\n        maxPriorityFeePerGas: oldMaxPriorityFeePerGas,\r\n        maxFeePerGas: oldMaxFeePerGas,\r\n        gasPrice: oldGasPrice,\r\n    })\r\n\r\n    const transactionType = getTransactionType(transaction.transactionParams)\r\n\r\n    const {\r\n        setValue,\r\n        register,\r\n        getValues,\r\n\r\n        formState: { errors },\r\n    } = useForm<formData>({\r\n        resolver: yupResolver(formSchema),\r\n        defaultValues: {\r\n            gasLimit: formatUnits(\r\n                transaction.transactionParams.gasLimit ?? BigNumber.from(1),\r\n                \"wei\"\r\n            ),\r\n            gasPrice: \"1\",\r\n            maxFeePerGas: \"1\",\r\n            maxPriorityFeePerGas: \"1\",\r\n        },\r\n    })\r\n\r\n    const { status, isOpen, dispatch, texts, titles, closeDialog, gifs } =\r\n        useTransactionWaitingDialog(\r\n            replacementTx\r\n                ? {\r\n                      id: replacementTx?.id,\r\n                      status: replacementTx.status,\r\n                      error: replacementTx.error as Error,\r\n                      epochTime: replacementTx?.approveTime,\r\n                  }\r\n                : undefined,\r\n            type === \"cancel\"\r\n                ? HardwareWalletOpTypes.SIGN_CANCEL\r\n                : HardwareWalletOpTypes.SIGN_SPEEDUP,\r\n            accountType,\r\n            {\r\n                reject: useCallback(() => {\r\n                    if (replacementTx?.id) {\r\n                        rejectReplacementTransaction(replacementTx.id)\r\n                    }\r\n                }, [replacementTx?.id]),\r\n            }\r\n        )\r\n\r\n    const { checkDeviceIsLinked, isDeviceUnlinked, resetDeviceLinkStatus } =\r\n        useCheckAccountDeviceLinked()\r\n\r\n    const [error, setError] = useState<\r\n        | {\r\n              type: \"feeLow\" | \"mined\" | \"notEnoughFunds\"\r\n              message: string\r\n          }\r\n        | undefined\r\n    >({\r\n        type: \"feeLow\",\r\n        message: \"\",\r\n    })\r\n\r\n    useEffect(() => {\r\n        setIsLoading(true)\r\n\r\n        getSuggestedFees(transaction.id)\r\n            .then((price) => {\r\n                if (transactionType !== TransactionType.FEE_MARKET_EIP1559) {\r\n                    const { gasPrice } = price as GasPriceValue\r\n                    setNewFees({\r\n                        ...newFees,\r\n                        gasPrice: formatUnits(gasPrice, \"gwei\"),\r\n                    })\r\n\r\n                    setValue(\"gasPrice\", formatUnits(gasPrice, \"gwei\"))\r\n                    setSuggestedAmount({\r\n                        ...suggestedAmount,\r\n                        gasPrice,\r\n                    })\r\n                } else {\r\n                    const { maxFeePerGas, maxPriorityFeePerGas } =\r\n                        price as FeeMarketEIP1559Values\r\n\r\n                    setNewFees({\r\n                        ...newFees,\r\n                        maxFeePerGas: formatUnits(maxFeePerGas, \"gwei\"),\r\n                        maxPriorityFeePerGas: formatUnits(\r\n                            maxPriorityFeePerGas,\r\n                            \"gwei\"\r\n                        ),\r\n                    })\r\n\r\n                    setValue(\"maxFeePerGas\", formatUnits(maxFeePerGas, \"gwei\"))\r\n                    setValue(\r\n                        \"maxPriorityFeePerGas\",\r\n                        formatUnits(maxPriorityFeePerGas, \"gwei\")\r\n                    )\r\n\r\n                    setSuggestedAmount({\r\n                        ...suggestedAmount,\r\n                        maxPriorityFeePerGas,\r\n                        maxFeePerGas,\r\n                    })\r\n                }\r\n\r\n                setIsLoading(false)\r\n            })\r\n            .catch((e) => {\r\n                console.log(e)\r\n\r\n                history.push({\r\n                    pathname: \"/home\",\r\n                    state: {\r\n                        error: \"We couldn't find the transaction.\",\r\n                    },\r\n                })\r\n            })\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [transaction.id])\r\n\r\n    const onSubmit = async (e: any) => {\r\n        e.preventDefault()\r\n\r\n        const data = getParsedValues()\r\n\r\n        dispatch({\r\n            type: \"open\",\r\n            payload: { status: \"loading\" },\r\n        })\r\n\r\n        const isLinked = await checkDeviceIsLinked()\r\n        if (!isLinked) {\r\n            closeDialog()\r\n            return\r\n        }\r\n\r\n        let gasValues: GasPriceValue | FeeMarketEIP1559Values\r\n\r\n        if (transactionType !== TransactionType.FEE_MARKET_EIP1559) {\r\n            gasValues = { gasPrice: data.gasPrice }\r\n        } else {\r\n            gasValues = {\r\n                maxFeePerGas: data.maxFeePerGas,\r\n                maxPriorityFeePerGas: data.maxPriorityFeePerGas,\r\n            }\r\n        }\r\n\r\n        submitAction(transaction.id, data.gasLimit, gasValues).catch(\r\n            (e: any) => {\r\n                const isFeeLow = e.message.includes(\"replacement fee too low\")\r\n                const notEnoughFunds = e.message.includes(\"insufficient funds\")\r\n\r\n                setError({\r\n                    type: isFeeLow\r\n                        ? \"feeLow\"\r\n                        : notEnoughFunds\r\n                        ? \"notEnoughFunds\"\r\n                        : \"mined\",\r\n                    message: isFeeLow\r\n                        ? \"The network rejected the transaction because fees are too low.\"\r\n                        : notEnoughFunds\r\n                        ? `You don't have enough funds to ${type} the transaction.`\r\n                        : `The transaction that you are trying to ${type} has already been mined.`,\r\n                })\r\n            }\r\n        )\r\n    }\r\n\r\n    const transfer = transaction.transferType ?? {\r\n        amount: transaction.transactionParams.value ?? BigNumber.from(\"0\"),\r\n        currency: networkNativeCurrency.symbol,\r\n        decimals: networkNativeCurrency.decimals,\r\n        logo: iconUrls ? iconUrls[0] : eth,\r\n    }\r\n\r\n    const validateFees = (fees: TransactionFeeData) => {\r\n        const { maxFeePerGas, maxPriorityFeePerGas, gasPrice, gasLimit } = fees\r\n\r\n        const newCustomErrors = { ...customErrors }\r\n        const newWarning = { ...warning }\r\n\r\n        newWarning.gasLimit = gasLimit!.lt(oldGasLimit!)\r\n            ? `Gas limit lower than the old one of ${formatUnits(\r\n                  oldGasLimit,\r\n                  \"wei\"\r\n              )} WEI`\r\n            : \"\"\r\n\r\n        if (transactionType !== TransactionType.FEE_MARKET_EIP1559) {\r\n            newCustomErrors.gasPrice = gasPrice!.lte(oldGasPrice!)\r\n                ? \"Must be higher than the old gas price\"\r\n                : \"\"\r\n\r\n            newWarning.gasPrice = gasPrice!.lt(suggestedAmount.gasPrice)\r\n                ? `Gas price is lower than suggested price of ${formatUnits(\r\n                      suggestedAmount.gasPrice,\r\n                      \"gwei\"\r\n                  )} GWEI`\r\n                : gasLowerCap &&\r\n                  gasLowerCap.gasPrice &&\r\n                  gasPrice!.lt(gasLowerCap.gasPrice)\r\n                ? \"Gas price is lower than network limit\"\r\n                : \"\"\r\n        } else {\r\n            const baseFee = BigNumber.from(baseFeePerGas)\r\n\r\n            newCustomErrors.maxPriorityFeePerGas = maxPriorityFeePerGas!.lte(\r\n                oldMaxPriorityFeePerGas!\r\n            )\r\n                ? \"Must be higher than the old max tip\"\r\n                : \"\"\r\n\r\n            newWarning.maxPriorityFeePerGas = maxPriorityFeePerGas!.lt(\r\n                suggestedAmount.maxPriorityFeePerGas\r\n            )\r\n                ? `Lower than suggested tip of ${formatUnits(\r\n                      suggestedAmount.maxPriorityFeePerGas,\r\n                      \"gwei\"\r\n                  )} GWEI`\r\n                : gasLowerCap &&\r\n                  gasLowerCap.maxPriorityFeePerGas &&\r\n                  maxPriorityFeePerGas!.lt(gasLowerCap.maxPriorityFeePerGas)\r\n                ? \"Tip lower than network limit\"\r\n                : \"\"\r\n\r\n            newCustomErrors.maxFeePerGas = (() => {\r\n                if (maxFeePerGas!.lte(oldMaxFeePerGas!))\r\n                    return \"Must be higher than the old max price\"\r\n                else if (maxFeePerGas!.lt(maxPriorityFeePerGas!))\r\n                    return \"Must be higher than the max tip\"\r\n                else return \"\"\r\n            })()\r\n\r\n            newWarning.maxFeePerGas = (() => {\r\n                if (\r\n                    gasLowerCap &&\r\n                    gasLowerCap.maxPriorityFeePerGas &&\r\n                    maxFeePerGas!.lt(gasLowerCap.maxPriorityFeePerGas)\r\n                )\r\n                    return \"Max fee lower than network limit\"\r\n                else if (maxFeePerGas!.lt(baseFee.add(maxPriorityFeePerGas!)))\r\n                    return \"Max fee lower than base fee + tip\"\r\n                else if (maxFeePerGas!.lt(suggestedAmount.maxFeePerGas))\r\n                    return `Lower than suggested max fee of ${formatUnits(\r\n                        suggestedAmount.maxFeePerGas,\r\n                        \"gwei\"\r\n                    )} GWEI`\r\n                else return \"\"\r\n            })()\r\n        }\r\n\r\n        setWarning(newWarning)\r\n        setCustomErrors(newCustomErrors)\r\n    }\r\n\r\n    const getParsedValues = () => {\r\n        const values = getValues()\r\n\r\n        return {\r\n            gasLimit: parseUnits(values.gasLimit || \"0\", \"wei\"),\r\n            gasPrice: parseUnits(values.gasPrice || \"0\", \"gwei\"),\r\n            maxPriorityFeePerGas: parseUnits(\r\n                values.maxPriorityFeePerGas || \"0\",\r\n                \"gwei\"\r\n            ),\r\n            maxFeePerGas: parseUnits(values.maxFeePerGas || \"0\", \"gwei\"),\r\n        }\r\n    }\r\n\r\n    const notEnoughFunds =\r\n        type === \"speed up\" &&\r\n        currentBalance\r\n            .sub(BigNumber.from(transaction.transactionParams.value ?? \"0\"))\r\n            .sub(\r\n                calcGasPrice(transactionType, {\r\n                    gasLimit: oldGasLimit,\r\n                    gasPrice: oldGasPrice,\r\n                    maxFeePerGas: oldMaxFeePerGas,\r\n                })\r\n            )\r\n            .lt(\r\n                calcGasPrice(transactionType, {\r\n                    gasLimit: parseUnits(newFees.gasLimit || \"0\", \"wei\"),\r\n                    gasPrice: parseUnits(newFees.gasPrice || \"0\", \"gwei\"),\r\n                    maxFeePerGas: parseUnits(\r\n                        newFees.maxFeePerGas || \"0\",\r\n                        \"gwei\"\r\n                    ),\r\n                })\r\n            )\r\n\r\n    useEffect(() => {\r\n        if (!notEnoughFunds && error?.type !== \"notEnoughFunds\") return\r\n\r\n        if (!notEnoughFunds && error?.type === \"notEnoughFunds\")\r\n            setError(undefined)\r\n        else if (notEnoughFunds && error?.type !== \"notEnoughFunds\")\r\n            setError({\r\n                type: \"notEnoughFunds\",\r\n                message: `Not enough funds to ${type} the transaction`,\r\n            })\r\n    }, [error, notEnoughFunds, type])\r\n\r\n    const { ref: gasLimitRef } = register(\"gasLimit\")\r\n    const { ref: gasPriceRef } = register(\"gasPrice\")\r\n    const { ref: maxPriorityFeePerGasRef } = register(\"maxPriorityFeePerGas\")\r\n    const { ref: maxFeePerGasRef } = register(\"maxFeePerGas\")\r\n\r\n    return (\r\n        <>\r\n            <DetailsDialog\r\n                open={hasDialog}\r\n                title=\"Transaction details\"\r\n                onClose={() => setHasDialog(false)}\r\n                options={[\r\n                    {\r\n                        title: \"To\",\r\n                        content: transaction.transactionParams.to!,\r\n                        expandable: true,\r\n                    },\r\n                    {\r\n                        title: \"Value\",\r\n                        content: formatTransactionValue(transfer, true, 5).join(\r\n                            \" \"\r\n                        ),\r\n                    },\r\n                    {\r\n                        title: \"Original gas limit\",\r\n                        content: oldGasLimit.gt(0)\r\n                            ? `${formatUnits(oldGasLimit, \"wei\")}`\r\n                            : undefined,\r\n                    },\r\n\r\n                    {\r\n                        title: \"Original gas price\",\r\n                        content:\r\n                            transactionType !==\r\n                            TransactionType.FEE_MARKET_EIP1559\r\n                                ? `${formatUnits(oldGasPrice, \"gwei\")} GWEI`\r\n                                : undefined,\r\n                    },\r\n                    {\r\n                        title: \"Original max tip (per gas unit)\",\r\n                        content:\r\n                            transactionType ===\r\n                            TransactionType.FEE_MARKET_EIP1559\r\n                                ? `${formatUnits(\r\n                                      oldMaxPriorityFeePerGas,\r\n                                      \"gwei\"\r\n                                  )} GWEI`\r\n                                : undefined,\r\n                    },\r\n                    {\r\n                        title: \"Original max price (per gas unit)\",\r\n                        content:\r\n                            transactionType ===\r\n                            TransactionType.FEE_MARKET_EIP1559\r\n                                ? `${formatUnits(oldMaxFeePerGas, \"gwei\")} GWEI`\r\n                                : undefined,\r\n                    },\r\n                    {\r\n                        title: \"Data\",\r\n                        content: transaction.transactionParams.data!,\r\n                        expandable: true,\r\n                    },\r\n                ]}\r\n            />\r\n            <HardwareDeviceNotLinkedDialog\r\n                onDone={resetDeviceLinkStatus}\r\n                isOpen={isDeviceUnlinked}\r\n                address={address}\r\n                vendor={getDeviceFromAccountType(accountType)}\r\n            />\r\n            <WaitingDialog\r\n                open={isOpen}\r\n                status={status}\r\n                titles={{\r\n                    loading:\r\n                        titles?.loading ||\r\n                        (type === \"cancel\"\r\n                            ? \"Cancelling...\"\r\n                            : \"Speeding up...\"),\r\n                    success: \"Success\",\r\n                    error: \"Error\",\r\n                }}\r\n                texts={{\r\n                    loading:\r\n                        texts?.loading ||\r\n                        (type === \"cancel\"\r\n                            ? \"Initiating the cancellation\"\r\n                            : \"Initiating the speed up\"),\r\n                    success: `You've initiated the ${\r\n                        type === \"cancel\" ? \"cancellation\" : \"speed up\"\r\n                    }.`,\r\n                    error: texts?.error ?? \"\",\r\n                }}\r\n                gifs={gifs}\r\n                timeout={2900}\r\n                clickOutsideToClose={false}\r\n                txHash={replacementTx?.transactionParams.hash}\r\n                onDone={() => {\r\n                    if (status === \"error\" && error?.type === \"mined\") {\r\n                        closeDialog()\r\n                        return history.push({\r\n                            pathname: \"/home\",\r\n                        })\r\n                    } else if (status === \"error\" && error?.type === \"feeLow\") {\r\n                        setCurrentReplacementTxId(undefined)\r\n                        return closeDialog()\r\n                    } else if (status === \"success\") {\r\n                        closeDialog()\r\n                        return history.push({\r\n                            pathname: \"/home\",\r\n                        })\r\n                    }\r\n                }}\r\n            />\r\n            <div className=\"w-full h-full\">\r\n                <PopupLayout\r\n                    header={\r\n                        <PopupHeader\r\n                            title={title}\r\n                            onClose={(e) => {\r\n                                e.preventDefault()\r\n\r\n                                history.push(\"/\")\r\n                            }}\r\n                            onBack={(e) => {\r\n                                e.preventDefault()\r\n\r\n                                history.push(\"/\")\r\n                            }}\r\n                        />\r\n                    }\r\n                    footer={\r\n                        <PopupFooter>\r\n                            <ButtonWithLoading\r\n                                label=\"Submit\"\r\n                                onClick={onSubmit}\r\n                                isLoading={isLoading}\r\n                                disabled={\r\n                                    Object.values(customErrors).filter(\r\n                                        (v) => v !== \"\"\r\n                                    ).length > 0 || notEnoughFunds\r\n                                }\r\n                            />\r\n                        </PopupFooter>\r\n                    }\r\n                >\r\n                    <div className=\"p-6 pt-3\">\r\n                        <div className=\"flex flex-col pt-2 space-y-2 mb-3\">\r\n                            {children(\r\n                                transactionType,\r\n                                {\r\n                                    gasLimit: oldGasLimit,\r\n                                    gasPrice: oldGasPrice,\r\n                                    maxPriorityFeePerGas:\r\n                                        oldMaxPriorityFeePerGas,\r\n                                    maxFeePerGas: oldMaxFeePerGas,\r\n                                },\r\n                                {\r\n                                    gasLimit: parseUnits(\r\n                                        newFees.gasLimit || \"0\",\r\n                                        \"wei\"\r\n                                    ),\r\n                                    gasPrice: parseUnits(\r\n                                        newFees.gasPrice || \"0\",\r\n                                        \"gwei\"\r\n                                    ),\r\n                                    maxPriorityFeePerGas: parseUnits(\r\n                                        newFees.maxPriorityFeePerGas || \"0\",\r\n                                        \"gwei\"\r\n                                    ),\r\n                                    maxFeePerGas: parseUnits(\r\n                                        newFees.maxFeePerGas || \"0\",\r\n                                        \"gwei\"\r\n                                    ),\r\n                                }\r\n                            )}\r\n                        </div>\r\n                        <hr\r\n                            className=\"border-0.5 border-gray-200\"\r\n                            style={{\r\n                                width: \"calc(100% + 3rem)\",\r\n                                marginLeft: \"-1.5rem\",\r\n                            }}\r\n                        />\r\n                        <div className=\"flex flex-col mt-3\">\r\n                            <TextInput\r\n                                label=\"Gas limit\"\r\n                                name=\"gasLimit\"\r\n                                appearance=\"border\"\r\n                                defaultValue={formatUnits(\r\n                                    transaction.transactionParams.gasLimit ??\r\n                                        BigNumber.from(0),\r\n                                    \"wei\"\r\n                                )}\r\n                                onKeyDown={handleKeyDown}\r\n                                onChange={handleChangeAmountWei((value) => {\r\n                                    setValue(\"gasLimit\", value, {\r\n                                        shouldValidate: true,\r\n                                    })\r\n\r\n                                    setNewFees({\r\n                                        ...newFees,\r\n                                        gasLimit: value,\r\n                                    })\r\n\r\n                                    validateFees({\r\n                                        ...getParsedValues(),\r\n                                        gasLimit: parseUnits(\r\n                                            value === \"\" ? \"0\" : value,\r\n                                            \"wei\"\r\n                                        ),\r\n                                    })\r\n                                })}\r\n                                error={errors.gasLimit?.message || \"\"}\r\n                                warning={warning.gasLimit}\r\n                                ref={gasLimitRef}\r\n                            />\r\n                        </div>\r\n                        <div\r\n                            className={classnames(\r\n                                \"flex flex-col mt-3\",\r\n                                transactionType !==\r\n                                    TransactionType.FEE_MARKET_EIP1559\r\n                                    ? \"\"\r\n                                    : \"hidden\"\r\n                            )}\r\n                        >\r\n                            <TextInput\r\n                                label=\"Gas price\"\r\n                                appearance=\"border\"\r\n                                name=\"gasPrice\"\r\n                                value={newFees.gasPrice}\r\n                                error={\r\n                                    errors.gasPrice?.message ||\r\n                                    customErrors.gasPrice ||\r\n                                    \"\"\r\n                                }\r\n                                warning={\r\n                                    errors.gasPrice?.message ||\r\n                                    customErrors.gasPrice\r\n                                        ? \"\"\r\n                                        : warning.gasPrice\r\n                                }\r\n                                onKeyDown={handleKeyDown}\r\n                                onChange={handleChangeAmountGwei((value) => {\r\n                                    setValue(\"gasPrice\", value, {\r\n                                        shouldValidate: true,\r\n                                    })\r\n\r\n                                    setNewFees({\r\n                                        ...newFees,\r\n                                        gasPrice: value,\r\n                                    })\r\n\r\n                                    validateFees({\r\n                                        ...getParsedValues(),\r\n                                        gasPrice: parseUnits(\r\n                                            value === \"\" ? \"0\" : value,\r\n                                            \"gwei\"\r\n                                        ),\r\n                                    })\r\n                                })}\r\n                                ref={gasPriceRef}\r\n                                endLabel=\"GWEI\"\r\n                            />\r\n                        </div>\r\n                        <div\r\n                            className={classnames(\r\n                                \"flex flex-col mt-3\",\r\n                                transactionType ===\r\n                                    TransactionType.FEE_MARKET_EIP1559\r\n                                    ? \"\"\r\n                                    : \"hidden\"\r\n                            )}\r\n                        >\r\n                            <TextInput\r\n                                label=\"Max tip (per gas unit)\"\r\n                                appearance=\"border\"\r\n                                name=\"maxPriorityFeePerGas\"\r\n                                value={newFees.maxPriorityFeePerGas}\r\n                                error={\r\n                                    errors.maxPriorityFeePerGas?.message ||\r\n                                    customErrors.maxPriorityFeePerGas ||\r\n                                    \"\"\r\n                                }\r\n                                warning={\r\n                                    errors.maxPriorityFeePerGas?.message ||\r\n                                    customErrors.maxPriorityFeePerGas\r\n                                        ? \"\"\r\n                                        : warning.maxPriorityFeePerGas\r\n                                }\r\n                                ref={maxPriorityFeePerGasRef}\r\n                                onKeyDown={handleKeyDown}\r\n                                onChange={handleChangeAmountGwei((value) => {\r\n                                    setValue(\"maxPriorityFeePerGas\", value, {\r\n                                        shouldValidate: true,\r\n                                    })\r\n                                    setNewFees({\r\n                                        ...newFees,\r\n                                        maxPriorityFeePerGas: value,\r\n                                    })\r\n\r\n                                    validateFees({\r\n                                        ...getParsedValues(),\r\n                                        maxPriorityFeePerGas: parseUnits(\r\n                                            value === \"\" ? \"0\" : value,\r\n                                            \"gwei\"\r\n                                        ),\r\n                                    })\r\n                                })}\r\n                                endLabel=\"GWEI\"\r\n                            />\r\n                        </div>\r\n                        <div\r\n                            className={classnames(\r\n                                \"flex flex-col mt-3\",\r\n                                transactionType ===\r\n                                    TransactionType.FEE_MARKET_EIP1559\r\n                                    ? \"\"\r\n                                    : \"hidden\"\r\n                            )}\r\n                        >\r\n                            <TextInput\r\n                                label=\"Max price (per gas unit)\"\r\n                                appearance=\"border\"\r\n                                name=\"maxFeePerGas\"\r\n                                value={newFees.maxFeePerGas}\r\n                                error={\r\n                                    errors.maxFeePerGas?.message ||\r\n                                    customErrors.maxFeePerGas ||\r\n                                    \"\"\r\n                                }\r\n                                warning={\r\n                                    errors.maxFeePerGas?.message ||\r\n                                    customErrors.maxFeePerGas\r\n                                        ? \"\"\r\n                                        : warning.maxFeePerGas\r\n                                }\r\n                                ref={maxFeePerGasRef}\r\n                                onKeyDown={handleKeyDown}\r\n                                onChange={handleChangeAmountGwei((value) => {\r\n                                    setValue(\"maxFeePerGas\", value, {\r\n                                        shouldValidate: true,\r\n                                    })\r\n                                    setNewFees({\r\n                                        ...newFees,\r\n                                        maxFeePerGas: value,\r\n                                    })\r\n\r\n                                    validateFees({\r\n                                        ...getParsedValues(),\r\n                                        maxFeePerGas: parseUnits(\r\n                                            value === \"\" ? \"0\" : value,\r\n                                            \"gwei\"\r\n                                        ),\r\n                                    })\r\n                                })}\r\n                                endLabel=\"GWEI\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"mt-2 flex justify-between\">\r\n                            <ClickableText\r\n                                onClick={(e) => {\r\n                                    e.preventDefault()\r\n                                    setHasDialog(true)\r\n                                }}\r\n                            >\r\n                                View all details\r\n                            </ClickableText>\r\n                            {baseFeePerGas && (\r\n                                <span className=\"block text-gray-500 text-xs mt-px\">\r\n                                    Last base fee:{\" \"}\r\n                                    {formatUnits(baseFeePerGas, \"gwei\")} GWEI\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n\r\n                        {error && error.type === \"notEnoughFunds\" && (\r\n                            <span className=\"text-xs block text-ellipsis overflow-hidden text-red-500 mt-2\">\r\n                                {error.message}\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n                </PopupLayout>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CancelAndSpeedUpComponent\r\n","import { TransactionParams } from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport { TransactionType } from \"../context/commTypes\"\r\n\r\n/**\r\n * It determines the type of the transaction according to its parameters\r\n *\r\n * @param transactionParams The transaction to check against\r\n * @returns The transaction type\r\n */\r\nexport const getTransactionType = (\r\n    transactionParams: TransactionParams\r\n): TransactionType => {\r\n    if (typeof transactionParams.accessList !== \"undefined\") {\r\n        return TransactionType.ACCESS_LIST_EIP2930\r\n    } else if (\r\n        typeof transactionParams.maxPriorityFeePerGas !== \"undefined\" &&\r\n        typeof transactionParams.maxFeePerGas !== \"undefined\"\r\n    ) {\r\n        return TransactionType.FEE_MARKET_EIP1559\r\n    } else {\r\n        // Otherwise default to legacy\r\n        return TransactionType.LEGACY\r\n    }\r\n}\r\n","import { FunctionComponent } from \"react\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\n\r\n// Utils\r\nimport { formatCurrency, toCurrencyAmount } from \"../../util/formatCurrency\"\r\nimport formatTransactionValue from \"../../util/formatTransactionValue\"\r\n\r\n// Hooks\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { getValueByKey } from \"../../util/objectUtils\"\r\n\r\nconst Price: FunctionComponent<{\r\n    title: string\r\n    amount: BigNumber\r\n    symbol: string\r\n    decimals: number\r\n}> = ({ title, amount, symbol, decimals }) => {\r\n    const state = useBlankState()!\r\n\r\n    const txValue = formatTransactionValue(\r\n        {\r\n            amount,\r\n            currency: symbol,\r\n            decimals: decimals,\r\n        },\r\n        true,\r\n        9\r\n    )\r\n\r\n    const currencyAmount = toCurrencyAmount(\r\n        amount,\r\n        getValueByKey(state.exchangeRates, symbol.toUpperCase(), 0),\r\n        decimals\r\n    )\r\n\r\n    return (\r\n        <div className=\"flex justify-between\">\r\n            <span className=\"text-xs text-gray-400 uppercase w-2/5 mt-1\">\r\n                {title}\r\n            </span>\r\n            <div className=\"flex flex-col justify-start w-3/5 pl-4\">\r\n                <div className=\"w-full flex justify-end\">\r\n                    <span\r\n                        className=\"text-lg uppercase text-black text-right truncate w-4/5 mr-1\"\r\n                        title={txValue.join(\" \")}\r\n                    >\r\n                        {txValue[0]}\r\n                    </span>\r\n                    <span className=\"text-lg uppercase text-right\">\r\n                        {symbol}\r\n                    </span>\r\n                </div>\r\n                <div className=\"flex justify-end items-end\">\r\n                    <span\r\n                        className=\"text-xs uppercase text-gray-400 truncate w-5/6 text-right mr-1\"\r\n                        title={formatCurrency(currencyAmount, {\r\n                            currency: state.nativeCurrency,\r\n                            locale_info: state.localeInfo,\r\n                            returnNonBreakingSpace: true,\r\n                            showSymbol: true,\r\n                        })}\r\n                    >\r\n                        {formatCurrency(currencyAmount, {\r\n                            currency: state.nativeCurrency,\r\n                            locale_info: state.localeInfo,\r\n                            returnNonBreakingSpace: true,\r\n                            showSymbol: true,\r\n                            showCurrency: false,\r\n                        })}\r\n                    </span>\r\n                    <span className=\"text-xs text-right text-gray-400\">\r\n                        {state.nativeCurrency.toUpperCase()}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Price\r\n","import Common from \"../../components/CancelSpeedUpCommon\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport Price from \"../../components/transactions/Price\"\r\nimport { TransactionType } from \"../../context/commTypes\"\r\nimport {\r\n    getSpeedUpGasPrice,\r\n    speedUpTransaction,\r\n} from \"../../context/commActions\"\r\n\r\nconst SpeedUpPage = () => {\r\n    const { nativeCurrency: networkNativeCurrency } = useSelectedNetwork()\r\n\r\n    return (\r\n        <Common\r\n            title=\"Speed up transaction\"\r\n            type=\"speed up\"\r\n            getSuggestedFees={getSpeedUpGasPrice}\r\n            submitAction={speedUpTransaction}\r\n        >\r\n            {(type, oldFees, newFees) => (\r\n                <>\r\n                    <Price\r\n                        title=\"OLD GAS FEE\"\r\n                        amount={(type !== TransactionType.FEE_MARKET_EIP1559\r\n                            ? oldFees.gasPrice\r\n                            : oldFees.maxFeePerGas\r\n                        ).mul(oldFees.gasLimit)}\r\n                        symbol={networkNativeCurrency.symbol}\r\n                        decimals={networkNativeCurrency.decimals}\r\n                    />\r\n                    <Price\r\n                        title=\"NEW GAS FEE\"\r\n                        amount={(type !== TransactionType.FEE_MARKET_EIP1559\r\n                            ? newFees.gasPrice\r\n                            : newFees.maxFeePerGas\r\n                        ).mul(newFees.gasLimit)}\r\n                        symbol={networkNativeCurrency.symbol}\r\n                        decimals={networkNativeCurrency.decimals}\r\n                    />\r\n                </>\r\n            )}\r\n        </Common>\r\n    )\r\n}\r\n\r\nexport default SpeedUpPage\r\n","import Common from \"../../components/CancelSpeedUpCommon\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport Price from \"../../components/transactions/Price\"\r\nimport { TransactionType } from \"../../context/commTypes\"\r\nimport { getCancelGasPrice, cancelTransaction } from \"../../context/commActions\"\r\n\r\nconst CancelPage = () => {\r\n    const { nativeCurrency: networkNativeCurrency } = useSelectedNetwork()\r\n\r\n    return (\r\n        <Common\r\n            title=\"Cancel transaction\"\r\n            type=\"cancel\"\r\n            getSuggestedFees={getCancelGasPrice}\r\n            submitAction={cancelTransaction}\r\n        >\r\n            {(type, _oldFees, newFees) => (\r\n                <Price\r\n                    title=\"TRANSACTION COST\"\r\n                    amount={(type !== TransactionType.FEE_MARKET_EIP1559\r\n                        ? newFees.gasPrice\r\n                        : newFees.maxFeePerGas\r\n                    ).mul(newFees.gasLimit)}\r\n                    symbol={networkNativeCurrency.symbol}\r\n                    decimals={networkNativeCurrency.decimals}\r\n                />\r\n            )}\r\n        </Common>\r\n    )\r\n}\r\n\r\nexport default CancelPage\r\n","const MiniCheckmark = (props: { fill: string }) => (\r\n    <svg\r\n        width=\"16\"\r\n        height=\"11\"\r\n        viewBox=\"0 0 16 11\"\r\n        fill=\"none\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n        <path\r\n            d=\"M6 10.9999C5.7348 10.9999 5.48049 10.8945 5.293 10.7069L0.585999 5.99994L2 4.58594L6 8.58594L14 0.585938L15.414 1.99994L6.707 10.7069C6.51951 10.8945 6.26519 10.9999 6 10.9999Z\"\r\n            fill={props.fill}\r\n        />\r\n    </svg>\r\n)\r\n\r\nexport default MiniCheckmark\r\n","import { parseUnits } from \"@ethersproject/units\"\r\nimport { stripHexPrefix } from \"ethereumjs-util\"\r\n\r\n/**\r\n * Given a token unit and the token decimals, it returns a hex string\r\n * in total asset value (e.g. wei for eth)\r\n *\r\n * @param allowance plain allowance stated in token units\r\n * @param decimals token decimals\r\n */\r\nexport const parseAllowance = (allowance: string, decimals: number) => {\r\n    const parsedCustomAllowance = parseUnits(allowance, decimals)._hex\r\n\r\n    if (stripHexPrefix(parsedCustomAllowance).length > 64) {\r\n        throw new Error(\"Custom allowance is larger than u256\")\r\n    }\r\n\r\n    return parsedCustomAllowance\r\n}\r\n","import * as yup from \"yup\"\r\nimport AccountIcon from \"../../components/icons/AccountIcon\"\r\nimport CheckBoxDialog from \"../../components/dialog/CheckboxDialog\"\r\nimport Divider from \"../../components/Divider\"\r\nimport ErrorMessage from \"../../components/error/ErrorMessage\"\r\nimport GasPriceComponent from \"../../components/transactions/GasPriceComponent\"\r\nimport LoadingOverlay from \"../../components/loading/LoadingOverlay\"\r\nimport MiniCheckmark from \"../../components/icons/MiniCheckmark\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport { useState, useEffect, FunctionComponent, useCallback } from \"react\"\r\nimport Tooltip from \"../../components/label/Tooltip\"\r\nimport useNextRequestRoute from \"../../context/hooks/useNextRequestRoute\"\r\nimport {\r\n    confirmTransaction,\r\n    getTokenBalance,\r\n    rejectTransaction,\r\n    searchTokenInAssetsList,\r\n    setUserSettings,\r\n} from \"../../context/commActions\"\r\nimport { AdvancedSettings } from \"../../components/transactions/AdvancedSettings\"\r\nimport { AiFillInfoCircle } from \"react-icons/ai\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport { Classes, classnames } from \"../../styles/classes\"\r\nimport { GasPriceSelector } from \"../../components/transactions/GasPriceSelector\"\r\nimport { InferType } from \"yup\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport {\r\n    TransactionAdvancedData,\r\n    TransactionMeta,\r\n} from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport {\r\n    HardwareWalletOpTypes,\r\n    TransactionCategories,\r\n} from \"../../context/commTypes\"\r\nimport { TransactionFeeData } from \"@block-wallet/background/controllers/erc-20/transactions/SignedTransaction\"\r\nimport { capitalize } from \"../../util/capitalize\"\r\nimport { formatHash, formatName } from \"../../util/formatAccount\"\r\nimport { formatRounded } from \"../../util/formatRounded\"\r\nimport { formatUnits, parseUnits } from \"@ethersproject/units\"\r\nimport { getAddress } from \"@ethersproject/address\"\r\nimport { getAccountColor } from \"../../util/getAccountColor\"\r\nimport { parseAllowance } from \"../../util/approval\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useSelectedAccountBalance } from \"../../context/hooks/useSelectedAccountBalance\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport { useTokensList } from \"../../context/hooks/useTokensList\"\r\nimport { useUserSettings } from \"../../context/hooks/useUserSettings\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport { useNonSubmittedExternalTransaction } from \"../../context/hooks/useNonSubmittedExternalTransaction\"\r\nimport useDebouncedState from \"../../util/hooks/useDebouncedState\"\r\nimport { useTransactionById } from \"../../context/hooks/useTransactionById\"\r\nimport WaitingDialog from \"../../components/dialog/WaitingDialog\"\r\nimport { getDeviceFromAccountType } from \"../../util/hardwareDevice\"\r\nimport { DAPP_FEEDBACK_WINDOW_TIMEOUT } from \"../../util/constants\"\r\nimport HardwareDeviceNotLinkedDialog from \"../../components/dialog/HardwareDeviceNotLinkedDialog\"\r\nimport useCheckAccountDeviceLinked from \"../../util/hooks/useCheckAccountDeviceLinked\"\r\nimport { useTransactionWaitingDialog } from \"../../context/hooks/useTransactionWaitingDialog\"\r\nimport { canUserSubmitTransaction } from \"../../util/transactionUtils\"\r\nimport { MaxUint256 } from \"@ethersproject/constants\"\r\n\r\nconst UNKNOWN_BALANCE = \"UNKNOWN_BALANCE\"\r\nconst UNLIMITED_ALLOWANCE = MaxUint256\r\n\r\n// Schema\r\nconst GetAllowanceYupSchema = (\r\n    isCustomSelected: boolean,\r\n    tokenDecimals: number\r\n) => {\r\n    return yup.object({\r\n        customAllowance: yup.string().when([], {\r\n            is: () => isCustomSelected,\r\n            then: yup\r\n                .string()\r\n                .test(\r\n                    \"req\",\r\n                    \"Please enter a custom limit\",\r\n                    (value?: string) => {\r\n                        if (!value) return false\r\n                        return true\r\n                    }\r\n                )\r\n                .test(\r\n                    \"decimals\",\r\n                    \"Custom limit has too many decimal numbers\",\r\n                    (value?: string) => {\r\n                        if (!value) return false\r\n                        if (!value.includes(\".\")) return true\r\n\r\n                        const valueDecimals = value.split(\".\")[1].length\r\n\r\n                        return valueDecimals <= tokenDecimals\r\n                    }\r\n                )\r\n                .test(\r\n                    \"too-low\",\r\n                    \"Custom limit is less than the minimum allowance\",\r\n                    (value?: string) => {\r\n                        if (!value) return false\r\n                        try {\r\n                            const parsed = parseUnits(value, tokenDecimals)\r\n\r\n                            return parsed.gte(BigNumber.from(0))\r\n                        } catch (error) {\r\n                            return false\r\n                        }\r\n                    }\r\n                )\r\n                .test(\r\n                    \"too-large\",\r\n                    \"Custom limit is larger than the unlimited allowance\",\r\n                    (value?: string) => {\r\n                        if (!value) return false\r\n                        try {\r\n                            const parsed = parseUnits(value, tokenDecimals)\r\n\r\n                            return UNLIMITED_ALLOWANCE.gte(parsed)\r\n                        } catch (error) {\r\n                            return false\r\n                        }\r\n                    }\r\n                ),\r\n        }),\r\n    })\r\n}\r\n\r\nexport interface ApproveAssetProps {\r\n    transactionId: string\r\n    transactionCount: number\r\n}\r\n\r\nconst ApproveAssetPage = () => {\r\n    const { transaction: nextTransaction, transactionCount } =\r\n        useNonSubmittedExternalTransaction()\r\n    const route = useNextRequestRoute()\r\n    const [currentTx, setCurrentTx] = useDebouncedState<TransactionMeta>(\r\n        nextTransaction,\r\n        DAPP_FEEDBACK_WINDOW_TIMEOUT\r\n    )\r\n\r\n    useEffect(() => {\r\n        //only override the transactionId when there is another one to process\r\n        //to avoid passing an empty transactionId to the child component and break the UI.\r\n        setCurrentTx(nextTransaction)\r\n    }, [nextTransaction, setCurrentTx])\r\n\r\n    if (\r\n        !currentTx ||\r\n        currentTx.transactionCategory !==\r\n            TransactionCategories.TOKEN_METHOD_APPROVE ||\r\n        currentTx.advancedData?.tokenId\r\n    ) {\r\n        return <Redirect to={route} />\r\n    } else {\r\n        return (\r\n            <ApproveAsset\r\n                transactionId={currentTx.id}\r\n                transactionCount={transactionCount}\r\n            />\r\n        )\r\n    }\r\n}\r\n\r\nconst ApproveAsset: FunctionComponent<ApproveAssetProps> = ({\r\n    transactionCount,\r\n    transactionId,\r\n}) => {\r\n    // Hooks\r\n    const { accounts, selectedAddress, settings, defaultGasOption } =\r\n        useBlankState()!\r\n    const { chainId, isEIP1559Compatible } = useSelectedNetwork()\r\n    const { hideAddressWarning } = useUserSettings()\r\n    const selectedAccountBalance = useSelectedAccountBalance()\r\n    const { nativeToken } = useTokensList()\r\n\r\n    const { isDeviceUnlinked, checkDeviceIsLinked, resetDeviceLinkStatus } =\r\n        useCheckAccountDeviceLinked()\r\n\r\n    // Get tx\r\n    const { transaction: txById, params } = useTransactionById(transactionId)\r\n\r\n    // At this point transactionId is ensured.\r\n    const transaction = txById!\r\n\r\n    // Detect if the transaction was triggered using an address different to the active one\r\n    const checksumFromAddress = getAddress(params.from!)\r\n    const differentAddress = checksumFromAddress !== selectedAddress\r\n\r\n    // If differentAddress, fetch the balance of that address instead of the selected one.\r\n    const balance = differentAddress\r\n        ? accounts[checksumFromAddress].balances[chainId].nativeTokenBalance ??\r\n          BigNumber.from(\"0\")\r\n        : selectedAccountBalance\r\n\r\n    // Local state\r\n    const [tokenName, setTokenName] = useState(\"\")\r\n    const [tokenLogo, setTokenLogo] = useState(\"\")\r\n    const [isEditAllowancePage, setIsEditAllowancePage] = useState(false)\r\n    const [isCustomSelected, setIsCustomSelected] = useState(false)\r\n    const [customAllowance, setCustomAllowance] = useState(\"\")\r\n    const [isCustomAllowanceSaved, setIsCustomAllowanceSaved] = useState(false)\r\n    const [accountWarningClosed, setAccountWarningClosed] = useState(false)\r\n    const [assetBalance, setAssetBalance] = useState(\"0.0\")\r\n    const [isLoading, setIsLoading] = useState(transaction.loadingGasValues)\r\n    const [isTokenLoading, setIsTokenLoading] = useState(true)\r\n    const [isNameLoading, setIsNameLoading] = useState(true)\r\n\r\n    const [transactionAdvancedData, setTransactionAdvancedData] =\r\n        useState<TransactionAdvancedData>({})\r\n\r\n    const [hasBalance, setHasBalance] = useState(true)\r\n    const [gasEstimationFailed, setGasEstimationFailed] = useState(false)\r\n\r\n    const [defaultGas, setDefaultGas] = useState<TransactionFeeData>({\r\n        gasLimit: params.gasLimit,\r\n        gasPrice: params.gasPrice,\r\n        maxPriorityFeePerGas: params.maxPriorityFeePerGas,\r\n        maxFeePerGas: params.maxFeePerGas,\r\n    })\r\n\r\n    const [transactionGas, setTransactionGas] = useState<TransactionFeeData>({\r\n        gasLimit: params.gasLimit,\r\n        gasPrice: params.gasPrice,\r\n        maxPriorityFeePerGas: params.maxPriorityFeePerGas,\r\n        maxFeePerGas: params.maxFeePerGas,\r\n    })\r\n\r\n    const calcTranTotals = () => {\r\n        const gas = BigNumber.from(\r\n            transactionGas.gasLimit!.mul(\r\n                transactionGas.gasPrice ?? transactionGas.maxFeePerGas!\r\n            )\r\n        )\r\n\r\n        setHasBalance(gas.lt(balance))\r\n    }\r\n\r\n    // Set data\r\n    const account = accounts[checksumFromAddress]\r\n    const tokenAddress = params.to!\r\n    const tokenDecimals = transaction.advancedData?.decimals!\r\n    const defaultAllowance = transaction.advancedData?.allowance!\r\n\r\n    const { status, isOpen, dispatch, texts, titles, closeDialog, gifs } =\r\n        useTransactionWaitingDialog(\r\n            transaction\r\n                ? {\r\n                      id: transactionId,\r\n                      status: transaction.status,\r\n                      error: transaction.error as Error,\r\n                      epochTime: transaction?.approveTime,\r\n                  }\r\n                : undefined,\r\n            HardwareWalletOpTypes.APPROVE_ALLOWANCE,\r\n            account.accountType,\r\n            {\r\n                reject: useCallback(() => {\r\n                    if (transactionId) {\r\n                        rejectTransaction(transactionId)\r\n                    }\r\n                }, [transactionId]),\r\n            }\r\n        )\r\n\r\n    // To prevent calculations on every render, force dependency array to only check state value that impacts\r\n    useEffect(() => {\r\n        calcTranTotals()\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [transactionGas, transactionId])\r\n\r\n    // Effect to check if background finishes loading default values\r\n    useEffect(() => {\r\n        if (isLoading && !transaction.loadingGasValues) {\r\n            setDefaultGas({\r\n                gasLimit: params.gasLimit,\r\n                gasPrice: params.gasPrice,\r\n                maxPriorityFeePerGas: params.maxPriorityFeePerGas,\r\n                maxFeePerGas: params.maxFeePerGas,\r\n            })\r\n            setGasEstimationFailed(transaction.gasEstimationFailed ?? false)\r\n            setIsLoading(false)\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [transaction.loadingGasValues])\r\n\r\n    useEffect(() => {\r\n        setIsTokenLoading(true)\r\n        getTokenBalance(tokenAddress, account.address)\r\n            .then((fetchedBalance) => {\r\n                setAssetBalance(\r\n                    formatRounded(\r\n                        formatUnits(\r\n                            BigNumber.from(fetchedBalance),\r\n                            tokenDecimals\r\n                        )\r\n                    )\r\n                )\r\n            })\r\n            .catch((error: Error) => {\r\n                // This shouldn't happen\r\n                if (error.message.includes(\"code=CALL_EXCEPTION\")) {\r\n                    setAssetBalance(UNKNOWN_BALANCE)\r\n                }\r\n            })\r\n            .finally(() => {\r\n                setIsTokenLoading(false)\r\n            })\r\n\r\n        searchTokenInAssetsList(tokenAddress)\r\n            .then((searchTokensResponse) => {\r\n                const token = searchTokensResponse.tokens[0]\r\n                setTokenName(token.symbol)\r\n                setTokenLogo(token.logo)\r\n            })\r\n            .catch(() => {\r\n                throw new Error(\"Failed to fetch token data\")\r\n            })\r\n            .finally(() => {\r\n                setIsNameLoading(false)\r\n            })\r\n    }, [account.address, tokenAddress, tokenDecimals])\r\n\r\n    const approve = async () => {\r\n        try {\r\n            dispatch({ type: \"open\", payload: { status: \"loading\" } })\r\n\r\n            const isLinked = await checkDeviceIsLinked()\r\n            if (!isLinked) {\r\n                closeDialog()\r\n                return\r\n            }\r\n\r\n            await confirmTransaction(transaction.id, transactionGas, {\r\n                customAllowance: isCustomAllowanceSaved\r\n                    ? parseAllowance(customAllowance, tokenDecimals)\r\n                    : undefined,\r\n                customNonce: transactionAdvancedData.customNonce,\r\n            })\r\n        } catch (error) {}\r\n    }\r\n\r\n    const reject = async () => {\r\n        dispatch({\r\n            type: \"open\",\r\n            payload: {\r\n                status: \"loading\",\r\n                titles: { loading: \"Rejecting...\" },\r\n                texts: { loading: \"Rejecting allowance change request...\" },\r\n            },\r\n        })\r\n        await new Promise<void>((resolve) => {\r\n            setTimeout(resolve, 300)\r\n        })\r\n        await rejectTransaction(transactionId)\r\n        dispatch({\r\n            type: \"setStatus\",\r\n            payload: {\r\n                status: \"error\",\r\n                titles: { error: \"Token Allowance Rejected\" },\r\n                texts: {\r\n                    error: \"Token allowance request was rejected.\",\r\n                },\r\n            },\r\n        })\r\n    }\r\n\r\n    // Validator\r\n    const schema = GetAllowanceYupSchema(isCustomSelected, tokenDecimals)\r\n    type CustomAllowanceForm = InferType<typeof schema>\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        setValue,\r\n\r\n        formState: { errors },\r\n    } = useForm<CustomAllowanceForm>({\r\n        resolver: yupResolver(schema),\r\n    })\r\n\r\n    const handleChangeAllowance = (event: any) => {\r\n        let value = event.target.value\r\n\r\n        value = value\r\n            .replace(\",\", \".\")\r\n            .replace(/[^0-9.]/g, \"\")\r\n            .replace(/(\\..*?)\\..*/g, \"$1\")\r\n\r\n        if (!value || value === \".\") {\r\n            value = \"\"\r\n        }\r\n\r\n        setValue(\"customAllowance\", value, {\r\n            shouldValidate: true,\r\n        })\r\n    }\r\n\r\n    const handleFocus = (event: any) => {\r\n        if (isCustomAllowanceSaved) {\r\n            setValue(\"customAllowance\", customAllowance, {\r\n                shouldValidate: true,\r\n            })\r\n        }\r\n    }\r\n\r\n    const onSubmit = handleSubmit(async (values: CustomAllowanceForm) => {\r\n        if (isCustomSelected) {\r\n            setCustomAllowance(values.customAllowance!)\r\n        }\r\n        setIsCustomAllowanceSaved(isCustomSelected)\r\n        setIsEditAllowancePage(false)\r\n    })\r\n\r\n    const origin = (\r\n        <span className=\"inline-block\" title={transaction.origin}>\r\n            {formatName(transaction.origin, 30)}\r\n        </span>\r\n    )\r\n\r\n    const mainSection = (\r\n        <>\r\n            <div className=\"px-6 py-3\">\r\n                <p className=\"text-sm font-bold pb-3 break-word\">\r\n                    Allow {origin} to access your {tokenName}\r\n                </p>\r\n                <p className=\"text-sm text-gray-500 break-word\">\r\n                    By granting this permission, you are allowing {origin} to\r\n                    withdraw your {tokenName} and automate transactions for you.\r\n                </p>\r\n            </div>\r\n            <Divider />\r\n            <div className=\"flex flex-col space-y-2 px-6 py-3\">\r\n                <label className=\"text-sm text-gray-600\">Gas Price</label>\r\n                {!isEIP1559Compatible ? (\r\n                    <GasPriceSelector\r\n                        defaultLevel={defaultGasOption || \"medium\"}\r\n                        defaultGasLimit={defaultGas.gasLimit!}\r\n                        defaultGasPrice={defaultGas.gasPrice!}\r\n                        setGasPriceAndLimit={(gasPrice, gasLimit) => {\r\n                            setTransactionGas({ gasPrice, gasLimit })\r\n                        }}\r\n                        showEstimationError={gasEstimationFailed}\r\n                        isParentLoading={isLoading}\r\n                    />\r\n                ) : (\r\n                    <GasPriceComponent\r\n                        defaultGas={{\r\n                            defaultLevel: defaultGasOption || \"medium\",\r\n                            feeData: {\r\n                                gasLimit: defaultGas.gasLimit,\r\n                                maxFeePerGas: defaultGas.maxFeePerGas!,\r\n                                maxPriorityFeePerGas:\r\n                                    defaultGas.maxPriorityFeePerGas!,\r\n                            },\r\n                        }}\r\n                        setGas={(gasFees) => {\r\n                            setTransactionGas({\r\n                                ...gasFees,\r\n                            })\r\n                        }}\r\n                        showEstimationError={gasEstimationFailed}\r\n                        isParentLoading={isLoading}\r\n                        displayOnlyMaxValue\r\n                    />\r\n                )}\r\n                <AdvancedSettings\r\n                    address={checksumFromAddress}\r\n                    advancedSettings={transactionAdvancedData}\r\n                    setAdvancedSettings={(\r\n                        newSettings: TransactionAdvancedData\r\n                    ) => {\r\n                        setTransactionAdvancedData({\r\n                            customNonce: newSettings.customNonce,\r\n                            flashbots: newSettings.flashbots,\r\n                        })\r\n                    }}\r\n                />\r\n                <div className=\"flex flex-col items-end\">\r\n                    <span\r\n                        className=\"text-xs font-bold text-primary-300 cursor-pointer hover:underline\"\r\n                        onClick={() => setIsEditAllowancePage(true)}\r\n                    >\r\n                        Set custom allowance\r\n                    </span>\r\n                </div>\r\n                <div className=\"text-xs text-red-500\">\r\n                    {!hasBalance && \"Insufficient funds.\"}\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n\r\n    const editAllowanceSection = (\r\n        <div className=\"flex flex-col space-y-3 px-6 pt-4\">\r\n            <p className=\"text-gray-500 text-sm pb-1\">\r\n                {`Allow ${transaction.origin} to withdraw and spend up to the following amount:`}\r\n            </p>\r\n            <div\r\n                className=\"relative flex flex-col p-3 rounded-md border border-gray-200 cursor-pointer\"\r\n                onClick={() => {\r\n                    setIsCustomSelected(false)\r\n                }}\r\n            >\r\n                <div\r\n                    className={classnames(\r\n                        \"absolute mr-6 right-0 top-6\",\r\n                        isCustomSelected ? \"hidden\" : \"visible\"\r\n                    )}\r\n                >\r\n                    <MiniCheckmark fill=\"#1673FF\" />\r\n                </div>\r\n                <p\r\n                    className={classnames(\r\n                        \"text-sm font-bold\",\r\n                        !isCustomSelected && \"text-primary-300\"\r\n                    )}\r\n                >\r\n                    {defaultAllowance === UNLIMITED_ALLOWANCE._hex\r\n                        ? \"Unlimited\"\r\n                        : \"Requested\"}\r\n                </p>\r\n                <p className=\"text-gray-500 text-xs pt-1 pb-2\">\r\n                    Spend limit requested\r\n                </p>\r\n                <p\r\n                    className={classnames(\r\n                        \"text-sm\",\r\n                        isCustomSelected && \"text-gray-400\"\r\n                    )}\r\n                >{`${Number(\r\n                    formatUnits(defaultAllowance, tokenDecimals)\r\n                )} ${tokenName}`}</p>\r\n            </div>\r\n            <div\r\n                className=\"relative flex flex-col p-3 rounded-md border border-gray-200 cursor-pointer\"\r\n                onClick={() => {\r\n                    setIsCustomSelected(true)\r\n                }}\r\n            >\r\n                <div\r\n                    className={classnames(\r\n                        \"absolute mr-6 right-0 top-6\",\r\n                        isCustomSelected ? \"visible\" : \"hidden\"\r\n                    )}\r\n                >\r\n                    <MiniCheckmark fill=\"#1673FF\" />\r\n                </div>\r\n                <p\r\n                    className={classnames(\r\n                        \"text-sm font-bold\",\r\n                        isCustomSelected && \"text-primary-300\"\r\n                    )}\r\n                >\r\n                    Custom Limit\r\n                </p>\r\n                <p className=\"text-gray-500 text-xs pt-1 pb-2\">\r\n                    Enter custom max spend limit\r\n                </p>\r\n                <input\r\n                    type=\"text\"\r\n                    {...register(\"customAllowance\")}\r\n                    className={classnames(\r\n                        Classes.inputBordered,\r\n                        !isCustomSelected && \"text-gray-400\",\r\n                        errors.customAllowance &&\r\n                            \"border-red-400 focus:border-red-600\"\r\n                    )}\r\n                    autoComplete=\"off\"\r\n                    onInput={handleChangeAllowance}\r\n                    placeholder={\r\n                        isCustomAllowanceSaved\r\n                            ? customAllowance\r\n                            : \"Enter custom limit...\"\r\n                    }\r\n                    onFocus={handleFocus}\r\n                />\r\n                <ErrorMessage>{errors.customAllowance?.message}</ErrorMessage>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    close={false}\r\n                    title={isEditAllowancePage ? \"Edit allowance\" : \"Approval\"}\r\n                    backButton={isEditAllowancePage}\r\n                    onBack={() => setIsEditAllowancePage(false)}\r\n                    networkIndicator\r\n                >\r\n                    {transactionCount > 1 && (\r\n                        <div className=\"group relative\">\r\n                            <AiFillInfoCircle\r\n                                size={26}\r\n                                className=\"pl-2 text-primary-200 cursor-pointer hover:text-primary-300\"\r\n                            />\r\n                            <Tooltip\r\n                                content={`${transactionCount - 1} more ${\r\n                                    transactionCount > 2\r\n                                        ? \"transactions\"\r\n                                        : \"transaction\"\r\n                                }`}\r\n                            />\r\n                        </div>\r\n                    )}\r\n                </PopupHeader>\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    {isEditAllowancePage ? (\r\n                        <ButtonWithLoading\r\n                            label=\"Save\"\r\n                            type=\"submit\"\r\n                            onClick={onSubmit}\r\n                        />\r\n                    ) : (\r\n                        <>\r\n                            <ButtonWithLoading\r\n                                buttonClass={Classes.liteButton}\r\n                                label=\"Reject\"\r\n                                disabled={\r\n                                    !canUserSubmitTransaction(\r\n                                        transaction.status\r\n                                    )\r\n                                }\r\n                                onClick={reject}\r\n                            />\r\n                            <ButtonWithLoading\r\n                                label=\"Approve\"\r\n                                disabled={\r\n                                    !hasBalance ||\r\n                                    !canUserSubmitTransaction(\r\n                                        transaction.status\r\n                                    )\r\n                                }\r\n                                onClick={approve}\r\n                            />\r\n                        </>\r\n                    )}\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <WaitingDialog\r\n                open={isOpen}\r\n                status={status}\r\n                titles={{\r\n                    loading: titles?.loading || \"Confirming...\",\r\n                    success: titles?.success || \"Success\",\r\n                    error: titles?.error || \"Error\",\r\n                }}\r\n                texts={{\r\n                    loading: texts?.loading || \"Updating token allowance...\",\r\n                    success: texts?.success || \"Updated token allowance.\",\r\n                    error: texts?.error || \"Something went wrong\",\r\n                }}\r\n                clickOutsideToClose={false}\r\n                txHash={transaction.transactionParams.hash}\r\n                timeout={DAPP_FEEDBACK_WINDOW_TIMEOUT}\r\n                onDone={closeDialog}\r\n                gifs={gifs}\r\n                hideButton\r\n            />\r\n            {(isTokenLoading || isNameLoading) && <LoadingOverlay />}\r\n            <CheckBoxDialog\r\n                message={`Approval request was sent with an account that's different from the selected one in your wallet. \\n\\n Please select if you want to continue or reject the transaction.`}\r\n                onClose={() => {\r\n                    setAccountWarningClosed(true)\r\n                }}\r\n                onCancel={reject}\r\n                onConfirm={(saveChoice) => {\r\n                    if (saveChoice) {\r\n                        setUserSettings({\r\n                            ...settings,\r\n                            hideAddressWarning: true,\r\n                        })\r\n                    }\r\n                }}\r\n                title=\"Different address detected\"\r\n                open={\r\n                    differentAddress &&\r\n                    !accountWarningClosed &&\r\n                    !hideAddressWarning &&\r\n                    !isLoading\r\n                }\r\n                closeText=\"Reject\"\r\n                confirmText=\"Continue\"\r\n                showCheckbox\r\n                checkboxText=\"Don't show this warning again\"\r\n            />\r\n            <div className=\"px-6 py-2 flex flex-row items-center\">\r\n                <AccountIcon\r\n                    className=\"w-10 h-10\"\r\n                    fill={getAccountColor(account.address)}\r\n                />\r\n                <div className=\"relative flex flex-col group space-y-1 ml-4\">\r\n                    <span className=\"text-sm font-bold\">\r\n                        {formatName(account.name, 15)}\r\n                    </span>\r\n                    <span\r\n                        className=\"text-xs text-gray-600 truncate\"\r\n                        title={account.address}\r\n                    >\r\n                        {formatHash(account.address)}\r\n                    </span>\r\n                </div>\r\n                <div className=\"ml-auto flex flex-col items-end space-x-1\">\r\n                    <div className=\"flex flex-row items-center\">\r\n                        <span className=\"text-xs text-gray-600 truncate\">\r\n                            {`${formatName(assetBalance, 18)}`}\r\n                        </span>\r\n                        <img\r\n                            src={tokenLogo}\r\n                            alt={tokenName}\r\n                            width=\"14px\"\r\n                            draggable={false}\r\n                            className=\"ml-1\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex flex-row items-center mt-1\">\r\n                        <span className=\"text-xs text-gray-600 truncate\">\r\n                            {formatName(\r\n                                formatRounded(\r\n                                    formatUnits(\r\n                                        balance || \"0\",\r\n                                        nativeToken.token.decimals\r\n                                    )\r\n                                ),\r\n                                18\r\n                            )}\r\n                        </span>\r\n                        <img\r\n                            src={nativeToken.token.logo}\r\n                            alt={nativeToken.token.symbol}\r\n                            width=\"14px\"\r\n                            draggable={false}\r\n                            className=\"ml-1\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <Divider />\r\n            {isEditAllowancePage ? editAllowanceSection : mainSection}\r\n            <HardwareDeviceNotLinkedDialog\r\n                isOpen={isDeviceUnlinked}\r\n                onDone={resetDeviceLinkStatus}\r\n                vendor={getDeviceFromAccountType(account.accountType)}\r\n                address={account.address}\r\n            />\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default ApproveAssetPage\r\n","import {\r\n    TokenWithBalance,\r\n    useTokensList,\r\n} from \"../../context/hooks/useTokensList\"\r\nimport { isNativeTokenAddress } from \"../tokenUtils\"\r\nconst useGetAssetByTokenAddress = (\r\n    tokenAddress: string\r\n): TokenWithBalance | undefined => {\r\n    const tokenList = useTokensList()\r\n\r\n    const asset = isNativeTokenAddress(tokenAddress)\r\n        ? tokenList.nativeToken\r\n        : tokenList.currentNetworkTokens.find((t) => {\r\n              return t.token.address === tokenAddress\r\n          })\r\n\r\n    if (!asset) return undefined\r\n\r\n    return {\r\n        ...(asset as TokenWithBalance),\r\n    }\r\n}\r\n\r\nexport default useGetAssetByTokenAddress\r\n","import { isNativeTokenAddress } from \"../tokenUtils\"\r\nimport { RichedTransactionMeta } from \"../transactionUtils\"\r\nimport useTransactions from \"./useTransactions\"\r\nimport { Token } from \"@block-wallet/background/controllers/erc-20/Token\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\n\r\nconst useTokenTransactions = (token: Token | undefined) => {\r\n    if (!token) {\r\n        return [] as RichedTransactionMeta[]\r\n    }\r\n    try {\r\n        const contractToLower = token.address.toLowerCase()\r\n        const { transactions } = useTransactions()\r\n        return transactions.filter(\r\n            ({ transactionParams, transactionReceipt, transferType }) => {\r\n                if (isNativeTokenAddress(token.address)) {\r\n                    return (\r\n                        transactionParams.data === \"0x\" ||\r\n                        transferType?.currency === token.symbol\r\n                    )\r\n                } else {\r\n                    return (\r\n                        transactionReceipt?.contractAddress?.toLowerCase() ==\r\n                        contractToLower\r\n                    )\r\n                }\r\n            }\r\n        )\r\n    } catch {\r\n        return [] as RichedTransactionMeta[]\r\n    }\r\n}\r\n\r\nexport default useTokenTransactions\r\n","import { FC } from \"react\"\r\nimport classnames from \"classnames\"\r\n\r\ninterface RoundedIconButtonProps {\r\n    Icon: React.ElementType\r\n    disabled: boolean\r\n    children: React.ReactNode\r\n}\r\n\r\nconst RoundedIconButton: FC<RoundedIconButtonProps> = ({\r\n    children,\r\n    disabled,\r\n    Icon,\r\n}) => {\r\n    return (\r\n        <>\r\n            <div\r\n                className={classnames(\r\n                    \"w-8 h-8 overflow-hidden transition duration-300 rounded-full group-hover:opacity-75\",\r\n                    disabled ? \"bg-gray-300\" : \"bg-primary-300\"\r\n                )}\r\n                style={{ transform: \"scaleY(-1)\" }}\r\n            >\r\n                <Icon />\r\n            </div>\r\n            <span className=\"text-xs font-medium\">{children}</span>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default RoundedIconButton\r\n","import { formatUnits } from \"@ethersproject/units\"\r\nimport { useState } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\nimport { deleteCustomToken } from \"../../context/commActions\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport { useSelectedAccount } from \"../../context/hooks/useSelectedAccount\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport { classnames } from \"../../styles\"\r\nimport { formatRounded } from \"../../util/formatRounded\"\r\nimport useCurrencyFromatter from \"../../util/hooks/useCurrencyFormatter\"\r\nimport useGetAssetByTokenAddress from \"../../util/hooks/useGetAssetByTokenAddress\"\r\nimport useTokenTransactions from \"../../util/hooks/useTokenTransactions\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { generateExplorerLink, getExplorerTitle } from \"../../util/getExplorer\"\r\nimport { AssetIcon } from \"../AssetsList\"\r\nimport RoundedIconButton from \"../button/RoundedIconButton\"\r\nimport AnimatedIcon, { AnimatedIconName } from \"../../components/AnimatedIcon\"\r\nimport ArrowHoverAnimation from \"../icons/ArrowHoverAnimation\"\r\nimport openExternal from \"../../assets/images/icons/open_external.svg\"\r\nimport PopupHeader from \"../popup/PopupHeader\"\r\nimport PopupLayout from \"../popup/PopupLayout\"\r\nimport TokenSummary from \"../token/TokenSummary\"\r\nimport TransactionsList from \"../transactions/TransactionsList\"\r\n\r\nimport log from \"loglevel\"\r\nimport ConfirmDialog from \"../dialog/ConfirmDialog\"\r\nimport { isNativeTokenAddress } from \"../../util/tokenUtils\"\r\nimport SuccessDialog from \"../dialog/SuccessDialog\"\r\nimport { formatName } from \"../../util/formatAccount\"\r\nimport Icon, { IconName } from \"../ui/Icon\"\r\nimport DoubleArrowHoverAnimation from \"../icons/DoubleArrowHoverAnimation\"\r\n\r\nconst AssetDetailsPage = () => {\r\n    const state = useBlankState()!\r\n    const history: any = useOnMountHistory()\r\n    const address = history.location.state.address\r\n\r\n    const { availableNetworks, selectedNetwork } = useBlankState()!\r\n\r\n    const account = useSelectedAccount()\r\n    const currencyFormatter = useCurrencyFromatter()\r\n    const { isSendEnabled, isSwapEnabled, isBridgeEnabled } =\r\n        useSelectedNetwork()\r\n    const asset = useGetAssetByTokenAddress(address)\r\n    const isNative = isNativeTokenAddress(address)\r\n    const tokenTransactions = useTokenTransactions(asset?.token)\r\n\r\n    const [confirmOpen, setConfirmOpen] = useState(false)\r\n    const [isRemoving, setIsRemoving] = useState(false)\r\n    const [successOpen, setSuccessOpen] = useState(false)\r\n\r\n    if (!asset) {\r\n        return null\r\n    }\r\n\r\n    const { token, balance } = asset\r\n    if (!token) {\r\n        return <p>Token not found</p>\r\n    }\r\n\r\n    const formattedTokenBalance = formatUnits(balance || \"0\", token.decimals)\r\n\r\n    const roundedTokenBalance = formatRounded(formattedTokenBalance, 5)\r\n\r\n    const explorerName = getExplorerTitle(availableNetworks, selectedNetwork)\r\n\r\n    const optionsWidth = (explorerName?.length ?? 0) > 10 ? \"w-44\" : \"w-40\"\r\n\r\n    const removeToken = async () => {\r\n        try {\r\n            setIsRemoving(true)\r\n            await deleteCustomToken(token.address)\r\n            setIsRemoving(false)\r\n\r\n            history.push({ pathname: \"/home\" })\r\n        } catch (error) {\r\n            log.error(\"Eror deleting token from list\")\r\n        }\r\n    }\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    onBack={() => history.push(\"/home\")}\r\n                    title={`${formatName(account.name, 14)} - ${formatName(\r\n                        token.symbol,\r\n                        12\r\n                    )}`}\r\n                    close={false}\r\n                    disabled={isRemoving}\r\n                    actions={\r\n                        !isNative\r\n                            ? [\r\n                                  <a\r\n                                      href={generateExplorerLink(\r\n                                          availableNetworks,\r\n                                          selectedNetwork,\r\n                                          token.address,\r\n                                          \"address\"\r\n                                      )}\r\n                                      target=\"_blank\"\r\n                                      rel=\"noopener noreferrer\"\r\n                                      key={1}\r\n                                  >\r\n                                      <div\r\n                                          className={classnames(\r\n                                              \"text-grey-900 cursor-pointer flex flex-row items-center p-2 hover:bg-gray-100 rounded-t-md\",\r\n                                              optionsWidth\r\n                                          )}\r\n                                      >\r\n                                          <div className=\"pl-1 pr-1 w-8\">\r\n                                              <img\r\n                                                  width={\"16\"}\r\n                                                  height={\"16\"}\r\n                                                  src={openExternal}\r\n                                                  alt={`View on ${explorerName}`}\r\n                                              />\r\n                                          </div>\r\n                                          <span>View on {explorerName}</span>\r\n                                      </div>\r\n                                  </a>,\r\n                                  <div\r\n                                      key={2}\r\n                                      onClick={() => {\r\n                                          setConfirmOpen(true)\r\n                                      }}\r\n                                      className={classnames(\r\n                                          \"text-red-500 cursor-pointer flex flex-row items-center p-2 hover:bg-gray-100 rounded-b-md w-40\",\r\n                                          optionsWidth\r\n                                      )}\r\n                                  >\r\n                                      <div className=\"pl-1 pr-1 w-8\">\r\n                                          <Icon\r\n                                              name={IconName.TRASH_BIN}\r\n                                              profile=\"danger\"\r\n                                          />\r\n                                      </div>\r\n                                      <span>Remove Token</span>\r\n                                  </div>,\r\n                              ]\r\n                            : undefined\r\n                    }\r\n                />\r\n            }\r\n        >\r\n            <ConfirmDialog\r\n                title=\"Remove Token\"\r\n                message={`Are you sure you want to remove ${token.symbol} token from the list?`}\r\n                open={confirmOpen}\r\n                onClose={() => setConfirmOpen(false)}\r\n                onConfirm={() => {\r\n                    setSuccessOpen(true)\r\n                    setConfirmOpen(false)\r\n                }}\r\n            />\r\n            <SuccessDialog\r\n                open={successOpen}\r\n                title={\"Token Removed\"}\r\n                message={`${token.symbol} token was successfully removed.`}\r\n                onDone={() => {\r\n                    setSuccessOpen(false)\r\n                    removeToken()\r\n                }}\r\n                timeout={1000}\r\n            />\r\n\r\n            <div className=\"flex flex-col items-start flex-1 w-full h-0 max-h-screen p-6 space-y-6 overflow-auto hide-scroll\">\r\n                <TokenSummary minHeight=\"13rem\" className=\"mt-2\">\r\n                    <TokenSummary.Balances className=\"mt-2\">\r\n                        <AssetIcon filled asset={token} />\r\n                        <TokenSummary.TokenName>\r\n                            {token.name}\r\n                        </TokenSummary.TokenName>\r\n                        <TokenSummary.TokenBalance\r\n                            className=\"flex flex-row space-x-1\"\r\n                            title={`${formattedTokenBalance} ${token.symbol}`}\r\n                        >\r\n                            <span\r\n                                className=\"truncate w-full max-w-xs\"\r\n                                style={{ maxWidth: \"18rem\" }}\r\n                            >\r\n                                {`${roundedTokenBalance} ${token.symbol}`}\r\n                            </span>\r\n                        </TokenSummary.TokenBalance>\r\n                        <TokenSummary.ExchangeRateBalance>\r\n                            {currencyFormatter.format(\r\n                                balance,\r\n                                token.symbol,\r\n                                token.decimals,\r\n                                isNative\r\n                            )}\r\n                        </TokenSummary.ExchangeRateBalance>\r\n                    </TokenSummary.Balances>\r\n                    <TokenSummary.Actions className=\"mb-4\">\r\n                        <Link\r\n                            to={{\r\n                                pathname: \"/send\",\r\n                                state: { asset, transitionDirection: \"left\" },\r\n                            }}\r\n                            draggable={false}\r\n                            className={classnames(\r\n                                \"flex flex-col items-center space-y-2 group\",\r\n                                !isSendEnabled && \"pointer-events-none\"\r\n                            )}\r\n                        >\r\n                            <RoundedIconButton\r\n                                Icon={ArrowHoverAnimation}\r\n                                disabled={!isSendEnabled}\r\n                            >\r\n                                Send\r\n                            </RoundedIconButton>\r\n                        </Link>\r\n                        {isSwapEnabled && (\r\n                            <Link\r\n                                to={{\r\n                                    pathname: \"/swap\",\r\n                                    state: {\r\n                                        fromToken: asset.token,\r\n                                        fromTokenBalance: asset.balance,\r\n                                        fromAssetPage: true,\r\n                                        transitionDirection: \"left\",\r\n                                    },\r\n                                }}\r\n                                draggable={false}\r\n                                className={classnames(\r\n                                    \"flex flex-col items-center space-y-2 group\",\r\n                                    (!isSendEnabled ||\r\n                                        !state.isUserNetworkOnline) &&\r\n                                        \"pointer-events-none\"\r\n                                )}\r\n                            >\r\n                                <div\r\n                                    className={classnames(\r\n                                        \"w-8 h-8 overflow-hidden transition duration-300 rounded-full group-hover:opacity-75\",\r\n                                        !isSendEnabled ||\r\n                                            !state.isUserNetworkOnline\r\n                                            ? \"bg-gray-300\"\r\n                                            : \"bg-primary-300\"\r\n                                    )}\r\n                                    style={{ transform: \"scaleY(-1)\" }}\r\n                                >\r\n                                    <DoubleArrowHoverAnimation />\r\n                                </div>\r\n                                <span className=\"text-xs font-medium\">\r\n                                    Swap\r\n                                </span>\r\n                            </Link>\r\n                        )}\r\n                        {isBridgeEnabled && (\r\n                            <Link\r\n                                to={{\r\n                                    pathname: \"/bridge\",\r\n                                    state: {\r\n                                        token: asset.token,\r\n                                        fromAssetPage: true,\r\n                                        transitionDirection: \"left\",\r\n                                    },\r\n                                }}\r\n                                draggable={false}\r\n                                className={classnames(\r\n                                    \"flex flex-col items-center space-y-2 group\",\r\n                                    (!isSendEnabled ||\r\n                                        !state.isUserNetworkOnline) &&\r\n                                        \"pointer-events-none\"\r\n                                )}\r\n                            >\r\n                                <div\r\n                                    className={classnames(\r\n                                        \"w-8 h-8 overflow-hidden transition duration-300 rounded-full group-hover:opacity-75\",\r\n                                        !isSendEnabled ||\r\n                                            !state.isUserNetworkOnline\r\n                                            ? \"bg-gray-300\"\r\n                                            : \"bg-primary-300\"\r\n                                    )}\r\n                                    style={{ transform: \"scaleY(-1)\" }}\r\n                                >\r\n                                    <AnimatedIcon\r\n                                        icon={AnimatedIconName.Bridge}\r\n                                        className=\"cursor-pointer\"\r\n                                    />\r\n                                </div>\r\n                                <span className=\"text-xs font-medium\">\r\n                                    Bridge\r\n                                </span>\r\n                            </Link>\r\n                        )}\r\n                    </TokenSummary.Actions>\r\n                </TokenSummary>\r\n                <div className=\"flex flex-col flex-1 w-full space-y-0 border-t border-gray-200\">\r\n                    {tokenTransactions.length > 0 ? (\r\n                        <TransactionsList transactions={tokenTransactions} />\r\n                    ) : (\r\n                        <span className=\"text-sm text-gray-500 pt-4 mx-auto\">\r\n                            You have no transactions.\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default AssetDetailsPage\r\n","import { FunctionComponent } from \"react\"\r\n\r\nexport const ButtonWithIcon: FunctionComponent<{\r\n    onClick?: React.MouseEventHandler<HTMLButtonElement>\r\n    disabled?: boolean\r\n    disableStyles?: boolean\r\n    icon?: string\r\n    label: string\r\n    to?: string\r\n}> = ({ disableStyles, disabled, onClick, icon, label, to }) => {\r\n    const className = \"flex flex-row space-x-3 items-center text-gray-900\"\r\n    const children = (\r\n        <>\r\n            {icon && <img src={icon} alt=\"icon\" className=\"w-5 h-5\" />}\r\n            <span className=\"font-bold\">{label}</span>\r\n        </>\r\n    )\r\n\r\n    return (\r\n        <button\r\n            type=\"button\"\r\n            disabled={disabled}\r\n            className={\r\n                !disableStyles\r\n                    ? `flex flex-row items-center justify-between p-4 rounded-md text-sm transform transition-all duration-300 active:scale-95\r\n                 disabled:pointer-events-none bg-primary-100 hover:bg-primary-200\r\n                ${disabled ? \"pointer-events-none\" : \"\"}\r\n              `\r\n                    : \"\"\r\n            }\r\n            onClick={onClick}\r\n        >\r\n            {to?.includes(\"https://\") ? (\r\n                <a\r\n                    className={className}\r\n                    href={to}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                >\r\n                    {children}\r\n                </a>\r\n            ) : (\r\n                <div className={className}>{children}</div>\r\n            )}\r\n        </button>\r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/refresh.3d6dfcf0.svg\";","import { useState } from \"react\"\r\nimport { ButtonWithIcon } from \"../../components/button/ButtonWithIcon\"\r\nimport ToggleButton from \"../../components/button/ToggleButton\"\r\nimport AntiPhishing from \"../../components/phishing/AntiPhishing\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport refresh from \"../../assets/images/icons/refresh.svg\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport {\r\n    toggleAntiPhishingProtection,\r\n    updateAntiPhishingImage,\r\n} from \"../../context/commActions\"\r\nimport log from \"loglevel\"\r\nimport SuccessDialog from \"../../components/dialog/SuccessDialog\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { generatePhishingPreventionBase64 } from \"../../util/phishingPrevention\"\r\n\r\nconst PhishingProtectionPreferencesPage = () => {\r\n    const history = useHistory()\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const { antiPhishingImage, settings } = useBlankState()!\r\n    const [newPhishingImage, setNewPhishingImage] = useState(antiPhishingImage)\r\n    const [showSuccessDialog, setShowSuccessDialog] = useState<boolean>(false)\r\n    const [phishingEnabled, setPhishingEnabled] = useState(\r\n        settings.useAntiPhishingProtection\r\n    )\r\n    const isDirtyEnabled =\r\n        phishingEnabled !== settings.useAntiPhishingProtection\r\n    const isDirtyImage = antiPhishingImage !== newPhishingImage\r\n\r\n    const isDirty = isDirtyEnabled || isDirtyImage\r\n    const onSave = async () => {\r\n        try {\r\n            setIsLoading(true)\r\n            if (isDirtyEnabled) {\r\n                await toggleAntiPhishingProtection(phishingEnabled)\r\n            }\r\n            //only update phishing image if it is turned on.\r\n            if (isDirtyImage && phishingEnabled) {\r\n                await updateAntiPhishingImage(newPhishingImage)\r\n            }\r\n            setShowSuccessDialog(true)\r\n        } catch (e) {\r\n            throw new Error(\"Could not update Anti Phishing information\")\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    const refreshImage = async () => {\r\n        try {\r\n            const newImage = await generatePhishingPreventionBase64()\r\n            setNewPhishingImage(newImage)\r\n        } catch (e) {\r\n            log.error(\"error generating the phishing prevention image\")\r\n        }\r\n    }\r\n    return (\r\n        <PopupLayout\r\n            header={<PopupHeader title=\"Phishing Protection\" close=\"/\" />}\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        label=\"Save\"\r\n                        disabled={!isDirty}\r\n                        onClick={onSave}\r\n                        isLoading={isLoading}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <SuccessDialog\r\n                open={showSuccessDialog}\r\n                title=\"Phishing Protection\"\r\n                timeout={800}\r\n                message=\"Your changes have been succesfully saved!\"\r\n                onDone={history.goBack}\r\n            />\r\n            <div className=\"flex flex-col p-6 space-y-6 w-full\">\r\n                <span className=\"text-sm text-gray-500\">\r\n                    The following image is uniquely created for you to prevent\r\n                    phishing attempts. Ensure this graphic is on every\r\n                    login/seed phrase page.\r\n                </span>\r\n                <ToggleButton\r\n                    label=\"Use Phishing Protection\"\r\n                    defaultChecked={phishingEnabled}\r\n                    onToggle={(checked: boolean) => {\r\n                        setPhishingEnabled(checked)\r\n                    }}\r\n                />\r\n                {phishingEnabled && (\r\n                    <>\r\n                        <div className=\"mt-1\">\r\n                            <AntiPhishing image={newPhishingImage} />\r\n                        </div>\r\n                        <ButtonWithIcon\r\n                            icon={refresh}\r\n                            label=\"Regenerate Image\"\r\n                            onClick={refreshImage}\r\n                        />\r\n                    </>\r\n                )}\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default PhishingProtectionPreferencesPage\r\n","import { useCallback, useEffect, useState } from \"react\"\r\nimport { Currency } from \"@block-wallet/background/utils/currency\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport SuccessDialog from \"../../components/dialog/SuccessDialog\"\r\nimport Select from \"../../components/input/Select\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport {\r\n    getValidCurrencies,\r\n    setNativeCurrency,\r\n} from \"../../context/commActions\"\r\n\r\nconst LocalePreferencesPage = () => {\r\n    const history = useHistory()\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [validCurrencies, setValidCurrencies] = useState<Currency[]>([])\r\n    const [showSuccessDialog, setShowSuccessDialog] = useState<boolean>(false)\r\n    const { nativeCurrency } = useBlankState()!\r\n    const [newCurrency, setNewCurrency] = useState(nativeCurrency)\r\n    const onSave = useCallback(async () => {\r\n        try {\r\n            setIsLoading(true)\r\n            await setNativeCurrency(newCurrency)\r\n            setShowSuccessDialog(true)\r\n        } catch (e) {\r\n            throw new Error(\"Could not update the currency\")\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }, [newCurrency])\r\n\r\n    useEffect(() => {\r\n        getValidCurrencies().then((currencies) => {\r\n            setValidCurrencies(currencies)\r\n        })\r\n    }, [])\r\n    return (\r\n        <PopupLayout\r\n            submitOnEnter={{\r\n                onSubmit: onSave,\r\n                isEnabled: newCurrency !== nativeCurrency,\r\n            }}\r\n            header={<PopupHeader title=\"Locale Configuration\" close=\"/\" />}\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        label=\"Save\"\r\n                        isLoading={isLoading}\r\n                        disabled={newCurrency === nativeCurrency}\r\n                        onClick={onSave}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <SuccessDialog\r\n                open={showSuccessDialog}\r\n                title=\"Locale Configuration\"\r\n                timeout={800}\r\n                message=\"Your changes have been succesfully saved!\"\r\n                onDone={history.goBack}\r\n            />\r\n            <div className=\"flex flex-col p-6 space-y-6 w-full\">\r\n                {validCurrencies.length ? (\r\n                    <Select\r\n                        onChange={setNewCurrency}\r\n                        currentValue={newCurrency}\r\n                        id=\"currency\"\r\n                        label=\"Currency\"\r\n                    >\r\n                        {validCurrencies.map((c) => (\r\n                            <Select.Option value={c.code}>\r\n                                {`${c.code.toUpperCase()} - ${\r\n                                    c.name || c.code.toUpperCase()\r\n                                }`}\r\n                            </Select.Option>\r\n                        ))}\r\n                    </Select>\r\n                ) : null}\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default LocalePreferencesPage\r\n","export default __webpack_public_path__ + \"static/media/pin.1633aee9.svg\";","export default __webpack_public_path__ + \"static/media/world.7c10a207.svg\";","export default __webpack_public_path__ + \"static/media/gas.ee3efee0.svg\";","export default __webpack_public_path__ + \"static/media/news.71efb64d.svg\";","export default __webpack_public_path__ + \"static/media/bell.a3eb36aa.svg\";","export default __webpack_public_path__ + \"static/media/shield.0023747b.svg\";","import PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport pin from \"../../assets/images/icons/pin.svg\"\r\nimport lock from \"../../assets/images/icons/lock.svg\"\r\nimport world from \"../../assets/images/icons/world.svg\"\r\nimport gas from \"../../assets/images/icons/gas.svg\"\r\nimport news from \"../../assets/images/icons/news.svg\"\r\nimport bell from \"../../assets/images/icons/bell.svg\"\r\nimport shield from \"../../assets/images/icons/shield.svg\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport classnames from \"classnames\"\r\nimport VerticalSelect from \"../../components/input/VerticalSelect\"\r\n\r\nconst PreferencesPage = () => {\r\n    const history = useHistory()\r\n    const options = [\r\n        {\r\n            icon: lock,\r\n            label: \"Lock Timeout\",\r\n            to: \"/settings/preferences/lockTimeout\",\r\n        },\r\n        {\r\n            icon: pin,\r\n            label: \"Locale Configuration\",\r\n            to: \"/settings/preferences/locale\",\r\n        },\r\n        {\r\n            icon: news,\r\n            label: \"Release Notes\",\r\n            to: \"/settings/preferences/releaseNotes\",\r\n        },\r\n        {\r\n            icon: world,\r\n            label: \"Default Browser Wallet\",\r\n            to: \"/settings/preferences/defaultWallet\",\r\n        },\r\n        {\r\n            icon: gas,\r\n            label: \"Default Gas Setting\",\r\n            to: \"/settings/preferences/defaultGas\",\r\n        },\r\n        {\r\n            icon: bell,\r\n            label: \"Warnings\",\r\n            to: \"/settings/preferences/warnings\",\r\n        },\r\n        {\r\n            icon: shield,\r\n            label: \"Phishing Protection\",\r\n            to: \"/settings/preferences/phishing\",\r\n        },\r\n    ]\r\n\r\n    return (\r\n        <PopupLayout header={<PopupHeader title=\"Preferences\" close=\"/\" />}>\r\n            <div className=\"flex flex-col space-y-6 p-6\">\r\n                <div className=\"flex flex-col space-y-1\">\r\n                    <div className=\"flex flex-col space-y-4\">\r\n                        <VerticalSelect\r\n                            options={options}\r\n                            value={undefined}\r\n                            onChange={(option) =>\r\n                                history.push({\r\n                                    pathname: option.to,\r\n                                    state: {\r\n                                        from: \"/settings\",\r\n                                        ...(option.state ?? {}),\r\n                                    },\r\n                                })\r\n                            }\r\n                            containerClassName=\"flex flex-col space-y-4\"\r\n                            display={(option, i) => {\r\n                                const className =\r\n                                    \"flex flex-row space-x-3 items-center text-gray-900\"\r\n                                const children = (\r\n                                    <>\r\n                                        <div\r\n                                            className={classnames(\r\n                                                option.classes ?? \"\"\r\n                                            )}\r\n                                        >\r\n                                            <img\r\n                                                src={option.icon}\r\n                                                alt=\"icon\"\r\n                                                className={\r\n                                                    option.size ?? \"w-5 h-5\"\r\n                                                }\r\n                                            />\r\n                                        </div>\r\n                                        <span className=\"font-bold\">\r\n                                            {option.label}\r\n                                        </span>\r\n                                    </>\r\n                                )\r\n                                return (\r\n                                    <div className={classnames(className)}>\r\n                                        {children}\r\n                                    </div>\r\n                                )\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default PreferencesPage\r\n","import { useState, FC } from \"react\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport ToggleButton from \"../../components/button/ToggleButton\"\r\nimport SuccessDialog from \"../../components/dialog/SuccessDialog\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { toggleDefaultBrowserWallet } from \"../../context/commActions\"\r\nimport useAsyncInvoke from \"../../util/hooks/useAsyncInvoke\"\r\n\r\ninterface DefaultWalletPreferencesProps {\r\n    isWelcome?: boolean\r\n    dismissDefaultWalletPreferences: () => void\r\n}\r\n\r\nconst DefaultWalletPreferencesPage: FC<DefaultWalletPreferencesProps> = ({\r\n    isWelcome, // if component was entered before welcome message\r\n    dismissDefaultWalletPreferences,\r\n}) => {\r\n    const { settings } = useBlankState()!\r\n    const history = useHistory()\r\n    const { run, isSuccess, isError } = useAsyncInvoke()\r\n    const [defaultBrowserWallet, setDefaultBrowserWallet] = useState<boolean>(\r\n        settings.defaultBrowserWallet\r\n    )\r\n    const wasDefaultBrowserWallet = settings.defaultBrowserWallet\r\n\r\n    const onSave = async () => {\r\n        run(toggleDefaultBrowserWallet(defaultBrowserWallet))\r\n    }\r\n\r\n    const onNext = async () => {\r\n        if (isDirty) {\r\n            run(toggleDefaultBrowserWallet(defaultBrowserWallet))\r\n        } else {\r\n            dismissDefaultWalletPreferences()\r\n        }\r\n    }\r\n\r\n    if (isError) {\r\n        throw new Error(\"Could not toggle default browser wallet\")\r\n    }\r\n\r\n    const isDirty = defaultBrowserWallet !== settings.defaultBrowserWallet\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    title=\"Default Browser Wallet\"\r\n                    backButton={!isWelcome}\r\n                    close={isWelcome ? false : \"/\"}\r\n                />\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        label={isWelcome ? \"Next\" : \"Save\"}\r\n                        disabled={isWelcome ? false : !isDirty}\r\n                        onClick={isWelcome ? onNext : onSave}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <div className=\"flex flex-col p-6 space-y-6 w-full\">\r\n                <div className=\"text-sm text-gray-500\">\r\n                    {wasDefaultBrowserWallet ? (\r\n                        <span>\r\n                            BlockWallet is set as your default browser wallet.\r\n                        </span>\r\n                    ) : (\r\n                        <span>\r\n                            BlockWallet is not set as your default browser\r\n                            wallet.\r\n                        </span>\r\n                    )}\r\n                </div>\r\n\r\n                <SuccessDialog\r\n                    open={isSuccess}\r\n                    title=\"Default Browser Wallet\"\r\n                    timeout={800}\r\n                    message=\"Your changes have been succesfully saved!\"\r\n                    onDone={\r\n                        isWelcome\r\n                            ? dismissDefaultWalletPreferences\r\n                            : history.goBack\r\n                    }\r\n                />\r\n\r\n                <ToggleButton\r\n                    label=\"Default Browser Wallet\"\r\n                    defaultChecked={defaultBrowserWallet}\r\n                    onToggle={setDefaultBrowserWallet}\r\n                />\r\n\r\n                <div className=\"text-sm text-gray-500\">\r\n                    {wasDefaultBrowserWallet ? (\r\n                        <span>\r\n                            Turning this off will make BlockWallet unable to\r\n                            connect to DApps in case you have more than one\r\n                            wallet installed in your browser. Turn it off if you\r\n                            want a different browser wallet to connect to the\r\n                            DApps you are visiting.\r\n                        </span>\r\n                    ) : (\r\n                        <span>\r\n                            Turning this on will make BlockWallet connect to\r\n                            DApps by default. Turn it on if you want to use\r\n                            BlockWallet to connect to DApps, instead of other\r\n                            browser wallets.\r\n                        </span>\r\n                    )}\r\n                    <br />\r\n                    <br />\r\n\r\n                    <span>\r\n                        You can change this setting at any time. Be aware that\r\n                        you need to refresh any DApp pages you might be on, for\r\n                        these changes to take affect.\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default DefaultWalletPreferencesPage\r\n","import { DefaultGasOptions } from \"@block-wallet/background/controllers/PreferencesController\"\r\nimport classnames from \"classnames\"\r\nimport { useCallback, useState } from \"react\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport SuccessDialog from \"../../components/dialog/SuccessDialog\"\r\nimport MiniCheckmark from \"../../components/icons/MiniCheckmark\"\r\nimport InfoComponent from \"../../components/InfoComponent\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { setDefaultGasPreference } from \"../../context/commActions\"\r\n\r\nconst gasOptions = [\r\n    { name: \"low\", desc: \"Cheaper but slower\" },\r\n    { name: \"medium\", desc: \"Balance price and speed\" },\r\n    { name: \"high\", desc: \"Pricier but faster\" },\r\n]\r\nconst DefaultGasPreferencesPage = () => {\r\n    const history = useHistory()\r\n\r\n    const defaultGasOption = useBlankState()?.defaultGasOption || \"medium\"\r\n    const [selectedOption, setSelectedOption] =\r\n        useState<DefaultGasOptions>(defaultGasOption)\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [showSuccessDialog, setShowSuccessDialog] = useState(false)\r\n\r\n    const onSave = useCallback(async () => {\r\n        try {\r\n            setIsLoading(true)\r\n            await setDefaultGasPreference(selectedOption)\r\n            setShowSuccessDialog(true)\r\n        } catch (e) {\r\n            throw new Error(\"Could not update the default gas option\")\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }, [selectedOption])\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader title=\"Default Gas Setting\" disabled={isLoading} />\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        label=\"Save\"\r\n                        isLoading={isLoading}\r\n                        disabled={defaultGasOption === selectedOption}\r\n                        onClick={onSave}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <SuccessDialog\r\n                open={showSuccessDialog}\r\n                title=\"Default Gas Option\"\r\n                timeout={800}\r\n                message=\"Your changes have been succesfully saved!\"\r\n                onDone={history.goBack}\r\n            />\r\n            <div className=\"flex flex-col p-6 space-y-4 w-full\">\r\n                <span className=\"text-sm text-gray-500\">\r\n                    Set your preferred gas setting for all future transactions.\r\n                </span>\r\n                <div className=\"flex flex-col w-full space-y-4\">\r\n                    {gasOptions.map((option) => (\r\n                        <div\r\n                            key={option.name}\r\n                            className={classnames(\r\n                                \"w-full flex flex-row p-4 justify-between cursor-pointer rounded-md hover:border-primary-300 hover:text-primary-300 border\",\r\n                                selectedOption === option.name &&\r\n                                    \"text-primary-300 border-primary-300\"\r\n                            )}\r\n                            onClick={() => {\r\n                                setSelectedOption(\r\n                                    option.name as DefaultGasOptions\r\n                                )\r\n                            }}\r\n                        >\r\n                            <div className=\"flex flex-col space-y-1\">\r\n                                <label\r\n                                    className={classnames(\r\n                                        \"text-sm font-semibold cursor-pointer capitalize\"\r\n                                    )}\r\n                                >\r\n                                    {option.name}\r\n                                </label>\r\n                                <span className=\"text-xs\">{option.desc}</span>\r\n                            </div>\r\n                            {selectedOption === option.name && (\r\n                                <div className=\"h-full flex items-center\">\r\n                                    <MiniCheckmark fill=\"#1673FF\" />\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n                <div className=\"flex flex-row space-x-2 w-full \">\r\n                    <InfoComponent>\r\n                        This setting will apply on all transactions on all\r\n                        networks. You will still be able to change the gas\r\n                        amount before submitting your transactions.\r\n                    </InfoComponent>\r\n                </div>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default DefaultGasPreferencesPage\r\n","import { useState } from \"react\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport ToggleButton from \"../../components/button/ToggleButton\"\r\nimport SuccessDialog from \"../../components/dialog/SuccessDialog\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { toggleReleaseNotesSubscription } from \"../../context/commActions\"\r\nimport useAsyncInvoke from \"../../util/hooks/useAsyncInvoke\"\r\n\r\nconst ReleaseNotesPreferencesPage = () => {\r\n    const { settings } = useBlankState()!\r\n    const { run, isSuccess, isError, isLoading } = useAsyncInvoke()\r\n    const history = useHistory()\r\n    const [subscribedReleaseNotes, setSubscribedToReleaseNotes] =\r\n        useState<boolean>(settings.subscribedToReleaseaNotes)\r\n\r\n    const onSave = async () => {\r\n        run(toggleReleaseNotesSubscription(subscribedReleaseNotes))\r\n    }\r\n\r\n    if (isError) {\r\n        throw new Error(\"Could not update release notes subscription\")\r\n    }\r\n    const isDirty =\r\n        subscribedReleaseNotes !== settings.subscribedToReleaseaNotes\r\n    return (\r\n        <PopupLayout\r\n            header={<PopupHeader title=\"Release Notes\" close=\"/\" />}\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        label=\"Save\"\r\n                        disabled={!isDirty}\r\n                        onClick={onSave}\r\n                        isLoading={isLoading}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <div className=\"flex flex-col p-6 space-y-6 w-full\">\r\n                <span className=\"text-sm text-gray-500\">\r\n                    Be up-to-date with latest BlockWallet news.\r\n                </span>\r\n                <SuccessDialog\r\n                    open={isSuccess}\r\n                    title=\"Release Notes\"\r\n                    timeout={800}\r\n                    message=\"Your changes have been succesfully saved!\"\r\n                    onDone={history.goBack}\r\n                />\r\n                <ToggleButton\r\n                    label=\"Show Release Notes\"\r\n                    defaultChecked={subscribedReleaseNotes}\r\n                    onToggle={setSubscribedToReleaseNotes}\r\n                />\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default ReleaseNotesPreferencesPage\r\n","import { FC } from \"react\"\r\nimport CheckmarkCircle from \"../icons/CheckmarkCircle\"\r\nimport ExclamationCircleIconFull from \"../icons/ExclamationCircleIconFull\"\r\nimport classnames from \"classnames\"\r\n\r\ninterface ClassNameProp {\r\n    className?: string\r\n}\r\n\r\ninterface InfoItemProps extends ClassNameProp {\r\n    type: \"success\" | \"warn\"\r\n}\r\n\r\ninterface InfoComponents {\r\n    Item: FC<InfoItemProps & { children: React.ReactNode }>\r\n    Title: FC<{ children: React.ReactNode }>\r\n    List: FC<ClassNameProp & { children: React.ReactNode }>\r\n}\r\n\r\nconst Info: FC<{ children: React.ReactNode }> & InfoComponents = ({\r\n    children,\r\n}) => {\r\n    return <div>{children}</div>\r\n}\r\n\r\nconst Title = ({ children }: { children: React.ReactNode }) => {\r\n    return (\r\n        <span className=\"text-2xl font-bold leading-10 font-title\">\r\n            {children}\r\n        </span>\r\n    )\r\n}\r\n\r\nconst InfoList: FC<ClassNameProp & { children: React.ReactNode }> = ({\r\n    children,\r\n    className,\r\n}) => {\r\n    return (\r\n        <ul className={classnames(\"list-none\", className || \"\")}>{children}</ul>\r\n    )\r\n}\r\n\r\nconst BulletType = {\r\n    success: () => <CheckmarkCircle size=\"24\" />,\r\n    warn: () => <ExclamationCircleIconFull size=\"24\" />,\r\n}\r\n\r\nconst Item: FC<InfoItemProps & { children: React.ReactNode }> = ({\r\n    children,\r\n    type,\r\n    className,\r\n}) => {\r\n    const Bullet = BulletType[type]\r\n    return (\r\n        <li className={classnames(\"mb-5 flex items-start\", className || \"\")}>\r\n            <div className=\"flex-none mr-3\">\r\n                <Bullet />\r\n            </div>\r\n            <span className=\"flex-1 text-sm text-slate-600 leading-6 align-middle\">\r\n                {children}\r\n            </span>\r\n        </li>\r\n    )\r\n}\r\n\r\nInfo.Item = Item\r\nInfo.Title = Title\r\nInfo.List = InfoList\r\n\r\nexport default Info\r\n","import * as yup from \"yup\"\r\nimport AccountIcon from \"../../components/icons/AccountIcon\"\r\nimport Divider from \"../../components/Divider\"\r\nimport ErrorMessage from \"../../components/error/ErrorMessage\"\r\nimport GasPriceComponent from \"../../components/transactions/GasPriceComponent\"\r\nimport MiniCheckmark from \"../../components/icons/MiniCheckmark\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport {\r\n    useEffect,\r\n    useState,\r\n    FunctionComponent,\r\n    useMemo,\r\n    useCallback,\r\n} from \"react\"\r\nimport {\r\n    approveBridgeAllowance,\r\n    approveExchange,\r\n    getApproveTransactionGasLimit,\r\n    getLatestGasPrice,\r\n} from \"../../context/commActions\"\r\nimport WaitingDialog from \"../../components/dialog/WaitingDialog\"\r\nimport { useTokensList } from \"../../context/hooks/useTokensList\"\r\nimport { APPROVE_GAS_COST } from \"../../util/constants\"\r\nimport { AdvancedSettings } from \"../../components/transactions/AdvancedSettings\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport { Classes, classnames } from \"../../styles/classes\"\r\nimport { GasPriceSelector } from \"../../components/transactions/GasPriceSelector\"\r\nimport { InferType } from \"yup\"\r\nimport { formatName } from \"../../util/formatAccount\"\r\nimport { formatRounded } from \"../../util/formatRounded\"\r\nimport { formatUnits, parseUnits } from \"@ethersproject/units\"\r\nimport { getAccountColor } from \"../../util/getAccountColor\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useGasPriceData } from \"../../context/hooks/useGasPriceData\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport { useSelectedAccount } from \"../../context/hooks/useSelectedAccount\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport HardwareDeviceNotLinkedDialog from \"../../components/dialog/HardwareDeviceNotLinkedDialog\"\r\nimport useCheckAccountDeviceLinked from \"../../util/hooks/useCheckAccountDeviceLinked\"\r\nimport { getDeviceFromAccountType } from \"../../util/hardwareDevice\"\r\nimport { useLocationRecovery } from \"../../util/hooks/useLocationRecovery\"\r\nimport useLocalStorageState from \"../../util/hooks/useLocalStorageState\"\r\nimport { useInProgressInternalTransaction } from \"../../context/hooks/useInProgressInternalTransaction\"\r\nimport { isHardwareWallet } from \"../../util/account\"\r\nimport { useTransactionWaitingDialog } from \"../../context/hooks/useTransactionWaitingDialog\"\r\nimport { HardwareWalletOpTypes } from \"../../context/commTypes\"\r\nimport { rejectTransaction } from \"../../context/commActions\"\r\nimport { SwapConfirmPageLocalState } from \"../swap/SwapConfirmPage\"\r\nimport { ExchangeType } from \"../../context/commTypes\"\r\nimport { TransactionAdvancedData } from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport { BridgeConfirmPageLocalState } from \"../bridge/BridgeConfirmPage\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { MaxUint256 } from \"@ethersproject/constants\"\r\n\r\nconst UNLIMITED_ALLOWANCE = MaxUint256\r\n\r\nexport enum ApproveOperation {\r\n    BRIDGE,\r\n    SWAP,\r\n}\r\n\r\nconst getLabels = (\r\n    operation: ApproveOperation,\r\n    assetName: string\r\n): Record<\r\n    \"mainSectionTitle\" | \"mainSectionText\" | \"editAllowanceText\",\r\n    string\r\n> => {\r\n    if (operation === ApproveOperation.BRIDGE) {\r\n        return {\r\n            mainSectionTitle: `Approve BlockWallet to bridge your ${assetName}`,\r\n            mainSectionText: `Allow BlockWallet Bridge to withdraw your ${assetName} and automate transactions for you.`,\r\n            editAllowanceText: `Allow the BlockWallet Bridge to the following amount of ${assetName}:`,\r\n        }\r\n    } else {\r\n        return {\r\n            mainSectionTitle: `Approve BlockWallet to swap your ${assetName}`,\r\n            mainSectionText: `Allow BlockWallet Swaps to withdraw your ${assetName} and automate transactions for you.`,\r\n            editAllowanceText: `Allow BlockWallet Swaps to swap up to the following amount of ${assetName}:`,\r\n        }\r\n    }\r\n}\r\n\r\ninterface ApprovePageState {\r\n    assetAllowance: BigNumber\r\n    isCustomSelected: boolean\r\n    isCustomAllowanceSaved: boolean\r\n    submitted: boolean\r\n}\r\n\r\nconst INITIAL_VALUE_PERSISTED_DATA = {\r\n    assetAllowance: UNLIMITED_ALLOWANCE,\r\n    isCustomSelected: false,\r\n    isCustomAllowanceSaved: false,\r\n    submitted: false,\r\n}\r\n\r\n// Schema\r\nconst GetAllowanceYupSchema = (\r\n    isCustomSelected: boolean,\r\n    tokenDecimals: number,\r\n    minAllowance: BigNumber\r\n) => {\r\n    return yup.object({\r\n        customAllowance: yup.string().when([], {\r\n            is: () => isCustomSelected,\r\n            then: yup\r\n                .string()\r\n                .test(\r\n                    \"req\",\r\n                    \"Please enter a custom limit\",\r\n                    (value?: string) => {\r\n                        if (!value) return false\r\n                        return true\r\n                    }\r\n                )\r\n                .test(\r\n                    \"decimals\",\r\n                    \"Custom limit has too many decimal numbers\",\r\n                    (value?: string) => {\r\n                        if (!value) return false\r\n                        if (!value.includes(\".\")) return true\r\n\r\n                        const valueDecimals = value.split(\".\")[1].length\r\n\r\n                        return valueDecimals <= tokenDecimals\r\n                    }\r\n                )\r\n                .test(\r\n                    \"too-low\",\r\n                    \"Custom limit is less than the minimum required\",\r\n                    (value?: string) => {\r\n                        if (!value) return false\r\n                        try {\r\n                            const parsed = parseUnits(value, tokenDecimals)\r\n\r\n                            return minAllowance.lte(parsed)\r\n                        } catch (error) {\r\n                            return false\r\n                        }\r\n                    }\r\n                )\r\n                .test(\r\n                    \"too-large\",\r\n                    \"Custom limit is larger than the unlimited allowance\",\r\n                    (value?: string) => {\r\n                        if (!value) return false\r\n                        try {\r\n                            const parsed = parseUnits(value, tokenDecimals)\r\n\r\n                            return UNLIMITED_ALLOWANCE.gte(parsed)\r\n                        } catch (error) {\r\n                            return false\r\n                        }\r\n                    }\r\n                ),\r\n        }),\r\n    })\r\n}\r\n\r\nexport interface ApprovePageLocalState {\r\n    assetAddress: string\r\n    minAllowance?: BigNumber\r\n    approveOperation: ApproveOperation\r\n    nextLocationState: BridgeConfirmPageLocalState | SwapConfirmPageLocalState\r\n}\r\n\r\nconst ApprovePage: FunctionComponent<{}> = () => {\r\n    // History\r\n    const { clear: clearLocationRecovery } = useLocationRecovery()\r\n    const history: any = useOnMountHistory()\r\n    const {\r\n        assetAddress,\r\n        minAllowance,\r\n        approveOperation = ApproveOperation.SWAP,\r\n        nextLocationState,\r\n    } = useMemo(\r\n        () => history.location.state as ApprovePageLocalState,\r\n        [history.location.state]\r\n    )\r\n\r\n    // Get data from window.localStorage\r\n    const [persistedData, setPersistedData] =\r\n        useLocalStorageState<ApprovePageState>(\"approve.form\", {\r\n            initialValue: INITIAL_VALUE_PERSISTED_DATA,\r\n            volatile: true,\r\n        })\r\n\r\n    // Hooks\r\n    const { transaction: inProgressTransaction, clearTransaction } =\r\n        useInProgressInternalTransaction()\r\n    useEffect(() => {\r\n        // Tx was either rejected or submitted when the pop-up was closed.\r\n        // If we opened back the pop-up, and there aren't any pending transactions,\r\n        // we should redirect to the home page (this is only checked on component mount)\r\n        if (!inProgressTransaction?.id && persistedData.submitted) {\r\n            history.push(\"/\")\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    const selectedAccount = useSelectedAccount()\r\n    const { chainId, isEIP1559Compatible } = useSelectedNetwork()\r\n    const { availableNetworks, selectedNetwork, defaultGasOption } =\r\n        useBlankState()!\r\n    const { nativeToken } = useTokensList()\r\n    const { gasPricesLevels } = useGasPriceData()\r\n    const { status, isOpen, dispatch, texts, titles, closeDialog, gifs } =\r\n        useTransactionWaitingDialog(\r\n            inProgressTransaction\r\n                ? {\r\n                      status: inProgressTransaction?.status,\r\n                      error: inProgressTransaction?.error as Error,\r\n                      epochTime: inProgressTransaction?.approveTime,\r\n                  }\r\n                : undefined,\r\n            HardwareWalletOpTypes.APPROVE_ALLOWANCE,\r\n            selectedAccount.accountType,\r\n            {\r\n                reject: useCallback(() => {\r\n                    if (inProgressTransaction?.id) {\r\n                        rejectTransaction(inProgressTransaction?.id)\r\n                    }\r\n                }, [inProgressTransaction?.id]),\r\n            }\r\n        )\r\n\r\n    // Local state\r\n    const setIsCustomSelected = (isCustomSelected: boolean) => {\r\n        setPersistedData((prev: ApprovePageState) => {\r\n            return {\r\n                ...prev,\r\n                isCustomSelected,\r\n            }\r\n        })\r\n    }\r\n\r\n    const { isCustomSelected, assetAllowance, isCustomAllowanceSaved } =\r\n        persistedData || INITIAL_VALUE_PERSISTED_DATA\r\n\r\n    const [isEditAllowanceSection, setIsEditAllowanceSection] =\r\n        useState<boolean>(false)\r\n    const [isGasUpdating, setIsGasUpdating] = useState<boolean>(false)\r\n    const [hasBalance, setHasBalance] = useState<boolean>(false)\r\n    const [customNonce, setCustomNonce] = useState<number | undefined>()\r\n\r\n    // Set data\r\n    const network = availableNetworks[selectedNetwork.toUpperCase()]\r\n    const isApproving = status === \"loading\" && isOpen\r\n    const minimumAllowance = BigNumber.from(minAllowance || 0)\r\n    const hasMinAllowance = minimumAllowance.gt(BigNumber.from(0))\r\n    const labels = getLabels(\r\n        approveOperation,\r\n        selectedAccount.balances[chainId].tokens[assetAddress].token.symbol\r\n    )\r\n\r\n    // Get asset object\r\n    const localAsset = selectedAccount.balances[chainId].tokens[assetAddress]\r\n    const assetBalance = localAsset.balance\r\n    const assetName = localAsset.token.symbol\r\n    const assetDecimals = localAsset.token.decimals\r\n\r\n    // Validation\r\n    const schema = GetAllowanceYupSchema(\r\n        isCustomSelected,\r\n        assetDecimals,\r\n        minimumAllowance\r\n    )\r\n    type CustomAllowanceForm = InferType<typeof schema>\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        setValue,\r\n\r\n        formState: { errors },\r\n    } = useForm<CustomAllowanceForm>({\r\n        resolver: yupResolver(schema),\r\n    })\r\n\r\n    const shouldShowError = errors.customAllowance && isCustomSelected\r\n\r\n    // Set field value on section update\r\n    useEffect(() => {\r\n        if (!isEditAllowanceSection) {\r\n            return\r\n        }\r\n\r\n        let defaultAllowance: BigNumber | null = null\r\n\r\n        if (isCustomSelected && isCustomAllowanceSaved) {\r\n            defaultAllowance = BigNumber.from(assetAllowance)\r\n        } else if (hasMinAllowance) {\r\n            defaultAllowance = minimumAllowance\r\n        }\r\n\r\n        if (defaultAllowance) {\r\n            const parsedAllowance = formatUnits(defaultAllowance, assetDecimals)\r\n\r\n            setValue(\"customAllowance\", parsedAllowance, {\r\n                shouldValidate: true,\r\n            })\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [isEditAllowanceSection])\r\n\r\n    const handleChangeAllowance = (event: any) => {\r\n        let value = event.target.value\r\n\r\n        value = value\r\n            .replace(\",\", \".\")\r\n            .replace(/[^0-9.]/g, \"\")\r\n            .replace(/(\\..*?)\\..*/g, \"$1\")\r\n\r\n        if (!value || value === \".\") {\r\n            value = \"\"\r\n        }\r\n\r\n        setValue(\"customAllowance\", value, {\r\n            shouldValidate: true,\r\n        })\r\n    }\r\n\r\n    const { isDeviceUnlinked, checkDeviceIsLinked, resetDeviceLinkStatus } =\r\n        useCheckAccountDeviceLinked()\r\n\r\n    // Gas\r\n    const [defaultGas, setDefaultGas] = useState<{\r\n        gasPrice: BigNumber\r\n        gasLimit: BigNumber\r\n    }>({\r\n        gasPrice: BigNumber.from(gasPricesLevels.average.gasPrice ?? \"0\"),\r\n        gasLimit: BigNumber.from(APPROVE_GAS_COST),\r\n    })\r\n\r\n    const [selectedFees, setSelectedFees] = useState({\r\n        maxPriorityFeePerGas: BigNumber.from(\r\n            gasPricesLevels.average.maxPriorityFeePerGas ?? \"0\"\r\n        ),\r\n        maxFeePerGas: BigNumber.from(\r\n            gasPricesLevels.average.maxFeePerGas ?? \"0\"\r\n        ),\r\n    })\r\n    const [selectedGasPrice, setSelectedGasPrice] = useState(\r\n        BigNumber.from(gasPricesLevels.average.gasPrice ?? \"0\")\r\n    )\r\n    const [selectedGasLimit, setSelectedGasLimit] = useState(\r\n        BigNumber.from(APPROVE_GAS_COST)\r\n    )\r\n\r\n    // Fees\r\n    useEffect(() => {\r\n        const fetch = async () => {\r\n            try {\r\n                setIsGasUpdating(true)\r\n                setDefaultGas({\r\n                    gasLimit: BigNumber.from(\r\n                        (\r\n                            await getApproveTransactionGasLimit(\r\n                                localAsset.token.address,\r\n                                selectedAccount.address\r\n                            )\r\n                        ).gasLimit\r\n                    ),\r\n                    gasPrice: BigNumber.from(\r\n                        !isEIP1559Compatible ? await getLatestGasPrice() : 0\r\n                    ),\r\n                })\r\n            } finally {\r\n                setIsGasUpdating(false)\r\n            }\r\n        }\r\n        fetch()\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [isEIP1559Compatible])\r\n\r\n    // Balance check\r\n    const feePerGas = !isEIP1559Compatible\r\n        ? selectedGasPrice\r\n        : selectedFees.maxFeePerGas\r\n\r\n    useEffect(() => {\r\n        setHasBalance(\r\n            selectedGasLimit.mul(feePerGas).lt(nativeToken.balance || 0)\r\n        )\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [selectedGasLimit, feePerGas, nativeToken.balance])\r\n\r\n    // Form submit\r\n    const saveAllowance = handleSubmit(async (values: CustomAllowanceForm) => {\r\n        if (!isCustomSelected) {\r\n            setPersistedData((prev: ApprovePageState) => ({\r\n                ...prev,\r\n                assetAllowance: UNLIMITED_ALLOWANCE,\r\n                isCustomAllowanceSaved: false,\r\n            }))\r\n        } else if (values.customAllowance) {\r\n            setPersistedData((prev: ApprovePageState) => ({\r\n                ...prev,\r\n                assetAllowance: parseUnits(\r\n                    values.customAllowance || \"\",\r\n                    assetDecimals\r\n                ),\r\n                isCustomAllowanceSaved: true,\r\n            }))\r\n        }\r\n\r\n        setIsEditAllowanceSection(false)\r\n    })\r\n\r\n    // Submit\r\n    const onSubmit = async () => {\r\n        dispatch({ type: \"open\", payload: { status: \"loading\" } })\r\n\r\n        const isLinked = await checkDeviceIsLinked()\r\n        if (!isLinked) {\r\n            closeDialog()\r\n            return\r\n        }\r\n\r\n        setPersistedData((prev: ApprovePageState) => ({\r\n            ...prev,\r\n            submitted: true,\r\n        }))\r\n\r\n        // clear history so that the user comes back to the home page if he clicks away\r\n        // Hw accounts needs user interaction before submitting the TX, so that we may want the\r\n        // user come back to this screen after reopening.\r\n        if (!isHardwareWallet(selectedAccount.accountType)) {\r\n            clearLocationRecovery()\r\n            //clean the window.localStorage\r\n            setPersistedData(INITIAL_VALUE_PERSISTED_DATA)\r\n        }\r\n\r\n        try {\r\n            let allowanceResponse: boolean\r\n\r\n            if (approveOperation === ApproveOperation.SWAP) {\r\n                const nextState = nextLocationState as SwapConfirmPageLocalState\r\n                allowanceResponse = await approveExchange(\r\n                    assetAllowance,\r\n                    BigNumber.from(nextState.swapQuote.fromTokenAmount),\r\n                    ExchangeType.SWAP_1INCH,\r\n                    {\r\n                        gasPrice: !isEIP1559Compatible\r\n                            ? selectedGasPrice\r\n                            : undefined,\r\n                        gasLimit: selectedGasLimit,\r\n                        maxFeePerGas: isEIP1559Compatible\r\n                            ? selectedFees.maxFeePerGas\r\n                            : undefined,\r\n                        maxPriorityFeePerGas: isEIP1559Compatible\r\n                            ? selectedFees.maxPriorityFeePerGas\r\n                            : undefined,\r\n                    },\r\n                    nextState.swapQuote.fromToken.address,\r\n                    customNonce\r\n                )\r\n            } else {\r\n                const nextState =\r\n                    nextLocationState as BridgeConfirmPageLocalState\r\n\r\n                allowanceResponse = await approveBridgeAllowance(\r\n                    assetAllowance,\r\n                    BigNumber.from(\r\n                        nextState.bridgeQuote.bridgeParams.params.fromAmount\r\n                    ),\r\n                    nextState.bridgeQuote.bridgeParams.params.spender,\r\n                    {\r\n                        gasPrice: !isEIP1559Compatible\r\n                            ? selectedGasPrice\r\n                            : undefined,\r\n                        gasLimit: selectedGasLimit,\r\n                        maxFeePerGas: isEIP1559Compatible\r\n                            ? selectedFees.maxFeePerGas\r\n                            : undefined,\r\n                        maxPriorityFeePerGas: isEIP1559Compatible\r\n                            ? selectedFees.maxPriorityFeePerGas\r\n                            : undefined,\r\n                    },\r\n                    nextState.bridgeQuote.bridgeParams.params.fromToken.address,\r\n                    customNonce\r\n                )\r\n            }\r\n\r\n            if (allowanceResponse) {\r\n                dispatch({\r\n                    type: \"setStatus\",\r\n                    payload: { status: \"success\" },\r\n                })\r\n            } else {\r\n                throw new Error(\"Error submitting the allowance request\")\r\n            }\r\n        } catch (e) {\r\n            dispatch({\r\n                type: \"setStatus\",\r\n                payload: { status: \"error\", texts: { error: e.message } },\r\n            })\r\n        }\r\n    }\r\n\r\n    const onDone = () => {\r\n        if (status === \"error\") {\r\n            closeDialog()\r\n            setPersistedData((prev: ApprovePageState) => ({\r\n                ...prev,\r\n                submitted: false,\r\n            }))\r\n            clearTransaction()\r\n            return\r\n        }\r\n\r\n        const pathname =\r\n            approveOperation === ApproveOperation.SWAP\r\n                ? \"/swap/confirm\"\r\n                : approveOperation === ApproveOperation.BRIDGE\r\n                ? \"/bridge/confirm\"\r\n                : \"/\"\r\n\r\n        history.push({\r\n            pathname,\r\n            state: {\r\n                ...nextLocationState,\r\n                allowanceTransactionId: inProgressTransaction?.id,\r\n            },\r\n        })\r\n    }\r\n\r\n    const onBack = () => {\r\n        if (isEditAllowanceSection) {\r\n            return () => {\r\n                setIsEditAllowanceSection(false)\r\n                setIsCustomSelected(isCustomAllowanceSaved ? true : false)\r\n            }\r\n        }\r\n\r\n        if (approveOperation === ApproveOperation.SWAP) {\r\n            return () => {\r\n                history.push({\r\n                    pathname: \"/swap\",\r\n                    state: {\r\n                        ...nextLocationState,\r\n                        transitionDirection: \"right\",\r\n                    },\r\n                })\r\n            }\r\n        } else if (approveOperation === ApproveOperation.BRIDGE) {\r\n            return () => {\r\n                history.push({\r\n                    pathname: \"/bridge\",\r\n                    state: {\r\n                        ...nextLocationState,\r\n                        transitionDirection: \"right\",\r\n                    },\r\n                })\r\n            }\r\n        }\r\n    }\r\n\r\n    const mainSection = (\r\n        <>\r\n            <div className=\"flex flex-col space-y-3 px-6 py-4\">\r\n                <p className=\"text-sm font-bold\">{labels.mainSectionTitle}</p>\r\n                <p className=\"text-sm text-gray-500\">\r\n                    {labels.mainSectionText}\r\n                </p>\r\n            </div>\r\n            <Divider />\r\n            <div className=\"flex flex-col space-y-3 px-6 pt-4\">\r\n                <label className=\"text-sm text-gray-600\">Gas Price</label>\r\n                {!isEIP1559Compatible ? (\r\n                    <GasPriceSelector\r\n                        defaultLevel={defaultGasOption || \"medium\"}\r\n                        defaultGasLimit={defaultGas.gasLimit}\r\n                        defaultGasPrice={defaultGas.gasPrice}\r\n                        setGasPriceAndLimit={(gasPrice, gasLimit) => {\r\n                            setSelectedGasPrice(gasPrice)\r\n                            setSelectedGasLimit(gasLimit)\r\n                        }}\r\n                        isParentLoading={isGasUpdating}\r\n                        disabled={isGasUpdating}\r\n                    />\r\n                ) : (\r\n                    <GasPriceComponent\r\n                        defaultGas={{\r\n                            defaultLevel: defaultGasOption || \"medium\",\r\n                            feeData: {\r\n                                gasLimit: defaultGas.gasLimit,\r\n                            },\r\n                        }}\r\n                        setGas={(gasFees) => {\r\n                            setSelectedGasLimit(gasFees.gasLimit!)\r\n                            setSelectedFees({\r\n                                maxFeePerGas: gasFees.maxFeePerGas!,\r\n                                maxPriorityFeePerGas:\r\n                                    gasFees.maxPriorityFeePerGas!,\r\n                            })\r\n                        }}\r\n                        isParentLoading={isGasUpdating}\r\n                        disabled={isGasUpdating}\r\n                        displayOnlyMaxValue\r\n                    />\r\n                )}\r\n                <AdvancedSettings\r\n                    address={selectedAccount.address}\r\n                    advancedSettings={{ customNonce }}\r\n                    display={{\r\n                        nonce: true,\r\n                        flashbots: false,\r\n                        slippage: false,\r\n                    }}\r\n                    setAdvancedSettings={(\r\n                        newSettings: TransactionAdvancedData\r\n                    ) => {\r\n                        setCustomNonce(newSettings.customNonce)\r\n                    }}\r\n                />\r\n                <div\r\n                    className=\"text-xs font-bold text-primary-300 cursor-pointer hover:underline\"\r\n                    onClick={() => setIsEditAllowanceSection(true)}\r\n                >\r\n                    Set custom allowance\r\n                </div>\r\n                <ErrorMessage>\r\n                    {hasBalance ? undefined : \"Insufficient funds\"}\r\n                </ErrorMessage>\r\n            </div>\r\n        </>\r\n    )\r\n\r\n    const editAllowanceSection = (\r\n        <div className=\"flex flex-col space-y-3 px-6 pt-4\">\r\n            <p className=\"text-gray-500 text-sm pb-1\">\r\n                {labels.editAllowanceText}\r\n            </p>\r\n            <div\r\n                className=\"relative flex flex-col p-3 rounded-md border border-gray-200 cursor-pointer\"\r\n                onClick={() => {\r\n                    setIsCustomSelected(false)\r\n                }}\r\n            >\r\n                <div\r\n                    className={classnames(\r\n                        \"absolute mr-6 right-0 top-6\",\r\n                        isCustomSelected ? \"hidden\" : \"visible\"\r\n                    )}\r\n                >\r\n                    <MiniCheckmark fill=\"#1673FF\" />\r\n                </div>\r\n                <p\r\n                    className={classnames(\r\n                        \"text-sm font-bold\",\r\n                        !isCustomSelected && \"text-primary-300\"\r\n                    )}\r\n                >\r\n                    Unlimited\r\n                </p>\r\n                <p className=\"text-gray-500 text-xs pt-1 pb-2\">\r\n                    Grant unlimited allowance\r\n                </p>\r\n                <p\r\n                    className={classnames(\r\n                        \"text-sm\",\r\n                        isCustomSelected && \"text-gray-400\"\r\n                    )}\r\n                >{`${Number(\r\n                    formatUnits(UNLIMITED_ALLOWANCE, assetDecimals)\r\n                )} ${assetName}`}</p>\r\n            </div>\r\n            <div\r\n                className=\"relative flex flex-col p-3 rounded-md border border-gray-200 cursor-pointer\"\r\n                onClick={() => {\r\n                    setIsCustomSelected(true)\r\n                }}\r\n            >\r\n                <div\r\n                    className={classnames(\r\n                        \"absolute mr-6 right-0 top-6\",\r\n                        isCustomSelected ? \"visible\" : \"hidden\"\r\n                    )}\r\n                >\r\n                    <MiniCheckmark fill=\"#1673FF\" />\r\n                </div>\r\n                <p\r\n                    className={classnames(\r\n                        \"text-sm font-bold\",\r\n                        isCustomSelected && \"text-primary-300\"\r\n                    )}\r\n                >\r\n                    Custom Limit\r\n                </p>\r\n                <p className=\"text-gray-500 text-xs pt-1 pb-2\">\r\n                    Set a custom spend limit\r\n                </p>\r\n                <input\r\n                    type=\"text\"\r\n                    {...register(\"customAllowance\")}\r\n                    className={classnames(\r\n                        Classes.inputBordered,\r\n                        !isCustomSelected && \"text-gray-400\",\r\n                        shouldShowError && \"border-red-400 focus:border-red-600\"\r\n                    )}\r\n                    autoComplete=\"off\"\r\n                    onInput={handleChangeAllowance}\r\n                    placeholder=\"Enter custom allowance\"\r\n                />\r\n                <ErrorMessage>{errors.customAllowance?.message}</ErrorMessage>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    title={\"Allowance\"}\r\n                    disabled={isApproving}\r\n                    onBack={onBack()}\r\n                    networkIndicator\r\n                    keepState\r\n                />\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    {isEditAllowanceSection ? (\r\n                        <ButtonWithLoading\r\n                            label=\"Save\"\r\n                            type=\"submit\"\r\n                            onClick={saveAllowance}\r\n                        />\r\n                    ) : (\r\n                        <ButtonWithLoading\r\n                            label=\"Approve\"\r\n                            isLoading={isApproving}\r\n                            disabled={!hasBalance || isGasUpdating}\r\n                            onClick={onSubmit}\r\n                        />\r\n                    )}\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <WaitingDialog\r\n                open={isOpen}\r\n                status={status}\r\n                titles={{\r\n                    loading: titles?.loading || \"Approving...\",\r\n                    success: titles?.success || \"Success\",\r\n                    error: titles?.error || \"Error\",\r\n                }}\r\n                texts={{\r\n                    loading: texts?.loading || \"Initiating the approval...\",\r\n                    success:\r\n                        texts?.success ||\r\n                        \"You've submitted the approval request.\",\r\n                    error:\r\n                        texts?.error ||\r\n                        \"There was an error while approving the asset.\",\r\n                }}\r\n                txHash={inProgressTransaction?.transactionParams.hash}\r\n                timeout={2900}\r\n                onDone={onDone}\r\n                clickOutsideToClose={false}\r\n                gifs={gifs}\r\n            />\r\n            <div className=\"px-6 py-2 flex flex-row items-center\">\r\n                <AccountIcon\r\n                    className=\"w-10 h-10\"\r\n                    fill={getAccountColor(selectedAccount.address)}\r\n                />\r\n                <div className=\"relative flex flex-col group space-y-1 ml-4\">\r\n                    <span className=\"text-sm font-bold\">\r\n                        {formatName(selectedAccount.name, 15)}\r\n                    </span>\r\n                    <span className=\"text-xs text-gray-600\">\r\n                        {formatRounded(\r\n                            formatUnits(\r\n                                nativeToken.balance || \"0\",\r\n                                nativeToken.token.decimals\r\n                            )\r\n                        )}\r\n                        {` ${nativeToken.token.symbol}`}\r\n                    </span>\r\n                </div>\r\n                <p className=\"ml-auto text-sm text-gray-600\">\r\n                    {formatRounded(\r\n                        formatUnits(assetBalance || \"0\", assetDecimals)\r\n                    )}\r\n                    {` ${assetName}`}\r\n                </p>\r\n            </div>\r\n            <Divider />\r\n            {isEditAllowanceSection ? editAllowanceSection : mainSection}\r\n            <HardwareDeviceNotLinkedDialog\r\n                isOpen={isDeviceUnlinked}\r\n                onDone={resetDeviceLinkStatus}\r\n                vendor={getDeviceFromAccountType(selectedAccount.accountType)}\r\n                address={selectedAccount.address}\r\n            />\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default ApprovePage\r\n","import {\r\n    Note,\r\n    ReleaseNote,\r\n} from \"@block-wallet/background/controllers/PreferencesController\"\r\nimport { FC } from \"react\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { LINKS } from \"../../util/constants\"\r\nimport { ButtonWithLoading } from \"../button/ButtonWithLoading\"\r\nimport PopupFooter from \"../popup/PopupFooter\"\r\nimport PopupLayout from \"../popup/PopupLayout\"\r\nimport Info from \"./Info\"\r\n\r\ninterface ReleaseNotesInfoProps {\r\n    releaseNotes: ReleaseNote[]\r\n    onDismiss?: () => void\r\n}\r\nconst ReleaseNotesInfo: FC<ReleaseNotesInfoProps> = ({\r\n    releaseNotes,\r\n    onDismiss,\r\n}) => {\r\n    const history = useHistory()\r\n    const sections = releaseNotes.flatMap(({ sections }) => sections)\r\n    const notesGroupedByTitle = sections.reduce(\r\n        (acc, section) => ({\r\n            ...acc,\r\n            [section.title]: [...(acc[section.title] || []), ...section.notes],\r\n        }),\r\n        {} as {\r\n            [key: string]: Note[]\r\n        }\r\n    )\r\n    const dismiss = () => {\r\n        if (onDismiss) {\r\n            return onDismiss()\r\n        }\r\n        history.push(\"/home\")\r\n    }\r\n    return (\r\n        <PopupLayout\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading onClick={dismiss} label=\"Lets Go!\" />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <div className=\"w-full p-6 bg-white bg-opacity-75 scroll-smooth overflow-y-scroll\">\r\n                <Info>\r\n                    <Info.Title>What's new on BlockWallet</Info.Title>\r\n                    <div className=\"p-1 pt-6\">\r\n                        {Object.keys(notesGroupedByTitle).map((title) => {\r\n                            const notes = notesGroupedByTitle[title]\r\n                            notes.sort((a: Note, b: Note) =>\r\n                                a.type.localeCompare(b.type)\r\n                            )\r\n                            return (\r\n                                <div key={title}>\r\n                                    <span className=\"font-bold text-sm\">\r\n                                        {title}\r\n                                    </span>\r\n                                    <Info.List className=\"pt-3\">\r\n                                        {notes.map((note) => (\r\n                                            <Info.Item\r\n                                                key={note.message}\r\n                                                type={note.type}\r\n                                            >\r\n                                                {note.message}\r\n                                            </Info.Item>\r\n                                        ))}\r\n                                    </Info.List>\r\n                                </div>\r\n                            )\r\n                        })}\r\n                        <span className=\"text-sm text-slate-600\">\r\n                            There's more.{\" \"}\r\n                            <a\r\n                                href={LINKS.ARTICLES.CHANGELOG}\r\n                                target=\"_blank\"\r\n                                rel=\"noreferrer\"\r\n                                className=\"text-primary-300 hover:underline\"\r\n                            >\r\n                                Find full release notes here.\r\n                            </a>\r\n                        </span>\r\n                    </div>\r\n                </Info>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default ReleaseNotesInfo\r\n","import { FC, useEffect } from \"react\"\r\nimport { useParams } from \"react-router-dom\"\r\nimport ReleaseNotesInfo from \"../info/ReleaseNotesInfo\"\r\nimport { generateOnDemandReleaseNotes } from \"../../context/commActions\"\r\nimport useAsyncInvoke from \"../../util/hooks/useAsyncInvoke\"\r\n\r\nimport { ReleaseNote } from \"@block-wallet/background/controllers/PreferencesController\"\r\n\r\nconst OnDemandReleaseNotesPage: FC = () => {\r\n    const { version } = useParams<{ version: string }>()\r\n\r\n    const { run, data } = useAsyncInvoke<ReleaseNote[]>({ data: [] })\r\n\r\n    useEffect(() => {\r\n        run(generateOnDemandReleaseNotes(version))\r\n    }, [run, version])\r\n\r\n    return <ReleaseNotesInfo releaseNotes={data || []} />\r\n}\r\n\r\nexport default OnDemandReleaseNotesPage\r\n","import { FC } from \"react\"\r\nimport { LINKS } from \"../../util/constants\"\r\nimport { ButtonWithLoading } from \"../button/ButtonWithLoading\"\r\nimport PopupFooter from \"../popup/PopupFooter\"\r\nimport PopupLayout from \"../popup/PopupLayout\"\r\nimport Info from \"./Info\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\n\r\ninterface WelcomeInfoProps {\r\n    onDismiss: () => void\r\n}\r\nconst WelcomeInfo: FC<WelcomeInfoProps> = ({ onDismiss }) => {\r\n    const { settings } = useBlankState()!\r\n\r\n    return (\r\n        <PopupLayout\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        onClick={onDismiss}\r\n                        label=\"Start Using\"\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <div className=\"w-full p-6 pb-0 bg-white bg-opacity-75\">\r\n                <Info>\r\n                    <Info.Title>Welcome to BlockWallet!</Info.Title>\r\n                    <div className=\"p-1 pt-6\">\r\n                        <Info.List>\r\n                            {settings.defaultBrowserWallet ? (\r\n                                <Info.Item type=\"success\">\r\n                                    BlockWallet is your default browser wallet\r\n                                    to interact with DApps.\r\n                                </Info.Item>\r\n                            ) : (\r\n                                <Info.Item type=\"warn\">\r\n                                    Set BlockWallet as your default browser\r\n                                    wallet to interact with DApps.\r\n                                </Info.Item>\r\n                            )}\r\n\r\n                            <Info.Item type=\"warn\">\r\n                                Select BlockWallet or, alternatively the\r\n                                injected option, to connect with DApps.\r\n                            </Info.Item>\r\n                            <Info.Item type=\"warn\">\r\n                                If you don't see BlockWallet's logo when\r\n                                connecting, select another browser wallet's\r\n                                logo.\r\n                            </Info.Item>\r\n                            <Info.Item type=\"warn\">\r\n                                Join our{\" \"}\r\n                                <a\r\n                                    target=\"_blank\"\r\n                                    rel=\"noreferrer\"\r\n                                    href={LINKS.TELEGRAM}\r\n                                    className=\"text-decoration-line: underline; text-blue-600 hover:text-blue-800\"\r\n                                >\r\n                                    Telegram group\r\n                                </a>{\" \"}\r\n                                if you have any questions or feedback.\r\n                            </Info.Item>\r\n                            <Info.Item type=\"success\" className=\"m-0 mt-16\">\r\n                                We hope that you enjoy using the BlockWallet!\r\n                            </Info.Item>\r\n                        </Info.List>\r\n                    </div>\r\n                </Info>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default WelcomeInfo\r\n","import { useReducer, useRef } from \"react\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport ToggleButton from \"../../components/button/ToggleButton\"\r\nimport SuccessDialog from \"../../components/dialog/SuccessDialog\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { setUserSettings } from \"../../context/commActions\"\r\nimport useAsyncInvoke from \"../../util/hooks/useAsyncInvoke\"\r\nimport { deepEqual } from \"../../util/objectUtils\"\r\nimport { mergeReducer } from \"../../util/reducerUtils\"\r\n\r\ninterface State {\r\n    hideAddressWarning: boolean\r\n    hideEstimatedGasExceedsThresholdWarning: boolean\r\n    hideBridgeInsufficientNativeTokenWarning: boolean\r\n}\r\n\r\nconst WarningsPreferencesPage = () => {\r\n    const { settings } = useBlankState()!\r\n    const { run, isSuccess, isError, isLoading } = useAsyncInvoke()\r\n    const history = useHistory()\r\n\r\n    const initialState = useRef<State>({\r\n        hideAddressWarning: settings.hideAddressWarning,\r\n        hideEstimatedGasExceedsThresholdWarning:\r\n            settings.hideEstimatedGasExceedsThresholdWarning,\r\n        hideBridgeInsufficientNativeTokenWarning:\r\n            settings.hideBridgeInsufficientNativeTokenWarning,\r\n    })\r\n\r\n    const [warningsConfig, setWarningsConfig] = useReducer(\r\n        mergeReducer<State, any>(),\r\n        initialState.current\r\n    )\r\n\r\n    const onSave = async () => {\r\n        run(\r\n            setUserSettings({\r\n                ...settings,\r\n                hideAddressWarning: warningsConfig.hideAddressWarning,\r\n                hideEstimatedGasExceedsThresholdWarning:\r\n                    warningsConfig.hideEstimatedGasExceedsThresholdWarning,\r\n                hideBridgeInsufficientNativeTokenWarning:\r\n                    warningsConfig.hideBridgeInsufficientNativeTokenWarning,\r\n            })\r\n        )\r\n    }\r\n    if (isError) {\r\n        throw new Error(\"Could not update the address warning configuration.\")\r\n    }\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={<PopupHeader title=\"Warnings\" close=\"/\" />}\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        label=\"Save\"\r\n                        disabled={deepEqual(\r\n                            warningsConfig,\r\n                            initialState.current\r\n                        )}\r\n                        onClick={onSave}\r\n                        isLoading={isLoading}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <div className=\"flex flex-col p-6 space-y-6 w-full\">\r\n                <span className=\"text-sm text-gray-500\">\r\n                    Warn me when my selected account address is different from\r\n                    transaction's address.\r\n                </span>\r\n\r\n                <ToggleButton\r\n                    label=\"Show Different Addresses Warning\"\r\n                    defaultChecked={!warningsConfig.hideAddressWarning}\r\n                    onToggle={(value) =>\r\n                        setWarningsConfig({\r\n                            hideAddressWarning: !value,\r\n                        })\r\n                    }\r\n                />\r\n\r\n                <hr />\r\n                <span className=\"text-sm text-gray-500\">\r\n                    Warn me when a dApp suggests fees much lower/higher than\r\n                    recommended.\r\n                </span>\r\n                <ToggleButton\r\n                    id=\"gasWarning\"\r\n                    //inputName=\"gasWarning\"\r\n                    label=\"Show Gas Price Warning\"\r\n                    defaultChecked={\r\n                        !warningsConfig.hideEstimatedGasExceedsThresholdWarning\r\n                    }\r\n                    onToggle={(value) =>\r\n                        setWarningsConfig({\r\n                            hideEstimatedGasExceedsThresholdWarning: !value,\r\n                        })\r\n                    }\r\n                />\r\n\r\n                <hr />\r\n                <span className=\"text-sm text-gray-500\">\r\n                    Warn me when I haven't enough funds in the destination\r\n                    network of a bridge\r\n                </span>\r\n                <ToggleButton\r\n                    id=\"bridgeNativeTokenWarning\"\r\n                    label=\"Show Bridging Warning\"\r\n                    defaultChecked={\r\n                        !warningsConfig.hideBridgeInsufficientNativeTokenWarning\r\n                    }\r\n                    onToggle={(value) =>\r\n                        setWarningsConfig({\r\n                            hideBridgeInsufficientNativeTokenWarning: !value,\r\n                        })\r\n                    }\r\n                />\r\n            </div>\r\n            <SuccessDialog\r\n                open={isSuccess}\r\n                title=\"Warnings\"\r\n                timeout={800}\r\n                message=\"Your changes have been succesfully saved!\"\r\n                onDone={history.goBack}\r\n            />\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default WarningsPreferencesPage\r\n","import { Fragment } from \"react\"\r\nimport Badge from \"../ui/Badge\"\r\nimport Dropdown from \"../ui/Dropdown/Dropdown\"\r\nimport { DropdownOutlinedIconButton } from \"../ui/Dropdown/DropdownButton\"\r\nimport { IconName } from \"../ui/Icon\"\r\n\r\nexport enum ChainFilters {\r\n    TESTNET = \"TESTNET\",\r\n    ENABLED = \"ENABLED\",\r\n}\r\n\r\nconst handleOnChange = (\r\n    selected: ChainFilters,\r\n    currentFilters: ChainFilters[]\r\n) => {\r\n    const idxToRemove = (currentFilters || []).findIndex(\r\n        (filter) => filter === selected\r\n    )\r\n    if (idxToRemove > -1) {\r\n        const newFilters = [...currentFilters]\r\n        newFilters.splice(idxToRemove, 1)\r\n        return newFilters\r\n    }\r\n    return currentFilters ? [...currentFilters, selected] : [selected]\r\n}\r\n\r\nconst getFilterOptions = () => {\r\n    return [\r\n        { label: \"Testnets\", value: ChainFilters.TESTNET },\r\n        { label: \"Enabled\", value: ChainFilters.ENABLED },\r\n    ]\r\n}\r\n\r\ninterface ChainFiltersProps {\r\n    filters: ChainFilters[]\r\n    onChangeFilters: (newFilters: ChainFilters[]) => void\r\n}\r\n\r\nconst ChainFiltersButton: React.FC<ChainFiltersProps> = ({\r\n    filters,\r\n    onChangeFilters,\r\n}) => {\r\n    return (\r\n        <div className=\"relative text-sm text-primary-300\">\r\n            <Dropdown\r\n                onClickItem={(selected) => {\r\n                    return onChangeFilters(handleOnChange(selected, filters))\r\n                }}\r\n            >\r\n                <Dropdown.Button>\r\n                    <DropdownOutlinedIconButton iconName={IconName.GROUP} />\r\n                </Dropdown.Button>\r\n                <Dropdown.Menu id=\"filter-menu\" className=\"w-28\">\r\n                    {getFilterOptions().map(({ value, label }) => {\r\n                        return (\r\n                            <Fragment key={value}>\r\n                                <Dropdown.MenuItem\r\n                                    value={value}\r\n                                    selected={filters.includes(value)}\r\n                                    className=\"p-2 font-normal text-black\"\r\n                                >\r\n                                    {label}\r\n                                </Dropdown.MenuItem>\r\n                            </Fragment>\r\n                        )\r\n                    })}\r\n                </Dropdown.Menu>\r\n            </Dropdown>\r\n            {filters.length > 0 && <Badge>{filters.length}</Badge>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChainFiltersButton\r\n","import { useRef } from \"react\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { AccountType } from \"../../context/commTypes\"\r\nimport { accountNameExists, getNextAccountName } from \"../../util/account\"\r\n\r\nconst useNewAccountHelper = () => {\r\n    const { hiddenAccounts, accounts } = useBlankState()!\r\n    const allAccounts = { ...accounts, ...(hiddenAccounts || {}) }\r\n    const suggestedAccountName = useRef(\r\n        getNextAccountName(\r\n            allAccounts,\r\n            Object.values(allAccounts).filter(\r\n                (a) =>\r\n                    a.accountType === AccountType.HD_ACCOUNT ||\r\n                    a.accountType === AccountType.EXTERNAL\r\n            ).length + 1\r\n        )\r\n    )\r\n\r\n    return {\r\n        suggestedAccountName: suggestedAccountName.current,\r\n        checkAccountNameAvailablility: (\r\n            accountName: string\r\n        ): { isAvailable: boolean; error?: string } => {\r\n            if (accountNameExists(accounts, accountName)) {\r\n                return {\r\n                    isAvailable: false,\r\n                    error: \"Account name is already in use, please use a different one.\",\r\n                }\r\n            }\r\n            if (accountNameExists(hiddenAccounts, accountName)) {\r\n                return {\r\n                    isAvailable: false,\r\n                    error: \"Account name is already in use in hidden accounts, please use a different one.\",\r\n                }\r\n            }\r\n            return {\r\n                isAvailable: true,\r\n            }\r\n        },\r\n    }\r\n}\r\n\r\nexport default useNewAccountHelper\r\n","import { useEffect } from \"react\"\r\nimport WaitingDialog, {\r\n    useWaitingDialog,\r\n} from \"../../components/dialog/WaitingDialog\"\r\nimport * as yup from \"yup\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport {\r\n    createAccount as createAccountAction,\r\n    selectAccount,\r\n} from \"../../context/commActions\"\r\nimport useAsyncInvoke from \"../../util/hooks/useAsyncInvoke\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport TextInput from \"../../components/input/TextInput\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport useNewAccountHelper from \"./useNewAccountHelper\"\r\n\r\n// Schema\r\nconst createAccountSchema = yup.object({\r\n    accountName: yup.string().max(40, \"Account name is too long\"),\r\n})\r\ntype createAccountFormData = { accountName: string }\r\n\r\nconst AddAccountPage = () => {\r\n    const history = useHistory()\r\n    const { run, isLoading, isSuccess, isError, reset } = useAsyncInvoke()\r\n    const { isOpen, status, dispatch } = useWaitingDialog()\r\n    const { suggestedAccountName, checkAccountNameAvailablility } =\r\n        useNewAccountHelper()\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        setError,\r\n\r\n        formState: { errors },\r\n    } = useForm<createAccountFormData>({\r\n        resolver: yupResolver(createAccountSchema),\r\n    })\r\n\r\n    const onSubmit = handleSubmit(async (data: createAccountFormData) => {\r\n        if (!data.accountName || !data.accountName.trim()) {\r\n            data.accountName = suggestedAccountName\r\n        }\r\n\r\n        data.accountName = data.accountName.trim()\r\n\r\n        try {\r\n            const { isAvailable, error: accountNameErr } =\r\n                checkAccountNameAvailablility(data.accountName)\r\n\r\n            if (!isAvailable) {\r\n                throw new Error(accountNameErr)\r\n            }\r\n\r\n            //run always receives a promise\r\n            await run(\r\n                new Promise(async (resolve, reject) => {\r\n                    try {\r\n                        const newAccount = await createAccountAction(\r\n                            data.accountName!\r\n                        )\r\n                        await selectAccount(newAccount.address)\r\n                        resolve(true)\r\n                    } catch (e) {\r\n                        reject(e)\r\n                    }\r\n                })\r\n            )\r\n        } catch (error: any) {\r\n            setError(\r\n                \"accountName\",\r\n                {\r\n                    message: error.message ?? \"Error creating the account\",\r\n                },\r\n                {\r\n                    shouldFocus: true,\r\n                }\r\n            )\r\n        }\r\n    })\r\n\r\n    useEffect(() => {\r\n        if (isError) {\r\n            dispatch({\r\n                type: \"setStatus\",\r\n                payload: {\r\n                    status: \"error\",\r\n                },\r\n            })\r\n            return\r\n        }\r\n        if (isSuccess) {\r\n            dispatch({\r\n                type: \"setStatus\",\r\n                payload: { status: \"success\" },\r\n            })\r\n            return\r\n        }\r\n        if (isLoading) {\r\n            dispatch({\r\n                type: \"open\",\r\n                payload: { status: \"loading\" },\r\n            })\r\n            return\r\n        }\r\n    }, [isLoading, isSuccess, isError, dispatch])\r\n\r\n    return (\r\n        <PopupLayout header={<PopupHeader title=\"Create Account\" />}>\r\n            <WaitingDialog\r\n                status={status}\r\n                open={isOpen}\r\n                titles={{\r\n                    loading: \"Fetching balances...\",\r\n                    error: \"Error\",\r\n                    success: \"Success!\",\r\n                }}\r\n                texts={{\r\n                    loading: `Please wait while your account is being created...`,\r\n                    error: \"There was an error while creating the account\",\r\n                    success: `Congratulations! Your account has been created!`,\r\n                }}\r\n                onDone={() => {\r\n                    if (isError) {\r\n                        dispatch({ type: \"close\" })\r\n                        reset()\r\n                        return\r\n                    }\r\n                    history.push(\"/\")\r\n                }}\r\n                timeout={1100}\r\n            />\r\n            <div className=\"flex flex-col flex-1 w-full\">\r\n                <form\r\n                    className=\"flex flex-col justify-between flex-1 h-full\"\r\n                    onSubmit={onSubmit}\r\n                    id=\"create-account-form\"\r\n                    aria-label=\"Create account\"\r\n                >\r\n                    <div className=\"flex flex-col flex-1 p-6 space-y-1\">\r\n                        <TextInput\r\n                            appearance=\"outline\"\r\n                            label=\"Account Name\"\r\n                            {...register(\"accountName\")}\r\n                            placeholder={suggestedAccountName}\r\n                            error={errors.accountName?.message}\r\n                            autoFocus={true}\r\n                            maxLength={40}\r\n                        />\r\n                    </div>\r\n                    <hr className=\"border-0.5 border-gray-200 w-full\" />\r\n                    <PopupFooter>\r\n                        <ButtonWithLoading\r\n                            type=\"submit\"\r\n                            isLoading={isLoading}\r\n                            disabled={isLoading}\r\n                            label=\"Create\"\r\n                        ></ButtonWithLoading>\r\n                    </PopupFooter>\r\n                </form>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default AddAccountPage\r\n","import { useEffect } from \"react\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport WaitingDialog, {\r\n    useWaitingDialog,\r\n} from \"../../components/dialog/WaitingDialog\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport useAsyncInvoke from \"../../util/hooks/useAsyncInvoke\"\r\nimport * as yup from \"yup\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport useNewAccountHelper from \"./useNewAccountHelper\"\r\nimport {\r\n    importAccountPrivateKey,\r\n    selectAccount,\r\n} from \"../../context/commActions\"\r\nimport TextInput from \"../../components/input/TextInput\"\r\nimport Select from \"../../components/input/Select\"\r\nimport AntiPhishing from \"../../components/phishing/AntiPhishing\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\n\r\nconst importAccountSchema = yup.object({\r\n    privateKey: yup\r\n        .string()\r\n        .required(\"Please enter a private key\")\r\n        .min(64, \"Please enter a valid private key\")\r\n        .max(66, \"Please enter a valid private key\"),\r\n    importType: yup.string().required(\"Please select a type of import\"),\r\n    accountName: yup.string().max(40, \"Account name is too long\"),\r\n})\r\ntype importAccountFormData = {\r\n    privateKey: string\r\n    importType: string\r\n    accountName: string\r\n}\r\n\r\nconst ImportAccountPage = () => {\r\n    const { run, isError, isSuccess, isLoading, reset } = useAsyncInvoke()\r\n    const { isOpen, status, dispatch } = useWaitingDialog()\r\n    const history = useHistory()\r\n    const state = useBlankState()!\r\n    const { suggestedAccountName, checkAccountNameAvailablility } =\r\n        useNewAccountHelper()\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        setError,\r\n        setValue,\r\n        watch,\r\n\r\n        formState: { errors },\r\n    } = useForm<importAccountFormData>({\r\n        defaultValues: {\r\n            importType: \"key\",\r\n        },\r\n        shouldUnregister: false,\r\n        resolver: yupResolver(importAccountSchema),\r\n    })\r\n    const importType = watch(\"importType\")\r\n\r\n    const onSubmit = handleSubmit(async (data: importAccountFormData) => {\r\n        if (!data.accountName || !data.accountName.trim()) {\r\n            data.accountName = suggestedAccountName\r\n        }\r\n\r\n        data.accountName = data.accountName.trim()\r\n\r\n        try {\r\n            const { isAvailable, error: accountNameErr } =\r\n                checkAccountNameAvailablility(data.accountName || \"\")\r\n\r\n            if (!isAvailable) {\r\n                setError(\r\n                    \"accountName\",\r\n                    {\r\n                        message: accountNameErr,\r\n                    },\r\n                    {\r\n                        shouldFocus: true,\r\n                    }\r\n                )\r\n                return\r\n            }\r\n\r\n            //run always receives a promise\r\n            await run(\r\n                new Promise(async (resolve, reject) => {\r\n                    try {\r\n                        const newAccount = await importAccountPrivateKey(\r\n                            { privateKey: data.privateKey },\r\n                            data.accountName!\r\n                        )\r\n                        await selectAccount(newAccount.address)\r\n                        resolve(true)\r\n                    } catch (e) {\r\n                        reject(e)\r\n                    }\r\n                })\r\n            )\r\n        } catch (e: any) {\r\n            if (\r\n                e.message ===\r\n                \"The account you're are trying to import is a duplicate\"\r\n            ) {\r\n                setError(\r\n                    \"privateKey\",\r\n                    {\r\n                        message: \"Account already exists\",\r\n                    },\r\n                    {\r\n                        shouldFocus: true,\r\n                    }\r\n                )\r\n            } else {\r\n                setError(\r\n                    \"privateKey\",\r\n                    {\r\n                        message: \"Error importing the account\",\r\n                    },\r\n                    {\r\n                        shouldFocus: true,\r\n                    }\r\n                )\r\n            }\r\n        }\r\n    })\r\n\r\n    useEffect(() => {\r\n        if (isError) {\r\n            dispatch({\r\n                type: \"setStatus\",\r\n                payload: {\r\n                    status: \"error\",\r\n                },\r\n            })\r\n            return\r\n        }\r\n        if (isSuccess) {\r\n            dispatch({\r\n                type: \"setStatus\",\r\n                payload: { status: \"success\" },\r\n            })\r\n            return\r\n        }\r\n        if (isLoading) {\r\n            dispatch({\r\n                type: \"open\",\r\n                payload: { status: \"loading\" },\r\n            })\r\n            return\r\n        }\r\n    }, [isLoading, isSuccess, isError, dispatch])\r\n\r\n    return (\r\n        <PopupLayout header={<PopupHeader title=\"Import External Account\" />}>\r\n            <WaitingDialog\r\n                status={status}\r\n                open={isOpen}\r\n                titles={{\r\n                    loading: \"Fetching balances...\",\r\n                    error: \"Error\",\r\n                    success: \"Success!\",\r\n                }}\r\n                texts={{\r\n                    loading: `Please wait while your account is being imported...`,\r\n                    error: \"There was an error while importing the account\",\r\n                    success: `Congratulations! Your account has been imported!`,\r\n                }}\r\n                onDone={() => {\r\n                    if (isError) {\r\n                        dispatch({ type: \"close\" })\r\n                        reset()\r\n                        return\r\n                    }\r\n\r\n                    history.replace(\"/\")\r\n                }}\r\n                timeout={1100}\r\n            />\r\n            <div className=\"flex flex-col flex-1 w-full\">\r\n                <form\r\n                    className=\"flex flex-col justify-between flex-1 h-full\"\r\n                    onSubmit={onSubmit}\r\n                >\r\n                    <div className=\"flex flex-col flex-1 p-6 pb-3 space-y-6\">\r\n                        <div className=\"flex flex-col space-y-1\">\r\n                            <TextInput\r\n                                appearance=\"outline\"\r\n                                label=\"Account Name\"\r\n                                {...register(\"accountName\")}\r\n                                placeholder={suggestedAccountName}\r\n                                error={errors.accountName?.message}\r\n                                autoFocus={true}\r\n                                maxLength={40}\r\n                            />\r\n                        </div>\r\n                        <div className=\"flex flex-col space-y-1 mb-5\">\r\n                            <Select\r\n                                onChange={(value) => {\r\n                                    setValue(\"importType\", value)\r\n                                }}\r\n                                currentValue={importType}\r\n                                label=\"Select Type\"\r\n                                id=\"type\"\r\n                                error={errors.importType?.message}\r\n                            >\r\n                                <Select.Option value=\"key\">\r\n                                    Private Key\r\n                                </Select.Option>\r\n                            </Select>\r\n                        </div>\r\n                        <div className=\"flex flex-col space-y-1\">\r\n                            <TextInput\r\n                                appearance=\"outline\"\r\n                                label=\"Private Key String\"\r\n                                placeholder=\"Paste your private key string here\"\r\n                                {...register(\"privateKey\")}\r\n                                error={errors.privateKey?.message}\r\n                                maxLength={66}\r\n                            />\r\n                        </div>\r\n                        {state.settings.useAntiPhishingProtection && (\r\n                            <div className=\"pt-2\">\r\n                                <AntiPhishing\r\n                                    image={state.antiPhishingImage}\r\n                                    size=\"sm\"\r\n                                />\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    <hr className=\"border-0.5 border-gray-200 w-full\" />\r\n                    <PopupFooter>\r\n                        <ButtonWithLoading\r\n                            type=\"submit\"\r\n                            isLoading={isLoading}\r\n                            label=\"Import\"\r\n                        ></ButtonWithLoading>\r\n                    </PopupFooter>\r\n                </form>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default ImportAccountPage\r\n","import AccountIcon from \"../../components/icons/AccountIcon\"\r\nimport CheckBoxDialog from \"../../components/dialog/CheckboxDialog\"\r\nimport Divider from \"../../components/Divider\"\r\nimport GasPriceComponent from \"../../components/transactions/GasPriceComponent\"\r\nimport LoadingOverlay from \"../../components/loading/LoadingOverlay\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport { useState, useEffect, FunctionComponent, useCallback } from \"react\"\r\nimport Tooltip from \"../../components/label/Tooltip\"\r\nimport useNextRequestRoute from \"../../context/hooks/useNextRequestRoute\"\r\nimport {\r\n    confirmTransaction,\r\n    rejectTransaction,\r\n    searchTokenInAssetsList,\r\n    setUserSettings,\r\n} from \"../../context/commActions\"\r\nimport { AdvancedSettings } from \"../../components/transactions/AdvancedSettings\"\r\nimport { AiFillInfoCircle } from \"react-icons/ai\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport { Classes } from \"../../styles/classes\"\r\nimport { GasPriceSelector } from \"../../components/transactions/GasPriceSelector\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport {\r\n    TransactionAdvancedData,\r\n    TransactionMeta,\r\n} from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport {\r\n    HardwareWalletOpTypes,\r\n    TransactionCategories,\r\n} from \"../../context/commTypes\"\r\nimport { TransactionFeeData } from \"@block-wallet/background/controllers/erc-20/transactions/SignedTransaction\"\r\nimport { capitalize } from \"../../util/capitalize\"\r\nimport { formatName } from \"../../util/formatAccount\"\r\nimport { formatRounded } from \"../../util/formatRounded\"\r\nimport { formatUnits } from \"@ethersproject/units\"\r\nimport { getAddress } from \"@ethersproject/address\"\r\nimport { getAccountColor } from \"../../util/getAccountColor\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { useSelectedAccountBalance } from \"../../context/hooks/useSelectedAccountBalance\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport { useTokensList } from \"../../context/hooks/useTokensList\"\r\nimport { useUserSettings } from \"../../context/hooks/useUserSettings\"\r\nimport { useNonSubmittedExternalTransaction } from \"../../context/hooks/useNonSubmittedExternalTransaction\"\r\nimport useDebouncedState from \"../../util/hooks/useDebouncedState\"\r\nimport { useTransactionById } from \"../../context/hooks/useTransactionById\"\r\nimport { useTransactionWaitingDialog } from \"../../context/hooks/useTransactionWaitingDialog\"\r\nimport { canUserSubmitTransaction } from \"../../util/transactionUtils\"\r\nimport { DAPP_FEEDBACK_WINDOW_TIMEOUT } from \"../../util/constants\"\r\nimport WaitingDialog from \"../../components/dialog/WaitingDialog\"\r\nimport useCheckAccountDeviceLinked from \"../../util/hooks/useCheckAccountDeviceLinked\"\r\nimport HardwareDeviceNotLinkedDialog from \"../../components/dialog/HardwareDeviceNotLinkedDialog\"\r\nimport { getDeviceFromAccountType } from \"../../util/hardwareDevice\"\r\n\r\nexport interface ApproveNFTProps {\r\n    transactionId: string\r\n    transactionCount: number\r\n}\r\n\r\nconst ApproveNFTPage = () => {\r\n    const { transaction: nextTransaction, transactionCount } =\r\n        useNonSubmittedExternalTransaction()\r\n    const route = useNextRequestRoute()\r\n    const [currentTx, setCurrentTx] = useDebouncedState<TransactionMeta>(\r\n        nextTransaction,\r\n        DAPP_FEEDBACK_WINDOW_TIMEOUT\r\n    )\r\n\r\n    useEffect(() => {\r\n        //only override the transactionId when there is another one to process\r\n        //to avoid passing an empty transactionId to the child component and break the UI.\r\n        setCurrentTx(nextTransaction)\r\n    }, [nextTransaction, setCurrentTx])\r\n\r\n    if (\r\n        !currentTx ||\r\n        currentTx.transactionCategory !==\r\n            TransactionCategories.TOKEN_METHOD_APPROVE ||\r\n        !currentTx.advancedData?.tokenId\r\n    ) {\r\n        return <Redirect to={route} />\r\n    } else {\r\n        return (\r\n            <ApproveNFT\r\n                transactionId={currentTx.id}\r\n                transactionCount={transactionCount}\r\n            />\r\n        )\r\n    }\r\n}\r\n\r\nconst ApproveNFT: FunctionComponent<ApproveNFTProps> = ({\r\n    transactionCount,\r\n    transactionId,\r\n}) => {\r\n    // Hooks\r\n    const { accounts, selectedAddress, settings, defaultGasOption } =\r\n        useBlankState()!\r\n    const { chainId, isEIP1559Compatible, desc } = useSelectedNetwork()\r\n    const { hideAddressWarning } = useUserSettings()\r\n    const selectedAccountBalance = useSelectedAccountBalance()\r\n    const { nativeToken } = useTokensList()\r\n\r\n    const { isDeviceUnlinked, checkDeviceIsLinked, resetDeviceLinkStatus } =\r\n        useCheckAccountDeviceLinked()\r\n\r\n    // Get tx\r\n    const { transaction: txById, params } = useTransactionById(transactionId)\r\n\r\n    // At this point transactionId is ensured.\r\n    const transaction = txById!\r\n\r\n    // Detect if the transaction was triggered using an address different to the active one\r\n    const checksumFromAddress = getAddress(params.from!)\r\n    const differentAddress = checksumFromAddress !== selectedAddress\r\n\r\n    // If differentAddress, fetch the balance of that address instead of the selected one.\r\n    const balance = differentAddress\r\n        ? accounts[checksumFromAddress].balances[chainId].nativeTokenBalance ??\r\n          BigNumber.from(\"0\")\r\n        : selectedAccountBalance\r\n\r\n    // Local state\r\n    const [tokenName, setTokenName] = useState(\"\")\r\n    const [isNFTSection, setIsNFTSection] = useState(false)\r\n    const [accountWarningClosed, setAccountWarningClosed] = useState(false)\r\n    const [isLoading, setIsLoading] = useState(transaction.loadingGasValues)\r\n    const [isNameLoading, setIsNameLoading] = useState(true)\r\n\r\n    const [transactionAdvancedData, setTransactionAdvancedData] =\r\n        useState<TransactionAdvancedData>({})\r\n\r\n    const [hasBalance, setHasBalance] = useState(true)\r\n    const [gasEstimationFailed, setGasEstimationFailed] = useState(false)\r\n\r\n    const [defaultGas, setDefaultGas] = useState<TransactionFeeData>({\r\n        gasLimit: params.gasLimit,\r\n        gasPrice: params.gasPrice,\r\n        maxPriorityFeePerGas: params.maxPriorityFeePerGas,\r\n        maxFeePerGas: params.maxFeePerGas,\r\n    })\r\n\r\n    const [transactionGas, setTransactionGas] = useState<TransactionFeeData>({\r\n        gasLimit: params.gasLimit,\r\n        gasPrice: params.gasPrice,\r\n        maxPriorityFeePerGas: params.maxPriorityFeePerGas,\r\n        maxFeePerGas: params.maxFeePerGas,\r\n    })\r\n\r\n    const calcTranTotals = () => {\r\n        const gas = BigNumber.from(\r\n            transactionGas.gasLimit!.mul(\r\n                transactionGas.gasPrice ?? transactionGas.maxFeePerGas!\r\n            )\r\n        )\r\n\r\n        setHasBalance(gas.lt(balance))\r\n    }\r\n\r\n    // Set data\r\n    const account = accounts[checksumFromAddress]\r\n    const tokenAddress = params.to!\r\n    const tokenId = BigNumber.from(\r\n        transaction.advancedData?.tokenId!\r\n    ).toString()\r\n    const networkName = capitalize(desc)\r\n\r\n    const { status, isOpen, dispatch, texts, titles, closeDialog, gifs } =\r\n        useTransactionWaitingDialog(\r\n            transaction\r\n                ? {\r\n                      id: transactionId,\r\n                      status: transaction.status,\r\n                      error: transaction.error as Error,\r\n                      epochTime: transaction?.approveTime,\r\n                  }\r\n                : undefined,\r\n            HardwareWalletOpTypes.APPROVE_ALLOWANCE,\r\n            account.accountType,\r\n            {\r\n                reject: useCallback(() => {\r\n                    if (transactionId) {\r\n                        rejectTransaction(transactionId)\r\n                    }\r\n                }, [transactionId]),\r\n            }\r\n        )\r\n\r\n    // To prevent calculations on every render, force dependency array to only check state value that impacts\r\n    useEffect(() => {\r\n        calcTranTotals()\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [transactionGas, transactionId])\r\n\r\n    // Effect to check if background finishes loading default values\r\n    useEffect(() => {\r\n        if (isLoading && !transaction.loadingGasValues) {\r\n            setDefaultGas({\r\n                gasLimit: params.gasLimit,\r\n                gasPrice: params.gasPrice,\r\n                maxPriorityFeePerGas: params.maxPriorityFeePerGas,\r\n                maxFeePerGas: params.maxFeePerGas,\r\n            })\r\n            setGasEstimationFailed(transaction.gasEstimationFailed ?? false)\r\n            setIsLoading(false)\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [transaction.loadingGasValues])\r\n\r\n    useEffect(\r\n        () => {\r\n            searchTokenInAssetsList(tokenAddress)\r\n                .then((searchTokensResponse) => {\r\n                    setTokenName(searchTokensResponse.tokens[0].symbol)\r\n                })\r\n                .catch(() => {\r\n                    throw new Error(\"Failed to fetch token data\")\r\n                })\r\n                .finally(() => {\r\n                    setIsNameLoading(false)\r\n                })\r\n        },\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n        []\r\n    )\r\n\r\n    const approve = async () => {\r\n        try {\r\n            dispatch({ type: \"open\", payload: { status: \"loading\" } })\r\n\r\n            const isLinked = await checkDeviceIsLinked()\r\n            if (!isLinked) {\r\n                closeDialog()\r\n                return\r\n            }\r\n\r\n            await confirmTransaction(transaction.id, transactionGas, {\r\n                customNonce: transactionAdvancedData.customNonce,\r\n            })\r\n        } catch (error) {}\r\n    }\r\n\r\n    const reject = async () => {\r\n        dispatch({\r\n            type: \"open\",\r\n            payload: {\r\n                status: \"loading\",\r\n                titles: { loading: \"Rejecting...\" },\r\n                texts: { loading: \"Rejecting allowance change request...\" },\r\n            },\r\n        })\r\n        await new Promise<void>((resolve) => {\r\n            setTimeout(resolve, 300)\r\n        })\r\n\r\n        await rejectTransaction(transactionId)\r\n        dispatch({\r\n            type: \"setStatus\",\r\n            payload: {\r\n                status: \"error\",\r\n                titles: { error: \"Token Allowance Rejected\" },\r\n                texts: {\r\n                    error: \"Token allowance request was rejected.\",\r\n                },\r\n            },\r\n        })\r\n    }\r\n\r\n    const origin = (\r\n        <span className=\"inline-block\" title={transaction.origin}>\r\n            {formatName(transaction.origin, 30)}\r\n        </span>\r\n    )\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    close={false}\r\n                    title=\"Approval\"\r\n                    backButton={isNFTSection}\r\n                    onBack={() => setIsNFTSection(false)}\r\n                >\r\n                    {transactionCount > 1 && (\r\n                        <div className=\"group relative\">\r\n                            <AiFillInfoCircle\r\n                                size={26}\r\n                                className=\"pl-2 text-primary-200 cursor-pointer hover:text-primary-300\"\r\n                            />\r\n                            <Tooltip\r\n                                content={`${transactionCount - 1} more ${\r\n                                    transactionCount > 2\r\n                                        ? \"transactions\"\r\n                                        : \"transaction\"\r\n                                }`}\r\n                            />\r\n                        </div>\r\n                    )}\r\n                </PopupHeader>\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    {isNFTSection ? null : (\r\n                        <>\r\n                            <ButtonWithLoading\r\n                                buttonClass={Classes.liteButton}\r\n                                label=\"Reject\"\r\n                                disabled={\r\n                                    !canUserSubmitTransaction(\r\n                                        transaction.status\r\n                                    )\r\n                                }\r\n                                onClick={reject}\r\n                            />\r\n                            <ButtonWithLoading\r\n                                label=\"Approve\"\r\n                                disabled={\r\n                                    !hasBalance ||\r\n                                    !canUserSubmitTransaction(\r\n                                        transaction.status\r\n                                    )\r\n                                }\r\n                                onClick={approve}\r\n                            />\r\n                        </>\r\n                    )}\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <WaitingDialog\r\n                open={isOpen}\r\n                status={status}\r\n                titles={{\r\n                    loading: titles?.loading || \"Confirming...\",\r\n                    success: titles?.success || \"Success\",\r\n                    error: titles?.error || \"Error\",\r\n                }}\r\n                texts={{\r\n                    loading: texts?.loading || \"Approving NFT...\",\r\n                    success: texts?.success || \"Approved NFT.\",\r\n                    error: texts?.error || \"Something went wrong\",\r\n                }}\r\n                clickOutsideToClose={false}\r\n                txHash={transaction.transactionParams.hash}\r\n                timeout={DAPP_FEEDBACK_WINDOW_TIMEOUT}\r\n                onDone={closeDialog}\r\n                gifs={gifs}\r\n                hideButton\r\n            />\r\n            {isNameLoading && <LoadingOverlay />}\r\n            <CheckBoxDialog\r\n                message={`Approval request was sent with an account that's different from the selected one in your wallet. \\n\\n Please select if you want to continue or reject the transaction.`}\r\n                onClose={() => {\r\n                    setAccountWarningClosed(true)\r\n                }}\r\n                onCancel={reject}\r\n                onConfirm={(saveChoice) => {\r\n                    if (saveChoice) {\r\n                        setUserSettings({\r\n                            ...settings,\r\n                            hideAddressWarning: true,\r\n                        })\r\n                    }\r\n                }}\r\n                title=\"Different address detected\"\r\n                open={\r\n                    differentAddress &&\r\n                    !accountWarningClosed &&\r\n                    !hideAddressWarning &&\r\n                    !isLoading\r\n                }\r\n                closeText=\"Reject\"\r\n                confirmText=\"Continue\"\r\n                showCheckbox\r\n                checkboxText=\"Don't show this warning again\"\r\n            />\r\n            <div className=\"px-6 py-2 flex flex-row items-center\">\r\n                <AccountIcon\r\n                    className=\"w-10 h-10\"\r\n                    fill={getAccountColor(account.address)}\r\n                />\r\n                <div className=\"relative flex flex-col group space-y-1 ml-4\">\r\n                    <span className=\"text-sm font-bold\">\r\n                        {formatName(account.name, 15)}\r\n                    </span>\r\n                    <span className=\"text-xs text-gray-600\">\r\n                        {formatRounded(\r\n                            formatUnits(\r\n                                balance || \"0\",\r\n                                nativeToken.token.decimals\r\n                            )\r\n                        )}\r\n                        {` ${nativeToken.token.symbol}`}\r\n                    </span>\r\n                </div>\r\n                <div className=\"flex flex-row items-center ml-auto p-1 px-2 pr-1 text-gray-600 rounded-md border border-primary-200 text-xs bg-green-100\">\r\n                    <span className=\"inline-flex rounded-full h-2 w-2 mr-2 animate-pulse bg-green-400 pointer-events-none\" />\r\n                    <span className=\"mr-1 pointer-events-none text-green-600\">\r\n                        {networkName}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <Divider />\r\n            <div className=\"px-6 py-3\">\r\n                <p className=\"text-sm font-bold pb-3 break-word\">\r\n                    Allow {origin} to transfer your {tokenName}\r\n                </p>\r\n                <p className=\"text-sm text-gray-500 break-word\">\r\n                    By granting this permission, you are allowing {origin} to\r\n                    transfer your {tokenName} #{tokenId} from your account.\r\n                </p>\r\n            </div>\r\n            <Divider />\r\n            <div className=\"flex flex-col space-y-2 px-6 py-3\">\r\n                <label className=\"text-sm text-gray-600\">Gas Price</label>\r\n                {!isEIP1559Compatible ? (\r\n                    <GasPriceSelector\r\n                        defaultLevel={defaultGasOption || \"medium\"}\r\n                        defaultGasLimit={defaultGas.gasLimit!}\r\n                        defaultGasPrice={defaultGas.gasPrice!}\r\n                        setGasPriceAndLimit={(gasPrice, gasLimit) => {\r\n                            setTransactionGas({ gasPrice, gasLimit })\r\n                        }}\r\n                        showEstimationError={gasEstimationFailed}\r\n                        isParentLoading={isLoading}\r\n                    />\r\n                ) : (\r\n                    <GasPriceComponent\r\n                        defaultGas={{\r\n                            defaultLevel: defaultGasOption || \"medium\",\r\n                            feeData: {\r\n                                gasLimit: defaultGas.gasLimit,\r\n                                maxFeePerGas: defaultGas.maxFeePerGas!,\r\n                                maxPriorityFeePerGas:\r\n                                    defaultGas.maxPriorityFeePerGas!,\r\n                            },\r\n                        }}\r\n                        setGas={(gasFees) => {\r\n                            setTransactionGas({\r\n                                ...gasFees,\r\n                            })\r\n                        }}\r\n                        showEstimationError={gasEstimationFailed}\r\n                        isParentLoading={isLoading}\r\n                        displayOnlyMaxValue\r\n                    />\r\n                )}\r\n                <AdvancedSettings\r\n                    address={checksumFromAddress}\r\n                    advancedSettings={transactionAdvancedData}\r\n                    setAdvancedSettings={(\r\n                        newSettings: TransactionAdvancedData\r\n                    ) => {\r\n                        setTransactionAdvancedData({\r\n                            customNonce: newSettings.customNonce,\r\n                            flashbots: newSettings.flashbots,\r\n                        })\r\n                    }}\r\n                />\r\n                <div className=\"text-xs text-red-500\">\r\n                    {!hasBalance && \"Insufficient funds.\"}\r\n                </div>\r\n            </div>\r\n            <HardwareDeviceNotLinkedDialog\r\n                isOpen={isDeviceUnlinked}\r\n                onDone={resetDeviceLinkStatus}\r\n                vendor={getDeviceFromAccountType(account.accountType)}\r\n                address={account.address}\r\n            />\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default ApproveNFTPage\r\n","import Dialog from \"../dialog/Dialog\"\r\nimport Divider from \"../Divider\"\r\nimport React, { FC, useEffect, useState } from \"react\"\r\nimport { Classes } from \"../../styles\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { formatUnits } from \"@ethersproject/units\"\r\nimport { ButtonWithLoading } from \"../button/ButtonWithLoading\"\r\nimport { defaultAdvancedSettings } from \"../transactions/AdvancedSettings\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport { formatNumberLength } from \"../../util/formatNumberLength\"\r\n\r\ninterface RateUpdateDialogProps {\r\n    assetDecimals: number\r\n    assetName: string\r\n    rate: BigNumber\r\n    threshold?: number\r\n}\r\n\r\nconst RateUpdateDialog: FC<RateUpdateDialogProps> = ({\r\n    assetName,\r\n    assetDecimals,\r\n    rate,\r\n    threshold,\r\n}) => {\r\n    const history = useOnMountHistory()\r\n    const lastRateRef = React.useRef<BigNumber | undefined>()\r\n    const [isOpen, setIsOpen] = useState<boolean>(false)\r\n\r\n    useEffect(() => {\r\n        const th = threshold || defaultAdvancedSettings.slippage\r\n\r\n        // P is a difference ratio between 0..10000\r\n        // The extra 100 in the multiplication is to have two more precision digits\r\n        let p: number = 10000\r\n        const lastRate = lastRateRef.current\r\n        if (!lastRate) {\r\n            lastRateRef.current = rate\r\n            return\r\n        }\r\n        if (rate.gt(lastRate)) {\r\n            p = lastRate\r\n                .mul(100 * 100)\r\n                .div(rate)\r\n                .toNumber()\r\n        } else if (lastRate.gt(rate)) {\r\n            p = rate\r\n                .mul(100 * 100)\r\n                .div(lastRate)\r\n                .toNumber()\r\n        }\r\n\r\n        const percentage = (1 - p / (100 * 100)) * 100\r\n\r\n        if (percentage > th) {\r\n            setIsOpen(true)\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [rate._hex, threshold])\r\n\r\n    return (\r\n        <Dialog open={isOpen}>\r\n            <div className=\"flex flex-col w-full space-y-2 px-3\">\r\n                <p className=\"text-lg font-bold\">Rate has changed!</p>\r\n                <p className=\"text-sm py-2\">\r\n                    Rate expired. Please acknowledge the receiving amount\r\n                    update.\r\n                </p>\r\n                <p className=\"text-xs text-gray-500\">OLD AMOUNT</p>\r\n                <p className=\"text-sm font-bold\">\r\n                    {`${formatNumberLength(\r\n                        formatUnits(\r\n                            lastRateRef.current || BigNumber.from(0),\r\n                            assetDecimals\r\n                        ),\r\n                        10\r\n                    )} ${assetName}`}\r\n                </p>\r\n                <p className=\"text-xs text-gray-500 pt-2\">NEW AMOUNT</p>\r\n                <p className=\"text-sm font-bold\">\r\n                    {`${formatNumberLength(\r\n                        formatUnits(rate || BigNumber.from(0), assetDecimals),\r\n                        10\r\n                    )} ${assetName}`}\r\n                </p>\r\n                <div className=\"-mx-6 py-3\">\r\n                    <Divider />\r\n                </div>\r\n                <div className=\"flex w-full space-x-2\">\r\n                    <ButtonWithLoading\r\n                        label=\"Cancel\"\r\n                        buttonClass={Classes.darkButton}\r\n                        onClick={() => history.push(\"/home\")}\r\n                    />\r\n                    <ButtonWithLoading\r\n                        label=\"Accept\"\r\n                        buttonClass={Classes.button}\r\n                        onClick={() => {\r\n                            lastRateRef.current = rate\r\n                            setIsOpen(false)\r\n                        }}\r\n                    />\r\n                </div>\r\n            </div>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default React.memo(RateUpdateDialog)\r\n","export default __webpack_public_path__ + \"static/media/swap.213a8327.svg\";","import React from \"react\"\r\nimport classnames from \"classnames\"\r\nimport Icon, { IconName } from \"../ui/Icon\"\r\n\r\ninterface Props {\r\n    value: string\r\n    className?: string\r\n}\r\n\r\nconst RefreshLabel: React.FC<Props> = ({ value, className }) => {\r\n    return (\r\n        <div\r\n            className={classnames(\r\n                \"flex flex-row items-center space-x-2\",\r\n                className\r\n            )}\r\n        >\r\n            <Icon name={IconName.CLOCK} />\r\n            <span className=\"text-xs text-gray-600\">Refreshes in {value}</span>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default RefreshLabel\r\n","import { Token } from \"@block-wallet/background/controllers/erc-20/Token\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { useTokensList } from \"./useTokensList\"\r\n\r\nexport const useTokenBalance = (\r\n    token: Token | string | undefined\r\n): BigNumber => {\r\n    const { currentNetworkTokens, nativeToken } = useTokensList()\r\n    const defaultAssetList = currentNetworkTokens.concat(nativeToken)\r\n\r\n    if (!token) {\r\n        return BigNumber.from(0)\r\n    }\r\n\r\n    const addr = typeof token === \"string\" ? token : token.address\r\n\r\n    return BigNumber.from(\r\n        defaultAssetList.find((element) => element.token.address === addr)\r\n            ?.balance || 0\r\n    )\r\n}\r\n","import { Token } from \"@block-wallet/background/controllers/erc-20/Token\"\r\nimport * as yup from \"yup\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { DEFAULT_DECIMALS } from \"../constants\"\r\nimport { parseUnits } from \"@ethersproject/units\"\r\n\r\nexport const GetAmountYupSchema = (\r\n    fromToken: Token | undefined,\r\n    fromTokenBalance: BigNumber\r\n) => {\r\n    return yup.object({\r\n        amount: yup\r\n            .string()\r\n            .required(\"Enter an amount\")\r\n            .test(\"decimals\", \"Too many decimals\", (value?: string) => {\r\n                if (typeof value !== \"string\") return false\r\n                if (!value.includes(\".\")) return true\r\n\r\n                const decimals = fromToken?.decimals || DEFAULT_DECIMALS\r\n                const valueDecimals = value.split(\".\")[1].length\r\n\r\n                return valueDecimals <= decimals\r\n            })\r\n            .test(\"bad-input\", \"Invalid amount\", (value?: string) => {\r\n                if (typeof value !== \"string\") return false\r\n\r\n                try {\r\n                    parseUnits(value, fromToken?.decimals)\r\n\r\n                    return true\r\n                } catch (error) {\r\n                    return false\r\n                }\r\n            })\r\n            .test(\"no-balance\", \"Insufficient balance\", (value?: string) => {\r\n                if (!fromToken) return true\r\n                if (typeof value !== \"string\") return false\r\n\r\n                try {\r\n                    const parsed = parseUnits(value, fromToken.decimals)\r\n\r\n                    return parsed.lte(fromTokenBalance)\r\n                } catch (error) {\r\n                    return false\r\n                }\r\n            }),\r\n    })\r\n}\r\n","import ErrorMessage from \"../../components/error/ErrorMessage\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport RateUpdateDialog from \"../../components/swaps/RateUpdateDialog\"\r\nimport { useState, useEffect, useMemo } from \"react\"\r\nimport swapIcon from \"../../assets/images/icons/swap.svg\"\r\nimport {\r\n    checkExchangeAllowance,\r\n    getExchangeQuote,\r\n} from \"../../context/commActions\"\r\nimport {\r\n    AssetListType,\r\n    AssetSelection,\r\n} from \"../../components/assets/AssetSelection\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport { BASE_SWAP_FEE, SWAP_QUOTE_REFRESH_TIMEOUT } from \"../../util/constants\"\r\nimport { ExchangeType } from \"../../context/commTypes\"\r\nimport { InferType } from \"yup\"\r\nimport { SwapConfirmPageLocalState } from \"./SwapConfirmPage\"\r\nimport { SwapQuote } from \"@block-wallet/background/controllers/SwapController\"\r\nimport { Token } from \"@block-wallet/background/controllers/erc-20/Token\"\r\nimport { classnames, Classes } from \"../../styles\"\r\nimport { formatCurrency, toCurrencyAmount } from \"../../util/formatCurrency\"\r\nimport { formatUnits, parseUnits } from \"@ethersproject/units\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport { useTokensList } from \"../../context/hooks/useTokensList\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport useCountdown from \"../../util/hooks/useCountdown\"\r\nimport GenericTooltip from \"../../components/label/GenericTooltip\"\r\nimport { AiFillInfoCircle } from \"react-icons/ai\"\r\nimport { formatNumberLength } from \"../../util/formatNumberLength\"\r\nimport RefreshLabel from \"../../components/swaps/RefreshLabel\"\r\nimport { capitalize } from \"../../util/capitalize\"\r\nimport useLocalStorageState from \"../../util/hooks/useLocalStorageState\"\r\nimport { useCallback } from \"react\"\r\nimport { useTokenBalance } from \"../../context/hooks/useTokenBalance\"\r\nimport { GetAmountYupSchema } from \"../../util/yup/GetAmountSchema\"\r\nimport { ApproveOperation } from \"../transaction/ApprovePage\"\r\n\r\ninterface SwapPageLocalState {\r\n    fromToken?: Token\r\n    swapQuote?: SwapQuote\r\n    toToken?: Token\r\n    fromAssetPage?: boolean\r\n    amount?: string\r\n}\r\n\r\ninterface SwapState {\r\n    tokenFrom?: Token\r\n    tokenTo?: Token\r\n    bigNumberAmount?: BigNumber\r\n}\r\n\r\nconst SwapPage = () => {\r\n    const history = useOnMountHistory()\r\n    const {\r\n        fromToken,\r\n        swapQuote,\r\n        toToken,\r\n        amount: defaultAmount,\r\n        fromAssetPage,\r\n    } = (history.location.state || {}) as SwapPageLocalState\r\n    const [timeoutStart, setTimeoutStart] = useState<number | undefined>(\r\n        undefined\r\n    )\r\n    const { value: remainingSeconds } = useCountdown(\r\n        timeoutStart,\r\n        SWAP_QUOTE_REFRESH_TIMEOUT\r\n    )\r\n\r\n    const { selectedAddress, nativeCurrency, localeInfo, exchangeRates } =\r\n        useBlankState()!\r\n\r\n    const { nativeToken } = useTokensList()\r\n\r\n    // State\r\n    const [error, setError] = useState<string | undefined>(undefined)\r\n    const [inputFocus, setInputFocus] = useState(false)\r\n    const [isLoading, setIsLoading] = useState<boolean>(false)\r\n    const [hasAllowance, setHasAllowance] = useState<boolean>(true)\r\n    const [quote, setQuote] = useState<SwapQuote | undefined>(swapQuote)\r\n    const [canSwitchInputs, setCanSwitchInputs] = useState<boolean>(true)\r\n\r\n    const [swapDataState, setSwapDataState] = useLocalStorageState<SwapState>(\r\n        \"swaps.form\",\r\n        {\r\n            initialValue: {\r\n                tokenFrom: fromToken ? fromToken : nativeToken.token,\r\n                tokenTo: toToken,\r\n                bigNumberAmount: undefined,\r\n            },\r\n            deserializer: useCallback((rawData: any) => {\r\n                return {\r\n                    ...rawData,\r\n                    bigNumberAmount: rawData.bigNumberAmount\r\n                        ? BigNumber.from(rawData.bigNumberAmount)\r\n                        : undefined,\r\n                }\r\n            }, []),\r\n        }\r\n    )\r\n\r\n    const tokenFromBalance = useTokenBalance(swapDataState.tokenFrom)\r\n\r\n    const { tokenFrom, tokenTo, bigNumberAmount } = swapDataState\r\n\r\n    // Validation\r\n    const schema = GetAmountYupSchema(tokenFrom, tokenFromBalance)\r\n    const {\r\n        register,\r\n        setValue,\r\n        trigger: triggerAmountValidation,\r\n        watch,\r\n        clearErrors,\r\n        formState: { errors },\r\n    } = useForm<InferType<typeof schema>>({\r\n        resolver: yupResolver(schema),\r\n        defaultValues: {\r\n            amount:\r\n                defaultAmount ||\r\n                (swapDataState?.bigNumberAmount\r\n                    ? formatUnits(\r\n                          swapDataState?.bigNumberAmount?.toString(),\r\n                          swapDataState?.tokenFrom?.decimals\r\n                      )\r\n                    : undefined),\r\n        },\r\n    })\r\n\r\n    const watchedAmount = watch(\"amount\")\r\n\r\n    const formattedAmount =\r\n        tokenFrom && bigNumberAmount\r\n            ? formatCurrency(\r\n                  toCurrencyAmount(\r\n                      bigNumberAmount,\r\n                      exchangeRates[tokenFrom.symbol.toUpperCase()],\r\n                      tokenFrom.decimals\r\n                  ),\r\n                  {\r\n                      currency: nativeCurrency,\r\n                      locale_info: localeInfo,\r\n                      returnNonBreakingSpace: false,\r\n                      showSymbol: true,\r\n                  }\r\n              )\r\n            : undefined\r\n    const isUsingNetworkNativeCurrency =\r\n        tokenFrom?.address === nativeToken.token.address\r\n    const maxAmount = tokenFromBalance\r\n    const isMaxAmountEnabled =\r\n        maxAmount && !(bigNumberAmount && maxAmount.eq(bigNumberAmount))\r\n\r\n    //executes when the amount hex changes\r\n    useEffect(() => {\r\n        async function handleChangeAmount() {\r\n            if (tokenFrom && Number(watchedAmount)) {\r\n                if (await triggerAmountValidation()) {\r\n                    setSwapDataState((prev: SwapState) => ({\r\n                        ...prev,\r\n                        bigNumberAmount: parseUnits(\r\n                            watchedAmount,\r\n                            tokenFrom?.decimals\r\n                        ),\r\n                    }))\r\n                }\r\n            } else {\r\n                setSwapDataState((prev: SwapState) => ({\r\n                    ...prev,\r\n                    bigNumberAmount: undefined,\r\n                }))\r\n            }\r\n        }\r\n        handleChangeAmount()\r\n    }, [watchedAmount, tokenFrom, triggerAmountValidation, setSwapDataState])\r\n\r\n    const onSubmit = () => {\r\n        if (!quote || !tokenFrom || !bigNumberAmount) {\r\n            return\r\n        }\r\n\r\n        if (hasAllowance) {\r\n            history.push({\r\n                pathname: \"/swap/confirm\",\r\n                state: {\r\n                    fromToken: tokenFrom,\r\n                    fromTokenBalance: tokenFromBalance,\r\n                    swapQuote: quote,\r\n                    toToken: tokenTo,\r\n                    amount: watchedAmount,\r\n                } as SwapConfirmPageLocalState,\r\n            })\r\n        } else {\r\n            history.push({\r\n                pathname: \"/transaction/approve\",\r\n                state: {\r\n                    assetAddress: tokenFrom.address,\r\n                    minAllowance: bigNumberAmount,\r\n                    approveOperation: ApproveOperation.SWAP,\r\n                    nextLocationState: {\r\n                        fromToken: tokenFrom,\r\n                        fromTokenBalance: tokenFromBalance,\r\n                        swapQuote: quote,\r\n                        toToken: tokenTo,\r\n                        amount: watchedAmount,\r\n                    } as SwapConfirmPageLocalState,\r\n                },\r\n            })\r\n        }\r\n    }\r\n\r\n    const onUpdateAmount = (value: string) => {\r\n        //clear the quote first\r\n        setQuote(undefined)\r\n        const parsedAmount = value\r\n            .replace(/[^0-9.,]/g, \"\")\r\n            .replace(\",\", \".\")\r\n            .replace(/(\\..*?)\\..*/g, \"$1\")\r\n        setValue(\"amount\", parsedAmount)\r\n    }\r\n\r\n    const switchInputs = () => {\r\n        setQuote(undefined)\r\n        setError(undefined)\r\n        clearErrors()\r\n        let nextSwapState: SwapState = {\r\n            ...swapDataState,\r\n            //Update tokenTo data\r\n            tokenTo: tokenFrom || undefined,\r\n            //Update token from data\r\n            tokenFrom: tokenTo || undefined,\r\n            bigNumberAmount: undefined,\r\n        }\r\n\r\n        if (tokenFrom) {\r\n            if (quote && tokenTo) {\r\n                const toTokenAmountBN = formatUnits(\r\n                    quote.toTokenAmount,\r\n                    tokenTo.decimals\r\n                )\r\n                setValue(\"amount\", toTokenAmountBN.toString())\r\n            } else {\r\n                setValue(\"amount\", \"0\")\r\n            }\r\n        }\r\n        setSwapDataState((prev: SwapState) => ({\r\n            ...prev,\r\n            ...nextSwapState,\r\n        }))\r\n    }\r\n\r\n    useEffect(() => {\r\n        let intervalTimeoutRef: NodeJS.Timeout | null = null\r\n        let isValidFetch = true\r\n        setError(undefined)\r\n        async function fetchQuote() {\r\n            setHasAllowance(true)\r\n            setIsLoading(true)\r\n            setCanSwitchInputs(false)\r\n            if (\r\n                tokenFrom!.address.toLowerCase() !==\r\n                nativeToken.token.address.toLowerCase()\r\n            ) {\r\n                try {\r\n                    const allowanceCheck = await checkExchangeAllowance(\r\n                        selectedAddress,\r\n                        bigNumberAmount!,\r\n                        ExchangeType.SWAP_1INCH,\r\n                        tokenFrom!.address\r\n                    )\r\n\r\n                    setHasAllowance(allowanceCheck)\r\n                } catch (error) {\r\n                    setError(\"Error checking allowance\")\r\n                }\r\n            }\r\n\r\n            try {\r\n                const quote = await getExchangeQuote(ExchangeType.SWAP_1INCH, {\r\n                    fromTokenAddress: tokenFrom!.address,\r\n                    toTokenAddress: tokenTo!.address,\r\n                    amount: bigNumberAmount!.toString(),\r\n                })\r\n                if (isValidFetch) {\r\n                    setQuote(quote)\r\n                }\r\n            } catch (error) {\r\n                setError(capitalize(error.message || \"Error fetching quote.\"))\r\n            } finally {\r\n                setCanSwitchInputs(true)\r\n                setIsLoading(false)\r\n                if (isValidFetch) {\r\n                    setTimeoutStart(new Date().getTime())\r\n                }\r\n            }\r\n        }\r\n\r\n        function validateBeforeFetch() {\r\n            if (\r\n                !tokenFrom ||\r\n                !tokenTo ||\r\n                !bigNumberAmount ||\r\n                bigNumberAmount.lte(BigNumber.from(0)) ||\r\n                errors.amount\r\n            ) {\r\n                return false\r\n            }\r\n            if (\r\n                tokenFrom.address.toLowerCase() ===\r\n                tokenTo.address.toLowerCase()\r\n            ) {\r\n                setError(\"Can't swap the same asset\")\r\n                return false\r\n            }\r\n\r\n            return true\r\n        }\r\n\r\n        const isReadyToFetch = validateBeforeFetch()\r\n        if (isReadyToFetch) {\r\n            fetchQuote()\r\n            intervalTimeoutRef = setInterval(\r\n                fetchQuote,\r\n                SWAP_QUOTE_REFRESH_TIMEOUT\r\n            )\r\n        } else {\r\n            setTimeoutStart(undefined)\r\n        }\r\n\r\n        return () => {\r\n            isValidFetch = false\r\n            intervalTimeoutRef && clearInterval(intervalTimeoutRef)\r\n        }\r\n    }, [\r\n        bigNumberAmount,\r\n        errors.amount,\r\n        nativeToken.token.address,\r\n        selectedAddress,\r\n        tokenFrom,\r\n        tokenTo,\r\n    ])\r\n\r\n    const remainingSuffix = Math.ceil(remainingSeconds!)\r\n        ? `${Math.floor(remainingSeconds!)}s`\r\n        : null\r\n\r\n    const rate = useMemo(() => {\r\n        return quote?.toTokenAmount\r\n            ? BigNumber.from(quote?.toTokenAmount)\r\n            : undefined\r\n    }, [quote?.toTokenAmount])\r\n\r\n    const swapFee = quote\r\n        ? `${formatNumberLength(\r\n              formatUnits(\r\n                  BigNumber.from(quote.fromTokenAmount)\r\n                      .mul(BASE_SWAP_FEE * 10)\r\n                      .div(1000),\r\n                  quote.fromToken.decimals\r\n              ),\r\n              8\r\n          )} ${quote.fromToken.symbol}`\r\n        : undefined\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    title=\"Swap\"\r\n                    close=\"/\"\r\n                    networkIndicator\r\n                    keepState\r\n                    onBack={() =>\r\n                        fromAssetPage\r\n                            ? history.push({\r\n                                  pathname: \"/asset/details\",\r\n                                  state: {\r\n                                      address: fromToken?.address,\r\n                                  },\r\n                              })\r\n                            : history.push(\"/home\")\r\n                    }\r\n                />\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        label={\r\n                            error ? error : hasAllowance ? \"Review\" : \"Approve\"\r\n                        }\r\n                        disabled={!!(error || !quote)}\r\n                        isLoading={isLoading}\r\n                        onClick={onSubmit}\r\n                        buttonClass={classnames(\r\n                            error && `${Classes.redButton} opacity-100`\r\n                        )}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            {rate && tokenTo && quote ? (\r\n                <RateUpdateDialog\r\n                    key={`${tokenTo.address}-${tokenFrom?.address}-${bigNumberAmount?._hex}`}\r\n                    assetName={tokenTo.symbol}\r\n                    assetDecimals={tokenTo.decimals}\r\n                    rate={rate}\r\n                />\r\n            ) : null}\r\n            <div className=\"flex flex-col p-6\">\r\n                <div\r\n                    className={classnames(\r\n                        \"flex flex-row\",\r\n                        // Error message height\r\n                        !errors.amount?.message && \"mb-[22px]\"\r\n                    )}\r\n                >\r\n                    {/* Asset */}\r\n                    <div className=\"flex flex-col space w-1/2 pr-1.5\">\r\n                        <p className=\"mb-2 text-sm text-gray-600\">Swap From</p>\r\n                        <AssetSelection\r\n                            selectedAssetList={AssetListType.DEFAULT}\r\n                            selectedAsset={\r\n                                tokenFrom && tokenFromBalance\r\n                                    ? {\r\n                                          token: tokenFrom,\r\n                                          balance: tokenFromBalance,\r\n                                      }\r\n                                    : undefined\r\n                            }\r\n                            onAssetChange={(asset) => {\r\n                                //Before assigning 'from' we check if it is not the same as 'to'. If that is the case we swap the inputs\r\n                                if (asset.token.address === tokenTo?.address) {\r\n                                    switchInputs()\r\n                                } else {\r\n                                    setQuote(undefined)\r\n                                    setSwapDataState((prev: SwapState) => ({\r\n                                        ...prev,\r\n                                        tokenFrom: asset.token,\r\n                                    }))\r\n                                }\r\n                            }}\r\n                            topMargin={100}\r\n                            bottomMargin={60}\r\n                            dropdownWidth=\"w-[309px]\"\r\n                            assetBalanceClassName=\"w-24\"\r\n                            addTokenState={{\r\n                                redirectTo: \"/swap/afterAddToken\",\r\n                                tokenTarget: \"from\",\r\n                                fromToken: tokenFrom,\r\n                                toToken: tokenTo,\r\n                            }}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Amount */}\r\n                    <div className=\"flex flex-col w-1/2 pl-1.5\">\r\n                        <div className=\"flex flex-row items-center space-x-1 mb-2\">\r\n                            <span\r\n                                className={classnames(\r\n                                    \"ml-auto text-sm\",\r\n                                    isUsingNetworkNativeCurrency && \"invisible\",\r\n                                    isMaxAmountEnabled\r\n                                        ? \"text-blue-500 hover:text-blue-800 cursor-pointer\"\r\n                                        : \"text-gray-600 cursor-default\"\r\n                                )}\r\n                                onClick={() => {\r\n                                    if (isMaxAmountEnabled) {\r\n                                        const parsedAmount = formatUnits(\r\n                                            maxAmount,\r\n                                            tokenFrom?.decimals\r\n                                        )\r\n                                        onUpdateAmount(parsedAmount)\r\n                                    }\r\n                                }}\r\n                            >\r\n                                Max\r\n                            </span>\r\n                        </div>\r\n                        <div\r\n                            className={classnames(\r\n                                \"flex flex-col items-stretch rounded-md p-4 h-[4.5rem] hover:bg-primary-200 w-full\",\r\n                                inputFocus\r\n                                    ? \"bg-primary-200\"\r\n                                    : \"bg-primary-100\",\r\n                                errors.amount\r\n                                    ? \"border-red-400\"\r\n                                    : \"border-opacity-0 border-transparent\"\r\n                            )}\r\n                        >\r\n                            <input\r\n                                {...register(\"amount\")}\r\n                                id=\"amount\"\r\n                                name=\"amount\"\r\n                                onChange={(e) => {\r\n                                    onUpdateAmount(e.target.value)\r\n                                }}\r\n                                maxLength={80}\r\n                                className=\"p-0 text-base bg-transparent border-none font-semibold -mt-0.5\"\r\n                                placeholder={`0.0 ${\r\n                                    tokenFrom ? tokenFrom.symbol : \"\"\r\n                                }`}\r\n                                autoComplete=\"off\"\r\n                                autoFocus={true}\r\n                                onFocus={() => setInputFocus(true)}\r\n                                onBlur={() => setInputFocus(false)}\r\n                            />\r\n                            <p\r\n                                className={classnames(\r\n                                    \"text-xs text-gray-600 mt-1\",\r\n                                    !formattedAmount && \"hidden\"\r\n                                )}\r\n                            >\r\n                                {formattedAmount}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div\r\n                    className={classnames(\r\n                        \"mt-1\",\r\n                        !errors.amount?.message && \"hidden\"\r\n                    )}\r\n                >\r\n                    <ErrorMessage>{errors.amount?.message}</ErrorMessage>\r\n                </div>\r\n\r\n                {/* Switch Inputs */}\r\n                <div className=\"pt-6\">\r\n                    <hr className=\"-mx-5\" />\r\n                    <button\r\n                        type=\"button\"\r\n                        className=\"flex -translate-y-2/4 justify-center items-center mx-auto rounded-full w-8 h-8 border border-grey-200 bg-white z-10 cursor-pointer\"\r\n                        onClick={switchInputs}\r\n                        disabled={!canSwitchInputs}\r\n                    >\r\n                        <img\r\n                            src={swapIcon}\r\n                            className=\"h-4 w-auto mx-auto\"\r\n                            alt=\"swap\"\r\n                        />\r\n                    </button>\r\n                </div>\r\n\r\n                <p className=\"text-sm text-gray-600 pb-3\">Swap To</p>\r\n                <AssetSelection\r\n                    displayIcon\r\n                    selectedAssetList={AssetListType.ALL}\r\n                    selectedAsset={\r\n                        tokenTo\r\n                            ? {\r\n                                  token: tokenTo,\r\n                                  balance: BigNumber.from(0),\r\n                              }\r\n                            : undefined\r\n                    }\r\n                    onAssetChange={(asset) => {\r\n                        //Before assigning 'to' we check if it is not the same as 'from'. If that is the case we swap the inputs\r\n                        if (asset.token.address === tokenFrom?.address) {\r\n                            switchInputs()\r\n                        } else {\r\n                            setQuote(undefined)\r\n                            setSwapDataState((prev: SwapState) => ({\r\n                                ...prev,\r\n                                tokenTo: asset.token,\r\n                            }))\r\n                        }\r\n                    }}\r\n                    customAmount={BigNumber.from(quote?.toTokenAmount || 0)}\r\n                    topMargin={50}\r\n                    bottomMargin={200}\r\n                    addTokenState={{\r\n                        redirectTo: \"/swap/afterAddToken\",\r\n                        tokenTarget: \"to\",\r\n                        fromToken: tokenFrom,\r\n                        toToken: tokenTo,\r\n                    }}\r\n                />\r\n                {swapFee && (\r\n                    <div className=\"flex items-center pt-2 text-xs text-gray-600 pt-0.5 mr-1 mt-2\">\r\n                        <span>{`BlockWallet fee (${BASE_SWAP_FEE}%): ${swapFee}`}</span>\r\n                    </div>\r\n                )}\r\n            </div>\r\n            {remainingSuffix && (\r\n                <RefreshLabel value={remainingSuffix} className=\"ml-6 mt-12\" />\r\n            )}\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default SwapPage\r\n","import { FC } from \"react\"\r\nimport unknownTokenIcon from \"../../assets/images/unknown_token.svg\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { Token } from \"@block-wallet/background/controllers/erc-20/Token\"\r\nimport { formatRounded } from \"../../util/formatRounded\"\r\nimport { formatUnits } from \"@ethersproject/units\"\r\nimport { formatNumberLength } from \"../../util/formatNumberLength\"\r\n\r\ninterface AssetAmountComponentProps {\r\n    asset: Token\r\n    amount?: BigNumber\r\n}\r\n\r\nconst AssetAmountDisplay: FC<AssetAmountComponentProps> = ({\r\n    asset,\r\n    amount,\r\n}) => {\r\n    const amountString = formatRounded(\r\n        formatUnits(amount || 0, asset.decimals),\r\n        11\r\n    )\r\n\r\n    return (\r\n        <div className=\"flex flex-row items-center w-full p-4 rounded-md bg-primary-100\">\r\n            <span className=\"flex items-center justify-center !w-6 !h-6 rounded-full\">\r\n                <img\r\n                    src={asset.logo || unknownTokenIcon}\r\n                    alt={asset.name}\r\n                    className=\"rounded-full\"\r\n                />\r\n            </span>\r\n            <span\r\n                className=\"text-base truncate font-semibold ml-2\"\r\n                title={asset.symbol}\r\n            >\r\n                {asset.symbol}\r\n            </span>\r\n            {amount && (\r\n                <div\r\n                    className=\"text-base truncate font-semibold !ml-auto\"\r\n                    title={amountString}\r\n                >\r\n                    {formatNumberLength(amountString, 12)}\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AssetAmountDisplay\r\n","export default __webpack_public_path__ + \"static/media/arrow_down_long.b66201ec.svg\";","import { AccountBalanceToken } from \"@block-wallet/background/controllers/AccountTrackerController\"\r\nimport { Token } from \"@block-wallet/background/controllers/erc-20/Token\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { parseUnits } from \"@ethersproject/units\"\r\nimport { useTokensList } from \"./useTokensList\"\r\n\r\nexport const useHasSufficientBalance = (\r\n    value: string | BigNumber,\r\n    token: Token\r\n) => {\r\n    const { nativeToken, currentNetworkTokens } = useTokensList()\r\n    const { symbol, address } = token\r\n    value =\r\n        typeof value === \"string\" ? parseUnits(value, token.decimals) : value\r\n\r\n    const tokens: { [key in string]: AccountBalanceToken } = {}\r\n\r\n    currentNetworkTokens.forEach((currentNetworkToken) => {\r\n        tokens[currentNetworkToken.token.address] = {\r\n            ...currentNetworkToken,\r\n        }\r\n    })\r\n\r\n    const tokenBalance =\r\n        symbol === nativeToken.token.symbol\r\n            ? BigNumber.from(nativeToken.balance)\r\n            : address in tokens\r\n            ? BigNumber.from(tokens[address].balance)\r\n            : BigNumber.from(0)\r\n\r\n    return BigNumber.from(tokenBalance).gte(value)\r\n}\r\n","import { TransactionMeta } from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport { useCallback, useEffect } from \"react\"\r\nimport { useWaitingDialog } from \"../../components/dialog/WaitingDialog\"\r\nimport { TransactionStatus } from \"../commTypes\"\r\n\r\nconst useAwaitAllowanceTransactionDialog = (\r\n    transaction: TransactionMeta | undefined\r\n) => {\r\n    const { dispatch, status, isOpen } = useWaitingDialog({\r\n        defaultStatus: \"idle\",\r\n    })\r\n    useEffect(() => {\r\n        if (transaction?.status) {\r\n            if ([TransactionStatus.SUBMITTED].includes(transaction.status)) {\r\n                dispatch({\r\n                    type: \"setStatus\",\r\n                    payload: {\r\n                        status: \"loading\",\r\n                        forceOpen: true,\r\n                    },\r\n                })\r\n            }\r\n            if ([TransactionStatus.CONFIRMED].includes(transaction.status)) {\r\n                //Only dispatch success dialog if the dialog has been opened.\r\n                dispatch({\r\n                    type: \"setStatus\",\r\n                    payload: {\r\n                        status: \"success\",\r\n                        forceOpen: false,\r\n                    },\r\n                })\r\n            }\r\n            if (\r\n                [\r\n                    TransactionStatus.FAILED,\r\n                    TransactionStatus.DROPPED,\r\n                    TransactionStatus.CANCELLED,\r\n                ].includes(transaction.status)\r\n            ) {\r\n                dispatch({\r\n                    type: \"setStatus\",\r\n                    payload: {\r\n                        status: \"error\",\r\n                        forceOpen: true,\r\n                    },\r\n                })\r\n            }\r\n        }\r\n    }, [transaction?.status])\r\n    return {\r\n        status,\r\n        isOpen,\r\n        closeDialog: useCallback(() => {\r\n            dispatch({ type: \"close\" })\r\n        }, []),\r\n    }\r\n}\r\n\r\nexport default useAwaitAllowanceTransactionDialog\r\n","import { FC, useCallback } from \"react\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { boolean } from \"yup\"\r\nimport ClickableText from \"../button/ClickableText\"\r\nimport Divider from \"../Divider\"\r\nimport WaitingDialog from \"./WaitingDialog\"\r\n\r\ntype Operation = \"swap\" | \"bridge\"\r\n\r\ninterface Props {\r\n    operation: Operation\r\n    isOpen: boolean\r\n    status: \"idle\" | \"loading\" | \"success\" | \"error\"\r\n    onError: () => void\r\n    onSuccess: () => void\r\n}\r\n\r\nconst WaitingAllowanceTransactionDialog: FC<Props> = ({\r\n    isOpen,\r\n    status,\r\n    operation,\r\n    onError,\r\n    onSuccess,\r\n}) => {\r\n    const history = useHistory()\r\n    return (\r\n        <WaitingDialog\r\n            open={isOpen}\r\n            status={status}\r\n            titles={{\r\n                loading: \"Waiting for allowance transaction...\",\r\n                success: \"Success\",\r\n                error: \"Allowance approval failed\",\r\n            }}\r\n            texts={{\r\n                loading: <WaitingMessage operation={operation} />,\r\n                success: `The approval transaction has been mined. You can proceeed with the ${operation} now.`,\r\n                error: \"Please try again. If the problem persists, please contact support.\",\r\n            }}\r\n            clickOutsideToClose={false}\r\n            //Less timeout for success message.\r\n            timeout={status === \"success\" ? 2000 : 3000}\r\n            onDone={useCallback(() => {\r\n                if (status === \"error\") {\r\n                    onError ? onError() : history.push(\"/\")\r\n                    return\r\n                }\r\n                if (status === \"success\") {\r\n                    onSuccess()\r\n                }\r\n            }, [status, history])}\r\n        />\r\n    )\r\n}\r\n\r\nconst WaitingMessage = ({ operation }: { operation: Operation }) => {\r\n    const history = useHistory()\r\n    return (\r\n        <div className=\"flex flex-col space-y-2 items-center\">\r\n            <span>{`Your ${operation} is being prepared, please wait.`}</span>\r\n            <Divider />\r\n            <span className=\"text-xs\">\r\n                {\"You can wait here until it is done or \"}\r\n                <ClickableText onClick={() => history.push(\"/\")}>\r\n                    {`${operation} later`}\r\n                </ClickableText>\r\n                {\" when the token approval is completed.\"}\r\n            </span>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default WaitingAllowanceTransactionDialog\r\n","import AssetAmountDisplay from \"../../components/assets/AssetAmountDisplay\"\r\nimport GasPriceComponent from \"../../components/transactions/GasPriceComponent\"\r\nimport HardwareDeviceNotLinkedDialog from \"../../components/dialog/HardwareDeviceNotLinkedDialog\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport RateUpdateDialog from \"../../components/swaps/RateUpdateDialog\"\r\nimport React, {\r\n    useState,\r\n    useEffect,\r\n    useMemo,\r\n    useRef,\r\n    FC,\r\n    useCallback,\r\n} from \"react\"\r\nimport TransactionDetails from \"../../components/transactions/TransactionDetails\"\r\nimport WaitingDialog from \"../../components/dialog/WaitingDialog\"\r\nimport arrowDown from \"../../assets/images/icons/arrow_down_long.svg\"\r\nimport useCheckAccountDeviceLinked from \"../../util/hooks/useCheckAccountDeviceLinked\"\r\nimport useLocalStorageState from \"../../util/hooks/useLocalStorageState\"\r\nimport {\r\n    getExchangeParameters,\r\n    executeExchange,\r\n    getLatestGasPrice,\r\n    rejectTransaction,\r\n} from \"../../context/commActions\"\r\nimport {\r\n    SwapQuote,\r\n    SwapParameters,\r\n    SwapTransaction,\r\n} from \"@block-wallet/background/controllers/SwapController\"\r\nimport {\r\n    ExchangeType,\r\n    HardwareWalletOpTypes,\r\n    TransactionCategories,\r\n    TransactionStatus,\r\n} from \"../../context/commTypes\"\r\nimport {\r\n    calcExchangeRate,\r\n    isSwapNativeTokenAddress,\r\n    populateExchangeTransaction,\r\n} from \"../../util/exchangeUtils\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport { GasPriceSelector } from \"../../components/transactions/GasPriceSelector\"\r\nimport { OneInchSwapRequestParams } from \"@block-wallet/background/utils/types/1inch\"\r\nimport { Token } from \"@block-wallet/background/controllers/erc-20/Token\"\r\nimport { classnames, Classes } from \"../../styles\"\r\nimport { formatRounded } from \"../../util/formatRounded\"\r\nimport { getDeviceFromAccountType } from \"../../util/hardwareDevice\"\r\nimport { useGasPriceData } from \"../../context/hooks/useGasPriceData\"\r\nimport { useHasSufficientBalance } from \"../../context/hooks/useHasSufficientBalance\"\r\nimport { useInProgressInternalTransaction } from \"../../context/hooks/useInProgressInternalTransaction\"\r\nimport { useLocationRecovery } from \"../../util/hooks/useLocationRecovery\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport { useSelectedAccount } from \"../../context/hooks/useSelectedAccount\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport { useTransactionWaitingDialog } from \"../../context/hooks/useTransactionWaitingDialog\"\r\nimport { useTokensList } from \"../../context/hooks/useTokensList\"\r\nimport { isHardwareWallet } from \"../../util/account\"\r\nimport useCountdown from \"../../util/hooks/useCountdown\"\r\nimport { formatNumberLength } from \"../../util/formatNumberLength\"\r\nimport OutlinedButton from \"../../components/ui/OutlinedButton\"\r\nimport Icon, { IconName } from \"../../components/ui/Icon\"\r\nimport RefreshLabel from \"../../components/swaps/RefreshLabel\"\r\nimport { capitalize } from \"../../util/capitalize\"\r\nimport {\r\n    AdvancedSettings,\r\n    defaultAdvancedSettings,\r\n} from \"../../components/transactions/AdvancedSettings\"\r\nimport { TransactionAdvancedData } from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport { WithRequired } from \"@block-wallet/background/utils/types/helpers\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { useTransactionById } from \"../../context/hooks/useTransactionById\"\r\nimport useAwaitAllowanceTransactionDialog from \"../../context/hooks/useAwaitAllowanceTransactionDialog\"\r\nimport WaitingAllowanceTransactionDialog from \"../../components/dialog/WaitingAllowanceTransactionDialog\"\r\n\r\nexport interface SwapConfirmPageLocalState {\r\n    fromToken: Token\r\n    swapQuote: SwapQuote\r\n    toToken: Token\r\n    amount?: string\r\n    allowanceTransactionId?: string\r\n}\r\n\r\n// 15s\r\nconst QUOTE_REFRESH_TIMEOUT = 1000 * 15\r\n\r\nconst SwapPageConfirm: FC<{}> = () => {\r\n    const history = useOnMountHistory()\r\n    const { fromToken, swapQuote, toToken, allowanceTransactionId } = useMemo(\r\n        () => history.location.state as SwapConfirmPageLocalState,\r\n        [history.location.state]\r\n    )\r\n\r\n    const [timeoutStart, setTimeoutStart] = useState<number | undefined>(\r\n        undefined\r\n    )\r\n    const { value: remainingSeconds } = useCountdown(\r\n        timeoutStart,\r\n        QUOTE_REFRESH_TIMEOUT\r\n    )\r\n\r\n    const [persistedData, setPersistedData] = useLocalStorageState(\r\n        \"swaps.confirm\",\r\n        {\r\n            initialValue: {\r\n                submitted: false,\r\n            },\r\n            volatile: true,\r\n        }\r\n    )\r\n\r\n    const { clear: clearLocationRecovery } = useLocationRecovery()\r\n    const { transaction: inProgressTransaction, clearTransaction } =\r\n        useInProgressInternalTransaction({\r\n            categories: [TransactionCategories.EXCHANGE],\r\n        })\r\n\r\n    useEffect(() => {\r\n        // Redirect to homepage if there is no pending transaction\r\n        if (!inProgressTransaction?.id && persistedData.submitted) {\r\n            history.push(\"/\")\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    const { gasPricesLevels } = useGasPriceData()\r\n    const { isEIP1559Compatible } = useSelectedNetwork()\r\n    const selectedAccount = useSelectedAccount()\r\n    const { defaultGasOption } = useBlankState()!\r\n    const { nativeToken } = useTokensList()\r\n    const { isDeviceUnlinked, checkDeviceIsLinked, resetDeviceLinkStatus } =\r\n        useCheckAccountDeviceLinked()\r\n\r\n    const { status, isOpen, dispatch, texts, titles, closeDialog, gifs } =\r\n        useTransactionWaitingDialog(\r\n            inProgressTransaction\r\n                ? {\r\n                      id: inProgressTransaction.id,\r\n                      status: inProgressTransaction.status,\r\n                      error: inProgressTransaction.error as Error,\r\n                      epochTime: inProgressTransaction?.approveTime,\r\n                  }\r\n                : undefined,\r\n            HardwareWalletOpTypes.SIGN_TRANSACTION,\r\n            selectedAccount.accountType,\r\n            {\r\n                reject: React.useCallback(() => {\r\n                    if (inProgressTransaction?.id) {\r\n                        rejectTransaction(inProgressTransaction?.id)\r\n                    }\r\n                }, [inProgressTransaction?.id]),\r\n            }\r\n        )\r\n\r\n    const { transaction: allowanceTransaction } = useTransactionById(\r\n        allowanceTransactionId\r\n    )\r\n\r\n    const isInProgressAllowanceTransaction = allowanceTransaction\r\n        ? allowanceTransaction.status !== TransactionStatus.CONFIRMED\r\n        : false\r\n\r\n    const {\r\n        status: allowanceTxDialogStatus,\r\n        isOpen: allowanceTxDialogIsOpen,\r\n        closeDialog: closeAllowanceTxDialog,\r\n    } = useAwaitAllowanceTransactionDialog(allowanceTransaction)\r\n\r\n    const [isFetchingSwaps, setIsFetchingSwaps] = useState<boolean>(false)\r\n    const [isGasLoading, setIsGasLoading] = useState<boolean>(true)\r\n    const [error, setError] = useState<string | undefined>(undefined)\r\n    const [swapParameters, setSwapParameters] = useState<\r\n        SwapParameters | undefined\r\n    >(undefined)\r\n    const [showDetails, setShowDetails] = useState<boolean>(false)\r\n    const [advancedSettings, setAdvancedSettings] = useState<\r\n        WithRequired<TransactionAdvancedData, \"slippage\">\r\n    >(defaultAdvancedSettings)\r\n\r\n    // Gas\r\n    const [defaultGas, setDefaultGas] = useState<{\r\n        gasPrice: BigNumber\r\n        gasLimit: BigNumber\r\n    }>({\r\n        gasPrice: BigNumber.from(gasPricesLevels.average.gasPrice ?? \"0\"),\r\n        gasLimit: BigNumber.from(0),\r\n    })\r\n    const [selectedFees, setSelectedFees] = useState({\r\n        maxPriorityFeePerGas: BigNumber.from(\r\n            gasPricesLevels.average.maxPriorityFeePerGas ?? \"0\"\r\n        ),\r\n        maxFeePerGas: BigNumber.from(\r\n            gasPricesLevels.average.maxFeePerGas ?? \"0\"\r\n        ),\r\n    })\r\n    const [selectedGasPrice, setSelectedGasPrice] = useState(\r\n        BigNumber.from(gasPricesLevels.average.gasPrice ?? \"0\")\r\n    )\r\n    const [selectedGasLimit, setSelectedGasLimit] = useState(BigNumber.from(0))\r\n\r\n    const isSwapping = status === \"loading\" && isOpen\r\n    const shouldFetchSwapParams = status !== \"loading\" && status !== \"success\"\r\n    const isGasInitialized = useRef<boolean>(false)\r\n\r\n    // Balance check\r\n    const feePerGas = isEIP1559Compatible\r\n        ? selectedFees.maxFeePerGas\r\n        : selectedGasPrice\r\n\r\n    const fee = selectedGasLimit.mul(feePerGas)\r\n    const isSwappingNativeToken = isSwapNativeTokenAddress(\r\n        swapParameters?.fromToken.address || swapQuote.fromToken.address\r\n    )\r\n    const total = isSwappingNativeToken\r\n        ? BigNumber.from(\r\n              swapParameters?.fromTokenAmount || swapQuote.fromTokenAmount\r\n          ).add(fee)\r\n        : fee\r\n\r\n    const hasNativeAssetBalance = useHasSufficientBalance(\r\n        total,\r\n        nativeToken.token\r\n    )\r\n\r\n    const hasFromTokenBalance = useHasSufficientBalance(\r\n        BigNumber.from(\r\n            swapParameters?.fromTokenAmount || swapQuote.fromTokenAmount\r\n        ),\r\n        fromToken\r\n    )\r\n\r\n    const hasBalance = isSwappingNativeToken\r\n        ? hasNativeAssetBalance\r\n        : hasNativeAssetBalance && hasFromTokenBalance\r\n\r\n    const exchangeRate = calcExchangeRate(\r\n        BigNumber.from(\r\n            swapParameters?.fromTokenAmount || swapQuote.fromTokenAmount\r\n        ),\r\n        fromToken.decimals,\r\n        BigNumber.from(\r\n            swapParameters?.toTokenAmount || swapQuote.toTokenAmount\r\n        ),\r\n        toToken.decimals\r\n    )\r\n\r\n    const onSubmit = async () => {\r\n        if (error || !swapParameters || !hasBalance) return\r\n\r\n        dispatch({ type: \"open\", payload: { status: \"loading\" } })\r\n        const isLinked = await checkDeviceIsLinked()\r\n        if (isLinked) {\r\n            if (!isHardwareWallet(selectedAccount.accountType)) {\r\n                clearLocationRecovery()\r\n            }\r\n\r\n            setPersistedData({\r\n                submitted: true,\r\n            })\r\n\r\n            const swapTransactionParams: SwapTransaction = {\r\n                ...swapParameters,\r\n                customNonce: advancedSettings.customNonce,\r\n                flashbots: advancedSettings.flashbots,\r\n                gasPrice: isEIP1559Compatible\r\n                    ? undefined\r\n                    : selectedGasPrice || swapParameters.tx.gasPrice,\r\n                maxPriorityFeePerGas: isEIP1559Compatible\r\n                    ? selectedFees.maxPriorityFeePerGas\r\n                    : undefined,\r\n                maxFeePerGas: isEIP1559Compatible\r\n                    ? selectedFees.maxFeePerGas\r\n                    : undefined,\r\n                tx: {\r\n                    ...swapParameters.tx,\r\n                    gas: selectedGasLimit.toNumber() || swapParameters.tx.gas,\r\n                },\r\n            }\r\n            await executeExchange(\r\n                ExchangeType.SWAP_1INCH,\r\n                swapTransactionParams\r\n            )\r\n        } else {\r\n            closeDialog()\r\n        }\r\n    }\r\n\r\n    const updateSwapParameters = useCallback(async () => {\r\n        setError(undefined)\r\n        const params: OneInchSwapRequestParams = {\r\n            fromAddress: selectedAccount.address,\r\n            fromTokenAddress: swapQuote.fromToken.address,\r\n            toTokenAddress: swapQuote.toToken.address,\r\n            amount: swapQuote.fromTokenAmount,\r\n            slippage: advancedSettings.slippage,\r\n        }\r\n        setIsFetchingSwaps(true)\r\n        try {\r\n            const swapParams = await getExchangeParameters(\r\n                ExchangeType.SWAP_1INCH,\r\n                params\r\n            )\r\n            setSwapParameters(swapParams)\r\n            setTimeoutStart(new Date().getTime())\r\n        } catch (error) {\r\n            setError(capitalize(error.message || \"Error fetching swap\"))\r\n        } finally {\r\n            setIsFetchingSwaps(false)\r\n        }\r\n    }, [\r\n        selectedAccount.address,\r\n        advancedSettings.slippage,\r\n        swapQuote.fromToken.address,\r\n        swapQuote.fromTokenAmount,\r\n        swapQuote.toToken.address,\r\n    ])\r\n\r\n    // Initialize gas\r\n    useEffect(() => {\r\n        const setGas = async () => {\r\n            if (!swapParameters && error) {\r\n                setIsGasLoading(false)\r\n            }\r\n            if (swapParameters && isGasInitialized.current === false) {\r\n                setIsGasLoading(true)\r\n\r\n                try {\r\n                    let gasPrice: BigNumber = BigNumber.from(0)\r\n\r\n                    if (!isEIP1559Compatible) {\r\n                        gasPrice = await getLatestGasPrice()\r\n                    }\r\n\r\n                    setDefaultGas({\r\n                        gasPrice: BigNumber.from(gasPrice),\r\n                        gasLimit: BigNumber.from(swapParameters.tx.gas),\r\n                    })\r\n\r\n                    isGasInitialized.current = true\r\n                } catch (error) {\r\n                    setError(\"Error fetching gas default\")\r\n                } finally {\r\n                    setIsGasLoading(false)\r\n                }\r\n            }\r\n        }\r\n\r\n        setGas()\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [swapParameters, error])\r\n\r\n    useEffect(() => {\r\n        if (!shouldFetchSwapParams || isInProgressAllowanceTransaction) {\r\n            setTimeoutStart(undefined)\r\n            return\r\n        }\r\n        //first render, run function manually\r\n        updateSwapParameters()\r\n        let intervalRef = setInterval(\r\n            updateSwapParameters,\r\n            QUOTE_REFRESH_TIMEOUT\r\n        )\r\n        // Cleanup timer\r\n        return () => {\r\n            intervalRef && clearInterval(intervalRef)\r\n        }\r\n    }, [\r\n        updateSwapParameters,\r\n        shouldFetchSwapParams,\r\n        isInProgressAllowanceTransaction,\r\n    ])\r\n\r\n    const remainingSuffix = Math.ceil(remainingSeconds!)\r\n        ? `${Math.floor(remainingSeconds!)}s`\r\n        : \"\"\r\n\r\n    const rate = useMemo(() => {\r\n        return BigNumber.from(\r\n            swapParameters?.toTokenAmount || swapQuote.toTokenAmount\r\n        )\r\n    }, [swapParameters?.toTokenAmount, swapQuote.toTokenAmount])\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    title=\"Confirm Swap\"\r\n                    onBack={() => {\r\n                        //avoid returning to the \"approve page\".\r\n                        history.push({\r\n                            pathname: \"/swap\",\r\n                            state: history.location.state,\r\n                        })\r\n                    }}\r\n                    disabled={isSwapping}\r\n                    networkIndicator\r\n                />\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        label={\r\n                            error\r\n                                ? error\r\n                                : hasBalance\r\n                                ? `Swap`\r\n                                : isSwappingNativeToken\r\n                                ? \"You don't have enough funds to cover the swap and the gas costs.\"\r\n                                : \"Insufficient funds\"\r\n                        }\r\n                        isLoading={\r\n                            error || isInProgressAllowanceTransaction\r\n                                ? false\r\n                                : !swapParameters ||\r\n                                  isGasLoading ||\r\n                                  isFetchingSwaps ||\r\n                                  isSwapping\r\n                        }\r\n                        onClick={onSubmit}\r\n                        disabled={!!error || !hasBalance}\r\n                        buttonClass={classnames(\r\n                            error || !hasBalance\r\n                                ? `${Classes.redButton} opacity-100`\r\n                                : \"\"\r\n                        )}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <WaitingAllowanceTransactionDialog\r\n                status={allowanceTxDialogStatus}\r\n                isOpen={allowanceTxDialogIsOpen}\r\n                onSuccess={closeAllowanceTxDialog}\r\n                onError={() =>\r\n                    history.push({\r\n                        pathname: \"/swap\",\r\n                        state: {\r\n                            ...history.location.state,\r\n                            allowanceTransactionId: undefined,\r\n                        },\r\n                    })\r\n                }\r\n                operation=\"swap\"\r\n            />\r\n            <WaitingDialog\r\n                open={isOpen}\r\n                status={status}\r\n                titles={{\r\n                    loading: titles?.loading || \"Making swap...\",\r\n                    success: titles?.success || \"Success\",\r\n                    error: titles?.error || \"Error\",\r\n                }}\r\n                texts={{\r\n                    loading: texts?.loading || \"Initiating the swap...\",\r\n                    success: titles?.success || \"You've initiated the swap\",\r\n                    error: texts?.error || \"Error making the swap\",\r\n                }}\r\n                clickOutsideToClose={false}\r\n                txHash={inProgressTransaction?.transactionParams.hash}\r\n                timeout={2900}\r\n                gifs={gifs}\r\n                onDone={React.useCallback(() => {\r\n                    if (status === \"error\") {\r\n                        closeDialog()\r\n                        setPersistedData({\r\n                            submitted: false,\r\n                        })\r\n                        clearTransaction()\r\n                        return\r\n                    }\r\n\r\n                    history.push(\"/\")\r\n                }, [\r\n                    status,\r\n                    history,\r\n                    closeDialog,\r\n                    setPersistedData,\r\n                    clearTransaction,\r\n                ])}\r\n            />\r\n            {swapParameters && (\r\n                <TransactionDetails\r\n                    transaction={populateExchangeTransaction(swapParameters)}\r\n                    open={showDetails}\r\n                    onClose={() => setShowDetails(false)}\r\n                    nonce={advancedSettings.customNonce}\r\n                />\r\n            )}\r\n            <HardwareDeviceNotLinkedDialog\r\n                onDone={resetDeviceLinkStatus}\r\n                isOpen={isDeviceUnlinked}\r\n                vendor={getDeviceFromAccountType(selectedAccount.accountType)}\r\n                address={selectedAccount.address}\r\n            />\r\n            <RateUpdateDialog\r\n                assetName={swapQuote.toToken.symbol}\r\n                assetDecimals={toToken.decimals}\r\n                rate={rate}\r\n                threshold={advancedSettings.slippage}\r\n            />\r\n            <div className=\"flex flex-col px-6 py-3\">\r\n                {/* From Token */}\r\n                <AssetAmountDisplay\r\n                    asset={fromToken}\r\n                    amount={BigNumber.from(\r\n                        swapParameters?.fromTokenAmount ||\r\n                            swapQuote.fromTokenAmount\r\n                    )}\r\n                />\r\n\r\n                {/* Divider */}\r\n                <div className=\"pt-8\">\r\n                    <hr className=\"-mx-5\" />\r\n                    <div className=\"flex -translate-y-2/4 justify-center items-center mx-auto rounded-full w-8 h-8 border border-grey-200 bg-white z-10\">\r\n                        <img\r\n                            src={arrowDown}\r\n                            className=\"h-4 w-auto mx-auto\"\r\n                            alt=\"arrow\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* To Token */}\r\n                <AssetAmountDisplay\r\n                    asset={toToken}\r\n                    amount={BigNumber.from(\r\n                        swapParameters?.toTokenAmount || swapQuote.toTokenAmount\r\n                    )}\r\n                />\r\n\r\n                {/* Rates */}\r\n                <p className=\"text-sm py-2 leading-loose text-gray-500 uppercase text-center w-full\">\r\n                    {`1 ${fromToken.symbol} = ${formatNumberLength(\r\n                        formatRounded(exchangeRate.toFixed(10), 8),\r\n                        10\r\n                    )} ${toToken.symbol}`}\r\n                </p>\r\n\r\n                {/* Gas */}\r\n                <p className=\"text-sm text-gray-600 pb-2 pt-1\">Gas Price</p>\r\n                {isEIP1559Compatible ? (\r\n                    <GasPriceComponent\r\n                        defaultGas={{\r\n                            defaultLevel: defaultGasOption || \"medium\",\r\n                            feeData: {\r\n                                gasLimit: defaultGas.gasLimit,\r\n                            },\r\n                        }}\r\n                        setGas={(gasFees) => {\r\n                            setSelectedGasLimit(gasFees.gasLimit!)\r\n                            setSelectedFees({\r\n                                maxFeePerGas: gasFees.maxFeePerGas!,\r\n                                maxPriorityFeePerGas:\r\n                                    gasFees.maxPriorityFeePerGas!,\r\n                            })\r\n                        }}\r\n                        isParentLoading={isGasLoading}\r\n                        disabled={isGasLoading}\r\n                        displayOnlyMaxValue\r\n                    />\r\n                ) : (\r\n                    <GasPriceSelector\r\n                        defaultLevel={defaultGasOption || \"medium\"}\r\n                        defaultGasLimit={defaultGas.gasLimit}\r\n                        defaultGasPrice={defaultGas.gasPrice}\r\n                        setGasPriceAndLimit={(gasPrice, gasLimit) => {\r\n                            setSelectedGasPrice(gasPrice)\r\n                            setSelectedGasLimit(gasLimit)\r\n                        }}\r\n                        isParentLoading={isGasLoading}\r\n                        disabled={isGasLoading}\r\n                    />\r\n                )}\r\n\r\n                <div className=\"flex flex-row items-center py-3\">\r\n                    {/* Settings */}\r\n                    <AdvancedSettings\r\n                        address={selectedAccount.address}\r\n                        advancedSettings={advancedSettings}\r\n                        display={{\r\n                            nonce: true,\r\n                            flashbots: true,\r\n                            slippage: true,\r\n                        }}\r\n                        transactionGasLimit={selectedGasLimit}\r\n                        setAdvancedSettings={(\r\n                            newSettings: TransactionAdvancedData\r\n                        ) => {\r\n                            setAdvancedSettings({\r\n                                ...newSettings,\r\n                                slippage:\r\n                                    newSettings.slippage !== undefined\r\n                                        ? newSettings.slippage\r\n                                        : defaultAdvancedSettings.slippage,\r\n                            })\r\n                        }}\r\n                        label={\"Settings\"}\r\n                    />\r\n                    {/* Swap Details */}\r\n                    <OutlinedButton\r\n                        onClick={() => {\r\n                            swapParameters && setShowDetails(true)\r\n                        }}\r\n                        className={classnames(\r\n                            \"w-full ml-2\",\r\n                            !swapParameters &&\r\n                                \"cursor-not-allowed hover:border-default\"\r\n                        )}\r\n                    >\r\n                        <span className=\"font-bold text-sm\">Details</span>\r\n                        <Icon name={IconName.RIGHT_CHEVRON} size=\"sm\" />\r\n                    </OutlinedButton>\r\n                </div>\r\n\r\n                {remainingSuffix && (\r\n                    <RefreshLabel value={remainingSuffix} className=\"mt-3\" />\r\n                )}\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default SwapPageConfirm\r\n","import { Token } from \"@block-wallet/background/controllers/erc-20/Token\"\r\nimport { useEffect } from \"react\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\n\r\ninterface AfterAddTokenState {\r\n    fromToken?: Token\r\n    toToken?: Token\r\n    token: Token\r\n    tokenTarget: \"from\" | \"to\"\r\n    amount?: string\r\n}\r\n\r\n//This route only handles the add token callback for the swap feature.\r\n//After collecting the state, it redirects to the /swap route.\r\nconst SwapAfterAddTokenPage = () => {\r\n    const history = useOnMountHistory()\r\n    const state = history.location.state\r\n    const {\r\n        fromToken,\r\n        toToken,\r\n        //recently added token\r\n        token,\r\n        tokenTarget,\r\n        amount,\r\n    } = state as AfterAddTokenState\r\n    useEffect(() => {\r\n        history.replace({\r\n            pathname: \"/swap\",\r\n            state: {\r\n                fromToken:\r\n                    tokenTarget === \"from\" ? token || fromToken : fromToken,\r\n                toToken: tokenTarget === \"to\" ? token || toToken : toToken,\r\n                amount,\r\n            },\r\n        })\r\n    }, [amount, fromToken, history, toToken, token, tokenTarget])\r\n\r\n    return null\r\n}\r\n\r\nexport default SwapAfterAddTokenPage\r\n","import { useDrag, useDrop, DragSourceMonitor } from \"react-dnd\"\r\nimport { useEffect, useRef, useState } from \"react\"\r\nimport classnames from \"classnames\"\r\nimport { HiDotsVertical } from \"react-icons/hi\"\r\nimport { RiPencilFill } from \"react-icons/ri\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { changeNetwork } from \"../../context/commActions\"\r\nimport useIsHovering from \"../../util/hooks/useIsHovering\"\r\n\r\nimport { Network } from \"@block-wallet/background/utils/constants/networks\"\r\nimport ConfirmDialog from \"../dialog/ConfirmDialog\"\r\nimport Icon, { IconName } from \"../ui/Icon\"\r\nimport WaitingDialog, { useWaitingDialog } from \"../dialog/WaitingDialog\"\r\n\r\ninterface NetworkInfo extends Network {\r\n    color: string\r\n}\r\n\r\ntype NetworkCardProps = {\r\n    networkInfo: NetworkInfo\r\n    originalIndex: number\r\n    isTestnet: boolean\r\n}\r\n\r\nconst NetworkDisplay = ({\r\n    networkInfo,\r\n    onClick,\r\n    moveNetworkCard,\r\n    isTestnet = false,\r\n    findNetworkCard,\r\n    onSuccessfulDrop,\r\n}: {\r\n    networkInfo: NetworkInfo\r\n    onClick: () => void\r\n    moveNetworkCard: (\r\n        draggedIndex: number,\r\n        hoveredOnIndex: number,\r\n        isTestnet: boolean\r\n    ) => void\r\n    findNetworkCard: (\r\n        chainId: number,\r\n        isTestnet: boolean\r\n    ) => {\r\n        network: NetworkInfo\r\n        index: number\r\n    }\r\n    isTestnet?: boolean\r\n    onSuccessfulDrop: () => void\r\n}) => {\r\n    const { selectedNetwork } = useBlankState()!\r\n    const isSelectedNetwork = selectedNetwork === networkInfo.name\r\n\r\n    const { isHovering: isHoveringIcons, getIsHoveringProps } = useIsHovering()\r\n\r\n    const { isOpen, status, dispatch } = useWaitingDialog()\r\n\r\n    const [confirmSwitchNetwork, setConfirmSwitchNetwork] = useState(false)\r\n\r\n    const [dropAnimation, setDropAnimation] = useState(false)\r\n    const dropRef = useRef<HTMLDivElement>(null)\r\n    const dragRef = useRef<HTMLDivElement>(null)\r\n\r\n    const originalIndex = findNetworkCard(networkInfo.chainId, isTestnet).index\r\n\r\n    const [{ isDragging }, drag, preview] = useDrag(\r\n        () => ({\r\n            type: isTestnet ? \"testnet\" : \"mainnet\",\r\n            item: { networkInfo, originalIndex, isTestnet },\r\n            // This is used to inject isDragging variable into the component\r\n            collect: (monitor: DragSourceMonitor) => ({\r\n                isDragging: monitor.isDragging(),\r\n            }),\r\n            // triggered when the dragging of this component is stopped\r\n            end: (item: NetworkCardProps, monitor: DragSourceMonitor) => {\r\n                const didDrop = monitor.didDrop()\r\n                // if the drop was not successful in a dropzone, we return the card to its original position\r\n                if (!didDrop) {\r\n                    moveNetworkCard(\r\n                        item.networkInfo.chainId,\r\n                        item.originalIndex,\r\n                        item.isTestnet\r\n                    )\r\n                }\r\n            },\r\n        }),\r\n        [networkInfo, originalIndex, moveNetworkCard]\r\n    )\r\n\r\n    const [, drop] = useDrop(\r\n        () => ({\r\n            accept: isTestnet ? \"testnet\" : \"mainnet\",\r\n            // Called when a dragged item is hovered over this component.\r\n            hover(item: NetworkCardProps) {\r\n                if (item.networkInfo.chainId !== networkInfo.chainId) {\r\n                    const { index: overIndex } = findNetworkCard(\r\n                        networkInfo.chainId,\r\n                        isTestnet\r\n                    )\r\n                    // move the dragged item to the hovered item's position\r\n                    moveNetworkCard(\r\n                        item.networkInfo.chainId,\r\n                        overIndex,\r\n                        item.isTestnet\r\n                    )\r\n                }\r\n            },\r\n            collect(monitor) {\r\n                if (monitor.didDrop()) {\r\n                    const dropResult =\r\n                        monitor.getDropResult() as NetworkCardProps\r\n                    // If the drop was successful, we trigger the animation and update background networks state\r\n                    if (\r\n                        dropResult.networkInfo.chainId ===\r\n                            networkInfo.chainId &&\r\n                        dropResult.isTestnet === isTestnet\r\n                    ) {\r\n                        setDropAnimation(true)\r\n                        onSuccessfulDrop()\r\n                    }\r\n                }\r\n            },\r\n            drop(item: NetworkCardProps) {\r\n                return item\r\n            },\r\n        }),\r\n        [findNetworkCard, moveNetworkCard]\r\n    )\r\n\r\n    preview(drop(dropRef))\r\n    drag(dragRef)\r\n\r\n    useEffect(() => {\r\n        if (dropAnimation) {\r\n            setTimeout(() => {\r\n                setDropAnimation(false)\r\n            }, 800)\r\n        }\r\n    }, [dropAnimation])\r\n\r\n    const opacity = isDragging ? 0 : 1\r\n\r\n    const cardHoverStyle = !dropAnimation && !isHoveringIcons\r\n\r\n    return (\r\n        <div\r\n            className={classnames(\r\n                \"rounded-md\",\r\n                dropAnimation &&\r\n                    \"bg-blue-100 transition-colors animate-[pulse_0.8s]\",\r\n                cardHoverStyle && \"hover:bg-primary-100\"\r\n            )}\r\n            ref={dropRef}\r\n            style={{ opacity }}\r\n        >\r\n            <WaitingDialog\r\n                status={status}\r\n                open={isOpen}\r\n                titles={{\r\n                    loading: \"Switching network...\",\r\n                    error: \"Error\",\r\n                    success: \"Success!\",\r\n                }}\r\n                texts={{\r\n                    loading:\r\n                        \"Please wait while the network is being switched...\",\r\n                    error: \"There was an error while switching the network\",\r\n                    success: `Switch to ${networkInfo.desc} network was successful.`,\r\n                }}\r\n                onDone={() => {\r\n                    dispatch({ type: \"close\" })\r\n                }}\r\n                timeout={1100}\r\n            />\r\n\r\n            <ConfirmDialog\r\n                title=\"Switch Network\"\r\n                message={`Are you sure you want to switch to ${networkInfo.desc} network?`}\r\n                open={confirmSwitchNetwork}\r\n                onClose={() => setConfirmSwitchNetwork(false)}\r\n                onConfirm={async () => {\r\n                    dispatch({\r\n                        type: \"open\",\r\n                        payload: { status: \"loading\" },\r\n                    })\r\n                    await changeNetwork(networkInfo.name)\r\n                    dispatch({\r\n                        type: \"setStatus\",\r\n                        payload: { status: \"success\" },\r\n                    })\r\n                }}\r\n            />\r\n            <>\r\n                <div className=\"flex flex-row justify-between items-center pr-2 pl-0 h-full\">\r\n                    <div\r\n                        className=\"flex flex-row group items-center py-2 cursor-move\"\r\n                        ref={dragRef}\r\n                    >\r\n                        <div\r\n                            className=\"flex flex-row items-center\"\r\n                            title=\"Drag to sort\"\r\n                        >\r\n                            <HiDotsVertical\r\n                                className=\"text-gray-500 mr-2\"\r\n                                size={20}\r\n                            />\r\n                            <span\r\n                                className={\"h-2 w-2 rounded-xl mr-2\"}\r\n                                style={{\r\n                                    backgroundColor: networkInfo.color,\r\n                                }}\r\n                            />\r\n                        </div>\r\n                        <span className=\"text-sm font-bold text-ellipsis overflow-hidden whitespace-nowrap\">\r\n                            {networkInfo.desc}\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"flex flex-row items-center h-full\">\r\n                        {isSelectedNetwork ? (\r\n                            <div\r\n                                className=\"px-2 text-green-600\"\r\n                                title=\"Current network\"\r\n                            >\r\n                                <Icon\r\n                                    name={IconName.CHECKMARK}\r\n                                    className=\"fill-green-600\"\r\n                                />\r\n                            </div>\r\n                        ) : (\r\n                            <div\r\n                                {...getIsHoveringProps()}\r\n                                className=\"p-2 hover:cursor-pointer transition duration-300 rounded-full hover:bg-primary-100 hover:text-primary-300\"\r\n                                title=\"Switch network\"\r\n                                onClick={() => setConfirmSwitchNetwork(true)}\r\n                            >\r\n                                <Icon name={IconName.SWITCH} />\r\n                            </div>\r\n                        )}\r\n                        <div\r\n                            {...getIsHoveringProps()}\r\n                            className=\"p-2 hover:cursor-pointer transition duration-300 rounded-full hover:bg-primary-100 hover:text-primary-300\"\r\n                            title=\"Edit network\"\r\n                            onClick={onClick}\r\n                        >\r\n                            <RiPencilFill size={18} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </>\r\n        </div>\r\n    )\r\n}\r\nexport default NetworkDisplay\r\n","import { DndProvider } from \"react-dnd\"\r\n\r\nimport { keccak256 } from \"@ethersproject/keccak256\"\r\nimport { toUtf8Bytes } from \"@ethersproject/strings\"\r\n\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\"\r\nimport { useCallback, useEffect, useState } from \"react\"\r\n\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport NetworkDisplay from \"../../components/networks/NetworkDisplay\"\r\nimport plusIcon from \"../../assets/images/icons/plus.svg\"\r\nimport { ActionButton } from \"../../components/button/ActionButton\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { editNetworksOrder } from \"../../context/commActions\"\r\nimport { sortNetworksByOrder } from \"../../util/networkUtils\"\r\nimport { Network } from \"@block-wallet/background/utils/constants/networks\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport { editNetworkOrder } from \"@block-wallet/background/utils/types/communication\"\r\nimport { getNetworkColor } from \"../../util/getNetworkColor\"\r\n\r\ninterface NetworkInfo extends Network {\r\n    color: string\r\n}\r\n\r\ninterface MappedNetworks {\r\n    testnets: NetworkInfo[]\r\n    mainnets: NetworkInfo[]\r\n}\r\n\r\nconst NetworksPage = () => {\r\n    const { availableNetworks } = useBlankState()!\r\n    const history = useOnMountHistory()\r\n\r\n    const [mainNetworks, setMainNetworks] = useState([] as NetworkInfo[])\r\n    const [testNetworks, setTestNetworks] = useState([] as NetworkInfo[])\r\n\r\n    const isFromHomePage = history.location.state?.isFromHomePage ?? false\r\n\r\n    const onClickNetwork = (network: NetworkInfo) => {\r\n        history.push({\r\n            pathname: \"/settings/networks/details\",\r\n            state: {\r\n                network,\r\n            },\r\n        })\r\n    }\r\n\r\n    const findNetworkCard = useCallback(\r\n        (chainId: number, isTestnet: boolean) => {\r\n            const networks = isTestnet ? testNetworks : mainNetworks\r\n\r\n            const network = networks.find((n) => n.chainId === chainId)!\r\n            return {\r\n                network,\r\n                index: networks.indexOf(network),\r\n            }\r\n        },\r\n        [mainNetworks, testNetworks]\r\n    )\r\n\r\n    const moveNetworkCard = useCallback(\r\n        (chainId: number, hoveredOnIndex: number, isTestnet: boolean) => {\r\n            const { network, index: draggedIndex } = findNetworkCard(\r\n                chainId,\r\n                isTestnet\r\n            )\r\n\r\n            const networks = isTestnet ? testNetworks : mainNetworks\r\n            const setNetworks = isTestnet ? setTestNetworks : setMainNetworks\r\n            const draggedItem = network\r\n\r\n            const newNetworks = structuredClone(networks)\r\n            newNetworks.splice(draggedIndex, 1) // removing what is being dragged.\r\n            newNetworks.splice(hoveredOnIndex, 0, draggedItem) // adding the dragged item to the new hovered on index.\r\n\r\n            setNetworks(newNetworks)\r\n        },\r\n        [mainNetworks, testNetworks]\r\n    )\r\n\r\n    function onSuccessfulDrop(isTestnet: boolean) {\r\n        const networks = isTestnet ? testNetworks : mainNetworks\r\n\r\n        let networksOrder: editNetworkOrder[] = []\r\n\r\n        networks.forEach((network, index) => {\r\n            networksOrder.push({\r\n                chainId: network.chainId,\r\n                order: index + 1,\r\n            })\r\n        })\r\n\r\n        editNetworksOrder({\r\n            networksOrder: networksOrder,\r\n        })\r\n    }\r\n\r\n    useEffect(() => {\r\n        const parsedAvailableNetworks = Object.values(availableNetworks)\r\n            .sort(sortNetworksByOrder)\r\n            .reduce(\r\n                (acc: MappedNetworks, current: Network) => {\r\n                    if (!current.enable) {\r\n                        return acc\r\n                    }\r\n                    const color = getNetworkColor(current)\r\n                    const netInfo: NetworkInfo = {\r\n                        ...current,\r\n                        color,\r\n                    }\r\n                    if (current.test) {\r\n                        return {\r\n                            ...acc,\r\n                            testnets: [...acc.testnets, netInfo],\r\n                        }\r\n                    }\r\n                    return {\r\n                        ...acc,\r\n                        mainnets: [...acc.mainnets, netInfo],\r\n                    }\r\n                },\r\n                {\r\n                    testnets: [],\r\n                    mainnets: [],\r\n                }\r\n            )\r\n        setMainNetworks(parsedAvailableNetworks.mainnets)\r\n        setTestNetworks(parsedAvailableNetworks.testnets)\r\n    }, [])\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    title=\"Networks\"\r\n                    onBack={() =>\r\n                        history.push(isFromHomePage ? \"/\" : \"/settings\")\r\n                    }\r\n                />\r\n            }\r\n        >\r\n            <div className=\"flex flex-col p-6 space-y-6 w-full\">\r\n                <ActionButton\r\n                    icon={plusIcon}\r\n                    label=\"Add New Network\"\r\n                    to=\"/settings/networks/search\"\r\n                />\r\n                <DndProvider backend={HTML5Backend}>\r\n                    <div className=\"flex flex-col space-y-2\">\r\n                        <span className=\"text-xs text-gray-500\">MAINNET</span>\r\n                        <div className=\"flex flex-col space-y-2\">\r\n                            {mainNetworks.map((network) => (\r\n                                <NetworkDisplay\r\n                                    key={network.chainId}\r\n                                    networkInfo={network}\r\n                                    onClick={() => onClickNetwork(network)}\r\n                                    moveNetworkCard={moveNetworkCard}\r\n                                    findNetworkCard={findNetworkCard}\r\n                                    onSuccessfulDrop={() =>\r\n                                        onSuccessfulDrop(false)\r\n                                    }\r\n                                />\r\n                            ))}\r\n                        </div>\r\n                        <span className=\"text-xs text-gray-500 mt-4\">\r\n                            TESTNET\r\n                        </span>\r\n                        <div className=\"flex flex-col space-y-2\">\r\n                            {testNetworks.map((network) => (\r\n                                <NetworkDisplay\r\n                                    key={network.chainId}\r\n                                    networkInfo={network}\r\n                                    onClick={() => onClickNetwork(network)}\r\n                                    moveNetworkCard={moveNetworkCard}\r\n                                    findNetworkCard={findNetworkCard}\r\n                                    isTestnet\r\n                                    onSuccessfulDrop={() =>\r\n                                        onSuccessfulDrop(true)\r\n                                    }\r\n                                />\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </DndProvider>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default NetworksPage\r\n","import classnames from \"classnames\"\r\nimport { PropsWithChildren } from \"react\"\r\ninterface AlertProps {\r\n    type: \"error\" | \"warn\" | \"info\"\r\n    className?: string\r\n}\r\n\r\nconst CLASSES_BY_TYPE = {\r\n    error: {\r\n        background: \"bg-red-300\",\r\n        text: \"text-red-900\",\r\n    },\r\n    warn: {\r\n        background: \"bg-yellow-100\",\r\n        text: \"text-yellow-600\",\r\n    },\r\n    info: {\r\n        background: \"bg-blue-300\",\r\n        text: \"text-blue-900\",\r\n    },\r\n}\r\nconst Alert: React.FC<PropsWithChildren<AlertProps>> = ({\r\n    type,\r\n    children,\r\n    className,\r\n}) => {\r\n    const classes = CLASSES_BY_TYPE[type]\r\n    return (\r\n        <div\r\n            className={classnames(\r\n                classes.background,\r\n                \"opacity-90 rounded-md w-full p-4 flex space-x-2 items-center font-bold justify-center\",\r\n                className\r\n            )}\r\n        >\r\n            <span className={classnames(classes.text, \"text-xs\")}>\r\n                {children}\r\n            </span>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Alert\r\n","import { useEffect } from \"react\"\r\nimport { FieldValues, useForm, UseFormProps, useWatch } from \"react-hook-form\"\r\nimport useLocalStorageState, {\r\n    useLocalStorageStateOptions,\r\n} from \"./useLocalStorageState\"\r\n\r\ninterface useLocalStorageProps<T> {\r\n    key: string\r\n    options?: useLocalStorageStateOptions<T>\r\n}\r\n\r\nconst usePersistedLocalStorageForm = <\r\n    TFields extends FieldValues = FieldValues,\r\n    TContext extends object = object\r\n>(\r\n    localStorageProps: useLocalStorageProps<TFields>,\r\n    formProps?: UseFormProps<TFields, TContext>\r\n) => {\r\n    const [persistedForm, setPersistedForm] = useLocalStorageState<any>(\r\n        localStorageProps.key,\r\n        {\r\n            initialValue: formProps?.defaultValues,\r\n            volatile: true,\r\n            ...(localStorageProps.options || {}),\r\n        }\r\n    )\r\n    const formReturn = useForm<TFields, TContext>({\r\n        ...formProps,\r\n        defaultValues: {\r\n            ...(formProps?.defaultValues || {}),\r\n            ...persistedForm,\r\n        },\r\n    })\r\n    const watched = useWatch({ control: formReturn.control })\r\n    useEffect(() => {\r\n        setPersistedForm(watched)\r\n    }, [watched, setPersistedForm])\r\n    return formReturn\r\n}\r\n\r\nexport default usePersistedLocalStorageForm\r\n","import { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport { useEffect, useState, useRef } from \"react\"\r\nimport { useWatch } from \"react-hook-form\"\r\nimport * as yup from \"yup\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport TextInput from \"../../components/input/TextInput\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport {\r\n    addNetwork,\r\n    editNetwork,\r\n    getRpcChainId,\r\n    getSpecificChainDetails,\r\n    removeNetwork,\r\n} from \"../../context/commActions\"\r\nimport WaitingDialog from \"../../components/dialog/WaitingDialog\"\r\nimport useAsyncInvoke from \"../../util/hooks/useAsyncInvoke\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport ToggleButton from \"../../components/button/ToggleButton\"\r\nimport RPCValidationEndLabelInfo, {\r\n    RPCUrlValidation,\r\n} from \"../../components/chain/RPCValidationEndLabelInfo\"\r\nimport { useMemo } from \"react\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { LINKS } from \"../../util/constants\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport Alert from \"../../components/ui/Alert\"\r\nimport Icon, { IconName } from \"../../components/ui/Icon\"\r\nimport ConfirmDialog from \"../../components/dialog/ConfirmDialog\"\r\nimport { ChainListItem } from \"@block-wallet/background/utils/chainlist\"\r\nimport { parseChainId } from \"../../util/networkUtils\"\r\nimport CollapsableWarning from \"../../components/CollapsableWarning\"\r\nimport { AiOutlineWarning } from \"react-icons/ai\"\r\nimport usePersistedLocalStorageForm from \"../../util/hooks/usePersistedLocalStorageForm\"\r\n\r\nconst getStatusFromEnpoint = (\r\n    chainInfo: ChainListItem,\r\n    configuredUrl: string\r\n) => {\r\n    return chainInfo.rpc.some(\r\n        (rpcUrl: string) =>\r\n            rpcUrl?.toLowerCase().trim() === configuredUrl?.toLowerCase().trim()\r\n    )\r\n        ? RPCUrlValidation.VERIFIED_ENDPOINT\r\n        : RPCUrlValidation.UNVERIFIED_ENDPOINT\r\n}\r\n\r\nconst validateUrl = (url: string) => {\r\n    try {\r\n        new URL(url)\r\n        return (\r\n            url.toLowerCase().startsWith(\"http://\") ||\r\n            url.toLowerCase().startsWith(\"https://\")\r\n        )\r\n    } catch {\r\n        return false\r\n    }\r\n}\r\n\r\ninterface NetworkInputs {\r\n    name?: string\r\n    rpcUrl?: string\r\n    chainId?: number\r\n    symbol?: string\r\n    blockExplorerUrl?: string\r\n    isTestnet?: boolean\r\n    nativelySupported?: boolean\r\n}\r\n\r\ninterface Props {\r\n    editMode: \"disabled\" | \"minimal\" | \"all\"\r\n    isEdit: boolean\r\n    canDelete?: boolean\r\n    network?: NetworkInputs\r\n    title: string\r\n}\r\n\r\n// new contact schema\r\nconst networkSchema = yup.object({\r\n    name: yup\r\n        .string()\r\n        .trim()\r\n        .test(\"is-empty\", \"Network name is empty.\", (s) => {\r\n            return !!s && s.trim().length > 0\r\n        })\r\n        .max(40, \"Network name is too long\")\r\n        .required(),\r\n    rpcUrl: yup\r\n        .string()\r\n        .test(\r\n            \"match url shape\",\r\n            \"Invalid URL. Make sure that you are using http/s protocol.\",\r\n            (url) => {\r\n                return url === undefined ? false : validateUrl(url)\r\n            }\r\n        )\r\n        .trim()\r\n        .required(),\r\n    chainId: yup\r\n        .string()\r\n        .test(\"is-empty\", \"Chain Id is empty\", (s) => {\r\n            return !!s\r\n        })\r\n        .test(\"numeric\", \"Chain ID must be numeric\", (s) => {\r\n            return !Number.isNaN(Number(s))\r\n        })\r\n        .required(),\r\n    symbol: yup.string().required(\"Currency Symbol is empty\"),\r\n    blockExplorerUrl: yup\r\n        .string()\r\n        .test(\r\n            \"match url shape\",\r\n            \"Invalid URL. Make sure that you are using http/s protocol.\",\r\n            (url) => {\r\n                return !url || validateUrl(url)\r\n            }\r\n        ),\r\n    test: yup.boolean(),\r\n})\r\ntype networkFormData = yup.InferType<typeof networkSchema>\r\n\r\nconst NetworkFormPage = ({\r\n    editMode,\r\n    canDelete,\r\n    network,\r\n    title,\r\n    isEdit,\r\n}: Props) => {\r\n    const { chainId: selectedChainId } = useSelectedNetwork()\r\n    const history = useHistory()\r\n    const chainDetailsRef = useRef<ChainListItem | null>(null)\r\n    const addNetworkInvoke = useAsyncInvoke()\r\n    const removeNetworkInvoke = useAsyncInvoke()\r\n    const [isValidating, setIsValidating] = useState<boolean>(false)\r\n    const [confirmDeletion, setConfirmDeletion] = useState<boolean>(false)\r\n    const [rpcValidationStatus, setRpcValidationStatus] =\r\n        useState<RPCUrlValidation>(RPCUrlValidation.EMPTY)\r\n    const [rpcChainId, setRpcChainId] = useState<number>(0)\r\n    const [isNativelySupported, setIsNativelySupported] =\r\n        useState<boolean>(false)\r\n    const { availableNetworks, isProviderNetworkOnline } = useBlankState()!\r\n\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        formState: { errors },\r\n        setValue,\r\n        control,\r\n    } = usePersistedLocalStorageForm<networkFormData>(\r\n        { key: \"networks.form\" },\r\n        {\r\n            resolver: yupResolver(networkSchema),\r\n            defaultValues: {\r\n                name: network?.name,\r\n                blockExplorerUrl: network?.blockExplorerUrl,\r\n                chainId: network?.chainId || undefined,\r\n                rpcUrl: network?.rpcUrl,\r\n                symbol: network?.symbol,\r\n                test: !!network?.isTestnet,\r\n            } as Partial<networkFormData>,\r\n        }\r\n    )\r\n\r\n    const watchedFields = useWatch({ control })\r\n\r\n    const {\r\n        name: watchName,\r\n        chainId: watchChainId,\r\n        rpcUrl: watchRPCUrl,\r\n        symbol: watchCurrencySymbol,\r\n    } = watchedFields\r\n\r\n    useEffect(() => {\r\n        let ref: NodeJS.Timeout | null = null\r\n        if (!!watchRPCUrl && !!watchChainId) {\r\n            setIsValidating(true)\r\n        }\r\n        const derivateRPCStatusFromWatchers = async () => {\r\n            try {\r\n                const parsedChainId = parseChainId(watchChainId)\r\n                //if there is a value in the chain Id, try to fetch the network details\r\n                if (parsedChainId) {\r\n                    if (\r\n                        !chainDetailsRef.current ||\r\n                        Number(chainDetailsRef.current?.chainId) !==\r\n                            parsedChainId\r\n                    ) {\r\n                        chainDetailsRef.current = await getSpecificChainDetails(\r\n                            parsedChainId\r\n                        )\r\n                    }\r\n                } else {\r\n                    chainDetailsRef.current = null\r\n                }\r\n\r\n                //if the rpcUrl or the chainId is empty, do not put an error message.\r\n                if (!watchRPCUrl || !watchChainId) {\r\n                    setRpcValidationStatus(RPCUrlValidation.EMPTY)\r\n                    return\r\n                }\r\n\r\n                if (errors.rpcUrl !== undefined || !validateUrl(watchRPCUrl)) {\r\n                    setRpcValidationStatus(RPCUrlValidation.INVALID_URL)\r\n                    return\r\n                }\r\n                try {\r\n                    //Unknown chain id, validation cannot be done.\r\n                    if (!chainDetailsRef.current) {\r\n                        setRpcValidationStatus(\r\n                            RPCUrlValidation.EMPTY_UNKNOWN_CHAIN\r\n                        )\r\n                        return\r\n                    }\r\n\r\n                    const chainId = await getRpcChainId(watchRPCUrl)\r\n                    setRpcChainId(chainId)\r\n                    setRpcValidationStatus(\r\n                        Number(chainId) === parsedChainId\r\n                            ? getStatusFromEnpoint(\r\n                                  chainDetailsRef.current,\r\n                                  watchRPCUrl\r\n                              )\r\n                            : RPCUrlValidation.CHAIN_ID_DOESNT_MATCH\r\n                    )\r\n                } catch (e) {\r\n                    //Invalid URL if we were not able to fetch the chainId using the rpcUrl.\r\n                    setRpcValidationStatus(RPCUrlValidation.INVALID_ENDPOINT)\r\n                }\r\n            } finally {\r\n                setIsValidating(false)\r\n            }\r\n        }\r\n        //debounce the state watchers\r\n        ref = setTimeout(derivateRPCStatusFromWatchers, 300)\r\n        return () => {\r\n            ref && clearTimeout(ref!)\r\n        }\r\n    }, [watchChainId, watchRPCUrl, setIsValidating])\r\n\r\n    const onSave = handleSubmit(async (data: networkFormData) => {\r\n        const networkData = {\r\n            blockExplorerUrl: data.blockExplorerUrl || \"\",\r\n            chainId: parseChainId(data.chainId)!.toString(),\r\n            currencySymbol: data.symbol,\r\n            name: data.name!,\r\n            rpcUrl: data.rpcUrl,\r\n            test: !!data.test,\r\n        }\r\n        addNetworkInvoke.run(\r\n            isEdit\r\n                ? editNetwork({\r\n                      chainId: parseChainId(data.chainId)!.toString(),\r\n                      updates: {\r\n                          rpcUrl: data.rpcUrl,\r\n                          blockExplorerUrl: data.blockExplorerUrl,\r\n                          name: data.name!,\r\n                          test: !!data.test,\r\n                      },\r\n                  })\r\n                : addNetwork(networkData)\r\n        )\r\n    })\r\n    useEffect(() => {\r\n        const existingNetwork = Object.values(availableNetworks).find(\r\n            (network) => network.chainId === Number(watchChainId)\r\n        )\r\n        setIsNativelySupported(\r\n            existingNetwork ? existingNetwork.nativelySupported : false\r\n        )\r\n    }, [watchChainId])\r\n    const deleteNetwork = () => {\r\n        removeNetworkInvoke.run(removeNetwork(network!.chainId!))\r\n    }\r\n\r\n    const rpcEndpointIsValid = [\r\n        RPCUrlValidation.UNVERIFIED_ENDPOINT,\r\n        RPCUrlValidation.VERIFIED_ENDPOINT,\r\n        RPCUrlValidation.EMPTY_UNKNOWN_CHAIN,\r\n    ].includes(rpcValidationStatus)\r\n\r\n    const invalidCurrencySymbolWarn =\r\n        chainDetailsRef.current && watchCurrencySymbol\r\n            ? chainDetailsRef.current.nativeCurrency.symbol !==\r\n              watchCurrencySymbol\r\n            : false\r\n\r\n    const networkAlreadyExistError = useMemo(() => {\r\n        if (!isEdit && watchChainId) {\r\n            const existingNetwork = Object.values(availableNetworks).find(\r\n                (network) => network.chainId === Number(watchChainId)\r\n            )\r\n            return existingNetwork && existingNetwork.enable\r\n        }\r\n        return false\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [watchChainId, isEdit])\r\n\r\n    const networkNameInUseError = useMemo(() => {\r\n        return (\r\n            watchName &&\r\n            Object.values(availableNetworks)\r\n                .filter((net) => net.chainId !== Number(watchChainId))\r\n                .some((net) => {\r\n                    return net.desc === (watchName || \"\").trim()\r\n                })\r\n        )\r\n    }, [availableNetworks, watchChainId, watchName])\r\n\r\n    //Do not allow to edit the selected network unless the provider is down.\r\n    const editingSelectedNetwork =\r\n        isEdit &&\r\n        selectedChainId === Number(watchChainId) &&\r\n        isProviderNetworkOnline\r\n\r\n    const canSubmitForm =\r\n        Object.keys(errors).length === 0 &&\r\n        rpcEndpointIsValid &&\r\n        !networkAlreadyExistError &&\r\n        !networkNameInUseError &&\r\n        !editingSelectedNetwork &&\r\n        !!watchName &&\r\n        !!watchCurrencySymbol\r\n\r\n    return (\r\n        <PopupLayout\r\n            submitOnEnter={{\r\n                onSubmit: onSave,\r\n                isFormValid: canSubmitForm,\r\n            }}\r\n            header={\r\n                <PopupHeader\r\n                    title={title}\r\n                    close={false}\r\n                    actions={\r\n                        !editingSelectedNetwork && canDelete\r\n                            ? [\r\n                                  <div\r\n                                      key={1}\r\n                                      onClick={() => {\r\n                                          setConfirmDeletion(true)\r\n                                      }}\r\n                                      className={\r\n                                          \"text-red-500 cursor-pointer flex flex-row items-center p-2 hover:bg-gray-100 rounded-md w-40\"\r\n                                      }\r\n                                  >\r\n                                      <div className=\"pl-1 pr-1 w-8\">\r\n                                          <Icon\r\n                                              name={IconName.TRASH_BIN}\r\n                                              profile=\"danger\"\r\n                                          />\r\n                                      </div>\r\n                                      <span>Delete Network</span>\r\n                                  </div>,\r\n                              ]\r\n                            : undefined\r\n                    }\r\n                />\r\n            }\r\n            footer={\r\n                editMode !== \"disabled\" && !editingSelectedNetwork ? (\r\n                    <PopupFooter>\r\n                        <ButtonWithLoading\r\n                            label=\"Save\"\r\n                            type=\"submit\"\r\n                            disabled={!canSubmitForm}\r\n                            onClick={onSave}\r\n                        />\r\n                    </PopupFooter>\r\n                ) : null\r\n            }\r\n        >\r\n            {!isNativelySupported && (\r\n                <CollapsableWarning\r\n                    dialog={{\r\n                        title: \"Warning\",\r\n                        message: (\r\n                            <span>\r\n                                BlockWallet does not verify custom networks.\r\n                                Make sure you understand{\" \"}\r\n                                <a\r\n                                    className=\"underline text-blue-600 hover:text-blue-800\"\r\n                                    href={LINKS.ARTICLES.CUSTOM_NETWORK_RISKS}\r\n                                    target=\"_blank\"\r\n                                    rel=\"noreferrer\"\r\n                                >\r\n                                    the potential risks adding a custom network\r\n                                    may pose\r\n                                </a>\r\n                                .\r\n                            </span>\r\n                        ),\r\n                    }}\r\n                    isCollapsedByDefault\r\n                    collapsedMessage={\r\n                        <div className=\"text-center  bg-yellow-200 hover:bg-yellow-100 opacity-90  w-full p-2 space-x-2 flex tems-center font-bold justify-center\">\r\n                            <AiOutlineWarning className=\"w-4 h-4 yellow-300\" />\r\n                            <span className=\"text-xs text-yellow-900\">\r\n                                <span className=\"font-bold\">\r\n                                    BlockWallet does not verify custom networks.\r\n                                </span>\r\n                            </span>\r\n                        </div>\r\n                    }\r\n                />\r\n            )}\r\n            <WaitingDialog\r\n                open={!addNetworkInvoke.isIdle}\r\n                status={\r\n                    addNetworkInvoke.isError\r\n                        ? \"error\"\r\n                        : addNetworkInvoke.isSuccess\r\n                        ? \"success\"\r\n                        : \"loading\"\r\n                }\r\n                titles={{\r\n                    loading: isEdit ? \"Editing...\" : \"Adding...\",\r\n                    error: \"Error\",\r\n                    success: \"Success\",\r\n                }}\r\n                texts={{\r\n                    loading: isEdit\r\n                        ? \"Editing network\"\r\n                        : \"Adding a new network\",\r\n                    error:\r\n                        addNetworkInvoke.error?.message ||\r\n                        \"Something went wrong while persisting the network\",\r\n                    success: isEdit ? \"Network edited\" : \"Network added\",\r\n                }}\r\n                timeout={1500}\r\n                onDone={() => {\r\n                    if (addNetworkInvoke.isError) {\r\n                        return addNetworkInvoke.reset()\r\n                    }\r\n                    history.replace(\"/settings/networks\")\r\n                }}\r\n            />\r\n            <WaitingDialog\r\n                open={!removeNetworkInvoke.isIdle}\r\n                status={\r\n                    removeNetworkInvoke.isError\r\n                        ? \"error\"\r\n                        : removeNetworkInvoke.isSuccess\r\n                        ? \"success\"\r\n                        : \"loading\"\r\n                }\r\n                titles={{\r\n                    loading: \"Deleting...\",\r\n                    error: \"Error\",\r\n                    success: \"Success\",\r\n                }}\r\n                texts={{\r\n                    loading: isEdit\r\n                        ? \"Editing network\"\r\n                        : \"Adding a new network\",\r\n                    error:\r\n                        removeNetworkInvoke.error?.message ||\r\n                        \"Something went wrong while deleting the network\",\r\n                    success: \"Network deleted\",\r\n                }}\r\n                timeout={1500}\r\n                onDone={() => {\r\n                    if (addNetworkInvoke.isError) {\r\n                        return addNetworkInvoke.reset()\r\n                    }\r\n                    history.push(\"/settings/networks\")\r\n                }}\r\n            />\r\n            <ConfirmDialog\r\n                title=\"Delete Network\"\r\n                message={`Are you sure you want to delete ${network?.name}?`}\r\n                open={confirmDeletion}\r\n                onClose={() => setConfirmDeletion(false)}\r\n                onConfirm={() => {\r\n                    deleteNetwork()\r\n                    setConfirmDeletion(false)\r\n                }}\r\n            />\r\n            <div className=\"flex flex-col w-full justify-between flex-1 h-full\">\r\n                <div className=\"flex flex-col flex-1 p-6 pt-4 space-y-3\">\r\n                    <div className=\"flex flex-col space-y-1\">\r\n                        <TextInput\r\n                            appearance=\"outline\"\r\n                            label=\"Network Name\"\r\n                            {...register(\"name\")}\r\n                            placeholder=\"Ethereum Mainnet\"\r\n                            error={\r\n                                networkNameInUseError\r\n                                    ? \"This name is already in use.\"\r\n                                    : errors.name?.message\r\n                            }\r\n                            autoFocus={true}\r\n                            maxLength={40}\r\n                            defaultValue={network?.name}\r\n                            readOnly={\r\n                                editMode === \"disabled\" ||\r\n                                editingSelectedNetwork\r\n                            }\r\n                        />\r\n                    </div>\r\n                    <TextInput\r\n                        appearance=\"outline\"\r\n                        label=\"RPC URL\"\r\n                        {...register(\"rpcUrl\")}\r\n                        placeholder=\"https://...\"\r\n                        error={errors.rpcUrl?.message}\r\n                        autoFocus={true}\r\n                        defaultValue={network?.rpcUrl}\r\n                        readOnly={\r\n                            editMode === \"disabled\" || editingSelectedNetwork\r\n                        }\r\n                        endLabel={\r\n                            <RPCValidationEndLabelInfo\r\n                                currentChainId={watchChainId}\r\n                                rpcChainId={rpcChainId}\r\n                                isValidating={isValidating}\r\n                                rpcValidation={rpcValidationStatus}\r\n                            />\r\n                        }\r\n                    />\r\n                    <TextInput\r\n                        appearance=\"outline\"\r\n                        label=\"Chain ID\"\r\n                        {...register(\"chainId\")}\r\n                        placeholder=\"Network Chain ID\"\r\n                        error={errors.chainId?.message}\r\n                        autoFocus={true}\r\n                        onClickInfo={() => {\r\n                            window.open(\r\n                                LINKS.ARTICLES.CUSTOM_NETWORK_RISKS,\r\n                                \"_blank\"\r\n                            )\r\n                        }}\r\n                        info={\r\n                            <span className=\"p-1\">\r\n                                The chain ID is used for signing transactions\r\n                                and it must match with the chain ID returned by\r\n                                the RPC endpoint configured above. You can enter\r\n                                a decimal or a{\" \"}\r\n                                <span className=\"font-bold\">0x</span> prefixed\r\n                                hexadecimal number.\r\n                            </span>\r\n                        }\r\n                        defaultValue={network?.chainId}\r\n                        readOnly={editMode !== \"all\"}\r\n                    />\r\n                    <TextInput\r\n                        appearance=\"outline\"\r\n                        label=\"Currency Symbol\"\r\n                        {...register(\"symbol\")}\r\n                        placeholder=\"ETH\"\r\n                        error={errors.symbol?.message}\r\n                        warning={\r\n                            invalidCurrencySymbolWarn\r\n                                ? `Chain ${watchChainId} uses ${chainDetailsRef.current?.nativeCurrency.symbol} as currency symbol.`\r\n                                : undefined\r\n                        }\r\n                        autoFocus={true}\r\n                        defaultValue={network?.symbol}\r\n                        readOnly={editMode !== \"all\"}\r\n                    />\r\n                    <TextInput\r\n                        appearance=\"outline\"\r\n                        label=\"Block Explorer URL (Optional)\"\r\n                        {...register(\"blockExplorerUrl\")}\r\n                        placeholder=\"https://...\"\r\n                        error={errors.blockExplorerUrl?.message}\r\n                        autoFocus={true}\r\n                        defaultValue={network?.blockExplorerUrl}\r\n                        readOnly={\r\n                            editMode === \"disabled\" || editingSelectedNetwork\r\n                        }\r\n                    />\r\n                    <ToggleButton\r\n                        label=\"Testnet\"\r\n                        defaultChecked={!!network?.isTestnet}\r\n                        inputName=\"test\"\r\n                        onToggle={(isChecked) => {\r\n                            setValue(\"test\", isChecked)\r\n                        }}\r\n                        readOnly={isNativelySupported}\r\n                        disabled={isNativelySupported}\r\n                    />\r\n                    {networkAlreadyExistError && (\r\n                        <Alert type=\"error\">\r\n                            <span className=\"font-bold\">Error: </span>\r\n                            <span className=\"font-medium\">\r\n                                The network you're trying to add already exists.\r\n                                Try editing the existing network instead.\r\n                            </span>\r\n                        </Alert>\r\n                    )}\r\n                    {editingSelectedNetwork && (\r\n                        <Alert type=\"warn\">\r\n                            <span className=\"font-medium\">\r\n                                You can't edit this network while it is\r\n                                selected.\r\n                            </span>\r\n                        </Alert>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default NetworkFormPage\r\n","import { Network } from \"@block-wallet/background/utils/constants/networks\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport { canDeleteNetwork, getFirstUrl } from \"../../util/networkUtils\"\r\nimport NetworkFormPage from \"./NetworkFormPage\"\r\n\r\nconst NetworkDetailsPage = () => {\r\n    const history = useOnMountHistory()\r\n    const { network } = history.location.state as { network: Network }\r\n    return (\r\n        <NetworkFormPage\r\n            editMode=\"minimal\"\r\n            canDelete={canDeleteNetwork(network)}\r\n            network={{\r\n                blockExplorerUrl: getFirstUrl(network?.blockExplorerUrls),\r\n                rpcUrl: getFirstUrl(network?.rpcUrls),\r\n                name: network?.desc!,\r\n                chainId: network?.chainId!,\r\n                symbol: network?.nativeCurrency.symbol!,\r\n                isTestnet: network?.test,\r\n                nativelySupported: network.nativelySupported,\r\n            }}\r\n            title=\"Network Details\"\r\n            isEdit={true}\r\n        />\r\n    )\r\n}\r\n\r\nexport default NetworkDetailsPage\r\n","import { FC } from \"react\"\r\nimport checkmarkMiniIcon from \"../../assets/images/icons/checkmark_mini.svg\"\r\nimport classnames from \"classnames\"\r\nimport unkownLogoUrl from \"../../assets/images/icons/ETH.svg\"\r\nimport Tag from \"../ui/Tag\"\r\n\r\ninterface Props {\r\n    onClick?: () => void\r\n    name: string\r\n    logoUrl?: string\r\n    chainId: number\r\n    selected: boolean\r\n    isEnabled: boolean\r\n    isTestnet: boolean\r\n}\r\nconst ChainDisplay: FC<Props> = ({\r\n    onClick,\r\n    name,\r\n    logoUrl,\r\n    chainId,\r\n    selected,\r\n    isEnabled,\r\n    isTestnet,\r\n}) => {\r\n    return (\r\n        <div\r\n            className={classnames(\r\n                \"flex justify-between items-center flex-row relative px-3 rounded-md transition-all duration-300 active:scale-95\",\r\n                onClick && \"cursor-pointer hover:bg-primary-100\",\r\n                selected && \"bg-primary-200\"\r\n            )}\r\n            onClick={onClick}\r\n        >\r\n            <img\r\n                src={checkmarkMiniIcon}\r\n                alt=\"checkmark\"\r\n                className={classnames(\r\n                    \"absolute mr-6 right-0\",\r\n                    selected ? \"visible\" : \"hidden\"\r\n                )}\r\n            />\r\n            <div\r\n                className=\"flex justify-start items-center flex-row py-3\"\r\n                title={name}\r\n            >\r\n                <div className=\"flex flex-row items-center justify-center w-9 h-9 p-1.5 bg-white border border-gray-200 rounded-full\">\r\n                    <img\r\n                        src={logoUrl || unkownLogoUrl}\r\n                        onError={(e) => {\r\n                            ;(e.target as any).onerror = null\r\n                            ;(e.target as any).src = unkownLogoUrl\r\n                        }}\r\n                        alt={name}\r\n                        className=\"rounded-full\"\r\n                    />\r\n                </div>\r\n                <div className=\"flex flex-col space-y-1 justify-start h-full box-border ml-4\">\r\n                    <span className=\"text-sm text-black font-semibold mr-1 truncate w-48\">\r\n                        {name}\r\n                    </span>\r\n                    <span className=\"text-gray-400 text-xs font-small text-overflow flex flex-row space-x-2 items-center\">\r\n                        <span>Chain: {chainId}</span>\r\n                        {isEnabled && (\r\n                            <Tag size=\"sm\" profile=\"success\">\r\n                                Enabled\r\n                            </Tag>\r\n                        )}\r\n                        {isTestnet && (\r\n                            <Tag size=\"sm\" profile=\"info\">\r\n                                Testnet\r\n                            </Tag>\r\n                        )}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\nexport default ChainDisplay\r\n","import { FC } from \"react\"\r\nimport ClickableText from \"../../components/button/ClickableText\"\r\nimport ErrorMessage from \"../../components/error/ErrorMessage\"\r\n\r\nexport enum BridgeErrorType {\r\n    QUOTE_NOT_FOUND = \"QUOTE_NOT_FOUND\",\r\n    INSUFFICIENT_BALANCE_TO_COVER_FEES = \"INSUFFICIENT_BALANCE_TO_COVER_FEES\",\r\n    OTHER = \"OTHER\",\r\n}\r\n\r\ninterface BridgeErrorMessageProps {\r\n    type: BridgeErrorType\r\n    onClickDetails: (type: string) => void\r\n    className?: string\r\n}\r\n\r\nconst ERROR_BY_TYPE = {\r\n    [BridgeErrorType.INSUFFICIENT_BALANCE_TO_COVER_FEES]:\r\n        \"You don't have enough balance to cover the bridge fees.\",\r\n    [BridgeErrorType.QUOTE_NOT_FOUND]: \"Unable to generate a valid quote.\",\r\n    [BridgeErrorType.OTHER]: \"Something went wrong. Please try again.\",\r\n}\r\n\r\nconst BridgeErrorMessage: FC<BridgeErrorMessageProps> = ({\r\n    onClickDetails,\r\n    type,\r\n    className,\r\n}) => {\r\n    let content = null\r\n    if (type === BridgeErrorType.QUOTE_NOT_FOUND) {\r\n        content = (\r\n            <span>\r\n                <ClickableText\r\n                    onClick={() => onClickDetails(type)}\r\n                    className=\"!break-word !whitespace-normal\"\r\n                >\r\n                    Check the details\r\n                </ClickableText>{\" \"}\r\n                and try again.\r\n            </span>\r\n        )\r\n    }\r\n    if (type === BridgeErrorType.INSUFFICIENT_BALANCE_TO_COVER_FEES) {\r\n        content = (\r\n            <ClickableText onClick={() => onClickDetails(type)}>\r\n                View details\r\n            </ClickableText>\r\n        )\r\n    }\r\n\r\n    const message = ERROR_BY_TYPE[type]\r\n\r\n    return (\r\n        <ErrorMessage className={className}>\r\n            {message} {content}\r\n        </ErrorMessage>\r\n    )\r\n}\r\n\r\nexport default BridgeErrorMessage\r\n","import { ChainListItem } from \"@block-wallet/background/utils/chainlist\"\r\nimport { useRef, useState } from \"react\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport ChainDisplay from \"../../components/chain/ChainDisplay\"\r\nimport SearchInput from \"../../components/input/SearchInput\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport Spinner from \"../../components/spinner/Spinner\"\r\nimport { searchChainsByTerm } from \"../../context/commActions\"\r\nimport useAsyncInvoke from \"../../util/hooks/useAsyncInvoke\"\r\nimport searchIcon from \"../../assets/images/icons/search.svg\"\r\nimport ClickableText from \"../../components/button/ClickableText\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport ChainFiltersButton, {\r\n    ChainFilters,\r\n} from \"../../components/chain/ChainFiltersButton\"\r\nimport EmptyState from \"../../components/ui/EmptyState\"\r\nimport { parseChainId } from \"../../util/networkUtils\"\r\n\r\ninterface ChainData {\r\n    chain: ChainListItem\r\n    isEnabled: boolean\r\n}\r\n\r\nconst SearchNetworkPage = () => {\r\n    const [filters, setFilters] = useState<ChainFilters[]>([])\r\n    const history = useHistory()\r\n    const hintRef = useRef<string | null>()\r\n    const { availableNetworks } = useBlankState()!\r\n    const [pickedChain, setPickedChain] = useState<ChainData | null>(null)\r\n    const { run, isLoading, data, reset, isIdle, isSuccess } = useAsyncInvoke<\r\n        ChainData[]\r\n    >({\r\n        data: [],\r\n    })\r\n    const onChange = (event: any) => {\r\n        let value = (event.target.value || \"\").toString()\r\n        if (pickedChain) {\r\n            setPickedChain(null)\r\n        }\r\n\r\n        //If the value can be parsed as int, means that the value is either a number or an hex string.\r\n        const valueAsNumber = parseChainId(value)\r\n        if (valueAsNumber && !isNaN(valueAsNumber)) {\r\n            value = valueAsNumber.toString()\r\n        }\r\n\r\n        hintRef.current = value\r\n\r\n        if (!value) {\r\n            reset()\r\n            return\r\n        }\r\n        run(searchChainsByTerm(value))\r\n    }\r\n\r\n    const addOrEditNetwork = () => {\r\n        const network = Object.values(availableNetworks).find(\r\n            (network) =>\r\n                network.enable && network.chainId === pickedChain?.chain.chainId\r\n        )\r\n\r\n        //If network is already added, then redirect the user to the details page.\r\n        if (network) {\r\n            return history.push({\r\n                pathname: \"/settings/networks/details\",\r\n                state: {\r\n                    network,\r\n                },\r\n            })\r\n        }\r\n\r\n        history.push({\r\n            pathname: \"/settings/networks/add/suggested\",\r\n            state: {\r\n                suggestedChain: pickedChain?.chain,\r\n            },\r\n        })\r\n    }\r\n    const manuallyAddNetwork = () => {\r\n        history.push({\r\n            pathname: \"/settings/networks/add/manual\",\r\n            state: {\r\n                hint: hintRef.current || \"\",\r\n            },\r\n        })\r\n    }\r\n\r\n    const filterChains = (chainData: ChainData) => {\r\n        if (!filters.includes(ChainFilters.ENABLED) && chainData.isEnabled) {\r\n            return false\r\n        }\r\n\r\n        if (\r\n            !filters.includes(ChainFilters.TESTNET) &&\r\n            chainData.chain.isTestnet\r\n        ) {\r\n            return false\r\n        }\r\n        return true\r\n    }\r\n\r\n    const filteredChains = (data || []).filter(filterChains)\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={<PopupHeader title=\"Search Networks\" close=\"/\" />}\r\n            footer={\r\n                pickedChain ? (\r\n                    <PopupFooter>\r\n                        <ButtonWithLoading\r\n                            type=\"button\"\r\n                            label={\r\n                                pickedChain.isEnabled\r\n                                    ? \"Edit Network\"\r\n                                    : \"Add Network\"\r\n                            }\r\n                            onClick={addOrEditNetwork}\r\n                        />\r\n                    </PopupFooter>\r\n                ) : null\r\n            }\r\n        >\r\n            <div className=\"w-76 w-full p-6 pb-4 bg-white fixed z-20 flex flex-col\">\r\n                <div className=\"flex flex-row space-x-2\">\r\n                    <div className=\"flex-1\">\r\n                        <SearchInput\r\n                            inputClassName=\"!h-12\"\r\n                            placeholder=\"Input Chain ID or Name...\"\r\n                            disabled={false}\r\n                            autoFocus={true}\r\n                            onChange={onChange}\r\n                            debounced\r\n                        />\r\n                    </div>\r\n                    <ChainFiltersButton\r\n                        filters={filters}\r\n                        onChangeFilters={setFilters}\r\n                    />\r\n                </div>\r\n                {isSuccess && (\r\n                    <span className=\"text-xs mt-2\">\r\n                        Network not found?{\" \"}\r\n                        <ClickableText onClick={manuallyAddNetwork}>\r\n                            Add it manually.\r\n                        </ClickableText>\r\n                    </span>\r\n                )}\r\n            </div>\r\n            <div className=\"flex flex-col h-full w-full p-6\">\r\n                <div className=\"w-full mt-20 h-full\">\r\n                    {isIdle && (\r\n                        <div className=\"flex flex-col items-center justify-start flex-1 h-full p-6\">\r\n                            <div className=\"flex justify-center items-center relative mb-6\">\r\n                                <img\r\n                                    src={searchIcon}\r\n                                    alt=\"search\"\r\n                                    className=\"w-7 h-7 absolute z-10\"\r\n                                />\r\n                                <div className=\"w-20 h-20 bg-primary-100 rounded-full relative z-0\"></div>\r\n                            </div>\r\n                            <span className=\"text-sm text-gray-600 text-center\">\r\n                                Search the networks you want to add by name or\r\n                                chain identification. Or add{\" \"}\r\n                                <ClickableText onClick={manuallyAddNetwork}>\r\n                                    add it manually.\r\n                                </ClickableText>\r\n                            </span>\r\n                        </div>\r\n                    )}\r\n                    {isLoading && (\r\n                        <div className=\"w-full h-full flex justify-center items-center\">\r\n                            <Spinner size=\"24px\" />\r\n                        </div>\r\n                    )}\r\n                    {isSuccess && (\r\n                        <div className=\"flex flex-col space-y-1 pb-4 h-full\">\r\n                            <div className=\"text-xs text-gray-500 pt-2 pb-1\">\r\n                                SEARCH NETWORKS\r\n                            </div>\r\n                            <div className=\"flex flex-col overflow-y-auto h-50\">\r\n                                {filteredChains && filteredChains.length ? (\r\n                                    filteredChains.map(\r\n                                        ({ chain, isEnabled }) => {\r\n                                            return (\r\n                                                <ChainDisplay\r\n                                                    key={chain.chainId}\r\n                                                    chainId={chain.chainId}\r\n                                                    name={chain.name}\r\n                                                    logoUrl={chain.logo}\r\n                                                    selected={\r\n                                                        pickedChain?.chain\r\n                                                            ?.chainId ===\r\n                                                        chain.chainId\r\n                                                    }\r\n                                                    isTestnet={chain.isTestnet!}\r\n                                                    isEnabled={isEnabled}\r\n                                                    onClick={() =>\r\n                                                        setPickedChain({\r\n                                                            chain,\r\n                                                            isEnabled,\r\n                                                        })\r\n                                                    }\r\n                                                />\r\n                                            )\r\n                                        }\r\n                                    )\r\n                                ) : (\r\n                                    <EmptyState\r\n                                        title=\"No results\"\r\n                                        className=\"p-6\"\r\n                                    >\r\n                                        <span>\r\n                                            The network you are searching for is\r\n                                            unknown to BlockWallet. Try to\r\n                                            adjusting your search term or\r\n                                            filters, or{\" \"}\r\n                                            <ClickableText\r\n                                                onClick={manuallyAddNetwork}\r\n                                            >\r\n                                                add it manually.\r\n                                            </ClickableText>\r\n                                        </span>\r\n                                    </EmptyState>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default SearchNetworkPage\r\n","import { ChainListItem } from \"@block-wallet/background/utils/chainlist\"\r\nimport { getFirstUrl } from \"../../util/networkUtils\"\r\nimport NetworkFormPage from \"./NetworkFormPage\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\n\r\nconst SuggestedAddNetwork = () => {\r\n    const history = useOnMountHistory<{\r\n        suggestedChain: ChainListItem\r\n    }>()\r\n\r\n    const { suggestedChain } = history.location.state\r\n\r\n    const formNetwork = {\r\n        rpcUrl: getFirstUrl(suggestedChain.rpc),\r\n        blockExplorerUrl: getFirstUrl(\r\n            suggestedChain.explorers?.map((e) => e.url)\r\n        ),\r\n        chainId: suggestedChain.chainId,\r\n        name: suggestedChain?.name,\r\n        symbol: suggestedChain.nativeCurrency?.symbol,\r\n        isTestnet: suggestedChain.isTestnet,\r\n    }\r\n\r\n    return (\r\n        <NetworkFormPage\r\n            canDelete={false}\r\n            editMode=\"minimal\"\r\n            title=\"Add New Network\"\r\n            network={formNetwork}\r\n            isEdit={false}\r\n        />\r\n    )\r\n}\r\n\r\nexport default SuggestedAddNetwork\r\n","import { Network } from \"@block-wallet/background/utils/constants/networks\"\r\nimport NetworkFormPage from \"./NetworkFormPage\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\n\r\nconst ManuallyAddNetwork = () => {\r\n    const history = useOnMountHistory<{ hint: string }>()\r\n    const state = history.location.state\r\n    const formNetwork: Partial<Network> = isNaN(Number(state.hint))\r\n        ? { name: state.hint }\r\n        : { chainId: state.hint ? Number(state.hint) : undefined }\r\n    return (\r\n        <NetworkFormPage\r\n            canDelete={false}\r\n            editMode=\"all\"\r\n            title=\"Add New Network\"\r\n            network={formNetwork}\r\n            isEdit={false}\r\n        />\r\n    )\r\n}\r\n\r\nexport default ManuallyAddNetwork\r\n","import unknownTokenIcon from \"../../assets/images/unknown_token.svg\"\r\nimport { FunctionComponent } from \"react\"\r\nimport { classnames } from \"../../styles\"\r\n\r\ninterface NetworkLogoProps {\r\n    name: string\r\n    logo?: string\r\n    bigLogo?: boolean\r\n}\r\n\r\nconst NetworkLogo: FunctionComponent<NetworkLogoProps> = ({\r\n    logo = unknownTokenIcon,\r\n    name,\r\n    bigLogo = false,\r\n}) => {\r\n    return (\r\n        <div\r\n            className={classnames(\r\n                \"flex items-center justify-center\",\r\n                bigLogo ? \"w-8 h-8\" : \"w-6 h-6\"\r\n            )}\r\n        >\r\n            <img\r\n                className=\"rounded-full\"\r\n                src={logo}\r\n                alt={name}\r\n                onError={(e) => {\r\n                    ;(e.target as any).onerror = null\r\n                    ;(e.target as any).src = unknownTokenIcon\r\n                }}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NetworkLogo\r\n","import NetworkLogo from \"./NetworkLogo\"\r\nimport checkmarkMiniIcon from \"../../assets/images/icons/checkmark_mini.svg\"\r\nimport classNames from \"classnames\"\r\nimport { FunctionComponent } from \"react\"\r\nimport { IChain } from \"@block-wallet/background/utils/types/chain\"\r\n\r\ninterface DropdownNetworkDisplayProps {\r\n    network: IChain\r\n    active?: boolean\r\n    onClick?: React.MouseEventHandler<HTMLDivElement>\r\n}\r\n\r\n/**\r\n * Network display component\r\n *\r\n * @param network - Object containing the network info\r\n * @param active - Determines if the element is already showing selected style.\r\n * @param onClick - onClick callback\r\n */\r\nconst DropdownNetworkDisplay: FunctionComponent<\r\n    DropdownNetworkDisplayProps\r\n> = ({ network, active = false, onClick }) => {\r\n    return (\r\n        <div\r\n            className={classNames(\r\n                \"flex flex-row items-center w-full p-3 my-0.5 rounded-md cursor-pointer\",\r\n                \"transition-all duration-300 active:scale-95 hover:bg-primary-100\",\r\n                active && \"bg-primary-200\"\r\n            )}\r\n            onClick={onClick}\r\n        >\r\n            <NetworkLogo\r\n                logo={network.logo}\r\n                name={network.name}\r\n                bigLogo={false}\r\n            />\r\n            <div\r\n                className=\"text-sm truncate font-semibold ml-4\"\r\n                title={network.name}\r\n            >\r\n                {network.name}\r\n            </div>\r\n            <img\r\n                src={checkmarkMiniIcon}\r\n                alt=\"checkmark\"\r\n                className={classNames(\r\n                    \"absolute right-6\",\r\n                    active ? \"visible\" : \"hidden\"\r\n                )}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DropdownNetworkDisplay\r\n","import { IChain } from \"@block-wallet/background/utils/types/chain\"\r\nimport { Dispatch, FC, SetStateAction } from \"react\"\r\nimport DropdownNetworkDisplay from \"./DropdownNetworkDisplay\"\r\n\r\ninterface NetworkSelectorListProps {\r\n    onSelectNetwork: (\r\n        network: IChain,\r\n        setActive?: Dispatch<SetStateAction<boolean>>\r\n    ) => void\r\n    setActive?: Dispatch<SetStateAction<boolean>>\r\n    networks: IChain[]\r\n    selectedNetwork?: number\r\n}\r\n\r\nconst NetworkSelectorList: FC<NetworkSelectorListProps> = ({\r\n    setActive,\r\n    networks,\r\n    selectedNetwork,\r\n    onSelectNetwork,\r\n}) => {\r\n    return (\r\n        <>\r\n            <span className=\"text-xxs text-gray-500 p-3\">\r\n                {networks.length} available networks\r\n            </span>\r\n            <input\r\n                readOnly\r\n                name=\"network\"\r\n                className=\"hidden\"\r\n                value={selectedNetwork}\r\n            />\r\n            {Object.values(networks).map((network) => {\r\n                return (\r\n                    <DropdownNetworkDisplay\r\n                        key={network.id}\r\n                        network={network}\r\n                        active={selectedNetwork === network.id}\r\n                        onClick={() => onSelectNetwork(network, setActive)}\r\n                    />\r\n                )\r\n            })}\r\n        </>\r\n    )\r\n}\r\n\r\nexport default NetworkSelectorList\r\n","import NetworkLogo from \"./NetworkLogo\"\r\nimport classnames from \"classnames\"\r\nimport { FunctionComponent } from \"react\"\r\nimport { IChain } from \"@block-wallet/background/utils/types/chain\"\r\n\r\ninterface NetworkDisplayProps {\r\n    network: IChain\r\n    padding?: boolean\r\n    transparent?: boolean\r\n    bigLogo?: boolean\r\n}\r\n\r\nconst NetworkDisplay: FunctionComponent<NetworkDisplayProps> = ({\r\n    network,\r\n    padding = true,\r\n    transparent = false,\r\n    bigLogo,\r\n}) => {\r\n    return (\r\n        <div\r\n            className={classnames(\r\n                \"flex flex-row items-center w-full rounded-md\",\r\n                padding && \"p-4\",\r\n                !transparent && \"bg-primary-100\"\r\n            )}\r\n        >\r\n            <NetworkLogo\r\n                logo={network.logo}\r\n                name={network.name}\r\n                bigLogo={bigLogo}\r\n            />\r\n            <div\r\n                className=\"text-base truncate font-semibold ml-2\"\r\n                title={network.name}\r\n            >\r\n                {network.name}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NetworkDisplay\r\n","import NetworkDisplay from \"./NetworkDisplay\"\r\nimport Spinner from \"../spinner/Spinner\"\r\nimport { IChain } from \"@block-wallet/background/utils/types/chain\"\r\nimport { FC } from \"react\"\r\nimport classnames from \"classnames\"\r\n\r\ninterface NetworkDropdownDisplay {\r\n    isLoading: boolean\r\n    isEmpty: boolean\r\n    selectedNetwork?: IChain\r\n    loadingText?: string\r\n    emptyText?: string\r\n}\r\n\r\nconst NetworkDropdownDisplay: FC<NetworkDropdownDisplay> = ({\r\n    isLoading,\r\n    isEmpty,\r\n    selectedNetwork,\r\n    loadingText = \"\",\r\n    emptyText = \"No available networks\",\r\n}) => {\r\n    if (isLoading) {\r\n        return (\r\n            <div\r\n                className={classnames(\r\n                    \"flex items-center w-full text-base font-semibold space-x-2\",\r\n                    !loadingText && \"justify-center\"\r\n                )}\r\n            >\r\n                <Spinner size=\"24\" />\r\n                <span>{loadingText}</span>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    if (isEmpty) {\r\n        return <div className=\"text-base font-semibold\">{emptyText}</div>\r\n    }\r\n\r\n    return selectedNetwork ? (\r\n        <NetworkDisplay\r\n            network={selectedNetwork}\r\n            padding={false}\r\n            transparent={true}\r\n            bigLogo={false}\r\n        />\r\n    ) : (\r\n        <div className=\"text-base font-semibold\">Select network</div>\r\n    )\r\n}\r\n\r\nexport default NetworkDropdownDisplay\r\n","import DropDownSelector from \"../input/DropDownSelector\"\r\nimport {\r\n    ChangeEvent,\r\n    Dispatch,\r\n    FunctionComponent,\r\n    SetStateAction,\r\n    useEffect,\r\n    useState,\r\n} from \"react\"\r\nimport { IChain } from \"@block-wallet/background/utils/types/chain\"\r\nimport SearchInput from \"../input/SearchInput\"\r\nimport NetworkSelectorList from \"./NetworkSelectorList\"\r\nimport NetworkDropdownDisplay from \"./NetworkDropdownDisplay\"\r\n\r\ninterface NetworkSelectorProps {\r\n    networkList: IChain[]\r\n    onNetworkChange: (network: IChain | undefined) => void\r\n    selectedNetwork?: IChain\r\n    error?: string\r\n    topMargin?: number\r\n    bottomMargin?: number\r\n    popupMargin?: number\r\n    isLoading?: boolean\r\n    loadingText?: string\r\n    emptyText?: string\r\n}\r\n\r\nexport const NetworkSelector: FunctionComponent<NetworkSelectorProps> = ({\r\n    networkList,\r\n    onNetworkChange,\r\n    selectedNetwork,\r\n    error,\r\n    topMargin = 0,\r\n    bottomMargin = 0,\r\n    popupMargin = 16,\r\n    isLoading = false,\r\n    loadingText = \"\",\r\n    emptyText = \"\",\r\n}) => {\r\n    const [searchResult, setSearchResult] = useState<IChain[]>([])\r\n    const [search, setSearch] = useState<string | null>(null)\r\n\r\n    useEffect(() => {\r\n        if (!search) {\r\n            setSearchResult(networkList)\r\n            return\r\n        }\r\n\r\n        const input = search.toLowerCase()\r\n        let result: IChain[] = []\r\n\r\n        if (isNaN(Number(input))) {\r\n            // Not a number, search by network name\r\n            result = networkList.filter(({ name }) =>\r\n                name.toLowerCase().includes(input)\r\n            )\r\n        } else {\r\n            // Search by chain id\r\n            const exact = networkList.filter(\r\n                ({ id }) => id.toString() === input\r\n            )\r\n\r\n            const partial = networkList.filter(\r\n                ({ id }) =>\r\n                    id.toString().startsWith(input) && id.toString() !== input\r\n            )\r\n\r\n            result = exact.concat(partial)\r\n        }\r\n\r\n        setSearchResult(result)\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [search, networkList])\r\n\r\n    const onSelectNetwork = async (\r\n        network: IChain,\r\n        setActive?: Dispatch<SetStateAction<boolean>>\r\n    ) => {\r\n        onNetworkChange(network)\r\n        setActive && setActive(false)\r\n    }\r\n\r\n    const onSearchInputChange = (event: ChangeEvent<HTMLInputElement>) => {\r\n        let value: string | null = event.target.value\r\n\r\n        value = value.replace(/\\W/g, \"\")\r\n\r\n        if (!value) {\r\n            value = null\r\n        }\r\n\r\n        setSearch(value)\r\n    }\r\n\r\n    return (\r\n        <DropDownSelector\r\n            display={\r\n                <NetworkDropdownDisplay\r\n                    loadingText={loadingText}\r\n                    emptyText={emptyText}\r\n                    isEmpty={!networkList.length}\r\n                    isLoading={isLoading}\r\n                    selectedNetwork={selectedNetwork}\r\n                />\r\n            }\r\n            error={error}\r\n            topMargin={topMargin}\r\n            bottomMargin={bottomMargin}\r\n            popupMargin={popupMargin}\r\n            disabled={!networkList.length}\r\n        >\r\n            <div className=\"w-full p-3\">\r\n                <SearchInput\r\n                    name=\"networkName\"\r\n                    placeholder=\"Search networks by name or id\"\r\n                    disabled={false}\r\n                    autoFocus={true}\r\n                    onChange={onSearchInputChange}\r\n                    defaultValue={search || \"\"}\r\n                />\r\n            </div>\r\n            {search && searchResult.length === 0 ? (\r\n                <div className=\"p-3\">\r\n                    <p className=\"text-xs text-black text-center\">\r\n                        No available networks match with the search.\r\n                    </p>\r\n                </div>\r\n            ) : (\r\n                <NetworkSelectorList\r\n                    networks={searchResult}\r\n                    onSelectNetwork={onSelectNetwork}\r\n                    selectedNetwork={selectedNetwork?.id}\r\n                />\r\n            )}\r\n        </DropDownSelector>\r\n    )\r\n}\r\n","import classnames from \"classnames\"\r\nimport { useState } from \"react\"\r\nimport { ArrowUpDown } from \"../icons/ArrowUpDown\"\r\n\r\nconst BridgeNotFoundItem = ({\r\n    tool,\r\n    message,\r\n    details,\r\n}: {\r\n    tool: string\r\n    message: string\r\n    details: string[]\r\n}) => {\r\n    const [isCollapsed, setIsCollapsed] = useState<boolean>(true)\r\n\r\n    return (\r\n        <>\r\n            <div\r\n                className=\"flex items-center cursor-pointer space-x-1\"\r\n                onClick={() => {\r\n                    setIsCollapsed(!isCollapsed)\r\n                }}\r\n            >\r\n                <ArrowUpDown active={!isCollapsed} />\r\n                <div>\r\n                    <span className=\"ml-1 font-bold\">{tool}</span>\r\n                </div>\r\n            </div>\r\n            <div\r\n                className={classnames(\r\n                    \"overflow-hidden\",\r\n                    isCollapsed ? \"h-0\" : \"\"\r\n                )}\r\n            >\r\n                <div className=\"ml-1 text-gray-500\">\r\n                    {message}\r\n\r\n                    {details.map((d, i) => (\r\n                        <li key={d + i}>\r\n                            <i className=\"ml-1 text-gray-500\">{d}</i>\r\n                        </li>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default BridgeNotFoundItem\r\n","import { BridgeError } from \"../../components/transactions/BridgeNotFoundQuoteDetails\"\r\nimport BridgeNotFoundItem from \"../../components/bridge/BridgeNotFoundItem\"\r\n\r\ntype BridgeErrorSummary = {\r\n    message: string\r\n    code: string\r\n    details: string[]\r\n}\r\n\r\nconst BridgeErrorDisplay = ({\r\n    tool,\r\n    bridgeError,\r\n}: {\r\n    tool: string\r\n    bridgeError: BridgeError[]\r\n}) => {\r\n    let errors = new Map<string, BridgeErrorSummary>()\r\n\r\n    bridgeError.map((value) => {\r\n        if (errors.has(value.code)) {\r\n            errors\r\n                .get(value.code)\r\n                ?.details.push(value.fromToken + \" -> \" + value.toToken)\r\n        } else {\r\n            errors.set(value.code, {\r\n                message: value.message,\r\n                code: value.code,\r\n                details: [value.fromToken + \" -> \" + value.toToken],\r\n            })\r\n        }\r\n    })\r\n\r\n    return (\r\n        <div>\r\n            <span className=\"text-xs text-gray-500 font-bold\">{tool}</span>\r\n            {Array.from(errors.keys()).map((code) => {\r\n                const errorSummary = errors.get(code)\r\n                return (\r\n                    errorSummary && (\r\n                        <div className=\"flex flex-col\">\r\n                            <BridgeNotFoundItem\r\n                                tool={errorSummary.code}\r\n                                details={errorSummary.details}\r\n                                message={errorSummary.message}\r\n                            />\r\n                        </div>\r\n                    )\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default BridgeErrorDisplay\r\n","import { FunctionComponent, useState } from \"react\"\r\nimport Dialog from \"../dialog/Dialog\"\r\nimport CloseIcon from \"../icons/CloseIcon\"\r\nimport Divider from \"../Divider\"\r\nimport { Classes, classnames } from \"../../styles\"\r\nimport BridgeErrorDisplay from \"../../components/bridge/BridgeQuoteNotFoundErrorDetails\"\r\nimport { GetBridgeQuoteNotFoundResponse } from \"@block-wallet/background/controllers/BridgeController\"\r\nimport openIcon from \"../../assets/images/icons/open_external.svg\"\r\nimport download from \"../../assets/images/icons/download.svg\"\r\nimport { LINKS } from \"../../util/constants\"\r\n\r\nexport type BridgeNotFoundQuoteErrorsProps = {\r\n    open: boolean\r\n    onClose: () => void\r\n    details: GetBridgeQuoteNotFoundResponse\r\n}\r\n\r\nexport type BridgeError = {\r\n    code: string\r\n    type: string\r\n    message: string\r\n    fromToken: string\r\n    toToken: string\r\n}\r\n\r\nexport const BridgeNotFoundQuoteDetails: FunctionComponent<\r\n    BridgeNotFoundQuoteErrorsProps\r\n> = ({ open, onClose, details }) => {\r\n    let errorsByTool = new Map<string, BridgeError[]>()\r\n\r\n    details.errors.map((error) => {\r\n        const err = {\r\n            code: error.code,\r\n            type: error.tool,\r\n            message: error.message,\r\n            fromToken: error.action.fromToken.symbol,\r\n            toToken: error.action.toToken.symbol,\r\n        }\r\n        if (errorsByTool.has(error.tool)) {\r\n            errorsByTool.get(error.tool)?.push(err)\r\n        } else {\r\n            errorsByTool.set(error.tool, [err])\r\n        }\r\n    })\r\n    return (\r\n        <Dialog open={open} onClickOutside={onClose}>\r\n            <span className=\"absolute top-0 right-0 p-4 z-50\">\r\n                <div\r\n                    onClick={onClose}\r\n                    className=\"cursor-pointer p-2 ml-auto -mr-2 text-gray-900 transition duration-300 rounded-full hover:bg-primary-100 hover:text-primary-300\"\r\n                >\r\n                    <CloseIcon size=\"10\" />\r\n                </div>\r\n            </span>\r\n\r\n            <div className=\"flex flex-col w-full h-full\">\r\n                <h2 className=\"px-2 pr-0 pb-4 mt-2 text-lg font-bold\">\r\n                    Unable to generate a quote\r\n                </h2>\r\n                <Divider />\r\n                <div\r\n                    className=\"flex flex-col h-[17rem] justify-between overflow-auto py-4 -ml-3 px-3\"\r\n                    style={{ width: \"calc(100% + 1.5rem)\" }}\r\n                >\r\n                    <div className=\"p-1\">\r\n                        <span className=\"text-sm font-bold\">Summary</span>\r\n                        <div className=\"mt-2\">{details.message}</div>\r\n\r\n                        {errorsByTool && errorsByTool.size > 0 && (\r\n                            <>\r\n                                <div className=\"py-3\">\r\n                                    <Divider />\r\n                                </div>\r\n                                <div className=\"flex-1 flex flex-col\">\r\n                                    <main className=\"p-1\">\r\n                                        <span className=\"text-sm font-bold\">\r\n                                            Errors by tool\r\n                                        </span>\r\n                                        <br />\r\n                                        <div className=\"flex flex-col\">\r\n                                            {Array.from(\r\n                                                errorsByTool.keys()\r\n                                            ).map((tool, i) => {\r\n                                                const errors =\r\n                                                    errorsByTool.get(tool)\r\n                                                return (\r\n                                                    errors && (\r\n                                                        <div\r\n                                                            className=\"mt-2\"\r\n                                                            key={i}\r\n                                                        >\r\n                                                            <BridgeErrorDisplay\r\n                                                                tool={tool}\r\n                                                                bridgeError={\r\n                                                                    errors\r\n                                                                }\r\n                                                            />\r\n                                                        </div>\r\n                                                    )\r\n                                                )\r\n                                            })}\r\n                                        </div>\r\n                                    </main>\r\n                                </div>\r\n                            </>\r\n                        )}\r\n                    </div>\r\n\r\n                    <div className=\"flex w-full items-center justify-between mt-2\">\r\n                        <a\r\n                            href={LINKS.ARTICLES.BRIDGES}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            className=\"flex flex-row items-center space-x-2 text-xs font-bold text-primary-300\"\r\n                        >\r\n                            <span>Read about bridges</span>\r\n                            <img\r\n                                src={openIcon}\r\n                                alt=\"Open icon\"\r\n                                className=\"w-3 h-3\"\r\n                            />\r\n                        </a>{\" \"}\r\n                        <a\r\n                            href={`data:text/json;chatset=utf-8,${encodeURIComponent(\r\n                                JSON.stringify(details)\r\n                            )}`}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            download={\"quote_not_found.json\"}\r\n                            className=\"flex flex-row items-center space-x-2 text-xs font-bold text-primary-300\"\r\n                        >\r\n                            <span>Download report</span>\r\n                            <img\r\n                                src={download}\r\n                                alt=\"Download icon\"\r\n                                className=\"w-3 h-3\"\r\n                            />\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"-mx-3\">\r\n                <Divider />\r\n            </div>\r\n            <div className=\"-mx-3\">\r\n                <Divider />\r\n            </div>\r\n            <button\r\n                onClick={onClose}\r\n                className={classnames(Classes.liteButton, \"mt-4\")}\r\n                type=\"button\"\r\n            >\r\n                Close\r\n            </button>\r\n        </Dialog>\r\n    )\r\n}\r\n\r\nexport default BridgeNotFoundQuoteDetails\r\n","import { FC } from \"react\"\r\nimport { AiFillInfoCircle } from \"react-icons/ai\"\r\nimport GenericTooltip from \"./label/GenericTooltip\"\r\n\r\ninterface FeeDetailsProps {\r\n    summary: string\r\n    details?: string | React.ReactElement\r\n}\r\n\r\nconst FeeDetails: FC<FeeDetailsProps> = ({ summary, details }) => {\r\n    return (\r\n        <div className=\"flex items-center pt-2\">\r\n            <p className=\"text-xs text-gray-600 pt-0.5 mr-1\">{summary}</p>\r\n            {details && (\r\n                <GenericTooltip\r\n                    divFull={false}\r\n                    content={details}\r\n                    top\r\n                    className=\"!w-60 !break-word !whitespace-normal !opacity-100 !border\"\r\n                >\r\n                    <AiFillInfoCircle\r\n                        size={18}\r\n                        className=\"cursor-pointer text-primary-200 hover:text-primary-300\"\r\n                    />\r\n                </GenericTooltip>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FeeDetails\r\n","import { FunctionComponent, useCallback, useEffect, useState } from \"react\"\r\nimport { Classes, classnames } from \"../../styles\"\r\nimport LinkButton from \"../button/LinkButton\"\r\nimport Divider from \"../Divider\"\r\nimport PasswordInput from \"../input/PasswordInput\"\r\nimport Spinner from \"../spinner/Spinner\"\r\nimport * as yup from \"yup\"\r\nimport { isValidMnemonic } from \"@ethersproject/hdnode\"\r\nimport { useForm } from \"react-hook-form\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport log from \"loglevel\"\r\nimport InfoTip from \"../label/InfoTip\"\r\nimport Select from \"../input/Select\"\r\n\r\nconst schema = yup.object().shape({\r\n    password: yup\r\n        .string()\r\n        .required(\"No password provided.\")\r\n        .min(8, \"Password should be at least 8 characters long.\")\r\n        .matches(\r\n            /(?=.*\\d)(?=.*[a-z])/,\r\n            \"Password must contain at least one lowercase character and one digit.\"\r\n        ),\r\n    passwordConfirmation: yup\r\n        .string()\r\n        .required(\"Please enter the password confirmation.\")\r\n        .oneOf(\r\n            [yup.ref(\"password\"), null],\r\n            \"Password and password confirmation must match.\"\r\n        ),\r\n    acceptTOU: yup\r\n        .bool()\r\n        .required(\"You must accept the Terms of Use.\")\r\n        .oneOf([true], \"You must accept the Terms of Use.\"),\r\n})\r\ntype SeedImportFormData = {\r\n    password: string\r\n    passwordConfirmation: string\r\n    acceptTOU: boolean\r\n}\r\n\r\nconst numberOfWordsOptions: number[] = []\r\nfor (let i = 12; i <= 24; i += 3) {\r\n    numberOfWordsOptions.push(i)\r\n}\r\n\r\nconst SeedImport: FunctionComponent<{\r\n    buttonLabel: string\r\n    action: (password: string, seedPhrase: string) => Promise<any>\r\n}> = ({ buttonLabel = \"Import\", action }) => {\r\n    const [passwordScore, setPasswordScore] = useState<number>(0)\r\n    const [numberOfWords, setNumberOfWords] = useState<number>(\r\n        numberOfWordsOptions[0]\r\n    )\r\n    const [seedPhrase, setSeedPhrase] = useState(\r\n        new Array(numberOfWordsOptions[0]).fill(\"\")\r\n    )\r\n    const [seedPhraseError, setSeedPhraseError] = useState(\"\")\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [isImportDisabled, setIsImportDisabled] = useState(true)\r\n    const { register, handleSubmit, setError, trigger, watch, formState } =\r\n        useForm<SeedImportFormData>({\r\n            mode: \"onChange\",\r\n            resolver: yupResolver(schema),\r\n        })\r\n\r\n    const passwordConfirmationWatch = watch(\"passwordConfirmation\")\r\n    const onSubmit = handleSubmit(async (data: SeedImportFormData) => {\r\n        try {\r\n            if (passwordScore < 3) {\r\n                return setError(\r\n                    \"password\",\r\n                    {\r\n                        message: \"Password is not strong enough\",\r\n                    },\r\n                    {\r\n                        shouldFocus: true,\r\n                    }\r\n                )\r\n            }\r\n\r\n            if (!isValidMnemonic(seedPhrase.join(\" \"))) {\r\n                return setSeedPhraseError(\"Seed phrase invalid\")\r\n            }\r\n\r\n            setIsLoading(true)\r\n\r\n            const { password } = data\r\n\r\n            await action(password, seedPhrase.join(\" \"))\r\n        } catch (error) {\r\n            log.error(error.message || error)\r\n\r\n            setSeedPhraseError(\"Error importing seed phrase\")\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    })\r\n\r\n    const onSeedPhraseChange = useCallback(\r\n        (newSP: string[]) => {\r\n            if (newSP.some((word: string) => word !== \"\")) {\r\n                if (newSP.some((word: string) => word === \"\")) {\r\n                    setSeedPhraseError(\"Enter the full seed phrase\")\r\n                } else if (!isValidMnemonic(newSP.join(\" \"))) {\r\n                    setSeedPhraseError(\"Seed phrase invalid\")\r\n                } else {\r\n                    setSeedPhraseError(\"\")\r\n                }\r\n            }\r\n            setSeedPhrase(newSP)\r\n        },\r\n        [setSeedPhrase, setSeedPhraseError]\r\n    )\r\n\r\n    const onSeedPhraseWordChange = useCallback(\r\n        (wordN: number, word: string) => {\r\n            const newSP = seedPhrase.slice()\r\n            newSP[wordN] = word.trim()\r\n            onSeedPhraseChange(newSP)\r\n        },\r\n        [seedPhrase, onSeedPhraseChange]\r\n    )\r\n\r\n    const onSeedPhrasePaste = useCallback(\r\n        (pastedSP: string) => {\r\n            const parsedSP =\r\n                pastedSP.trim().toLowerCase().match(/\\w+/gu)?.join(\" \") || \"\"\r\n\r\n            let newSP = parsedSP.split(\" \")\r\n            let newNumberOfWords = numberOfWords\r\n            if (newSP.length !== numberOfWords) {\r\n                if (newSP.length < 12) {\r\n                    newNumberOfWords = 12\r\n                } else if (newSP.length % 3 === 0) {\r\n                    newNumberOfWords = newSP.length\r\n                } else {\r\n                    newNumberOfWords = newSP.length + (3 - (newSP.length % 3))\r\n                }\r\n                setNumberOfWords(newNumberOfWords)\r\n            }\r\n\r\n            if (newSP.length < newNumberOfWords) {\r\n                newSP = newSP.concat(\r\n                    new Array(newNumberOfWords - newSP.length).fill(\"\")\r\n                )\r\n            }\r\n\r\n            onSeedPhraseChange(newSP)\r\n        },\r\n        [numberOfWords, onSeedPhraseChange]\r\n    )\r\n\r\n    const passwordValues = watch()\r\n    useEffect(() => {\r\n        if (\r\n            seedPhrase &&\r\n            !seedPhraseError &&\r\n            seedPhrase.filter((s) => s !== \"\").length === numberOfWords &&\r\n            formState.isValid\r\n        ) {\r\n            setIsImportDisabled(false)\r\n        } else {\r\n            setIsImportDisabled(true)\r\n        }\r\n    }, [seedPhrase, passwordValues, seedPhraseError, formState.errors.password])\r\n\r\n    useEffect(() => {\r\n        // trigger password confirmation validation when password changes given that there is a value in both fields\r\n        if (passwordValues.password && passwordValues.passwordConfirmation) {\r\n            trigger(\"passwordConfirmation\")\r\n        }\r\n    }, [passwordValues.password, trigger])\r\n\r\n    return (\r\n        <form\r\n            className=\"flex flex-col w-full text-gray-600\"\r\n            onSubmit={onSubmit}\r\n        >\r\n            <div className=\"flex flex-col px-6 space-y-4\">\r\n                <div className=\"flex flex-col space-y-2\">\r\n                    <div className=\"flex flex-col space-y-1\">\r\n                        <Select\r\n                            onChange={setNumberOfWords}\r\n                            currentValue={numberOfWords}\r\n                            id=\"numberOfWords\"\r\n                            label=\"Seed phrase length\"\r\n                        >\r\n                            {numberOfWordsOptions.map(\r\n                                (numberOfWords: number) => {\r\n                                    return (\r\n                                        <Select.Option\r\n                                            value={numberOfWords}\r\n                                            key={numberOfWords}\r\n                                        >\r\n                                            {`${numberOfWords}-word Seed Phrase`}\r\n                                        </Select.Option>\r\n                                    )\r\n                                }\r\n                            )}\r\n                        </Select>\r\n                    </div>\r\n                    <div className=\"flex flex-col space-y-1\">\r\n                        <InfoTip\r\n                            text=\"You can paste your entire seed phrase into any field.\"\r\n                            fontSize=\"text-xs\"\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex flex-col space-y-1\">\r\n                        <div className=\"grid grid-cols-3 gap-2\">\r\n                            {Array.from({ length: numberOfWords }, (v, i) => {\r\n                                const wordnN = i + 1\r\n                                return (\r\n                                    <PasswordInput\r\n                                        key={`word_${i}`}\r\n                                        placeholder={`Enter word #${wordnN}`}\r\n                                        name={`word_${i}`}\r\n                                        //register={register}\r\n                                        value={seedPhrase[i]}\r\n                                        onChange={(e: any) => {\r\n                                            e.preventDefault()\r\n                                            onSeedPhraseWordChange(\r\n                                                i,\r\n                                                e.target.value\r\n                                            )\r\n                                        }}\r\n                                        onPaste={(e: any) => {\r\n                                            const newSP =\r\n                                                e.clipboardData.getData(\"text\")\r\n\r\n                                            if (newSP.trim().match(/\\s/u)) {\r\n                                                e.preventDefault()\r\n                                                onSeedPhrasePaste(newSP)\r\n                                            }\r\n                                        }}\r\n                                    />\r\n                                )\r\n                            })}\r\n                        </div>\r\n                        <span className=\"text-xs text-red-500\">\r\n                            {seedPhraseError || <>&nbsp;</>}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex flex-col space-y-1\">\r\n                    <PasswordInput\r\n                        label=\"New Password\"\r\n                        placeholder=\"Enter New Password\"\r\n                        {...register(\"password\", {\r\n                            onChange: () => {\r\n                                passwordConfirmationWatch &&\r\n                                    trigger(\"passwordConfirmation\")\r\n                            },\r\n                        })}\r\n                        error={formState.errors.password?.message}\r\n                        strengthBar={true}\r\n                        setPasswordScore={setPasswordScore}\r\n                    />\r\n                </div>\r\n                <div className=\"flex flex-col space-y-1\">\r\n                    <PasswordInput\r\n                        label=\"Confirm Password\"\r\n                        placeholder=\"Confirm New Password\"\r\n                        {...register(\"passwordConfirmation\")}\r\n                        error={formState.errors.passwordConfirmation?.message}\r\n                    />\r\n                </div>\r\n                <div className=\"flex flex-col space-y-1\">\r\n                    <div className=\"flex flex-row items-center space-x-2\">\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            className={Classes.checkbox}\r\n                            id=\"acceptTOU\"\r\n                            {...register(\"acceptTOU\")}\r\n                        />\r\n                        <label htmlFor=\"acceptTOU\" className=\"text-xs\">\r\n                            I have read and agree to the{\" \"}\r\n                            <a\r\n                                href=\"https://blockwallet.io/terms-of-use-of-block-wallet.html\"\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"text-primary-300\"\r\n                            >\r\n                                Terms of Use\r\n                            </a>\r\n                        </label>\r\n                    </div>\r\n                    <span className=\"text-xs text-red-500\">\r\n                        {formState.errors.acceptTOU?.message || <>&nbsp;</>}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <Divider />\r\n            <div className=\"flex flex-row p-6 space-x-4\">\r\n                <LinkButton\r\n                    location=\"/setup/\"\r\n                    text=\"Back\"\r\n                    lite\r\n                    disabled={isLoading}\r\n                />\r\n                <button\r\n                    type=\"submit\"\r\n                    className={classnames(\r\n                        Classes.button,\r\n                        \"w-1/2 font-bold border-2 border-primary-300\",\r\n                        (isLoading || isImportDisabled) &&\r\n                            \"opacity-50 pointer-events-none\"\r\n                    )}\r\n                    disabled={isImportDisabled || isLoading}\r\n                >\r\n                    {!isLoading ? buttonLabel : <Spinner />}\r\n                </button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default SeedImport\r\n","import AssetAmountDisplay from \"../../components/assets/AssetAmountDisplay\"\r\nimport ErrorMessage from \"../../components/error/ErrorMessage\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport arrowDown from \"../../assets/images/icons/arrow_down_long.svg\"\r\nimport useLocalStorageState from \"../../util/hooks/useLocalStorageState\"\r\nimport {\r\n    AssetListType,\r\n    AssetSelection,\r\n} from \"../../components/assets/AssetSelection\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport { GetAmountYupSchema } from \"../../util/yup/GetAmountSchema\"\r\nimport { InferType } from \"yup\"\r\nimport { NetworkSelector } from \"../../components/network/NetworkSelector\"\r\nimport { Token } from \"@block-wallet/background/controllers/erc-20/Token\"\r\nimport { classnames } from \"../../styles\"\r\nimport { formatCurrency, toCurrencyAmount } from \"../../util/formatCurrency\"\r\nimport { formatUnits, parseUnits } from \"@ethersproject/units\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { useCallback } from \"react\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport { useState, useEffect, FunctionComponent } from \"react\"\r\nimport { useTokenBalance } from \"../../context/hooks/useTokenBalance\"\r\nimport { useTokensList } from \"../../context/hooks/useTokensList\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport {\r\n    getBridgeAvailableRoutes,\r\n    getBridgeQuote,\r\n} from \"../../context/commActions\"\r\nimport { capitalize } from \"../../util/capitalize\"\r\nimport { BridgeConfirmPageLocalState } from \"./BridgeConfirmPage\"\r\nimport { IBridgeRoute } from \"@block-wallet/background/utils/bridgeApi\"\r\nimport { IChain } from \"@block-wallet/background/utils/types/chain\"\r\nimport {\r\n    checkForBridgeNativeAsset,\r\n    getRouteForNetwork,\r\n    isANotFoundQuote,\r\n} from \"../../util/bridgeUtils\"\r\nimport {\r\n    BridgeQuoteRequest,\r\n    GetBridgeQuoteResponse,\r\n    GetBridgeQuoteNotFoundResponse,\r\n} from \"@block-wallet/background/controllers/BridgeController\"\r\nimport { ApproveOperation } from \"../transaction/ApprovePage\"\r\nimport { BridgeAllowanceCheck, QuoteFeeStatus } from \"../../context/commTypes\"\r\nimport { defaultAdvancedSettings } from \"../../components/transactions/AdvancedSettings\"\r\nimport { BridgeNotFoundQuoteDetails } from \"../../components/transactions/BridgeNotFoundQuoteDetails\"\r\nimport { formatRounded } from \"../../util/formatRounded\"\r\nimport FeeDetails from \"../../components/FeeDetails\"\r\nimport ClickableText from \"../../components/button/ClickableText\"\r\nimport BridgeDetails from \"../../components/bridge/BridgeDetails\"\r\nimport { populateBridgeTransaction } from \"../../util/bridgeUtils\"\r\nimport BridgeErrorMessage, { BridgeErrorType } from \"./BridgeErrorMessage\"\r\nimport usePersistedLocalStorageForm from \"../../util/hooks/usePersistedLocalStorageForm\"\r\nimport { secondsToEstimatedMinutes } from \"../../util/time\"\r\n\r\ninterface SetupBridgePageLocalState {\r\n    amount?: string\r\n    bridgeQuote?: GetBridgeQuoteResponse\r\n    fromAssetPage?: boolean\r\n    network?: IChain\r\n    routes?: IBridgeRoute[]\r\n    token?: Token\r\n}\r\n\r\ninterface BridgeState {\r\n    token?: Token\r\n    network?: IChain\r\n    bigNumberAmount?: BigNumber\r\n}\r\n\r\nconst BridgeSetupPage: FunctionComponent<{}> = () => {\r\n    const history = useOnMountHistory()\r\n    const {\r\n        token,\r\n        network,\r\n        routes,\r\n        amount: historyAmount,\r\n        fromAssetPage,\r\n    } = (history.location.state || {}) as SetupBridgePageLocalState\r\n\r\n    const {\r\n        selectedAddress,\r\n        nativeCurrency,\r\n        localeInfo,\r\n        exchangeRates,\r\n        availableNetworks,\r\n        selectedNetwork,\r\n        availableBridgeChains,\r\n    } = useBlankState()!\r\n    const { nativeToken } = useTokensList()\r\n\r\n    const [bridgeDetails, setBridgeDetails] = useState<{\r\n        isOpen: boolean\r\n        tab?: \"summary\" | \"fees\"\r\n    }>({ isOpen: false })\r\n    // State\r\n    const [routesError, setRoutesError] = useState<string | undefined>(\r\n        undefined\r\n    )\r\n    const [bridgeQuoteError, setBridgeQuoteError] = useState<\r\n        BridgeErrorType | undefined\r\n    >(undefined)\r\n\r\n    const [inputFocus, setInputFocus] = useState(false)\r\n    const [isFetchingRoutes, setIsFetchingRoutes] = useState<boolean>(false)\r\n    const [isFetchingQuote, setisFetchingQuote] = useState<boolean>(false)\r\n    const [availableRoutes, setAvailableRoutes] = useState<IBridgeRoute[]>(\r\n        routes || []\r\n    )\r\n    const [quote, setQuote] = useState<GetBridgeQuoteResponse | undefined>(\r\n        undefined\r\n    )\r\n    const [quoteNotFoundErrors, setQuoteNotFoundErrors] = useState<\r\n        GetBridgeQuoteNotFoundResponse | undefined\r\n    >(undefined)\r\n\r\n    const [bridgeDataState, setBridgeDataState] =\r\n        useLocalStorageState<BridgeState>(\"bridge.form\", {\r\n            initialValue: {\r\n                token: token ? token : nativeToken.token,\r\n                network,\r\n                bigNumberAmount: undefined,\r\n            },\r\n            deserializer: useCallback((rawData: any) => {\r\n                return {\r\n                    ...rawData,\r\n                    bigNumberAmount: rawData.bigNumberAmount\r\n                        ? BigNumber.from(rawData.bigNumberAmount)\r\n                        : undefined,\r\n                }\r\n            }, []),\r\n        })\r\n\r\n    const selectedTokenBalance = useTokenBalance(bridgeDataState.token)\r\n\r\n    const {\r\n        token: selectedToken,\r\n        network: selectedToNetwork,\r\n        bigNumberAmount,\r\n    } = bridgeDataState\r\n\r\n    // Validation\r\n    const schema = GetAmountYupSchema(selectedToken, selectedTokenBalance)\r\n    const {\r\n        register,\r\n        setValue,\r\n        clearErrors,\r\n        setFocus,\r\n        trigger: triggerAmountValidation,\r\n        watch,\r\n        formState: { errors },\r\n    } = usePersistedLocalStorageForm<InferType<typeof schema>>(\r\n        {\r\n            key: \"bridges.amount.form\",\r\n        },\r\n        {\r\n            resolver: yupResolver(schema),\r\n            defaultValues: {\r\n                amount:\r\n                    (bridgeDataState?.bigNumberAmount\r\n                        ? formatUnits(\r\n                              bridgeDataState?.bigNumberAmount?.toString(),\r\n                              bridgeDataState?.token?.decimals\r\n                          )\r\n                        : undefined) || historyAmount,\r\n            },\r\n        }\r\n    )\r\n\r\n    const watchedAmount = watch(\"amount\")\r\n\r\n    const focusAmountInput = () => {\r\n        setFocus(\"amount\")\r\n    }\r\n    const currentNetwork = availableNetworks[selectedNetwork.toUpperCase()]\r\n    const isUsingNetworkNativeCurrency =\r\n        selectedToken?.address === nativeToken.token.address\r\n    const maxAmount = selectedTokenBalance\r\n    const isMaxAmountEnabled =\r\n        maxAmount && !(bigNumberAmount && maxAmount.eq(bigNumberAmount))\r\n    const selectedRoute = getRouteForNetwork(availableRoutes, selectedToNetwork)\r\n    const availbleChainsId = availableRoutes.map((route) => route.toChainId)\r\n    const filteredAvailableNetworks = availableBridgeChains.filter((chain) => {\r\n        if (chain.id === currentNetwork.chainId) {\r\n            return false\r\n        }\r\n        return availbleChainsId.includes(chain.id)\r\n    })\r\n    const [showBridgeNotFoundQuoteDetails, setShowBridgeNotFoundQuoteDetails] =\r\n        useState<boolean>(false)\r\n\r\n    const formattedAmount =\r\n        selectedToken && bigNumberAmount\r\n            ? formatCurrency(\r\n                  toCurrencyAmount(\r\n                      bigNumberAmount,\r\n                      exchangeRates[selectedToken.symbol.toUpperCase()],\r\n                      selectedToken.decimals\r\n                  ),\r\n                  {\r\n                      currency: nativeCurrency,\r\n                      locale_info: localeInfo,\r\n                      returnNonBreakingSpace: false,\r\n                      showSymbol: true,\r\n                  }\r\n              )\r\n            : undefined\r\n\r\n    //executes when the amount hex changes\r\n    useEffect(() => {\r\n        async function handleChangeAmount() {\r\n            clearErrors()\r\n            if (selectedToken && Number(watchedAmount)) {\r\n                if (await triggerAmountValidation()) {\r\n                    return setBridgeDataState((prev: BridgeState) => ({\r\n                        ...prev,\r\n                        bigNumberAmount: parseUnits(\r\n                            watchedAmount,\r\n                            selectedToken?.decimals\r\n                        ),\r\n                    }))\r\n                }\r\n            }\r\n\r\n            setBridgeDataState((prev: BridgeState) => ({\r\n                ...prev,\r\n                bigNumberAmount: undefined,\r\n            }))\r\n        }\r\n        handleChangeAmount()\r\n    }, [\r\n        watchedAmount,\r\n        selectedToken,\r\n        selectedToken?.address,\r\n        triggerAmountValidation,\r\n        setBridgeDataState,\r\n        clearErrors,\r\n    ])\r\n\r\n    const onSubmit = () => {\r\n        if (\r\n            !selectedToken ||\r\n            !bigNumberAmount ||\r\n            !quote ||\r\n            !selectedToNetwork\r\n        ) {\r\n            return\r\n        }\r\n\r\n        const nextViewState: BridgeConfirmPageLocalState = {\r\n            amount: watchedAmount,\r\n            bridgeQuote: quote,\r\n            network: selectedToNetwork,\r\n            routes: availableRoutes,\r\n            token: selectedToken,\r\n            fromAssetPage,\r\n        }\r\n\r\n        if (quote.allowance === BridgeAllowanceCheck.ENOUGH_ALLOWANCE) {\r\n            history.push({\r\n                pathname: \"/bridge/confirm\",\r\n                state: nextViewState,\r\n            })\r\n        } else {\r\n            history.push({\r\n                pathname: \"/transaction/approve\",\r\n                state: {\r\n                    assetAddress: selectedToken.address,\r\n                    minAllowance: bigNumberAmount,\r\n                    approveOperation: ApproveOperation.BRIDGE,\r\n                    nextLocationState: nextViewState,\r\n                },\r\n            })\r\n        }\r\n    }\r\n\r\n    const onUpdateAmount = (value: string) => {\r\n        // Clear the quote first\r\n        setQuote(undefined)\r\n        const parsedAmount = value\r\n            .replace(/[^0-9.,]/g, \"\")\r\n            .replace(\",\", \".\")\r\n            .replace(/(\\..*?)\\..*/g, \"$1\")\r\n        setValue(\"amount\", parsedAmount)\r\n    }\r\n\r\n    useEffect(() => {\r\n        let isValidFetch = true\r\n        setRoutesError(undefined)\r\n        setBridgeQuoteError(undefined)\r\n        const fetchRoutes = async () => {\r\n            setIsFetchingRoutes(true)\r\n            try {\r\n                const routesRes = await getBridgeAvailableRoutes({\r\n                    fromTokenAddress: checkForBridgeNativeAsset(\r\n                        selectedToken!.address\r\n                    ),\r\n                })\r\n\r\n                if (isValidFetch) {\r\n                    const { routes } = routesRes\r\n                    if (!routes.length) {\r\n                        setRoutesError(\r\n                            \"There are no routes available for the selected asset.\"\r\n                        )\r\n                    }\r\n                    setAvailableRoutes(routes)\r\n\r\n                    //check if network is still valid.\r\n                    if (\r\n                        selectedToNetwork &&\r\n                        !routes.some(\r\n                            (route) => route.toChainId === selectedToNetwork?.id\r\n                        )\r\n                    ) {\r\n                        setBridgeDataState((prev: BridgeState) => ({\r\n                            ...prev,\r\n                            network: undefined,\r\n                        }))\r\n                    }\r\n                    setIsFetchingRoutes(false)\r\n                }\r\n            } catch (error) {\r\n                if (isValidFetch) {\r\n                    setRoutesError(\r\n                        capitalize(error.message || \"Error fetching routes.\")\r\n                    )\r\n                    setAvailableRoutes([])\r\n                    setIsFetchingRoutes(false)\r\n                }\r\n            }\r\n        }\r\n\r\n        if (selectedToken) {\r\n            fetchRoutes()\r\n        } else {\r\n            setAvailableRoutes([])\r\n            setIsFetchingRoutes(false)\r\n        }\r\n\r\n        return () => {\r\n            isValidFetch = false\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [selectedToken])\r\n\r\n    useEffect(() => {\r\n        let isValidFetch = true\r\n        setBridgeQuoteError(undefined)\r\n        const fetchQuote = async () => {\r\n            setisFetchingQuote(true)\r\n\r\n            try {\r\n                const params: BridgeQuoteRequest = {\r\n                    toChainId: selectedRoute!.toChainId,\r\n                    fromTokenAddress: selectedRoute!.fromTokens[0].address,\r\n                    toTokenAddress: selectedRoute!.toTokens[0].address,\r\n                    fromAmount: bigNumberAmount!.toString(),\r\n                    fromAddress: selectedAddress,\r\n                }\r\n\r\n                const fetchedQuote = await getBridgeQuote(params, true)\r\n                if (isValidFetch) {\r\n                    if (isANotFoundQuote(fetchedQuote)) {\r\n                        setBridgeQuoteError(BridgeErrorType.QUOTE_NOT_FOUND)\r\n                        setQuoteNotFoundErrors(\r\n                            fetchedQuote as GetBridgeQuoteNotFoundResponse\r\n                        )\r\n                    } else {\r\n                        const validQuote =\r\n                            fetchedQuote as GetBridgeQuoteResponse\r\n                        setQuote(validQuote)\r\n                        if (validQuote.quoteFeeStatus !== QuoteFeeStatus.OK) {\r\n                            setBridgeQuoteError(\r\n                                BridgeErrorType.INSUFFICIENT_BALANCE_TO_COVER_FEES\r\n                            )\r\n                        }\r\n                    }\r\n                    setisFetchingQuote(false)\r\n                }\r\n            } catch (error) {\r\n                if (isValidFetch) {\r\n                    setBridgeQuoteError(BridgeErrorType.OTHER)\r\n                    setisFetchingQuote(false)\r\n                }\r\n            }\r\n        }\r\n\r\n        if (\r\n            selectedRoute &&\r\n            selectedAddress &&\r\n            bigNumberAmount &&\r\n            bigNumberAmount.gt(BigNumber.from(0)) &&\r\n            !errors.amount\r\n        ) {\r\n            fetchQuote()\r\n        } else {\r\n            setisFetchingQuote(false)\r\n        }\r\n\r\n        return () => {\r\n            isValidFetch = false\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [bigNumberAmount, errors.amount, selectedAddress, selectedRoute])\r\n\r\n    const bridgeFeeSummary = quote?.bridgeParams.params.feeCosts.reduce(\r\n        (feeDetails, fee) => {\r\n            if (feeDetails) {\r\n                feeDetails = feeDetails.concat(\" + \")\r\n            }\r\n            return feeDetails.concat(\r\n                `${formatRounded(\r\n                    formatUnits(fee.total, fee.token.decimals),\r\n                    4\r\n                )} \r\n                ${fee.token.symbol}`\r\n            )\r\n        },\r\n        \"\"\r\n    )\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    title=\"Bridge\"\r\n                    close=\"/\"\r\n                    keepState\r\n                    networkIndicator\r\n                    onBack={() =>\r\n                        fromAssetPage\r\n                            ? history.push({\r\n                                  pathname: \"/asset/details\",\r\n                                  state: {\r\n                                      address: selectedToken?.address,\r\n                                  },\r\n                              })\r\n                            : history.push(\"/home\")\r\n                    }\r\n                />\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        label={\r\n                            quote?.allowance ===\r\n                            BridgeAllowanceCheck.INSUFFICIENT_ALLOWANCE\r\n                                ? \"Approve\"\r\n                                : \"Review\"\r\n                        }\r\n                        disabled={!!(routesError || bridgeQuoteError || !quote)}\r\n                        isLoading={isFetchingRoutes || isFetchingQuote}\r\n                        onClick={onSubmit}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            {quote && (\r\n                <BridgeDetails\r\n                    tab={bridgeDetails.tab}\r\n                    open={bridgeDetails.isOpen}\r\n                    transaction={populateBridgeTransaction(quote)}\r\n                    onClose={() => setBridgeDetails({ isOpen: false })}\r\n                />\r\n            )}\r\n\r\n            <div className=\"flex flex-col p-6\">\r\n                <div\r\n                    className={classnames(\r\n                        \"flex flex-row\",\r\n                        // Error message height\r\n                        !errors.amount?.message && \"mb-[22px]\"\r\n                    )}\r\n                >\r\n                    {/* Asset */}\r\n                    <div className=\"flex flex-col w-1/2 pr-1.5\">\r\n                        <p className=\"text-sm text-gray-600 pb-2\">\r\n                            Bridge Asset\r\n                        </p>\r\n                        <AssetSelection\r\n                            selectedAssetList={AssetListType.DEFAULT}\r\n                            selectedAsset={\r\n                                selectedToken && selectedTokenBalance\r\n                                    ? {\r\n                                          token: selectedToken,\r\n                                          balance: selectedTokenBalance,\r\n                                      }\r\n                                    : undefined\r\n                            }\r\n                            onAssetChange={(asset) => {\r\n                                setQuote(undefined)\r\n                                setBridgeDataState((prev: BridgeState) => ({\r\n                                    ...prev,\r\n                                    token: asset.token,\r\n                                }))\r\n                            }}\r\n                            topMargin={100}\r\n                            bottomMargin={60}\r\n                            dropdownWidth=\"w-[309px]\"\r\n                            assetBalanceClassName=\"w-24\"\r\n                            addTokenState={{\r\n                                redirectTo: \"/bridge/afterAddToken\",\r\n                                token: selectedToken,\r\n                            }}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Amount */}\r\n                    <div className=\"flex flex-col w-1/2 pl-1.5\">\r\n                        <div className=\"flex flex-row items-center space-x-1 mb-2\">\r\n                            <span\r\n                                className={classnames(\r\n                                    \"ml-auto text-sm\",\r\n                                    isUsingNetworkNativeCurrency && \"invisible\",\r\n                                    isMaxAmountEnabled\r\n                                        ? \"text-blue-500 hover:text-blue-800 cursor-pointer\"\r\n                                        : \"text-gray-600 cursor-default\"\r\n                                )}\r\n                                onClick={() => {\r\n                                    if (isMaxAmountEnabled) {\r\n                                        const parsedAmount = formatUnits(\r\n                                            maxAmount,\r\n                                            selectedToken?.decimals\r\n                                        )\r\n                                        onUpdateAmount(parsedAmount)\r\n                                    }\r\n                                }}\r\n                            >\r\n                                Max\r\n                            </span>\r\n                        </div>\r\n                        <div\r\n                            onClick={focusAmountInput}\r\n                            className={classnames(\r\n                                \"flex flex-col items-stretch rounded-md p-4 h-[4.5rem] hover:bg-primary-200 w-full\",\r\n                                inputFocus\r\n                                    ? \"bg-primary-200\"\r\n                                    : \"bg-primary-100\",\r\n                                errors.amount\r\n                                    ? \"border border-red-400\"\r\n                                    : \"border-opacity-0 border-transparent\"\r\n                            )}\r\n                        >\r\n                            <input\r\n                                {...register(\"amount\")}\r\n                                id=\"amount\"\r\n                                name=\"amount\"\r\n                                onChange={(e) => {\r\n                                    onUpdateAmount(e.target.value)\r\n                                }}\r\n                                maxLength={80}\r\n                                className=\"p-0 text-base bg-transparent border-none font-semibold -mt-0.5\"\r\n                                placeholder={`0.0 ${\r\n                                    selectedToken ? selectedToken.symbol : \"\"\r\n                                }`}\r\n                                autoComplete=\"off\"\r\n                                autoFocus={true}\r\n                                onFocus={() => setInputFocus(true)}\r\n                                onBlur={() => setInputFocus(false)}\r\n                            />\r\n                            <p\r\n                                className={classnames(\r\n                                    \"text-xs text-gray-600 mt-1\",\r\n                                    !formattedAmount && \"hidden\"\r\n                                )}\r\n                            >\r\n                                {formattedAmount}\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div\r\n                    className={classnames(\r\n                        \"mt-1\",\r\n                        !errors.amount?.message && \"hidden\"\r\n                    )}\r\n                >\r\n                    <ErrorMessage>{errors.amount?.message}</ErrorMessage>\r\n                </div>\r\n\r\n                {/* Divider */}\r\n                <div className=\"pt-3 h-8\">\r\n                    <hr className=\"-mx-5\" />\r\n                    <div className=\"flex -translate-y-2/4 justify-center items-center mx-auto rounded-full w-8 h-8 border border-grey-200 bg-white z-10\">\r\n                        <img\r\n                            src={arrowDown}\r\n                            className=\"h-4 w-auto mx-auto\"\r\n                            alt=\"arrow\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Network selector */}\r\n                <p className=\"text-sm text-gray-600 pb-2\">To Network</p>\r\n                <NetworkSelector\r\n                    topMargin={60}\r\n                    bottomMargin={200}\r\n                    networkList={filteredAvailableNetworks}\r\n                    isLoading={isFetchingRoutes}\r\n                    loadingText=\"Loading networks...\"\r\n                    emptyText=\"Select network\"\r\n                    selectedNetwork={\r\n                        selectedToNetwork &&\r\n                        availbleChainsId.includes(selectedToNetwork.id)\r\n                            ? selectedToNetwork\r\n                            : undefined\r\n                    }\r\n                    onNetworkChange={(network) => {\r\n                        setQuote(undefined)\r\n                        setBridgeDataState((prev: BridgeState) => ({\r\n                            ...prev,\r\n                            network: network,\r\n                        }))\r\n                    }}\r\n                />\r\n\r\n                {/* Asset in destination */}\r\n                {selectedRoute && !isFetchingRoutes && (\r\n                    <div className=\"pt-3\">\r\n                        <AssetAmountDisplay\r\n                            asset={selectedRoute.toTokens[0]}\r\n                            amount={\r\n                                quote &&\r\n                                BigNumber.from(\r\n                                    quote.bridgeParams.params.toAmount\r\n                                )\r\n                            }\r\n                        />\r\n                    </div>\r\n                )}\r\n                {/* Bridge fees, details and estimated duration */}\r\n                {quote ? (\r\n                    <>\r\n                        <div className=\"flex flex-row items-center justify-between\">\r\n                            <FeeDetails\r\n                                summary={`Bridge fees: ${bridgeFeeSummary}`}\r\n                            />\r\n                        </div>\r\n                        {!bridgeQuoteError ? (\r\n                            <div className=\"flex flex-col mt-2\">\r\n                                <div className=\"text-gray-600 flex flex-row space-x-2 items-center\">\r\n                                    <span>\r\n                                        Estimated duration:{\" \"}\r\n                                        <span className=\"font-bold\">\r\n                                            {secondsToEstimatedMinutes(\r\n                                                quote.bridgeParams.params\r\n                                                    .estimatedDurationInSeconds\r\n                                            )}\r\n                                        </span>\r\n                                    </span>\r\n                                </div>\r\n                                <ClickableText\r\n                                    className=\"flex mt-2\"\r\n                                    onClick={() =>\r\n                                        setBridgeDetails({\r\n                                            isOpen: true,\r\n                                            tab: \"summary\",\r\n                                        })\r\n                                    }\r\n                                >\r\n                                    View details\r\n                                </ClickableText>\r\n                            </div>\r\n                        ) : null}\r\n                    </>\r\n                ) : null}\r\n                {bridgeQuoteError && (\r\n                    <div>\r\n                        <br />\r\n                        <BridgeErrorMessage\r\n                            type={bridgeQuoteError}\r\n                            onClickDetails={(type) => {\r\n                                if (\r\n                                    type ===\r\n                                    BridgeErrorType.INSUFFICIENT_BALANCE_TO_COVER_FEES\r\n                                ) {\r\n                                    setBridgeDetails({\r\n                                        isOpen: true,\r\n                                        tab: \"fees\",\r\n                                    })\r\n                                } else if (\r\n                                    type === BridgeErrorType.QUOTE_NOT_FOUND\r\n                                ) {\r\n                                    setShowBridgeNotFoundQuoteDetails(true)\r\n                                }\r\n                            }}\r\n                        />\r\n                    </div>\r\n                )}\r\n                {!!quoteNotFoundErrors && (\r\n                    <BridgeNotFoundQuoteDetails\r\n                        open={showBridgeNotFoundQuoteDetails}\r\n                        onClose={() => setShowBridgeNotFoundQuoteDetails(false)}\r\n                        details={quoteNotFoundErrors}\r\n                    />\r\n                )}\r\n                {routesError && !bridgeQuoteError && (\r\n                    <ErrorMessage className=\"mt-4\">{routesError}</ErrorMessage>\r\n                )}\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default BridgeSetupPage\r\n","import AssetAmountDisplay from \"../../components/assets/AssetAmountDisplay\"\r\nimport GasPriceComponent from \"../../components/transactions/GasPriceComponent\"\r\nimport HardwareDeviceNotLinkedDialog from \"../../components/dialog/HardwareDeviceNotLinkedDialog\"\r\nimport NetworkDisplay from \"../../components/network/NetworkDisplay\"\r\nimport PopupFooter from \"../../components/popup/PopupFooter\"\r\nimport PopupHeader from \"../../components/popup/PopupHeader\"\r\nimport PopupLayout from \"../../components/popup/PopupLayout\"\r\nimport WaitingDialog from \"../../components/dialog/WaitingDialog\"\r\nimport arrowDown from \"../../assets/images/icons/arrow_down_long.svg\"\r\nimport useCheckAccountDeviceLinked from \"../../util/hooks/useCheckAccountDeviceLinked\"\r\nimport useLocalStorageState from \"../../util/hooks/useLocalStorageState\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport { GasPriceSelector } from \"../../components/transactions/GasPriceSelector\"\r\nimport {\r\n    HardwareWalletOpTypes,\r\n    QuoteFeeStatus,\r\n    TransactionCategories,\r\n    TransactionStatus,\r\n} from \"../../context/commTypes\"\r\nimport { Token } from \"@block-wallet/background/controllers/erc-20/Token\"\r\nimport { classnames } from \"../../styles\"\r\nimport { getDeviceFromAccountType } from \"../../util/hardwareDevice\"\r\nimport {\r\n    executeBridge,\r\n    getBridgeQuote,\r\n    getLatestGasPrice,\r\n    rejectTransaction,\r\n} from \"../../context/commActions\"\r\nimport {\r\n    isBridgeNativeTokenAddress,\r\n    populateBridgeTransaction,\r\n    isANotFoundQuote,\r\n    getBridgeWarningMessages,\r\n} from \"../../util/bridgeUtils\"\r\nimport { isHardwareWallet } from \"../../util/account\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { useGasPriceData } from \"../../context/hooks/useGasPriceData\"\r\nimport { useHasSufficientBalance } from \"../../context/hooks/useHasSufficientBalance\"\r\nimport { useInProgressInternalTransaction } from \"../../context/hooks/useInProgressInternalTransaction\"\r\nimport { useUserSettings } from \"../../context/hooks/useUserSettings\"\r\nimport { useLocationRecovery } from \"../../util/hooks/useLocationRecovery\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport { useSelectedAccount } from \"../../context/hooks/useSelectedAccount\"\r\nimport { useSelectedNetwork } from \"../../context/hooks/useSelectedNetwork\"\r\nimport {\r\n    useState,\r\n    useEffect,\r\n    useMemo,\r\n    useRef,\r\n    useCallback,\r\n    FunctionComponent,\r\n} from \"react\"\r\nimport { useTokensList } from \"../../context/hooks/useTokensList\"\r\nimport { useTransactionWaitingDialog } from \"../../context/hooks/useTransactionWaitingDialog\"\r\nimport { IBridgeRoute } from \"@block-wallet/background/utils/bridgeApi\"\r\nimport { IChain } from \"@block-wallet/background/utils/types/chain\"\r\nimport useCountdown from \"../../util/hooks/useCountdown\"\r\nimport OutlinedButton from \"../../components/ui/OutlinedButton\"\r\nimport { TransactionAdvancedData } from \"@block-wallet/background/controllers/transactions/utils/types\"\r\nimport {\r\n    AdvancedSettings,\r\n    defaultAdvancedSettings,\r\n} from \"../../components/transactions/AdvancedSettings\"\r\nimport Icon, { IconName } from \"../../components/ui/Icon\"\r\nimport RefreshLabel from \"../../components/swaps/RefreshLabel\"\r\nimport {\r\n    BridgeQuoteRequest,\r\n    BridgeTransaction,\r\n    GetBridgeQuoteResponse,\r\n    GetBridgeQuoteNotFoundResponse,\r\n} from \"@block-wallet/background/controllers/BridgeController\"\r\nimport CollapsableWarning from \"../../components/CollapsableWarning\"\r\nimport { AiOutlineWarning } from \"react-icons/ai\"\r\nimport BridgeDetails from \"../../components/bridge/BridgeDetails\"\r\nimport ErrorMessage from \"../../components/error/ErrorMessage\"\r\nimport BridgeErrorMessage, { BridgeErrorType } from \"./BridgeErrorMessage\"\r\nimport BridgeNotFoundQuoteDetails from \"../../components/transactions/BridgeNotFoundQuoteDetails\"\r\nimport { useSelectedAccountHasEnoughNativeTokensToSend } from \"../../context/hooks/useSelectedAccountHasEnoughNativeTokensToSend\"\r\nimport { isNativeTokenAddress } from \"../../util/tokenUtils\"\r\nimport { WithRequired } from \"@block-wallet/background/utils/types/helpers\"\r\nimport useAwaitAllowanceTransactionDialog from \"../../context/hooks/useAwaitAllowanceTransactionDialog\"\r\nimport { useTransactionById } from \"../../context/hooks/useTransactionById\"\r\nimport WaitingAllowanceTransactionDialog from \"../../components/dialog/WaitingAllowanceTransactionDialog\"\r\nexport interface BridgeConfirmPageLocalState {\r\n    amount: string\r\n    bridgeQuote: GetBridgeQuoteResponse\r\n    network: IChain\r\n    routes: IBridgeRoute[]\r\n    token: Token\r\n    fromAssetPage?: boolean\r\n    allowanceTransactionId?: string\r\n}\r\n\r\n// 20s\r\nconst QUOTE_REFRESH_TIMEOUT = 1000 * 20\r\nconst DEFAULT_BRIDGE_SLIPPAGE = 3\r\n\r\nconst BridgeConfirmPage: FunctionComponent<{}> = () => {\r\n    const history = useOnMountHistory()\r\n    const { bridgeQuote, network, token, allowanceTransactionId } = useMemo(\r\n        () => history.location.state as BridgeConfirmPageLocalState,\r\n        [history.location.state]\r\n    )\r\n\r\n    const [timeoutStart, setTimeoutStart] = useState<number | undefined>(\r\n        undefined\r\n    )\r\n    const { value: remainingSeconds } = useCountdown(\r\n        timeoutStart,\r\n        QUOTE_REFRESH_TIMEOUT\r\n    )\r\n\r\n    const [persistedData, setPersistedData] = useLocalStorageState(\r\n        \"bridge.confirm\",\r\n        {\r\n            initialValue: {\r\n                submitted: false,\r\n            },\r\n            volatile: true,\r\n        }\r\n    )\r\n\r\n    const { clear: clearLocationRecovery } = useLocationRecovery()\r\n    const { transaction: inProgressTransaction, clearTransaction } =\r\n        useInProgressInternalTransaction({\r\n            categories: [TransactionCategories.BRIDGE],\r\n        })\r\n\r\n    const { transaction: allowanceTransaction } = useTransactionById(\r\n        allowanceTransactionId\r\n    )\r\n\r\n    const isInProgressAllowanceTransaction = allowanceTransaction\r\n        ? allowanceTransaction.status !== TransactionStatus.CONFIRMED\r\n        : false\r\n\r\n    const {\r\n        status: allowanceTxDialogStatus,\r\n        isOpen: allowanceTxDialogIsOpen,\r\n        closeDialog: closeAllowanceTxDialog,\r\n    } = useAwaitAllowanceTransactionDialog(allowanceTransaction)\r\n\r\n    useEffect(() => {\r\n        // Redirect to homepage if there is no pending transaction\r\n        if (!inProgressTransaction?.id && persistedData.submitted) {\r\n            history.push(\"/\")\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    const { availableNetworks, selectedNetwork, defaultGasOption } =\r\n        useBlankState()!\r\n    const { gasPricesLevels } = useGasPriceData()\r\n    const { isEIP1559Compatible } = useSelectedNetwork()\r\n    const selectedAccount = useSelectedAccount()\r\n    const { nativeToken } = useTokensList()\r\n\r\n    const [quoteNotFoundErrors, setQuoteNotFoundErrors] = useState<\r\n        GetBridgeQuoteNotFoundResponse | undefined\r\n    >(undefined)\r\n\r\n    const [showBridgeNotFoundQuoteDetails, setShowBridgeNotFoundQuoteDetails] =\r\n        useState<boolean>(false)\r\n    const { isDeviceUnlinked, checkDeviceIsLinked, resetDeviceLinkStatus } =\r\n        useCheckAccountDeviceLinked()\r\n    const { status, isOpen, dispatch, texts, titles, closeDialog, gifs } =\r\n        useTransactionWaitingDialog(\r\n            inProgressTransaction\r\n                ? {\r\n                      id: inProgressTransaction.id,\r\n                      status: inProgressTransaction.status,\r\n                      error: inProgressTransaction.error as Error,\r\n                      epochTime: inProgressTransaction?.approveTime,\r\n                  }\r\n                : undefined,\r\n            HardwareWalletOpTypes.SIGN_TRANSACTION,\r\n            selectedAccount.accountType,\r\n            {\r\n                reject: useCallback(() => {\r\n                    if (inProgressTransaction?.id) {\r\n                        rejectTransaction(inProgressTransaction?.id)\r\n                    }\r\n                }, [inProgressTransaction?.id]),\r\n            }\r\n        )\r\n\r\n    const [isFetchingParams, setIsFetchingParams] = useState<boolean>(false)\r\n    const [isGasLoading, setIsGasLoading] = useState<boolean>(true)\r\n    const [error, setError] = useState<string | undefined>(undefined)\r\n    const [bridgeQuoteError, setBridgeQuoteError] = useState<\r\n        BridgeErrorType | undefined\r\n    >()\r\n    const [bridgeDetailsModal, setBridgeDetailsModal] = useState<{\r\n        isOpen: boolean\r\n        tab?: \"summary\" | \"fees\"\r\n    }>({\r\n        isOpen: false,\r\n        tab: \"summary\",\r\n    })\r\n    const initialBridgeSlippage =\r\n        bridgeQuote?.bridgeParams?.params?.slippage !== undefined\r\n            ? bridgeQuote?.bridgeParams?.params?.slippage * 100\r\n            : DEFAULT_BRIDGE_SLIPPAGE\r\n    const [advancedSettings, setAdvancedSettings] = useLocalStorageState<\r\n        WithRequired<TransactionAdvancedData, \"slippage\">\r\n    >(\"bridge.advancedSettings\", {\r\n        initialValue: {\r\n            ...defaultAdvancedSettings,\r\n            slippage: initialBridgeSlippage,\r\n        },\r\n    })\r\n    const [quote, setQuote] = useState<GetBridgeQuoteResponse | undefined>(\r\n        bridgeQuote\r\n    )\r\n    const { fromAmount, fromToken, transactionRequest, toChainId, toToken } =\r\n        bridgeQuote.bridgeParams.params\r\n    // Gas\r\n    const [defaultGas, setDefaultGas] = useState<{\r\n        gasPrice: BigNumber\r\n        gasLimit: BigNumber\r\n    }>({\r\n        gasPrice: BigNumber.from(gasPricesLevels.average.gasPrice ?? \"0\"),\r\n        gasLimit: BigNumber.from(0),\r\n    })\r\n    const [selectedFees, setSelectedFees] = useState({\r\n        maxPriorityFeePerGas: BigNumber.from(\r\n            gasPricesLevels.average.maxPriorityFeePerGas ?? \"0\"\r\n        ),\r\n        maxFeePerGas: BigNumber.from(\r\n            gasPricesLevels.average.maxFeePerGas ?? \"0\"\r\n        ),\r\n    })\r\n    const [selectedGasPrice, setSelectedGasPrice] = useState(\r\n        BigNumber.from(gasPricesLevels.average.gasPrice ?? \"0\")\r\n    )\r\n    const [selectedGasLimit, setSelectedGasLimit] = useState(\r\n        BigNumber.from(transactionRequest.gasLimit || 0)\r\n    )\r\n\r\n    const isBridging = status === \"loading\" && isOpen\r\n    const shouldFetchBridgeParams = status !== \"loading\" && status !== \"success\"\r\n    const isGasInitialized = useRef<boolean>(false)\r\n    const remainingSuffix = Math.ceil(remainingSeconds!)\r\n        ? `${Math.floor(remainingSeconds!)}s`\r\n        : \"\"\r\n    const networkLabel = availableNetworks[selectedNetwork.toUpperCase()]\r\n\r\n    // Balance check\r\n    const feePerGas = isEIP1559Compatible\r\n        ? selectedFees.maxFeePerGas\r\n        : selectedGasPrice\r\n\r\n    const fee = selectedGasLimit.mul(feePerGas)\r\n\r\n    const isBridgingNativeToken = isBridgeNativeTokenAddress(token.address)\r\n    const total = isBridgingNativeToken\r\n        ? BigNumber.from(\r\n              quote?.bridgeParams.params.fromAmount || fromAmount\r\n          ).add(fee)\r\n        : fee\r\n\r\n    const hasNativeAssetBalance = useHasSufficientBalance(\r\n        total,\r\n        nativeToken.token\r\n    )\r\n    const hasFromTokenBalance = useHasSufficientBalance(\r\n        BigNumber.from(quote?.bridgeParams.params.fromAmount || fromAmount),\r\n        token\r\n    )\r\n\r\n    const hasBalance = isBridgingNativeToken\r\n        ? hasNativeAssetBalance\r\n        : hasNativeAssetBalance && hasFromTokenBalance\r\n\r\n    useEffect(() => {\r\n        if (!hasBalance) {\r\n            if (!error) {\r\n                setError(\r\n                    \"You don't have enough balance to cover the bridge and the gas costs\"\r\n                )\r\n            }\r\n        } else {\r\n            setError(undefined)\r\n        }\r\n    }, [hasBalance, quote])\r\n\r\n    const { hideBridgeInsufficientNativeTokenWarning } = useUserSettings()\r\n    const {\r\n        isLoading: isLoadingSelectedAccountHasEnoughNativeTokensToSend,\r\n        result: selectedAccountNativeTokensInDestinationNetwork,\r\n        check: checkSelectedAccountHasEnoughNativeTokensToSend,\r\n    } = useSelectedAccountHasEnoughNativeTokensToSend(toChainId)\r\n\r\n    const destinationTokenIsNative = isNativeTokenAddress(toToken.address)\r\n    const destinationNetwork = Object.values(availableNetworks).find(\r\n        (n) => n.chainId === toChainId\r\n    )\r\n\r\n    const checkNativeTokensInDestinationNetwork =\r\n        !hideBridgeInsufficientNativeTokenWarning && !destinationTokenIsNative\r\n\r\n    useEffect(() => {\r\n        if (checkNativeTokensInDestinationNetwork) {\r\n            checkSelectedAccountHasEnoughNativeTokensToSend()\r\n        }\r\n    }, [])\r\n\r\n    const idleScreen =\r\n        !isInProgressAllowanceTransaction && !inProgressTransaction?.id\r\n    const bridgeWarningMessage =\r\n        checkNativeTokensInDestinationNetwork &&\r\n        !isLoadingSelectedAccountHasEnoughNativeTokensToSend &&\r\n        !!selectedAccountNativeTokensInDestinationNetwork\r\n            ? getBridgeWarningMessages(\r\n                  selectedAccountNativeTokensInDestinationNetwork,\r\n                  destinationNetwork\r\n              )\r\n            : undefined\r\n\r\n    const showBridgeWarningMessage = idleScreen && !!bridgeWarningMessage\r\n\r\n    const onSubmit = async () => {\r\n        if (error || !quote || bridgeQuoteError) return\r\n\r\n        dispatch({ type: \"open\", payload: { status: \"loading\" } })\r\n        const isLinked = await checkDeviceIsLinked()\r\n        if (isLinked) {\r\n            if (!isHardwareWallet(selectedAccount.accountType)) {\r\n                clearLocationRecovery()\r\n            }\r\n\r\n            setPersistedData({\r\n                submitted: true,\r\n            })\r\n\r\n            const txParams: BridgeTransaction = {\r\n                ...quote.bridgeParams,\r\n                customNonce: advancedSettings.customNonce,\r\n                flashbots: advancedSettings.flashbots,\r\n                gasPrice: isEIP1559Compatible\r\n                    ? undefined\r\n                    : selectedGasPrice ||\r\n                      BigNumber.from(\r\n                          quote.bridgeParams.params.transactionRequest.gasLimit\r\n                      ),\r\n                maxPriorityFeePerGas: isEIP1559Compatible\r\n                    ? selectedFees.maxPriorityFeePerGas\r\n                    : undefined,\r\n                maxFeePerGas: isEIP1559Compatible\r\n                    ? selectedFees.maxFeePerGas\r\n                    : undefined,\r\n                gasLimit: selectedGasLimit,\r\n            }\r\n\r\n            await executeBridge(txParams)\r\n        } else {\r\n            closeDialog()\r\n        }\r\n    }\r\n\r\n    // Initialize gas\r\n    useEffect(() => {\r\n        const setGas = async () => {\r\n            if (!quote && error) {\r\n                setIsGasLoading(false)\r\n            }\r\n\r\n            if (quote && isGasInitialized.current === false) {\r\n                setIsGasLoading(true)\r\n\r\n                try {\r\n                    let gasPrice: BigNumber = BigNumber.from(0)\r\n\r\n                    if (!isEIP1559Compatible) {\r\n                        gasPrice = await getLatestGasPrice()\r\n                    }\r\n\r\n                    setDefaultGas({\r\n                        gasPrice: BigNumber.from(gasPrice),\r\n                        gasLimit: BigNumber.from(\r\n                            quote.bridgeParams.params.transactionRequest\r\n                                .gasLimit\r\n                        ),\r\n                    })\r\n\r\n                    isGasInitialized.current = true\r\n                } catch (error) {\r\n                    setError(\"Error fetching gas default\")\r\n                } finally {\r\n                    setIsGasLoading(false)\r\n                }\r\n            }\r\n        }\r\n\r\n        setGas()\r\n\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [quote, error])\r\n\r\n    useEffect(() => {\r\n        let isValidFetch = true\r\n        let timeoutRef: NodeJS.Timeout\r\n        if (!shouldFetchBridgeParams || isInProgressAllowanceTransaction) {\r\n            setTimeoutStart(undefined)\r\n            return\r\n        }\r\n\r\n        async function fetchQuoteParams() {\r\n            setError(undefined)\r\n            setBridgeQuoteError(undefined)\r\n            const params: BridgeQuoteRequest = {\r\n                toChainId: toChainId,\r\n                fromTokenAddress: fromToken.address,\r\n                toTokenAddress: toToken.address,\r\n                fromAmount: fromAmount,\r\n                fromAddress: selectedAccount.address,\r\n                slippage: advancedSettings.slippage / 100,\r\n            }\r\n\r\n            setIsFetchingParams(true)\r\n            let errorType: BridgeErrorType | undefined\r\n            let fetchedQuote:\r\n                | GetBridgeQuoteResponse\r\n                | GetBridgeQuoteNotFoundResponse\r\n                | undefined\r\n            let validQuote: GetBridgeQuoteResponse | undefined\r\n            let invalidQuote: GetBridgeQuoteNotFoundResponse | undefined\r\n            try {\r\n                fetchedQuote = await getBridgeQuote(params)\r\n                if (isANotFoundQuote(fetchedQuote)) {\r\n                    errorType = BridgeErrorType.QUOTE_NOT_FOUND\r\n                    invalidQuote =\r\n                        fetchedQuote as GetBridgeQuoteNotFoundResponse\r\n                } else {\r\n                    validQuote = fetchedQuote as GetBridgeQuoteResponse\r\n                    if (validQuote.quoteFeeStatus !== QuoteFeeStatus.OK) {\r\n                        errorType =\r\n                            BridgeErrorType.INSUFFICIENT_BALANCE_TO_COVER_FEES\r\n                    }\r\n                }\r\n            } catch (error) {\r\n                errorType = BridgeErrorType.OTHER\r\n            } finally {\r\n                //in case the effect was unmounted after invoking the background\r\n                if (isValidFetch) {\r\n                    setTimeoutStart(\r\n                        fetchedQuote ? new Date().getTime() : undefined\r\n                    )\r\n                    setQuote(validQuote)\r\n                    setQuoteNotFoundErrors(invalidQuote)\r\n                    setIsFetchingParams(false)\r\n                    setBridgeQuoteError(errorType)\r\n                }\r\n            }\r\n        }\r\n        //first render, run function manually\r\n        async function fetchParams() {\r\n            await fetchQuoteParams()\r\n            timeoutRef = setTimeout(fetchParams, QUOTE_REFRESH_TIMEOUT)\r\n        }\r\n\r\n        fetchParams()\r\n        // Cleanup timer\r\n        return () => {\r\n            isValidFetch = false\r\n            clearTimeout(timeoutRef)\r\n        }\r\n    }, [\r\n        advancedSettings.slippage,\r\n        fromAmount,\r\n        fromToken.address,\r\n        toChainId,\r\n        toToken.address,\r\n        isInProgressAllowanceTransaction,\r\n        selectedAccount.address,\r\n        shouldFetchBridgeParams,\r\n    ])\r\n\r\n    return (\r\n        <PopupLayout\r\n            header={\r\n                <PopupHeader\r\n                    title=\"Bridge\"\r\n                    close=\"/\"\r\n                    networkIndicator\r\n                    onBack={() => {\r\n                        // Avoid returning to the approve page.\r\n                        history.push({\r\n                            pathname: \"/bridge\",\r\n                            state: history.location.state,\r\n                        })\r\n                    }}\r\n                    disabled={isBridging}\r\n                />\r\n            }\r\n            footer={\r\n                <PopupFooter>\r\n                    <ButtonWithLoading\r\n                        label=\"Bridge\"\r\n                        isLoading={\r\n                            error || isInProgressAllowanceTransaction\r\n                                ? false\r\n                                : !quote ||\r\n                                  isGasLoading ||\r\n                                  isFetchingParams ||\r\n                                  isBridging ||\r\n                                  !!isLoadingSelectedAccountHasEnoughNativeTokensToSend\r\n                        }\r\n                        onClick={onSubmit}\r\n                        disabled={!!error || !!bridgeQuoteError}\r\n                    />\r\n                </PopupFooter>\r\n            }\r\n        >\r\n            <WaitingAllowanceTransactionDialog\r\n                status={allowanceTxDialogStatus}\r\n                isOpen={allowanceTxDialogIsOpen}\r\n                onSuccess={closeAllowanceTxDialog}\r\n                onError={() =>\r\n                    history.push({\r\n                        pathname: \"/bridge\",\r\n                        state: {\r\n                            ...history.location.state,\r\n                            allowanceTransactionId: undefined,\r\n                        },\r\n                    })\r\n                }\r\n                operation=\"bridge\"\r\n            />\r\n            <WaitingDialog\r\n                open={isOpen}\r\n                status={status}\r\n                titles={{\r\n                    loading: titles?.loading || \"Bridging...\",\r\n                    success: titles?.success || \"Success\",\r\n                    error: titles?.error || \"Error\",\r\n                }}\r\n                texts={{\r\n                    loading: texts?.loading || \"Initiating the bridging...\",\r\n                    success: titles?.success || \"You've initiated the bridging\",\r\n                    error: texts?.error || \"Error bridging\",\r\n                }}\r\n                clickOutsideToClose={false}\r\n                txHash={inProgressTransaction?.transactionParams.hash}\r\n                timeout={2900}\r\n                gifs={gifs}\r\n                onDone={useCallback(() => {\r\n                    if (status === \"error\") {\r\n                        closeDialog()\r\n                        setPersistedData({\r\n                            submitted: false,\r\n                        })\r\n                        clearTransaction()\r\n                        return\r\n                    }\r\n\r\n                    history.push(\"/\")\r\n                }, [\r\n                    status,\r\n                    history,\r\n                    closeDialog,\r\n                    setPersistedData,\r\n                    clearTransaction,\r\n                ])}\r\n            />\r\n            {quote && (\r\n                <BridgeDetails\r\n                    transaction={populateBridgeTransaction(quote)}\r\n                    open={bridgeDetailsModal.isOpen}\r\n                    onClose={() => setBridgeDetailsModal({ isOpen: false })}\r\n                    nonce={advancedSettings.customNonce}\r\n                    tab={bridgeDetailsModal.tab}\r\n                />\r\n            )}\r\n            <HardwareDeviceNotLinkedDialog\r\n                onDone={resetDeviceLinkStatus}\r\n                isOpen={isDeviceUnlinked}\r\n                vendor={getDeviceFromAccountType(selectedAccount.accountType)}\r\n                address={selectedAccount.address}\r\n            />\r\n            {showBridgeWarningMessage && (\r\n                <CollapsableWarning\r\n                    isCollapsedByDefault={false}\r\n                    collapsedMessage={\r\n                        <div\r\n                            className={classnames(\r\n                                \"text-center opacity-90 w-full p-2 bg-yellow-200 hover:bg-yellow-100 space-x-2 flex tems-center font-bold justify-center\"\r\n                            )}\r\n                        >\r\n                            <AiOutlineWarning className=\"w-4 h-4 yellow-300\" />\r\n                            <span className=\"font-bold\">\r\n                                {bridgeWarningMessage.title}\r\n                            </span>\r\n                        </div>\r\n                    }\r\n                    dialog={{\r\n                        title: bridgeWarningMessage.title,\r\n                        message: (\r\n                            <div>\r\n                                <span>{bridgeWarningMessage.body}</span>\r\n                            </div>\r\n                        ),\r\n                    }}\r\n                />\r\n            )}\r\n            <div className=\"flex flex-col px-6 py-3\">\r\n                {/* From Token */}\r\n                <AssetAmountDisplay\r\n                    asset={token}\r\n                    amount={BigNumber.from(fromAmount)}\r\n                />\r\n\r\n                {/* Divider */}\r\n                <div className=\"pt-6\">\r\n                    <hr className=\"-mx-5\" />\r\n                    <div className=\"flex -translate-y-2/4 justify-center items-center mx-auto rounded-full w-8 h-8 border border-grey-200 bg-white z-10\">\r\n                        <img\r\n                            src={arrowDown}\r\n                            className=\"h-4 w-auto mx-auto\"\r\n                            alt=\"arrow\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* To */}\r\n                <div className=\"-mt-2\">\r\n                    <AssetAmountDisplay\r\n                        asset={toToken}\r\n                        amount={\r\n                            quote &&\r\n                            BigNumber.from(quote.bridgeParams.params.toAmount)\r\n                        }\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"py-1\">\r\n                    <NetworkDisplay network={network} />\r\n                </div>\r\n\r\n                {/* Gas */}\r\n                <p className=\"text-sm text-gray-600 pt-1 pb-2\">Gas Price</p>\r\n                {isEIP1559Compatible ? (\r\n                    <GasPriceComponent\r\n                        defaultGas={{\r\n                            defaultLevel: defaultGasOption || \"medium\",\r\n                            feeData: {\r\n                                gasLimit: defaultGas.gasLimit,\r\n                            },\r\n                        }}\r\n                        setGas={(gasFees) => {\r\n                            setSelectedGasLimit(gasFees.gasLimit!)\r\n                            setSelectedFees({\r\n                                maxFeePerGas: gasFees.maxFeePerGas!,\r\n                                maxPriorityFeePerGas:\r\n                                    gasFees.maxPriorityFeePerGas!,\r\n                            })\r\n                        }}\r\n                        isParentLoading={isGasLoading}\r\n                        disabled={isGasLoading}\r\n                        minGasLimit={\r\n                            transactionRequest\r\n                                ? transactionRequest.gasLimit\r\n                                : undefined\r\n                        }\r\n                        displayOnlyMaxValue\r\n                    />\r\n                ) : (\r\n                    <GasPriceSelector\r\n                        defaultLevel={defaultGasOption || \"medium\"}\r\n                        defaultGasLimit={defaultGas.gasLimit}\r\n                        defaultGasPrice={defaultGas.gasPrice}\r\n                        setGasPriceAndLimit={(gasPrice, gasLimit) => {\r\n                            setSelectedGasPrice(gasPrice)\r\n                            setSelectedGasLimit(gasLimit)\r\n                        }}\r\n                        isParentLoading={isGasLoading}\r\n                        disabled={isGasLoading}\r\n                    />\r\n                )}\r\n\r\n                <div className=\"flex flex-row items-center pt-2\">\r\n                    {/* Settings */}\r\n                    <AdvancedSettings\r\n                        address={selectedAccount.address}\r\n                        advancedSettings={advancedSettings}\r\n                        defaultSettings={{\r\n                            ...defaultAdvancedSettings,\r\n                            slippage: initialBridgeSlippage,\r\n                        }}\r\n                        display={{\r\n                            nonce: true,\r\n                            flashbots: true,\r\n                            slippage: true,\r\n                        }}\r\n                        setAdvancedSettings={(\r\n                            newSettings: TransactionAdvancedData\r\n                        ) => {\r\n                            setAdvancedSettings({\r\n                                ...newSettings,\r\n                                slippage:\r\n                                    newSettings.slippage !== undefined\r\n                                        ? newSettings.slippage\r\n                                        : initialBridgeSlippage,\r\n                            })\r\n                        }}\r\n                        label={\"Settings\"}\r\n                    />\r\n                    {/* Details */}\r\n                    <OutlinedButton\r\n                        onClick={() => {\r\n                            quote &&\r\n                                setBridgeDetailsModal({\r\n                                    isOpen: true,\r\n                                    tab: \"summary\",\r\n                                })\r\n                        }}\r\n                        className={classnames(\r\n                            \"w-full ml-2\",\r\n                            !quote && \"cursor-not-allowed hover:border-default\"\r\n                        )}\r\n                    >\r\n                        <span className=\"font-bold text-sm\">Details</span>\r\n                        <Icon name={IconName.RIGHT_CHEVRON} size=\"sm\" />\r\n                    </OutlinedButton>\r\n                </div>\r\n                {!!quoteNotFoundErrors && (\r\n                    <BridgeNotFoundQuoteDetails\r\n                        open={showBridgeNotFoundQuoteDetails}\r\n                        onClose={() => setShowBridgeNotFoundQuoteDetails(false)}\r\n                        details={quoteNotFoundErrors}\r\n                    />\r\n                )}\r\n                {bridgeQuoteError && (\r\n                    <BridgeErrorMessage\r\n                        type={bridgeQuoteError}\r\n                        onClickDetails={(type) => {\r\n                            if (\r\n                                type ===\r\n                                BridgeErrorType.INSUFFICIENT_BALANCE_TO_COVER_FEES\r\n                            ) {\r\n                                setBridgeDetailsModal({\r\n                                    isOpen: true,\r\n                                    tab: \"fees\",\r\n                                })\r\n                            }\r\n\r\n                            if (type === BridgeErrorType.QUOTE_NOT_FOUND) {\r\n                                setShowBridgeNotFoundQuoteDetails(true)\r\n                            }\r\n                        }}\r\n                        className=\"mt-1\"\r\n                    />\r\n                )}\r\n                {/** Only display custom errors if there isn't a quote error already. */}\r\n                {error && !bridgeQuoteError && (\r\n                    <ErrorMessage className=\"mt-2\">{error}</ErrorMessage>\r\n                )}\r\n                {remainingSuffix &&\r\n                    !isFetchingParams &&\r\n                    !error &&\r\n                    bridgeQuote && (\r\n                        <RefreshLabel\r\n                            value={remainingSuffix}\r\n                            className=\"pt-4\"\r\n                        />\r\n                    )}\r\n            </div>\r\n        </PopupLayout>\r\n    )\r\n}\r\n\r\nexport default BridgeConfirmPage\r\n","import { makeRoutes } from \"../util/makeRoutes\"\r\nimport SignPage from \"../routes/dApp/SignPage\"\r\nimport ConnectPage from \"../routes/connect/ConnectPage\"\r\nimport ConnectedSitesPage from \"../routes/settings/ConnectedSitesPage\"\r\nimport ConnectedSiteAccountsPage from \"../routes/settings/ConnectedSiteAccountsPage\"\r\nimport TransactionConfirmPage from \"../routes/dApp/TransactionConfirmPage\"\r\nimport AccountsPage from \"../routes/account/AccountsPage\"\r\nimport PopupPage from \"../routes/PopupPage\"\r\nimport ReceivePage from \"../routes/ReceivePage\"\r\nimport SendConfirmPage from \"../routes/send/SendConfirmPage\"\r\nimport SendPage from \"../routes/send/SendPage\"\r\nimport CreateAccountPage from \"../routes/account/CreateAccountPage\"\r\nimport AddTokensPage from \"../routes/settings/AddTokensPage\"\r\nimport AddTokensConfirmPage from \"../routes/settings/AddTokensConfirmPage\"\r\nimport ExportAccountPage from \"../routes/settings/ExportAccountPage\"\r\nimport ExportDonePage from \"../routes/settings/ExportDonePage\"\r\nimport SettingsPage from \"../routes/settings/SettingsPage\"\r\nimport AboutPage from \"../routes/settings/AboutPage\"\r\nimport ReminderPage from \"../routes/ReminderPage\"\r\nimport BackupConfirmPage from \"../routes/setup/BackupConfirmPage\"\r\nimport BackupDonePage from \"../routes/BackupDonePage\"\r\nimport ErrorFallbackPage from \"../components/error/ErrorFallbackPage\"\r\nimport AddressBookPage from \"../routes/settings/AddressBookPage\"\r\nimport AddContactPage from \"../routes/settings/AddContactPage\"\r\nimport SwitchEthereumChain from \"../routes/dApp/SwitchEthereumChain\"\r\nimport AddEthereumChain from \"../routes/dApp/AddEthereumChain\"\r\nimport LockTimeout from \"../routes/settings/LockTimeout\"\r\nimport AccountMenu from \"../components/account/AccountMenu\"\r\nimport ResetAccountPage from \"../routes/account/ResetAccountPage\"\r\nimport EditAccountPage from \"../routes/account/EditAccountPage\"\r\nimport WatchAssetPage from \"../routes/dApp/WatchAsset\"\r\nimport SpeedUpPage from \"../routes/transaction/SpeedUpPage\"\r\nimport CancelPage from \"../routes/transaction/CancelPage\"\r\nimport ApproveAssetPage from \"../routes/dApp/ApproveAsset\"\r\nimport AssetDetailsPage from \"../components/assets/AssetDetailsPage\"\r\nimport PhishingProtectionPreferencesPage from \"../routes/preferences/PhishingProtectionPreferencesPage\"\r\nimport LocalePreferencesPage from \"../routes/preferences/LocalePreferencesPage\"\r\nimport PreferencesPage from \"../routes/settings/PreferencesPage\"\r\nimport DefaultWalletPreferencesPage from \"../routes/preferences/DefaultWalletPreferencesPage\"\r\nimport DefaultGasPreferencesPage from \"../routes/preferences/DefaultGasPreferencesPage\"\r\nimport ReleaseNotesPreferencesPage from \"../routes/preferences/ReleaseNotesPreferencesPage\"\r\nimport OnDemandReleaseNotesPage from \"../components/releaseNotes/OnDemandReleaseNotesPage\"\r\nimport WelcomeInfo from \"../components/info/WelcomeInfo\"\r\nimport WarningsPreferencesPage from \"../routes/preferences/WarningsPreferencesPage\"\r\nimport { TransitionRouteProps } from \"./TransitionRoute\"\r\nimport ApprovePage from \"../routes/transaction/ApprovePage\"\r\nimport AddAccountPage from \"../routes/account/AddAccountPage\"\r\nimport ImportAccountPage from \"../routes/account/ImportAccountPage\"\r\nimport ApproveNFTPage from \"../routes/dApp/ApproveNFT\"\r\nimport SwapPage from \"../routes/swap/SwapPage\"\r\nimport SwapPageConfirm from \"../routes/swap/SwapConfirmPage\"\r\nimport SwapAfterAddTokenPage from \"../routes/swap/SwapAfterAddTokenPage\"\r\nimport NetworksPage from \"../routes/networks/NetworksPage\"\r\nimport NetworkDetailsPage from \"../routes/networks/NetworkDetailsPage\"\r\nimport SearchNetworkPage from \"../routes/networks/SearchNetworkPage\"\r\nimport SuggestedAddNetwork from \"../routes/networks/SuggestedAddNetwork\"\r\nimport ManuallyAddNetwork from \"../routes/networks/ManuallyAddNetwork\"\r\nimport SetupBridgePage from \"../routes/bridge/BridgeSetupPage\"\r\nimport BridgeConfirmPage from \"../routes/bridge/BridgeConfirmPage\"\r\nimport BridgeAfterAddTokenPage from \"../routes/bridge/BridgeAfterAddTokenPage\"\r\n\r\nexport const ROUTES_DEFINITION = [\r\n    /* Root */\r\n    { path: \"/home\", exact: true, component: PopupPage },\r\n    {\r\n        path: \"/release-notes/:version\",\r\n        exact: true,\r\n        component: OnDemandReleaseNotesPage,\r\n    },\r\n    /* Transactions */\r\n    { path: \"/transaction/cancel\", exact: true, component: CancelPage },\r\n    { path: \"/transaction/speedUp\", exact: true, component: SpeedUpPage },\r\n    { path: \"/transaction/approve\", exact: true, component: ApprovePage },\r\n    /* My Accounts */\r\n    { path: \"/accounts\", exact: true, component: AccountsPage },\r\n    {\r\n        path: \"/accounts/create\",\r\n        exact: true,\r\n        component: CreateAccountPage,\r\n    },\r\n    {\r\n        path: \"/accounts/create/add\",\r\n        exact: true,\r\n        component: AddAccountPage,\r\n    },\r\n    {\r\n        path: \"/accounts/create/import\",\r\n        exact: true,\r\n        component: ImportAccountPage,\r\n    },\r\n    { path: \"/accounts/menu\", exact: true, component: AccountMenu },\r\n    { path: \"/accounts/menu/edit\", exact: true, component: EditAccountPage },\r\n    /* Receive */\r\n    { path: \"/accounts/menu/receive\", exact: true, component: ReceivePage },\r\n\r\n    {\r\n        path: \"/accounts/menu/connectedSites\",\r\n        exact: true,\r\n        component: ConnectedSitesPage,\r\n    },\r\n    {\r\n        path: \"/accounts/menu/connectedSites/accountList\",\r\n        exact: true,\r\n        component: ConnectedSiteAccountsPage,\r\n    },\r\n    {\r\n        path: \"/accounts/menu/reset\",\r\n        exact: true,\r\n        component: ResetAccountPage,\r\n    },\r\n    /* Send */\r\n    { path: \"/send\", exact: true, component: SendPage },\r\n    {\r\n        path: \"/send/confirm\",\r\n        exact: true,\r\n        component: SendConfirmPage,\r\n    },\r\n    /* Swap */\r\n    { path: \"/swap\", exact: true, component: SwapPage },\r\n    { path: \"/swap/confirm\", exact: true, component: SwapPageConfirm },\r\n    {\r\n        path: \"/swap/afterAddToken\",\r\n        exact: true,\r\n        component: SwapAfterAddTokenPage,\r\n    },\r\n    /* Bridge */\r\n    { path: \"/bridge\", exact: true, component: SetupBridgePage },\r\n    { path: \"/bridge/confirm\", exact: true, component: BridgeConfirmPage },\r\n    {\r\n        path: \"/bridge/afterAddToken\",\r\n        exact: true,\r\n        component: BridgeAfterAddTokenPage,\r\n    },\r\n\r\n    /* Settings */\r\n    { path: \"/settings\", exact: true, component: SettingsPage },\r\n    { path: \"/settings/about\", exact: true, component: AboutPage },\r\n    { path: \"/settings/preferences\", exact: true, component: PreferencesPage },\r\n    {\r\n        path: \"/settings/preferences/phishing\",\r\n        exact: true,\r\n        component: PhishingProtectionPreferencesPage,\r\n    },\r\n    {\r\n        path: \"/settings/preferences/locale\",\r\n        exact: true,\r\n        component: LocalePreferencesPage,\r\n    },\r\n\r\n    {\r\n        path: \"/settings/preferences/releaseNotes\",\r\n        exact: true,\r\n        component: ReleaseNotesPreferencesPage,\r\n    },\r\n\r\n    {\r\n        path: \"/settings/preferences/warnings\",\r\n        exact: true,\r\n        component: WarningsPreferencesPage,\r\n    },\r\n\r\n    {\r\n        path: \"/settings/preferences/lockTimeout\",\r\n        exact: true,\r\n        component: LockTimeout,\r\n    },\r\n\r\n    {\r\n        path: \"/settings/preferences/defaultWallet\",\r\n        exact: true,\r\n        component: DefaultWalletPreferencesPage,\r\n    },\r\n    {\r\n        path: \"/settings/preferences/defaultGas\",\r\n        exact: true,\r\n        component: DefaultGasPreferencesPage,\r\n    },\r\n\r\n    { path: \"/settings/tokens/add\", exact: true, component: AddTokensPage },\r\n    {\r\n        path: \"/settings/tokens/add/confirm\",\r\n        exact: true,\r\n        component: AddTokensConfirmPage,\r\n    },\r\n    {\r\n        path: \"/accounts/menu/export\",\r\n        exact: true,\r\n        component: ExportAccountPage,\r\n    },\r\n    {\r\n        path: \"/accounts/menu/export/done\",\r\n        exact: true,\r\n        component: ExportDonePage,\r\n        blockListedForRecovery: true,\r\n    },\r\n    /* Address Book */\r\n    {\r\n        path: \"/settings/addressBook\",\r\n        exact: true,\r\n        component: AddressBookPage,\r\n    },\r\n    {\r\n        path: \"/settings/addressBook/add\",\r\n        exact: true,\r\n        component: AddContactPage,\r\n    },\r\n    /** Switch Ethereum Chain */\r\n    { path: \"/chain/switch\", exact: true, component: SwitchEthereumChain },\r\n    /** Add Ethereum Chain */\r\n    { path: \"/chain/add\", exact: true, component: AddEthereumChain },\r\n    /* Sign */\r\n    { path: \"/sign\", exact: true, component: SignPage },\r\n    /* Watch Asset */\r\n    { path: \"/asset\", exact: true, component: WatchAssetPage },\r\n    /* Asset Details */\r\n    { path: \"/asset/details\", exact: true, component: AssetDetailsPage },\r\n    /* Connect */\r\n    { path: \"/connect\", exact: true, component: ConnectPage },\r\n    /* Asset approval */\r\n    { path: \"/approveAsset\", exact: true, component: ApproveAssetPage },\r\n    /* NFT approval */\r\n    { path: \"/approveNFT\", exact: true, component: ApproveNFTPage },\r\n    /* Transaction */\r\n    {\r\n        path: \"/transaction/confirm\",\r\n        exact: true,\r\n        component: TransactionConfirmPage,\r\n        blockListedForRecovery: true,\r\n    },\r\n    /* Networks config */\r\n    { path: \"/settings/networks\", exact: true, component: NetworksPage },\r\n    {\r\n        path: \"/settings/networks/details\",\r\n        exact: true,\r\n        component: NetworkDetailsPage,\r\n    },\r\n    {\r\n        path: \"/settings/networks/search\",\r\n        exact: true,\r\n        component: SearchNetworkPage,\r\n    },\r\n    {\r\n        path: \"/settings/networks/add/suggested\",\r\n        exact: true,\r\n        component: SuggestedAddNetwork,\r\n    },\r\n    {\r\n        path: \"/settings/networks/add/manual\",\r\n        exact: true,\r\n        component: ManuallyAddNetwork,\r\n    },\r\n    /* Reminder to backup seed phrase */\r\n    { path: \"/reminder\", exact: true, component: ReminderPage },\r\n    { path: \"/reminder/backup\", exact: true, component: BackupConfirmPage },\r\n    { path: \"/reminder/backup/done\", exact: true, component: BackupDonePage },\r\n    { path: \"/error\", exact: true, component: ErrorFallbackPage },\r\n    /* Welcome Message */\r\n    { path: \"/welcome\", exact: true, component: WelcomeInfo },\r\n] as TransitionRouteProps[]\r\n\r\nexport const appRoutes = makeRoutes(ROUTES_DEFINITION)\r\n","import { Token } from \"@block-wallet/background/controllers/erc-20/Token\"\r\nimport { useEffect } from \"react\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\n\r\ninterface AfterAddTokenState {\r\n    token: Token\r\n    amount?: string\r\n}\r\n\r\n//This route only handles the add token callback for the bridge feature.\r\n//After collecting the state, it redirects to the /bridge route.\r\nconst BridgeAfterAddTokenPage = () => {\r\n    const history = useOnMountHistory()\r\n    const state = history.location.state\r\n    const { token, amount } = state as AfterAddTokenState\r\n    useEffect(() => {\r\n        history.replace({\r\n            pathname: \"/bridge\",\r\n            state: {\r\n                token,\r\n                amount,\r\n            },\r\n        })\r\n    }, [amount, history, token])\r\n\r\n    return null\r\n}\r\n\r\nexport default BridgeAfterAddTokenPage\r\n","import { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport {\r\n    dismissReleaseNotes,\r\n    dismissWelcomeMessage,\r\n    dismissDefaultWalletPreferences,\r\n} from \"../../context/commActions\"\r\nimport DefaultWalletPreferencesPage from \"../../routes/preferences/DefaultWalletPreferencesPage\"\r\nimport ReleaseNotesInfo from \"../info/ReleaseNotesInfo\"\r\nimport WelcomeInfo from \"../info/WelcomeInfo\"\r\n\r\nconst WalletNews = ({ children }: { children: React.ReactNode }) => {\r\n    const state = useBlankState()!\r\n    if (state?.showWelcomeMessage) {\r\n        if (state?.showDefaultWalletPreferences) {\r\n            return (\r\n                <DefaultWalletPreferencesPage\r\n                    isWelcome={true}\r\n                    dismissDefaultWalletPreferences={\r\n                        dismissDefaultWalletPreferences\r\n                    }\r\n                />\r\n            )\r\n        } else {\r\n            return <WelcomeInfo onDismiss={dismissWelcomeMessage} />\r\n        }\r\n    }\r\n    if (state.releaseNotesSettings?.latestReleaseNotes?.length) {\r\n        return (\r\n            <ReleaseNotesInfo\r\n                releaseNotes={state.releaseNotesSettings.latestReleaseNotes}\r\n                onDismiss={dismissReleaseNotes}\r\n            />\r\n        )\r\n    }\r\n    return <>{children}</>\r\n}\r\n\r\nexport default WalletNews\r\n","import { useLocationRecoveryListener } from \"../util/hooks/useLocationRecovery\"\r\nimport { ROUTES_DEFINITION } from \"./routes\"\r\n\r\n/**\r\n * Grab all the blocklisted routes in the definitions to avoid store it's location\r\n */\r\nconst BLOCKLISTED_PATHNAMES: string[] = (ROUTES_DEFINITION || [])\r\n    .filter(({ blockListedForRecovery }) => blockListedForRecovery)\r\n    .map((route) => route.path!)\r\n    .concat([\"/unlock\"]) as string[]\r\n\r\n/**\r\n * Dummy component that stores user last location in the local storage\r\n */\r\nconst LocationHolder = () => {\r\n    useLocationRecoveryListener(BLOCKLISTED_PATHNAMES)\r\n    return null\r\n}\r\n\r\nexport default LocationHolder\r\n","import { CgDanger } from \"react-icons/cg\"\r\nimport { useLocation } from \"react-router-dom\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport { Classes, classnames } from \"../../styles\"\r\nimport NetworkSelect from \"../input/NetworkSelect\"\r\nimport MessageDialog from \"./MessageDialog\"\r\n\r\n// Allowed paths to prevent the dialog from showing up\r\nconst allowedPaths = [\r\n    \"/chain/switch\",\r\n    \"/settings/networks\",\r\n    \"/settings/networks/details\",\r\n]\r\n\r\nconst ProviderDownDialog = () => {\r\n    const { isProviderNetworkOnline, isUserNetworkOnline } = useBlankState()!\r\n    const location = useLocation()\r\n    const history = useOnMountHistory()\r\n\r\n    const showDialog =\r\n        !isProviderNetworkOnline &&\r\n        isUserNetworkOnline &&\r\n        !allowedPaths.includes(location.pathname)\r\n\r\n    return (\r\n        <>\r\n            <MessageDialog\r\n                header={\r\n                    <>\r\n                        <NetworkSelect\r\n                            className=\"mb-4 m-auto\"\r\n                            optionsContainerClassName=\"overflow-auto max-h-72\"\r\n                        />\r\n                        <CgDanger className=\"text-red-500 w-20 h-20 mb-2 block m-auto\" />\r\n                    </>\r\n                }\r\n                title=\"Network Provider Down\"\r\n                message={\r\n                    <div className=\"mb-4\">\r\n                        <p className=\"mb-2\">\r\n                            Please check your internet connection and restart\r\n                            the wallet using the button below.\r\n                        </p>\r\n                        <p>\r\n                            If the problem persists, try{\" \"}\r\n                            <a\r\n                                className=\"text-primary-300 cursor-pointer\"\r\n                                onClick={() =>\r\n                                    history.push({\r\n                                        pathname: \"/settings/networks\",\r\n                                        state: {\r\n                                            isFromHomePage: true,\r\n                                        },\r\n                                    })\r\n                                }\r\n                            >\r\n                                changing the network's RPC URL\r\n                            </a>\r\n                            .\r\n                        </p>\r\n                    </div>\r\n                }\r\n                open={showDialog}\r\n                footer={\r\n                    <button\r\n                        onClick={() => chrome.runtime.reload()}\r\n                        type=\"button\"\r\n                        className={classnames(Classes.darkButton)}\r\n                    >\r\n                        Restart Wallet\r\n                    </button>\r\n                }\r\n            />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ProviderDownDialog\r\n","import { useEffect, useLayoutEffect, useMemo, useState } from \"react\"\r\n\r\nimport { HashRouter, Redirect, Route, useHistory } from \"react-router-dom\"\r\nimport { useBlankState } from \"../context/background/backgroundHooks\"\r\nimport PendingSetupPage from \"../routes/setup/PendingSetupPage\"\r\nimport UnlockPage from \"../routes/UnlockPage\"\r\nimport { appRoutes } from \"./routes\"\r\nimport \"./routeTransitions.css\"\r\nimport { lockApp } from \"../context/commActions\"\r\nimport { LastLocationProvider } from \"react-router-last-location\"\r\nimport { TransitionRoute } from \"./TransitionRoute\"\r\nimport { ErrorBoundary } from \"react-error-boundary\"\r\nimport ErrorFallbackPage from \"../components/error/ErrorFallbackPage\"\r\nimport ErrorDialog from \"../components/dialog/ErrorDialog\"\r\nimport getRequestRouteAndStatus from \"../context/util/getRequestRouteAndStatus\"\r\nimport IdleComponent from \"../components/IdleComponent\"\r\nimport WalletNews from \"../components/news/WalletNews\"\r\nimport LocationHolder from \"./LocationHolder\"\r\nimport { useLocationRecovery } from \"../util/hooks/useLocationRecovery\"\r\nimport { timeExceedsTTL } from \"../util/time\"\r\nimport ProviderDownDialog from \"../components/dialog/ProviderDownDialog\"\r\nimport useClearStickyStorage from \"../context/hooks/useClearStickyStorage\"\r\nimport { getNonSubmittedTransactions } from \"../util/getNonSubmittedTransactions\"\r\n\r\n//10 minutes\r\nconst LOCAL_STORAGE_DATA_TTL = 60000 * 10\r\n\r\n/**  Purpose of this component is to check in Blank State if there is any pending connect to site or transaction confirm\r\n *  in order to show that page always, whenever the extension is loaded and unlocked.\r\n */\r\nconst PopupComponent = () => {\r\n    const {\r\n        isOnboarded,\r\n        isAppUnlocked,\r\n        permissionRequests,\r\n        dappRequests,\r\n        transactions,\r\n        lastActiveTime,\r\n    } = useBlankState()!\r\n    const unapprovedTransactions = getNonSubmittedTransactions(\r\n        transactions,\r\n        true\r\n    )\r\n\r\n    const history = useHistory()\r\n    const { lastLocation, clear: clearLocationRecovery } = useLocationRecovery()\r\n    const { clear: clearStickyStorage } = useClearStickyStorage()\r\n\r\n    const showUnlock = useMemo(() => {\r\n        return isOnboarded && !isAppUnlocked\r\n    }, [isOnboarded, isAppUnlocked])\r\n\r\n    // Get if we should display the popup and the correct route\r\n    // depending on the order of the requests.\r\n    const [showPage, route] = getRequestRouteAndStatus(\r\n        permissionRequests,\r\n        unapprovedTransactions,\r\n        dappRequests\r\n    )\r\n\r\n    useLayoutEffect(() => {\r\n        if (\r\n            showPage ||\r\n            showUnlock ||\r\n            (lastActiveTime &&\r\n                timeExceedsTTL(lastActiveTime, LOCAL_STORAGE_DATA_TTL))\r\n        ) {\r\n            // If the wallet is locked or if we're in a dApp request\r\n            // We should get rid of all the localSotrage stuff.\r\n            clearStickyStorage()\r\n\r\n            // This clear should be here to update the local variable \"lastLocation\"\r\n            clearLocationRecovery()\r\n        } else if (lastLocation) {\r\n            history.replace(lastLocation)\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [showPage, lastLocation, showUnlock])\r\n\r\n    if (showUnlock) {\r\n        return (\r\n            <>\r\n                <Redirect to=\"/unlock\" />\r\n                <TransitionRoute\r\n                    component={UnlockPage}\r\n                    path=\"/unlock\"\r\n                ></TransitionRoute>\r\n            </>\r\n        )\r\n    }\r\n    return (\r\n        <WalletNews>\r\n            <ProviderDownDialog />\r\n            <Route path=\"/\" component={LocationHolder} />\r\n            <Route exact path=\"/\">\r\n                {showPage ? <Redirect to={route} /> : <Redirect to=\"/home\" />}\r\n            </Route>\r\n            {appRoutes}\r\n        </WalletNews>\r\n    )\r\n}\r\n\r\nconst PopupRouter = ({\r\n    children,\r\n}: {\r\n    children?: React.ReactNode | undefined\r\n}) => {\r\n    // Ensure body has popup class to mantain fixed width/height when opening from extension or window\r\n    document.body.classList.add(\"popup\")\r\n    const state = useBlankState()!\r\n    const isOnboarded = state?.isOnboarded\r\n    const resetHandler = async () => {\r\n        chrome.runtime.reload()\r\n    }\r\n\r\n    const [shouldShowDialog, setShouldShowDialog] = useState(false)\r\n\r\n    useEffect(() => {\r\n        setShouldShowDialog(!state.isUserNetworkOnline)\r\n    }, [state.isUserNetworkOnline])\r\n\r\n    return (\r\n        <HashRouter>\r\n            <LastLocationProvider>\r\n                <ErrorBoundary\r\n                    FallbackComponent={ErrorFallbackPage}\r\n                    onReset={resetHandler}\r\n                    resetKeys={[state.isAppUnlocked]}\r\n                >\r\n                    {isOnboarded ? (\r\n                        <>\r\n                            <ErrorDialog\r\n                                onClickOutside={() =>\r\n                                    setShouldShowDialog(false)\r\n                                }\r\n                                title=\"No connection\"\r\n                                message=\"Please check your internet connection. Some features of the wallet will remain disabled while youâre offline.\"\r\n                                open={shouldShowDialog}\r\n                                onDone={() => setShouldShowDialog(false)}\r\n                            />\r\n                            <IdleComponent>\r\n                                <PopupComponent />\r\n                            </IdleComponent>\r\n                        </>\r\n                    ) : (\r\n                        <PendingSetupPage />\r\n                    )}\r\n                    {children}\r\n                </ErrorBoundary>\r\n            </LastLocationProvider>\r\n        </HashRouter>\r\n    )\r\n}\r\n\r\nexport default PopupRouter\r\n","import { Link } from \"react-router-dom\"\r\n\r\nimport { Classes } from \"../styles/classes\"\r\nimport LogoHeader from \"../components/LogoHeader\"\r\nimport PageLayout from \"../components/PageLayout\"\r\nimport logo from \"../assets/images/logo.svg\"\r\n\r\nconst IntroductionPage = () => (\r\n    <PageLayout centered className=\"relative overflow-hidden\">\r\n        <div className=\"flex flex-col items-center relative mt-20 pt-10 mb-14 z-10\">\r\n            <LogoHeader />\r\n            <div className=\"flex flex-col items-center my-12 space-y-6\">\r\n                <span className=\"font-title font-semibold text-5xl\">\r\n                    BlockWallet\r\n                </span>\r\n                <div className=\"flex flex-col md:flex-row items-center space-x-1 w-52 md:w-full mx-auto text-gray-600 text-sm text-center\">\r\n                    <span>Have a transfer to make?</span>\r\n                    <span>Reclaim your privacy with us.</span>\r\n                </div>\r\n            </div>\r\n            <Link to=\"/setup\" className={Classes.button}>\r\n                Get Started\r\n            </Link>\r\n        </div>\r\n        <div\r\n            className=\"absolute w-64 h-64 left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 opacity-5\"\r\n            style={{\r\n                color: \"blue\",\r\n                background: `url(${logo})`,\r\n                backgroundRepeat: \"no-repeat\",\r\n                backgroundPosition: \"center\",\r\n                backgroundSize: \"cover\",\r\n            }}\r\n        />\r\n    </PageLayout>\r\n)\r\n\r\nexport default IntroductionPage\r\n","export default __webpack_public_path__ + \"static/media/drawer.666c04e0.svg\";","export default __webpack_public_path__ + \"static/media/pen.78790fe8.svg\";","export default __webpack_public_path__ + \"static/media/backup.1cc16192.svg\";","import { useEffect, useState } from \"react\"\r\n\r\nimport classnames from \"classnames\"\r\n\r\nimport { Link } from \"react-router-dom\"\r\n\r\nimport PageLayout from \"../../components/PageLayout\"\r\nimport Divider from \"../../components/Divider\"\r\nimport { Classes } from \"../../styles/classes\"\r\n\r\nimport drawerIcon from \"../../assets/images/icons/drawer.svg\"\r\nimport penIcon from \"../../assets/images/icons/pen.svg\"\r\nimport backupIcon from \"../../assets/images/icons/backup.svg\"\r\nimport LinkButton from \"../../components/button/LinkButton\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport ClickToReveal from \"../../components/label/ClickToReveal\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { closeCurrentTab } from \"../../util/window\"\r\nimport IdleComponent from \"../../components/IdleComponent\"\r\n\r\nconst SideTips = () => (\r\n    <div className=\"flex flex-col justify-between h-full w-full space-y-6 text-sm text-left md:w-64 md:ml-6\">\r\n        <div className=\"flex flex-col w-full p-6 space-y-4 rounded-md bg-primary-200\">\r\n            <img src={drawerIcon} className=\"w-5 h-5\" alt=\"\" />\r\n            <span>\r\n                Store this phrase in a password manager like{\" \"}\r\n                <b className=\"text-gray-900\">1Password</b>.\r\n            </span>\r\n        </div>\r\n        <div className=\"flex flex-col w-full p-6 space-y-4 rounded-md bg-primary-200\">\r\n            <img src={penIcon} className=\"w-5 h-5\" alt=\"\" />\r\n            <span>\r\n                Write this phrase on pieces of paper and store each in{\" \"}\r\n                <b className=\"text-gray-900\">2 - 3</b> different locations.\r\n            </span>\r\n        </div>\r\n        <div className=\"flex flex-col w-full p-6 space-y-4 rounded-md bg-primary-200\">\r\n            <img src={backupIcon} className=\"w-5 h-5\" alt=\"\" />\r\n            <span>\r\n                <b className=\"text-gray-900\">Download</b> this Secret Backup\r\n                Phrase and keep it stored safely on an external encrypted hard\r\n                drive or storage medium.\r\n            </span>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nconst BackupNoticePage = () => {\r\n    const { isUnlocked } = useBlankState()!\r\n    useEffect(() => {\r\n        if (!isUnlocked) {\r\n            alert(\r\n                \"For security reasons the extension is now blocked. Login again in the extension to continue with the backup process.\"\r\n            )\r\n            closeCurrentTab()\r\n        }\r\n    }, [isUnlocked])\r\n\r\n    const [revealed, setRevealed] = useState(false)\r\n    const history: any = useOnMountHistory()\r\n    const { seedPhrase, password } = history.location.state\r\n\r\n    return (\r\n        <IdleComponent>\r\n            <PageLayout\r\n                header\r\n                maxWidth=\"max-w-md\"\r\n                className=\"text-center\"\r\n                sideComponent={\r\n                    <div className=\"hidden md:block\">\r\n                        <SideTips />\r\n                    </div>\r\n                }\r\n            >\r\n                <span className=\"my-6 text-lg font-bold font-title\">\r\n                    Seed Phrase\r\n                </span>\r\n                <Divider />\r\n                <div className=\"flex flex-col p-8 space-y-8 text-sm text-gray-600\">\r\n                    <span>\r\n                        Your seed phrase is the key to your wallet. It makes it\r\n                        possible to restore your wallet after losing access.\r\n                        Import your seed phrase to gain access to the funds held\r\n                        on your BlockWallet. Backup your seed phrase and store\r\n                        it in a safe place.\r\n                    </span>\r\n                    <div className=\"md:hidden\">\r\n                        <SideTips />\r\n                    </div>\r\n                    <span>\r\n                        <b className=\"text-gray-900\">Warning:</b> Never disclose\r\n                        your seed phrase. Anyone asking for your seed phrase is\r\n                        most likely trying to steal your funds.\r\n                    </span>\r\n                    <ClickToReveal\r\n                        hiddenText={seedPhrase}\r\n                        revealMessage={\"Click here to reveal secret words\"}\r\n                        revealed={revealed}\r\n                        onClick={() => setRevealed(true)}\r\n                    />\r\n                </div>\r\n                <Divider />\r\n                <div className=\"flex flex-row w-full p-6 space-x-4\">\r\n                    <LinkButton\r\n                        location=\"/setup/done\"\r\n                        text=\"Remind me later\"\r\n                        lite\r\n                    />\r\n                    <Link\r\n                        to={{\r\n                            pathname: \"/setup/create/verify\",\r\n                            state: { seedPhrase, isReminder: false, password },\r\n                        }}\r\n                        className={classnames(\r\n                            Classes.button,\r\n                            !revealed && \"opacity-50 pointer-events-none\"\r\n                        )}\r\n                        draggable={false}\r\n                    >\r\n                        Next\r\n                    </Link>\r\n                </div>\r\n            </PageLayout>\r\n        </IdleComponent>\r\n    )\r\n}\r\n\r\nexport default BackupNoticePage\r\n","import { useEffect } from \"react\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { useBlankState } from \"../background/backgroundHooks\"\r\n\r\nexport const useCheckUserIsOnboarded = () => {\r\n    const history = useHistory()\r\n    const state = useBlankState()\r\n    useEffect(() => {\r\n        if (!state || state.isOnboarded) {\r\n            history.push({\r\n                pathname: \"/setup/done\",\r\n                state: { sendNotification: false },\r\n            })\r\n        }\r\n    }, [])\r\n}\r\n","import { useEffect, useState } from \"react\"\r\n\r\nimport { Classes } from \"../../styles/classes\"\r\n\r\nimport PageLayout from \"../../components/PageLayout\"\r\nimport Divider from \"../../components/Divider\"\r\nimport LinkButton from \"../../components/button/LinkButton\"\r\nimport PasswordInput from \"../../components/input/PasswordInput\"\r\n\r\nimport { useForm } from \"react-hook-form\"\r\nimport { yupResolver } from \"@hookform/resolvers/yup\"\r\nimport * as yup from \"yup\"\r\n\r\nimport { createWallet, requestSeedPhrase } from \"../../context/commActions\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport log from \"loglevel\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport { useCheckUserIsOnboarded } from \"../../context/hooks/useCheckUserIsOnboarded\"\r\n\r\nconst schema = yup.object().shape({\r\n    password: yup\r\n        .string()\r\n        .required(\"No password provided.\")\r\n        .min(8, \"Password should be at least 8 characters long.\")\r\n        .matches(\r\n            /(?=.*\\d)(?=.*[a-z])/,\r\n            \"Password must contain at least one lowercase character and one digit.\"\r\n        ),\r\n    passwordConfirmation: yup\r\n        .string()\r\n        .required(\"Please enter the password confirmation.\")\r\n        .oneOf(\r\n            [yup.ref(\"password\"), null],\r\n            \"Password and password confirmation must match.\"\r\n        ),\r\n    acceptTOU: yup\r\n        .bool()\r\n        .required(\"You must accept the Terms of Use.\")\r\n        .oneOf([true], \"You must accept the Terms of Use.\"),\r\n})\r\n\r\ntype PasswordSetupFormData = {\r\n    password: string\r\n    passwordConfirmation: string\r\n    acceptTOU: boolean\r\n}\r\n\r\nconst PasswordSetupPage = () => {\r\n    const history = useOnMountHistory()\r\n    const [passwordScore, setPasswordScore] = useState<number>(0)\r\n    const [isCreating, setIsCreating] = useState<boolean>(false)\r\n    const [isSubmitDisabled, setIsSubmitDisabled] = useState(true)\r\n    // if the onboarding is ready the user shoulnd't set the password again.\r\n    useCheckUserIsOnboarded()\r\n\r\n    const { register, handleSubmit, setError, watch, formState, trigger } =\r\n        useForm<PasswordSetupFormData>({\r\n            mode: \"onChange\",\r\n            resolver: yupResolver(schema),\r\n        })\r\n\r\n    const onSubmit = handleSubmit(async (data: PasswordSetupFormData) => {\r\n        if (passwordScore < 3) {\r\n            return setError(\r\n                \"password\",\r\n                {\r\n                    message: \"Password is not strong enough\",\r\n                },\r\n                {\r\n                    shouldFocus: true,\r\n                }\r\n            )\r\n        }\r\n\r\n        setIsCreating(true)\r\n\r\n        createWallet(data.password)\r\n            .then(() => {\r\n                requestSeedPhrase(data.password)\r\n                    .then((seedPhrase) => {\r\n                        setIsCreating(false)\r\n                        history.push({\r\n                            pathname: \"/setup/create/notice\",\r\n                            state: { seedPhrase, password: data.password },\r\n                        })\r\n                    })\r\n                    .catch((err) => {\r\n                        log.error(err)\r\n                        setIsCreating(false)\r\n                    })\r\n            })\r\n            .catch((err) => {\r\n                log.error(err)\r\n                setIsCreating(false)\r\n            })\r\n    })\r\n\r\n    const passwordValues = watch()\r\n    useEffect(() => {\r\n        if (formState.isValid) {\r\n            setIsSubmitDisabled(false)\r\n        } else {\r\n            setIsSubmitDisabled(true)\r\n        }\r\n    }, [passwordValues, formState.errors.password])\r\n\r\n    useEffect(() => {\r\n        // trigger password confirmation validation when password changes given that there is a value in both fields\r\n        if (passwordValues.password && passwordValues.passwordConfirmation) {\r\n            trigger(\"passwordConfirmation\")\r\n        }\r\n    }, [passwordValues.password, trigger])\r\n    return (\r\n        <PageLayout header maxWidth=\"max-w-md\">\r\n            <span className=\"my-6 text-lg font-bold font-title\">\r\n                Create a Password\r\n            </span>\r\n            <Divider />\r\n            <form className=\"flex flex-col w-full\" onSubmit={onSubmit}>\r\n                <div className=\"flex flex-col p-6 space-y-4\">\r\n                    <div className=\"flex flex-col space-y-1\">\r\n                        <PasswordInput\r\n                            label=\"New Password\"\r\n                            placeholder=\"Enter New Password\"\r\n                            {...register(\"password\")}\r\n                            error={formState.errors.password?.message}\r\n                            autoFocus={true}\r\n                            strengthBar={true}\r\n                            setPasswordScore={setPasswordScore}\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex flex-col space-y-1\">\r\n                        <PasswordInput\r\n                            label=\"Confirm password\"\r\n                            placeholder=\"Confirm New Password\"\r\n                            {...register(\"passwordConfirmation\")}\r\n                            error={\r\n                                formState.errors.passwordConfirmation?.message\r\n                            }\r\n                        />\r\n                    </div>\r\n                    <div className=\"flex flex-col space-y-1\">\r\n                        <div className=\"flex flex-row items-center space-x-2\">\r\n                            <input\r\n                                type=\"checkbox\"\r\n                                className={Classes.checkbox}\r\n                                id=\"acceptTOU\"\r\n                                {...register(\"acceptTOU\")}\r\n                            />\r\n                            <label htmlFor=\"acceptTOU\" className=\"text-xs\">\r\n                                I have read and agree to the{\" \"}\r\n                                <a\r\n                                    href=\"https://blockwallet.io/terms-of-use-of-block-wallet.html\"\r\n                                    target=\"_blank\"\r\n                                    rel=\"noopener noreferrer\"\r\n                                    className=\"text-blue-500\"\r\n                                >\r\n                                    Terms of Use\r\n                                </a>\r\n                            </label>\r\n                        </div>\r\n                        <span className=\"text-xs text-red-500\">\r\n                            {formState.errors.acceptTOU?.message || <>&nbsp;</>}\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <Divider />\r\n                <div className=\"flex flex-row p-6 space-x-4\">\r\n                    <LinkButton\r\n                        location=\"/setup/\"\r\n                        text=\"Back\"\r\n                        lite\r\n                        disabled={isCreating}\r\n                    />\r\n                    <ButtonWithLoading\r\n                        label=\"Create\"\r\n                        isLoading={isCreating}\r\n                        onClick={onSubmit}\r\n                        buttonClass={Classes.button}\r\n                        disabled={isCreating || isSubmitDisabled}\r\n                    ></ButtonWithLoading>\r\n                </div>\r\n            </form>\r\n        </PageLayout>\r\n    )\r\n}\r\n\r\nexport default PasswordSetupPage\r\n","import { useState } from \"react\"\r\nimport { FunctionComponent } from \"react\"\r\nimport classnames from \"classnames\"\r\nimport ExclamationCircleIconFull from \"../icons/ExclamationCircleIconFull\"\r\nimport CloseIcon from \"../icons/CloseIcon\"\r\n\r\nconst infoBgStyle = {\r\n    backgroundColor: \"#e2f6ff\",\r\n    color: \"#00529B\",\r\n}\r\n\r\n/**\r\n * Info tip component.\r\n *\r\n * @param text Info message to display.\r\n * @param withCloseIcon If true the tooltip will have a close button.\r\n * @param fontSize Set font size. Default is \"text-lg\".\r\n * @param justify Set flexbox justify. Default is \"justify-center\".\r\n * @param className Add custom styles to wrapper.\r\n */\r\nconst InfoTip: FunctionComponent<{\r\n    className?: string\r\n    fontSize?: string\r\n    justify?: string\r\n    text: string\r\n    withCloseIcon?: boolean\r\n}> = ({ className, fontSize, justify, text, withCloseIcon = false }) => {\r\n    const [isClosed, setIsClosed] = useState(false)\r\n\r\n    return isClosed ? null : (\r\n        <div\r\n            className={classnames(\r\n                \"relative flex flex-row p-3 items-center rounded\",\r\n                justify ?? \"justify-center\",\r\n                className ?? className\r\n            )}\r\n            style={infoBgStyle}\r\n        >\r\n            <div>\r\n                <ExclamationCircleIconFull size=\"20\" profile=\"info\" />\r\n            </div>\r\n            <p\r\n                className={classnames(\r\n                    \"font-bold text-blue-400 break-words ml-3\",\r\n                    fontSize ?? \"text-lg\"\r\n                )}\r\n            >\r\n                {text}\r\n            </p>\r\n            {withCloseIcon && (\r\n                <>\r\n                    <div className={\"w-5\"}></div>\r\n                    <div\r\n                        className={\r\n                            \"absolute right-3 cursor-pointer hover:text-blue-500\"\r\n                        }\r\n                        onClick={() => setIsClosed(true)}\r\n                    >\r\n                        <CloseIcon size=\"10\" />\r\n                    </div>\r\n                </>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default InfoTip\r\n","/**\r\n * escape string to avoid malicious attack\r\n * @param text\r\n * @returns escaped text\r\n */\r\nconst _escape = (text: string | null): string | null => {\r\n    if (!text) return text\r\n    return String(text)\r\n        .replace(/</g, \"&lt;\")\r\n        .replace(/'/g, \"&#39;\")\r\n        .replace(/\"/g, \"&quot;\")\r\n        .replace(/>/g, \"&gt;\")\r\n        .replace(/&/g, \"&amp;\")\r\n}\r\n\r\nconst getAllQueryParameters = () => {\r\n    return new URLSearchParams(window.location.search)\r\n}\r\n\r\nconst getQueryParameter = (paramName: string): string | null => {\r\n    return _escape(getAllQueryParameters().get(paramName))\r\n}\r\n\r\nexport { getQueryParameter }\r\n","import PageLayout from \"../../components/PageLayout\"\r\nimport Divider from \"../../components/Divider\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\n\r\nimport SeedImport from \"../../components/setup/SeedImport\"\r\nimport { importWallet } from \"../../context/commActions\"\r\nimport { getQueryParameter } from \"../../util/url\"\r\nimport { useCheckUserIsOnboarded } from \"../../context/hooks/useCheckUserIsOnboarded\"\r\n\r\nconst SeedImportPage = () => {\r\n    const history: any = useOnMountHistory()\r\n\r\n    // if the onboarding is ready the user shoulnd't set the seedphrase again.\r\n    useCheckUserIsOnboarded()\r\n\r\n    const onSubmit = async (password: string, seedPhrase: string) => {\r\n        const defaultNetwork = getQueryParameter(\"defaultNetwork\")\r\n        const result = await importWallet(\r\n            password,\r\n            seedPhrase,\r\n            defaultNetwork ? defaultNetwork : undefined\r\n        )\r\n\r\n        if (result) {\r\n            history.push({ pathname: \"/setup/done\" })\r\n        } else {\r\n            throw new Error(\"Importing wallet failed.\")\r\n        }\r\n    }\r\n\r\n    return (\r\n        <PageLayout header maxWidth=\"max-w-lg\">\r\n            <span className=\"my-6 text-lg font-bold font-title\">\r\n                Import an Account\r\n            </span>\r\n            <Divider />\r\n            <div className=\"flex flex-col p-6 space-y-6\">\r\n                <div className=\"flex flex-col space-y-4\">\r\n                    <div className=\"flex flex-col px-6 my-2 space-y-1\">\r\n                        <span className=\"text-sm leading-relaxed text-center text-gray-600\">\r\n                            Select the length of your seed phrase and enter it\r\n                            to import your account.\r\n                        </span>\r\n                    </div>\r\n                    <div className=\"w-full px-4 py-4 text-sm text-center text-red-500 bg-red-100 rounded\">\r\n                        <strong className=\"font-bold\">Warning: </strong>\r\n                        <span>\r\n                            Never disclose your seed phrase. Anyone asking for\r\n                            your seed phrase is most likely trying to steal your\r\n                            funds.\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <SeedImport buttonLabel=\"Import\" action={onSubmit} />\r\n        </PageLayout>\r\n    )\r\n}\r\n\r\nexport default SeedImportPage\r\n","import { useEffect, useState } from \"react\"\r\n\r\nimport Confetti from \"react-dom-confetti\"\r\n\r\nimport LogoHeader from \"../../components/LogoHeader\"\r\nimport PageLayout from \"../../components/PageLayout\"\r\n\r\nimport logo from \"../../assets/images/logo.svg\"\r\nimport { completeSetup } from \"../../context/commActions\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\n\r\nconst SetupDonePage = () => {\r\n    const history: any = useOnMountHistory()\r\n    const [confettiActive, setConfettiActive] = useState(false)\r\n\r\n    useEffect(() => {\r\n        setConfettiActive(true)\r\n\r\n        let sendNotification = true\r\n        if (history.location && history.location.state) {\r\n            sendNotification = history.location.state.sendNotification\r\n        }\r\n        completeSetup(sendNotification)\r\n    }, [history])\r\n\r\n    const config = {\r\n        angle: 90,\r\n        spread: 360,\r\n        startVelocity: 40,\r\n        elementCount: 70,\r\n        dragFriction: 0.12,\r\n        duration: 3000,\r\n        stagger: 3,\r\n        width: \"10px\",\r\n        height: \"10px\",\r\n        perspective: \"500px\",\r\n        colors: [\"#000\", \"#333\", \"#666\"],\r\n    }\r\n    return (\r\n        <>\r\n            <div className=\"absolute w-full h-full flex flex-row items-center justify-center overflow-hidden z-10\">\r\n                <Confetti active={confettiActive} config={config} />\r\n            </div>\r\n            <PageLayout centered className=\"relative overflow-hidden\">\r\n                <div className=\"flex flex-col items-center relative py-14 z-10\">\r\n                    <LogoHeader />\r\n                    <div className=\"flex flex-col items-center my-12 space-y-6\">\r\n                        <span className=\"font-title font-semibold text-5xl text-center\">\r\n                            Set-up completed!\r\n                        </span>\r\n                        <div className=\"flex flex-col md:flex-row items-center space-x-1 w-92 px-4 md:px-0 md:w-full mx-auto text-gray-600 text-sm text-center leading-loose\">\r\n                            <span>\r\n                                You're ready to start using BlockWallet.\r\n                                <br />\r\n                                Your journey to financial privacy starts here.\r\n                                <br />\r\n                                Access BlockWallet via the extensions section of\r\n                                your browser.\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div\r\n                    className=\"absolute w-64 h-64 left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 opacity-5\"\r\n                    style={{\r\n                        color: \"blue\",\r\n                        background: `url(${logo})`,\r\n                        backgroundRepeat: \"no-repeat\",\r\n                        backgroundPosition: \"center\",\r\n                        backgroundSize: \"cover\",\r\n                    }}\r\n                />\r\n            </PageLayout>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default SetupDonePage\r\n","export default __webpack_public_path__ + \"static/media/checkmark.2461c2eb.svg\";","import { FunctionComponent } from \"react\"\r\n\r\nimport { Link } from \"react-router-dom\"\r\nimport Divider from \"../../components/Divider\"\r\nimport { Classes, classnames } from \"../../styles/classes\"\r\n\r\nimport crossIcon from \"../../assets/images/icons/cross.svg\"\r\n\r\nimport checkmarkIcon from \"../../assets/images/icons/checkmark.svg\"\r\nimport PageLayout from \"../../components/PageLayout\"\r\nimport { useCheckUserIsOnboarded } from \"../../context/hooks/useCheckUserIsOnboarded\"\r\n\r\nconst SetupOption: FunctionComponent<{\r\n    title: string\r\n    description: string\r\n    icon: string\r\n    linkTo: string\r\n    linkLabel: string\r\n}> = ({ title, description, icon, linkTo, linkLabel }) => (\r\n    <div className=\"relative flex flex-col items-start flex-1 p-6 bg-primary-100\">\r\n        <div className=\"absolute top-0 right-0 w-4 h-4 bg-white\" />\r\n        <div className=\"absolute top-0 right-0 w-4 h-4 mt-4 mr-4 bg-white\" />\r\n        <img\r\n            src={icon}\r\n            alt=\"icon\"\r\n            className=\"mb-4 text-4xl text-gray-500 w-14 h-14\"\r\n        />\r\n        <span className=\"text-sm font-bold font-title\">{title}</span>\r\n        <span className=\"h-16 mt-4 text-xs text-gray-500\">{description}</span>\r\n        <Link\r\n            to={linkTo}\r\n            className={classnames(Classes.button, \"w-full\")}\r\n            draggable={false}\r\n        >\r\n            {linkLabel}\r\n        </Link>\r\n    </div>\r\n)\r\n\r\nconst SetupPage = () => {\r\n    // if the onboarding is ready the user shoulnd't do it again.\r\n    useCheckUserIsOnboarded()\r\n\r\n    return (\r\n        <PageLayout className=\"relative\" header>\r\n            <span className=\"my-6 text-lg font-bold font-title\">\r\n                New to BlockWallet?\r\n            </span>\r\n            <Divider />\r\n            <div className=\"flex flex-col w-full p-6 space-y-4 md:flex-row md:space-y-0 md:space-x-4\">\r\n                <SetupOption\r\n                    title=\"No, I have a seed phrase\"\r\n                    description=\"Import your existing wallet using a 12 word seed phrase.\"\r\n                    icon={crossIcon}\r\n                    linkTo=\"/setup/import\"\r\n                    linkLabel=\"Import Your Wallet\"\r\n                />\r\n                <SetupOption\r\n                    title=\"Yes, set me up\"\r\n                    description=\"Create a new wallet and seed phrase.\"\r\n                    icon={checkmarkIcon}\r\n                    linkTo=\"/setup/create\"\r\n                    linkLabel=\"Create a Wallet\"\r\n                />\r\n            </div>\r\n        </PageLayout>\r\n    )\r\n}\r\n\r\nexport default SetupPage\r\n","import PageLayout from \"../../components/PageLayout\"\r\nimport Divider from \"../../components/Divider\"\r\n\r\nimport { resetWallet } from \"../../context/commActions\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport SeedImport from \"../../components/setup/SeedImport\"\r\n\r\nconst ResetPage = () => {\r\n    const history: any = useOnMountHistory()\r\n    const onSubmit = async (password: string, seedPhrase: string) => {\r\n        const result = await resetWallet(password, seedPhrase)\r\n\r\n        if (result) {\r\n            history.push({ pathname: \"/reset/done\" })\r\n        } else {\r\n            throw new Error(\"Import Wallet failed\")\r\n        }\r\n    }\r\n\r\n    return (\r\n        <PageLayout header maxWidth=\"max-w-lg\">\r\n            <span className=\"my-6 text-lg font-bold font-title\">\r\n                Reset your Wallet\r\n            </span>\r\n            <Divider />\r\n            <div className=\"flex flex-col p-6 space-y-6\">\r\n                <div className=\"flex flex-col space-y-4\">\r\n                    <div className=\"w-full px-4 py-4 text-sm text-center text-red-500 bg-red-100 rounded\">\r\n                        <strong className=\"font-bold\">Warning: </strong>\r\n                        <span>\r\n                            If you decide to reset your wallet, your current\r\n                            vault will be lost, i.e. all imported accounts and\r\n                            added assets. You will not be able to access funds\r\n                            outside of the imported seed phrase.\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <SeedImport buttonLabel=\"Reset wallet\" action={onSubmit} />\r\n        </PageLayout>\r\n    )\r\n}\r\n\r\nexport default ResetPage\r\n","import { useEffect, useState } from \"react\"\r\n\r\nimport Confetti from \"react-dom-confetti\"\r\n\r\nimport LogoHeader from \"../../components/LogoHeader\"\r\nimport PageLayout from \"../../components/PageLayout\"\r\n\r\nimport logo from \"../../assets/images/logo.svg\"\r\nimport { completeSetup } from \"../../context/commActions\"\r\n\r\nconst ResetDonePage = () => {\r\n    const [confettiActive, setConfettiActive] = useState(false)\r\n    useEffect(() => {\r\n        setConfettiActive(true)\r\n        completeSetup()\r\n    }, [])\r\n    const config = {\r\n        angle: 90,\r\n        spread: 360,\r\n        startVelocity: 40,\r\n        elementCount: 70,\r\n        dragFriction: 0.12,\r\n        duration: 3000,\r\n        stagger: 3,\r\n        width: \"10px\",\r\n        height: \"10px\",\r\n        perspective: \"500px\",\r\n        colors: [\"#000\", \"#333\", \"#666\"],\r\n    }\r\n    return (\r\n        <>\r\n            <div className=\"absolute w-full h-full flex flex-row items-center justify-center overflow-hidden z-10\">\r\n                <Confetti active={confettiActive} config={config} />\r\n            </div>\r\n            <PageLayout centered className=\"relative overflow-hidden\">\r\n                <div className=\"flex flex-col items-center relative py-14 z-10\">\r\n                    <LogoHeader />\r\n                    <div className=\"flex flex-col items-center my-12 space-y-6\">\r\n                        <span className=\"font-title font-semibold text-5xl\">\r\n                            Reset completed!\r\n                        </span>\r\n                        <div className=\"flex flex-col md:flex-row items-center space-x-1 w-52 md:w-full mx-auto text-gray-600 text-sm text-center leading-loose\">\r\n                            <span>\r\n                                You're ready to start using BlockWallet again.\r\n                                <br />\r\n                                The wallet has been reset with a new seed\r\n                                phrase.\r\n                                <br />\r\n                                Access BlockWallet via the extensions section of\r\n                                your browser.\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div\r\n                    className=\"absolute w-64 h-64 left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 opacity-5\"\r\n                    style={{\r\n                        color: \"blue\",\r\n                        background: `url(${logo})`,\r\n                        backgroundRepeat: \"no-repeat\",\r\n                        backgroundPosition: \"center\",\r\n                        backgroundSize: \"cover\",\r\n                    }}\r\n                />\r\n            </PageLayout>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ResetDonePage\r\n","export default __webpack_public_path__ + \"static/media/ledger.b37b9567.svg\";","export default __webpack_public_path__ + \"static/media/trezor.2c5918b4.svg\";","import { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport ExclamationCircleIconFull from \"../icons/ExclamationCircleIconFull\"\r\nimport FullScreenDialog from \"./FullScreenDialog\"\r\n\r\nconst IsLockedDialog = () => {\r\n    const { isUnlocked } = useBlankState()!\r\n\r\n    return (\r\n        <FullScreenDialog open={!isUnlocked}>\r\n            <div className=\"p-8 flex flex-col items-center space-y-4\">\r\n                <div className=\"bg-yellow-100 opacity-90 rounded-md w-full p-4 flex space-x-4 items-center font-bold justify-center\">\r\n                    <ExclamationCircleIconFull size=\"20\" profile=\"outlined\" />{\" \"}\r\n                    <span className=\"text-xl\" style={{ color: \"#FFBB54\" }}>\r\n                        Warning: Locked Wallet\r\n                    </span>\r\n                </div>\r\n                <span className=\"text-base p-4 text-center inline-flex\">\r\n                    BlockWallet is locked. Please login again in the extension\r\n                    to continue.\r\n                </span>\r\n            </div>\r\n        </FullScreenDialog>\r\n    )\r\n}\r\n\r\nexport default IsLockedDialog\r\n","import { FC, PropsWithChildren } from \"react\"\r\nimport IsLockedDialog from \"../../components/dialog/IsLockedDialog\"\r\nimport Divider from \"../../components/Divider\"\r\nimport PageLayout from \"../../components/PageLayout\"\r\n\r\ntype SetupLayoutProps = {\r\n    title: string\r\n    subtitle: string\r\n    buttons: React.ReactNode\r\n}\r\n\r\nconst HardwareWalletSetupLayout: FC<PropsWithChildren<SetupLayoutProps>> = ({\r\n    children,\r\n    title,\r\n    subtitle,\r\n    buttons,\r\n}) => (\r\n    <PageLayout header style={{ maxWidth: \"500px\" }}>\r\n        <IsLockedDialog />\r\n        <span className=\"my-8 text-2xl font-bold font-title\">{title}</span>\r\n        <Divider />\r\n        <div className=\"pt-8 px-8 flex w-full\">\r\n            <span className=\" px-6 text-base leading-relaxed text-center text-gray-600 w-full\">\r\n                {subtitle}\r\n            </span>\r\n        </div>\r\n        <div className=\"flex flex-col w-full\">{children}</div>\r\n        <Divider />\r\n        <div className=\"p-8 w-full flex space-x-5\">{buttons}</div>\r\n    </PageLayout>\r\n)\r\n\r\nexport default HardwareWalletSetupLayout\r\n","import { useState } from \"react\"\r\nimport classnames from \"classnames\"\r\n\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\n\r\nimport { Devices } from \"../../context/commTypes\"\r\nimport Divider from \"../../components/Divider\"\r\n\r\n// Assets & icons\r\nimport ledger from \"../../assets/images/icons/ledger.svg\"\r\nimport trezor from \"../../assets/images/icons/trezor.svg\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport { Classes } from \"../../styles\"\r\n\r\nimport HardwareWalletSetupLayout from \"./SetupLayout\"\r\n\r\nconst HardwareWalletVendorsPage = () => {\r\n    const history = useOnMountHistory()\r\n    const [selectedVendor, setSelectedVendor] = useState<Devices>()\r\n    const next = () => {\r\n        history.push({\r\n            pathname: \"/hardware-wallet/connect\",\r\n            state: { vendor: selectedVendor },\r\n        })\r\n    }\r\n    return (\r\n        <HardwareWalletSetupLayout\r\n            title=\"Connect Hardware Wallet\"\r\n            subtitle=\"Select a Hardware Wallet you'd like to use with BlockWallet.\"\r\n            buttons={\r\n                <ButtonWithLoading\r\n                    label={\"Continue\"}\r\n                    buttonClass={classnames(Classes.button, \"h-14\")}\r\n                    onClick={next}\r\n                    disabled={!selectedVendor}\r\n                />\r\n            }\r\n        >\r\n            <div className=\"flex flex-col\">\r\n                <div className=\"flex flex-row space-x-4 items-center justify-evenly p-8\">\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => setSelectedVendor(Devices.LEDGER)}\r\n                        className={classnames(\r\n                            \"bg-white rounded-md p-4 w-1/2 flex flex-col items-center justify-center space-y-3 cursor-pointer border hover:border-primary-300\",\r\n                            selectedVendor === Devices.LEDGER\r\n                                ? \"border-primary-300\"\r\n                                : \"border-primary-100\"\r\n                        )}\r\n                        style={{ height: \"120px\" }}\r\n                    >\r\n                        <img\r\n                            src={ledger}\r\n                            alt=\"Connect Ledger\"\r\n                            className=\"h-8\"\r\n                        />\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => setSelectedVendor(Devices.TREZOR)}\r\n                        className={classnames(\r\n                            \"bg-white rounded-md justify-center p-4 w-1/2 flex flex-col items-center group space-y-3 cursor-pointer border  hover:border-primary-300\",\r\n                            selectedVendor === Devices.TREZOR\r\n                                ? \"border-primary-300\"\r\n                                : \"border-primary-100\"\r\n                        )}\r\n                        style={{ height: \"120px\" }}\r\n                    >\r\n                        <img\r\n                            src={trezor}\r\n                            alt=\"Connect Trezor\"\r\n                            className=\"h-8\"\r\n                        />\r\n                    </button>\r\n                </div>\r\n                <Divider />\r\n                <div className=\"w-full flex flex-col p-8 space-y-5\">\r\n                    <ExternalLink\r\n                        href=\"https://help.blockwallet.io/hc/en-us/articles/6670564432657-How-do-Hardware-Wallets-Work-\"\r\n                        title=\"How do Hardware Wallets work?\"\r\n                    />\r\n                    <ExternalLink\r\n                        href=\"https://help.blockwallet.io/hc/en-us/articles/6670519949585-How-to-get-the-Ledger-Hardware-Wallet\"\r\n                        title=\"How to get a Ledger?\"\r\n                    />\r\n                    <ExternalLink\r\n                        href=\"https://help.blockwallet.io/hc/en-us/articles/6670542248209-How-to-get-the-Trezor-Hardware-Wallet-\"\r\n                        title=\"How to get a Trezor?\"\r\n                    />\r\n                </div>\r\n            </div>\r\n        </HardwareWalletSetupLayout>\r\n    )\r\n}\r\n\r\nconst ExternalLink = ({ href, title }: { href: string; title: string }) => (\r\n    <div className=\"flex justify-between w-full text-base font-medium hover:text-primary-300 cursor-pointer\">\r\n        <a href={href} target=\"_blank\" rel=\"noreferrer\">\r\n            {title}\r\n        </a>\r\n        <span>{\">\"}</span>\r\n    </div>\r\n)\r\n\r\nexport default HardwareWalletVendorsPage\r\n","const EyeRevealIcon = () => (\r\n    <svg\r\n        width=\"16\"\r\n        height=\"16\"\r\n        viewBox=\"0 0 16 16\"\r\n        fill=\"none\"\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n        <path\r\n            fillRule=\"evenodd\"\r\n            clipRule=\"evenodd\"\r\n            d=\"M8 16C5.04996 16 2.16645 14.3796 0.312249 11.2819L0 10.7602L0.312249 10.2385C1.54019 8.1871 3.22082 6.77889 5.08634 6.06375L5.77423 7.93625C4.49965 8.42485 3.28765 9.35433 2.31788 10.7602C3.83376 12.9584 5.94561 14 8 14C10.0544 14 12.1662 12.9584 13.6821 10.7602C12.7124 9.35433 11.5004 8.42485 10.2258 7.93625L10.9137 6.06375C12.7792 6.77889 14.4598 8.1871 15.6877 10.2385L16 10.7602L15.6877 11.2819C13.8335 14.3796 10.95 16 8 16Z\"\r\n            fill=\"currentColor\"\r\n        />\r\n        <path\r\n            d=\"M9.63359 10.6687C9.63359 11.5903 8.90222 12.3374 8.00002 12.3374C7.09783 12.3374 6.36646 11.5903 6.36646 10.6687C6.36646 9.74711 7.09783 9 8.00002 9C8.90222 9 9.63359 9.74711 9.63359 10.6687Z\"\r\n            fill=\"currentColor\"\r\n        />\r\n        <path\r\n            fillRule=\"evenodd\"\r\n            clipRule=\"evenodd\"\r\n            d=\"M7.02102 2.94208V0H8.97889V2.94212L10.2857 1.75322L11.5879 3.24678L7.99995 6.51088L4.41211 3.24677L5.71426 1.75323L7.02102 2.94208Z\"\r\n            fill=\"currentColor\"\r\n        />\r\n    </svg>\r\n)\r\n\r\nexport default EyeRevealIcon\r\n","import { PropsWithChildren } from \"react\"\r\nimport classnames from \"classnames\"\r\n\r\nconst PageButton: React.FC<\r\n    PropsWithChildren<{\r\n        onClick: () => void\r\n        selected: boolean\r\n        disabled?: boolean\r\n    }>\r\n> = ({ children, onClick, selected, disabled }) => {\r\n    return (\r\n        <div\r\n            className={classnames(\r\n                \"text-sm p-3\",\r\n                selected\r\n                    ? \"text-gray-800 font-semibold cursor-default\"\r\n                    : \"text-gray-500 cursor-pointer hover:text-gray-800 \",\r\n                disabled && \"text-gray-500 !cursor-not-allowed\"\r\n            )}\r\n            onClick={!disabled ? onClick : void 0}\r\n        >\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst StickyFirstPage = ({\r\n    currentPage,\r\n    onClick,\r\n    disabled,\r\n}: {\r\n    currentPage: number\r\n    disabled?: boolean\r\n    onClick: () => void\r\n}) => {\r\n    if (currentPage === 1) {\r\n        return null\r\n    }\r\n\r\n    const button = (\r\n        <PageButton selected={false} onClick={onClick} disabled={disabled}>\r\n            1\r\n        </PageButton>\r\n    )\r\n\r\n    if (currentPage === 2) {\r\n        return button\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {button}\r\n            <span className=\"font-bold text-sm p-3\">...</span>\r\n        </>\r\n    )\r\n}\r\n\r\nconst PagesList = ({\r\n    stickyFirstPage,\r\n    pages,\r\n    currentPage,\r\n    disabled,\r\n    onChangePage,\r\n}: {\r\n    stickyFirstPage?: boolean\r\n    disabled?: boolean\r\n    pages: number\r\n    currentPage: number\r\n    onChangePage: (page: number) => void\r\n}) => {\r\n    let pagesToShow = pages\r\n    if (currentPage === 2) {\r\n        pagesToShow -= 1\r\n    } else if (currentPage > 2) {\r\n        pagesToShow -= 2\r\n    }\r\n    return (\r\n        <div className=\"flex flex-row\">\r\n            {stickyFirstPage && (\r\n                <StickyFirstPage\r\n                    currentPage={currentPage}\r\n                    disabled={disabled}\r\n                    onClick={() => onChangePage(1)}\r\n                />\r\n            )}\r\n            {Array.from(Array(pagesToShow).keys()).map((page) => {\r\n                const pageNumber = page + currentPage\r\n                return (\r\n                    <PageButton\r\n                        selected={currentPage === pageNumber}\r\n                        key={pageNumber}\r\n                        onClick={() => onChangePage(pageNumber)}\r\n                        disabled={disabled}\r\n                    >\r\n                        {pageNumber}\r\n                    </PageButton>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PagesList\r\n","import { PropsWithChildren } from \"react\"\r\nimport classnames from \"classnames\"\r\nimport arrow from \"../../../assets/images/icons/arrow_down.svg\"\r\nimport PagesList from \"./PagesList\"\r\n\r\nconst PageControlButton: React.FC<\r\n    PropsWithChildren<{\r\n        onClick: () => void\r\n        disabled?: boolean\r\n    }>\r\n> = ({ children, onClick, disabled }) => {\r\n    return (\r\n        <button\r\n            className={classnames(\r\n                \"border rounded-md border-primary-200 hover:border-primary-300 p-3 cursor-pointer items-center\",\r\n                \"disabled:border-gray-200 disabled:pointer-events-none disabled:cursor-default disabled:bg-gray-100\"\r\n            )}\r\n            onClick={onClick}\r\n            disabled={disabled}\r\n            style={{ height: \"38px\" }}\r\n        >\r\n            {children}\r\n        </button>\r\n    )\r\n}\r\n\r\nconst Previous: React.FC<{\r\n    currentPage: number\r\n    disabled?: boolean\r\n    onChangePage: (nextPage: number) => void\r\n}> = ({ currentPage, onChangePage, disabled }) => {\r\n    const isDisabled = disabled || currentPage === 1\r\n    return (\r\n        <PageControlButton\r\n            onClick={() =>\r\n                !isDisabled ? onChangePage(currentPage - 1) : void 0\r\n            }\r\n            disabled={isDisabled}\r\n        >\r\n            <img src={arrow} alt=\"Previous\" className=\"rotate-90\" />\r\n        </PageControlButton>\r\n    )\r\n}\r\n\r\nconst Next: React.FC<{\r\n    currentPage: number\r\n    disabled?: boolean\r\n    onChangePage: (nextPage: number) => void\r\n}> = ({ currentPage, onChangePage, disabled }) => {\r\n    return (\r\n        <PageControlButton\r\n            onClick={() => (!disabled ? onChangePage(currentPage + 1) : void 0)}\r\n            disabled={disabled}\r\n        >\r\n            <img src={arrow} alt=\"Next\" className=\"-rotate-90\" />\r\n        </PageControlButton>\r\n    )\r\n}\r\n\r\nconst PaginationControls: React.FC<{\r\n    disabled?: boolean\r\n    stickyFirstPage?: boolean\r\n    pages: number\r\n    currentPage: number\r\n    onChangePage: (nextPage: number) => void\r\n}> = ({ pages, stickyFirstPage, currentPage, onChangePage, disabled }) => {\r\n    return (\r\n        <div className=\"flex justify-evenly items-center\">\r\n            <Previous\r\n                disabled={disabled}\r\n                currentPage={currentPage}\r\n                onChangePage={onChangePage}\r\n            />\r\n            <div className=\"fullscreen-x-scrollbar\" style={{ maxWidth: 230 }}>\r\n                <PagesList\r\n                    disabled={disabled}\r\n                    stickyFirstPage={stickyFirstPage}\r\n                    pages={pages}\r\n                    currentPage={currentPage}\r\n                    onChangePage={onChangePage}\r\n                />\r\n            </div>\r\n            <Next\r\n                disabled={disabled}\r\n                currentPage={currentPage}\r\n                onChangePage={onChangePage}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PaginationControls\r\n","import {\r\n    useCallback,\r\n    useEffect,\r\n    useMemo,\r\n    useReducer,\r\n    useRef,\r\n    useState,\r\n} from \"react\"\r\n\r\nimport LoadingOverlay from \"../../components/loading/LoadingOverlay\"\r\nimport {\r\n    getAccountBalance,\r\n    getHardwareWalletAccounts,\r\n    importHardwareWalletAccounts,\r\n    getHardwareWalletHDPath,\r\n    setHardwareWalletHDPath,\r\n    selectAccount,\r\n} from \"../../context/commActions\"\r\nimport {\r\n    AccountInfo,\r\n    DeviceAccountInfo,\r\n} from \"@block-wallet/background/controllers/AccountTrackerController\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport classnames from \"classnames\"\r\nimport { Classes } from \"../../styles\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport HardwareWalletSetupLayout from \"./SetupLayout\"\r\nimport Select from \"../../components/input/Select\"\r\nimport { getAccountColor } from \"../../util/getAccountColor\"\r\nimport { formatHash } from \"../../util/formatAccount\"\r\nimport { ViewOnExplorerButton } from \"../../components/button/ViewOnExplorerButtons\"\r\nimport { formatUnits } from \"@ethersproject/units\"\r\nimport { useTokensList } from \"../../context/hooks/useTokensList\"\r\nimport { formatRounded } from \"../../util/formatRounded\"\r\n\r\n// Assets & icons\r\nimport AccountIcon from \"../../components/icons/AccountIcon\"\r\nimport EyeRevealIcon from \"../../components/icons/EyeRevealIcon\"\r\nimport { mergeReducer } from \"../../util/reducerUtils\"\r\nimport { useBlankState } from \"../../context/background/backgroundHooks\"\r\nimport { BIP44_PATH, Devices, HDPaths } from \"../../context/commTypes\"\r\nimport Spinner from \"../../components/spinner/Spinner\"\r\nimport log from \"loglevel\"\r\nimport { useOnClickOutside } from \"../../util/useOnClickOutside\"\r\nimport FullScreenDialog from \"../../components/dialog/FullScreenDialog\"\r\nimport CloseIcon from \"../../components/icons/CloseIcon\"\r\nimport Divider from \"../../components/Divider\"\r\nimport useAsyncInvoke, { Status } from \"../../util/hooks/useAsyncInvoke\"\r\nimport PaginationControls from \"../../components/ui/Pagination/PaginationControls\"\r\nimport HardwareDeviceNotLinkedDialog from \"../../components/dialog/HardwareDeviceNotLinkedDialog\"\r\nimport { BigNumber } from \"@ethersproject/bignumber\"\r\nimport Icon, { IconName } from \"../../components/ui/Icon\"\r\nimport { AiFillInfoCircle } from \"react-icons/ai\"\r\nimport Tooltip from \"../../components/label/Tooltip\"\r\nimport { LINKS } from \"../../util/constants\"\r\n\r\ninterface State {\r\n    gettingAccounts: boolean\r\n    selectedAccounts: DeviceAccountInfo[]\r\n    deviceAccounts: DeviceAccountInfo[]\r\n\r\n    pageSize: number\r\n    currentPage: number\r\n\r\n    // HW state\r\n    deviceNotReady: boolean\r\n}\r\n\r\nconst initialState: State = {\r\n    gettingAccounts: true,\r\n    selectedAccounts: [],\r\n    deviceAccounts: [],\r\n    pageSize: 5,\r\n    currentPage: 1,\r\n    deviceNotReady: false,\r\n}\r\n\r\nconst HardwareWalletAccountsPage = () => {\r\n    const history = useOnMountHistory()!\r\n    const vendor = history.location.state.vendor as Devices\r\n    const {\r\n        run,\r\n        data: hdPath,\r\n        isLoading: isLoadingHDPath,\r\n        setData: setHDPath,\r\n    } = useAsyncInvoke<string>({\r\n        status: Status.PENDING,\r\n    })\r\n    const { run: runImportAccounts, isLoading: isImportingAccounts } =\r\n        useAsyncInvoke()\r\n    const { accounts: existingAccounts } = useBlankState()!\r\n\r\n    const existingAddresses = useMemo(() => {\r\n        const accounts = Object.values(existingAccounts) as AccountInfo[]\r\n\r\n        return accounts.map(({ address }) => address)\r\n\r\n        // Disabled to prevent unwanted re-renderings\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [])\r\n\r\n    const [state, setState] = useReducer(\r\n        mergeReducer<State, Partial<State>>(),\r\n        initialState\r\n    )\r\n\r\n    useEffect(() => {\r\n        run(getHardwareWalletHDPath(vendor))\r\n    }, [vendor, run])\r\n\r\n    const [accountsBalances, setAccountBalances] = useState<{\r\n        [address in string]: BigNumber\r\n    }>({})\r\n    const addAccountBalance = (address: string, balance: BigNumber) => {\r\n        accountsBalances[address] = BigNumber.from(balance)\r\n        setAccountBalances(accountsBalances)\r\n    }\r\n\r\n    const getAccounts = useCallback(async () => {\r\n        setState({ gettingAccounts: true })\r\n        try {\r\n            const accounts = await getHardwareWalletAccounts(\r\n                vendor,\r\n                state.currentPage,\r\n                state.pageSize\r\n            )\r\n            setState({\r\n                deviceAccounts: accounts,\r\n                gettingAccounts: false,\r\n            })\r\n        } catch (e) {\r\n            log.error(e)\r\n            setState({ deviceNotReady: true })\r\n        }\r\n    }, [state.currentPage, state.pageSize, vendor])\r\n\r\n    useEffect(() => {\r\n        if (hdPath) {\r\n            getAccounts()\r\n        }\r\n    }, [getAccounts, hdPath])\r\n\r\n    const toggleAccount = (account: DeviceAccountInfo) => {\r\n        const selected = state.selectedAccounts.some(\r\n            (a) => a.address === account.address\r\n        )\r\n            ? state.selectedAccounts.filter(\r\n                  (a) => a.address !== account.address\r\n              )\r\n            : [...state.selectedAccounts, account]\r\n\r\n        setState({ selectedAccounts: selected })\r\n    }\r\n\r\n    const importAccounts = async () => {\r\n        try {\r\n            await runImportAccounts(\r\n                new Promise(async (resolve, reject) => {\r\n                    try {\r\n                        await importHardwareWalletAccounts(\r\n                            state.selectedAccounts,\r\n                            vendor\r\n                        )\r\n                        await selectAccount(state.selectedAccounts[0].address)\r\n                        resolve(true)\r\n                    } catch (e) {\r\n                        reject(e)\r\n                    }\r\n                })\r\n            )\r\n            history.push({\r\n                pathname: \"/hardware-wallet/success\",\r\n                state: { vendor },\r\n            })\r\n        } catch (e) {\r\n            log.error(e)\r\n        }\r\n    }\r\n\r\n    const isSelected = (address: string): boolean => {\r\n        return state.selectedAccounts.some((a) => a.address === address)\r\n    }\r\n\r\n    const isDisabled = (address: string): boolean => {\r\n        return existingAddresses.includes(address)\r\n    }\r\n\r\n    const updateHDPath = async (hdPath: string) => {\r\n        try {\r\n            await setHardwareWalletHDPath(vendor, hdPath)\r\n            // Clear the state after the HD path is updated\r\n            setState({ selectedAccounts: [], currentPage: 1 })\r\n            setHDPath(hdPath)\r\n        } catch (e) {}\r\n    }\r\n\r\n    const onUpdatePageSize = (pageSize: number) => {\r\n        setState({\r\n            pageSize,\r\n            currentPage: 1,\r\n        })\r\n    }\r\n\r\n    return (\r\n        <HardwareWalletSetupLayout\r\n            title=\"Select Accounts\"\r\n            subtitle=\"Select which account you would like to import.\"\r\n            buttons={\r\n                <>\r\n                    <ButtonWithLoading\r\n                        label=\"Back\"\r\n                        buttonClass={classnames(Classes.liteButton, \"h-14\")}\r\n                        disabled={isImportingAccounts}\r\n                        onClick={() =>\r\n                            history.push({\r\n                                pathname: \"/hardware-wallet/connect\",\r\n                                state: { vendor },\r\n                            })\r\n                        }\r\n                    />\r\n\r\n                    <ButtonWithLoading\r\n                        label=\"Import\"\r\n                        buttonClass={classnames(Classes.button, \"h-14\")}\r\n                        isLoading={isImportingAccounts}\r\n                        disabled={state.selectedAccounts.length === 0}\r\n                        onClick={importAccounts}\r\n                    />\r\n                </>\r\n            }\r\n        >\r\n            <HardwareDeviceNotLinkedDialog\r\n                fullScreen\r\n                vendor={vendor}\r\n                onDone={() => {\r\n                    setState({ deviceNotReady: false })\r\n                    getAccounts()\r\n                }}\r\n                isOpen={state.deviceNotReady}\r\n            />\r\n            {(isImportingAccounts || isLoadingHDPath) && <LoadingOverlay />}\r\n            <div className=\"flex flex-col space-y-2 text-sm text-gray-600 p-8\">\r\n                <div style={{ minHeight: \"280px\" }}>\r\n                    {state.deviceAccounts.length > 0 &&\r\n                    !state.gettingAccounts ? (\r\n                        state.deviceAccounts.map((account) => (\r\n                            <HardwareWalletAccount\r\n                                account={account}\r\n                                accountsBalances={accountsBalances}\r\n                                selected={isSelected(account.address)}\r\n                                disabled={isDisabled(account.address)}\r\n                                onChange={() => toggleAccount(account)}\r\n                                onBalanceFetched={addAccountBalance}\r\n                                key={account.index}\r\n                            />\r\n                        ))\r\n                    ) : (\r\n                        <div className=\"flex items-center justify-center w-full h-full\">\r\n                            {state.gettingAccounts ? (\r\n                                <Spinner size=\"48\" color=\"black\" />\r\n                            ) : (\r\n                                <span>\r\n                                    Cannot fetch accounts because the device is\r\n                                    disconnected or locked, please go back and\r\n                                    connect it again.\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"flex w-full justify-between pt-6 items-center pl-2 space-x-2\">\r\n                    <div className=\"space-x-4 flex items-center max-h-10\">\r\n                        <span className=\"text-gray-500\">Show:</span>\r\n                        <Select\r\n                            onChange={onUpdatePageSize}\r\n                            currentValue={state.pageSize}\r\n                            id=\"pageSize\"\r\n                            disabled={state.gettingAccounts}\r\n                        >\r\n                            <Select.Option value={5}>5</Select.Option>\r\n                            <Select.Option value={8}>8</Select.Option>\r\n                            <Select.Option value={10}>10</Select.Option>\r\n                        </Select>\r\n                    </div>\r\n                    <PaginationControls\r\n                        disabled={state.gettingAccounts}\r\n                        stickyFirstPage\r\n                        currentPage={state.currentPage}\r\n                        onChangePage={(page) => setState({ currentPage: page })}\r\n                        pages={6}\r\n                    />\r\n                </div>\r\n                <AdvancedSettings\r\n                    currentHDPath={\r\n                        hdPath ||\r\n                        HDPaths[vendor].find((p) => p.default)?.path ||\r\n                        BIP44_PATH\r\n                    }\r\n                    disabled={state.gettingAccounts}\r\n                    vendor={vendor}\r\n                    setHDPath={updateHDPath}\r\n                />\r\n            </div>\r\n        </HardwareWalletSetupLayout>\r\n    )\r\n}\r\n\r\nconst HardwareWalletAccount = ({\r\n    account,\r\n    accountsBalances,\r\n    selected = false,\r\n    disabled = false,\r\n    onChange,\r\n    onBalanceFetched,\r\n}: {\r\n    account: DeviceAccountInfo\r\n    accountsBalances: { [address in string]: BigNumber }\r\n    selected: boolean\r\n    disabled: boolean\r\n    onChange: () => void\r\n    onBalanceFetched: (address: string, balance: BigNumber) => void\r\n}) => {\r\n    const { nativeToken } = useTokensList()\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [balance, setBalance] = useState<string>(\r\n        account.address in accountsBalances\r\n            ? formatRounded(\r\n                  formatUnits(\r\n                      accountsBalances[account.address] || \"0\",\r\n                      nativeToken.token.decimals\r\n                  ),\r\n                  5\r\n              ) + ` ${nativeToken.token.symbol}`\r\n            : \"*******\"\r\n    )\r\n\r\n    const fetchBalance = async () => {\r\n        try {\r\n            setIsLoading(true)\r\n            const balanceFetched = await getAccountBalance(account.address)\r\n            onBalanceFetched(account.address, balanceFetched)\r\n            setBalance(\r\n                formatRounded(\r\n                    formatUnits(\r\n                        balanceFetched || \"0\",\r\n                        nativeToken.token.decimals\r\n                    ),\r\n                    5\r\n                ) + ` ${nativeToken.token.symbol}`\r\n            )\r\n        } catch (error) {\r\n            setBalance(\"<Error fetching>\")\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n    return (\r\n        <label\r\n            className={classnames(\r\n                \"flex flex-row items-center space-x-4 rounded-md pl-2 py-2\",\r\n                disabled ? \"bg-gray-50\" : \"cursor-pointer hover:bg-primary-100\"\r\n            )}\r\n            key={account.index}\r\n            htmlFor={`account-${account.index}`}\r\n        >\r\n            <input\r\n                type=\"checkbox\"\r\n                className={classnames(\r\n                    Classes.checkboxAlt,\r\n                    disabled && \"text-gray-200 pointer-events-none\"\r\n                )}\r\n                defaultChecked={selected || disabled}\r\n                id={`account-${account.index}`}\r\n                onChange={onChange}\r\n                disabled={disabled}\r\n            />\r\n            <AccountIcon\r\n                className=\"w-10 h-10\"\r\n                fill={getAccountColor(account.address)}\r\n            />\r\n            <div className=\"flex flex-col\">\r\n                <span className=\"font-bold\">{account.name}</span>\r\n                <div className=\"flex space-x-2 w-full text-gray-500 text-xs\">\r\n                    <span className=\"w-20\" title={account.address}>\r\n                        {formatHash(account.address)}\r\n                    </span>\r\n                    <span className=\"text-gray-200\">|</span>\r\n                    <div className=\"inline w-40\">Balance: {balance}</div>\r\n                </div>\r\n            </div>\r\n            <div className=\"flex space-x-3 items-center\">\r\n                <div\r\n                    className={classnames(\r\n                        \"text-black hover:text-primary-300\",\r\n                        !isLoading && \"cursor-pointer\"\r\n                    )}\r\n                    title=\"Fetch Balance\"\r\n                    onClick={(e) => {\r\n                        if (!isLoading) {\r\n                            fetchBalance()\r\n                        }\r\n                        e.preventDefault()\r\n                    }}\r\n                >\r\n                    {isLoading ? (\r\n                        <Spinner color=\"black\" size=\"16\" />\r\n                    ) : (\r\n                        <EyeRevealIcon />\r\n                    )}\r\n                </div>\r\n                <ViewOnExplorerButton\r\n                    mode=\"icon\"\r\n                    hash={account.address}\r\n                    type=\"address\"\r\n                />\r\n            </div>\r\n        </label>\r\n    )\r\n}\r\n\r\nconst AdvancedSettings = ({\r\n    currentHDPath,\r\n    vendor,\r\n    disabled,\r\n    setHDPath,\r\n}: {\r\n    currentHDPath: string\r\n    vendor: Devices\r\n    disabled?: boolean\r\n    setHDPath: (hdPath: string) => void\r\n}) => {\r\n    const [openModal, setOpenModal] = useState(false)\r\n    const hdPaths = HDPaths[vendor]\r\n    const [selectedHDPath, setSelectedHDPath] = useState<string>(currentHDPath)\r\n\r\n    useEffect(() => {\r\n        setSelectedHDPath(currentHDPath)\r\n    }, [currentHDPath])\r\n\r\n    const ref = useRef<any>(null)\r\n    useOnClickOutside(ref, () => {\r\n        setOpenModal(false)\r\n    })\r\n    return (\r\n        <>\r\n            <div\r\n                onClick={() => !disabled && setOpenModal(true)}\r\n                className={classnames(\r\n                    \"w-full pl-2 pt-4 bg-white rounded-md cursor-pointer underline-offset-1 flex items-center justify-between\",\r\n                    disabled\r\n                        ? \"text-gray-200 !cursor-not-allowed\"\r\n                        : \"hover:underline\"\r\n                )}\r\n            >\r\n                <span className=\"font-semibold text-base\">\r\n                    Advanced Settings\r\n                </span>\r\n                <div>\r\n                    <Icon\r\n                        name={IconName.RIGHT_CHEVRON}\r\n                        size=\"sm\"\r\n                        profile={disabled ? \"disabled\" : \"default\"}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            <FullScreenDialog open={openModal}>\r\n                <div className=\"flex items-center justify-between px-6 pb-6\">\r\n                    <div className=\"flex flex-row items-center\">\r\n                        <span className=\"p-0 text-xl font-bold\">\r\n                            Advanced Settings\r\n                        </span>\r\n                        <div className=\"group relative\">\r\n                            <a\r\n                                target=\"_blank\"\r\n                                href={LINKS.ARTICLES.HD_PATH}\r\n                                rel=\"noreferrer\"\r\n                            >\r\n                                <AiFillInfoCircle\r\n                                    size={26}\r\n                                    className=\"pl-2 text-primary-200 cursor-pointer hover:text-primary-300\"\r\n                                />\r\n                            </a>\r\n                            <Tooltip\r\n                                className=\"!w-52 !break-word !whitespace-normal border boder-gray-300\"\r\n                                content=\"Click here to learn what the HD Path is and the implications of changing it.\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div\r\n                        onClick={() => setOpenModal(false)}\r\n                        className=\" cursor-pointer p-2 text-gray-900 transition duration-300 rounded-full hover:bg-primary-100 hover:text-primary-300\"\r\n                    >\r\n                        <CloseIcon size=\"12\" />\r\n                    </div>\r\n                </div>\r\n                <Divider />\r\n                <div className=\"flex flex-col w-full space-y-6 p-6\">\r\n                    <span>\r\n                        If you don't see the accounts you're expecting, try\r\n                        switching the HD path.\r\n                    </span>\r\n                    <div className=\"flex flex-col space-y-2\">\r\n                        <label>HD Path</label>\r\n                        <Select\r\n                            onChange={setSelectedHDPath}\r\n                            currentValue={selectedHDPath}\r\n                        >\r\n                            {hdPaths.map((hdPath) => (\r\n                                <Select.Option\r\n                                    value={hdPath.path}\r\n                                    key={hdPath.path}\r\n                                >\r\n                                    {hdPath.name}\r\n                                </Select.Option>\r\n                            ))}\r\n                        </Select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex flex-col px-6\">\r\n                    <hr className=\"absolute left-0 border-0.5 border-gray-200 w-full\" />\r\n                    <div className=\"flex flex-row w-full items-center pt-5 justify-between space-x-4\">\r\n                        <button\r\n                            className={classnames(Classes.liteButton)}\r\n                            onClick={() => setOpenModal(false)}\r\n                        >\r\n                            Cancel\r\n                        </button>\r\n                        <button\r\n                            onClick={() => {\r\n                                setHDPath(selectedHDPath)\r\n                                setOpenModal(false)\r\n                            }}\r\n                            className={classnames(Classes.button)}\r\n                        >\r\n                            Save\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </FullScreenDialog>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default HardwareWalletAccountsPage\r\n","type CenteredTextCircleProps = {\r\n    text: string\r\n    size?: \"sm\" | \"md\" | \"lg\"\r\n}\r\n\r\nconst SIZES_IN_PX = {\r\n    sm: 27,\r\n    md: 40,\r\n    lg: 54,\r\n}\r\n\r\nconst CenteredTextCircle = ({ text, size }: CenteredTextCircleProps) => {\r\n    const circleSize = SIZES_IN_PX[size || \"lg\"]\r\n    return (\r\n        <div\r\n            className=\"border-2 border-black rounded-full flex items-center justify-center\"\r\n            style={{ width: circleSize, height: circleSize }}\r\n        >\r\n            <span className=\"font-bold\">{text}</span>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CenteredTextCircle\r\n","import CenteredTextCircle from \"../../components/icons/CenteredTextCircle\"\r\nimport classnames from \"classnames\"\r\nconst TEXT_SIZES_CLASSES = {\r\n    lg: \"text-base\",\r\n    md: \"text-sm\",\r\n    sm: \"text-xs\",\r\n}\r\n\r\nconst Step = ({\r\n    step,\r\n    text,\r\n    size,\r\n}: {\r\n    step: number\r\n    text: string | (string | React.ReactElement)[]\r\n    size?: \"sm\" | \"md\" | \"lg\"\r\n}) => {\r\n    const textSize = TEXT_SIZES_CLASSES[size || \"lg\"]\r\n    return (\r\n        <div className={classnames(textSize, \"flex items-center space-x-4\")}>\r\n            <CenteredTextCircle size={size || \"lg\"} text={step.toString()} />\r\n            <span className=\"font-semibold\">{text}</span>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Step\r\n","import { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport HardwareWalletSetupLayout from \"./SetupLayout\"\r\nimport classnames from \"classnames\"\r\nimport Step from \"./Step\"\r\nimport LoadingOverlay from \"../../components/loading/LoadingOverlay\"\r\nimport { useHistory } from \"react-router-dom\"\r\nimport { Classes } from \"../../styles\"\r\nimport { ConnectionSeptInfo } from \"../../util/connectionStepUtils\"\r\nimport Tooltip from \"../../components/label/Tooltip\"\r\nimport { AiFillInfoCircle } from \"react-icons/ai\"\r\n\r\ninterface ConnectDeviceProps {\r\n    onConnect: () => void\r\n    onCancel?: () => void\r\n    steps: ConnectionSeptInfo[]\r\n    isLoading: boolean\r\n    title: string\r\n    subtitle: string\r\n}\r\n\r\nconst ConnectDeviceStepsLayout: React.FC<ConnectDeviceProps> = ({\r\n    onConnect,\r\n    onCancel,\r\n    steps,\r\n    isLoading,\r\n    title,\r\n    subtitle,\r\n}) => {\r\n    const history = useHistory()\r\n    return (\r\n        <HardwareWalletSetupLayout\r\n            title={title}\r\n            subtitle={subtitle}\r\n            buttons={\r\n                <>\r\n                    <ButtonWithLoading\r\n                        label=\"Cancel\"\r\n                        buttonClass={classnames(Classes.liteButton, \"h-14\")}\r\n                        disabled={isLoading}\r\n                        onClick={\r\n                            onCancel\r\n                                ? onCancel\r\n                                : () => history.push(\"/hardware-wallet\")\r\n                        }\r\n                    />\r\n\r\n                    <ButtonWithLoading\r\n                        label=\"Continue\"\r\n                        buttonClass={classnames(Classes.button, \"h-14\")}\r\n                        isLoading={isLoading}\r\n                        onClick={onConnect}\r\n                    />\r\n                </>\r\n            }\r\n        >\r\n            {isLoading && <LoadingOverlay />}\r\n            <div className=\"w-full p-8 space-y-4\">\r\n                {steps.map((step, index) => (\r\n                    <div className=\"flex flex-row items-center space-x-2\">\r\n                        <Step step={index + 1} text={step.label} key={index} />\r\n                        {step.info && (\r\n                            <div className=\"group relative\">\r\n                                <AiFillInfoCircle\r\n                                    size={26}\r\n                                    className=\"pl-2 text-primary-200 cursor-pointer hover:text-primary-300\"\r\n                                />\r\n                                <Tooltip content={step.info} />\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </HardwareWalletSetupLayout>\r\n    )\r\n}\r\n\r\nexport default ConnectDeviceStepsLayout\r\n","import { Devices } from \"../../context/commTypes\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport ConnectDeviceStepsLayout from \"./ConnectDeviceStepsLayout\"\r\nimport { DEVICE_CONNECTION_STEPS } from \"../../util/connectionStepUtils\"\r\nimport useHardwareWalletConnect from \"../../util/hooks/useHardwareWalletConnect\"\r\nimport HardwareDeviceNotLinkedDialog from \"../../components/dialog/HardwareDeviceNotLinkedDialog\"\r\nimport { useState } from \"react\"\r\n\r\nconst HardwareWalletConnectionPage = () => {\r\n    const history = useOnMountHistory()\r\n    const { connect, isLoading } = useHardwareWalletConnect()\r\n    const [deviceNotReady, setDeviceNotReady] = useState(false)\r\n\r\n    const vendor = history.location.state.vendor as Devices\r\n\r\n    const deviceSteps = DEVICE_CONNECTION_STEPS[vendor]\r\n\r\n    const onConnect = async () => {\r\n        const resultOk = await connect(vendor)\r\n        if (resultOk) {\r\n            history.push({\r\n                pathname: \"/hardware-wallet/accounts\",\r\n                state: { vendor },\r\n            })\r\n        } else {\r\n            setDeviceNotReady(true)\r\n        }\r\n    }\r\n    return (\r\n        <>\r\n            <ConnectDeviceStepsLayout\r\n                title=\"Before We Get Started\"\r\n                subtitle={`Make sure you complete these ${deviceSteps.length} steps before you continue.`}\r\n                isLoading={isLoading}\r\n                onConnect={onConnect}\r\n                steps={deviceSteps}\r\n            />\r\n            <HardwareDeviceNotLinkedDialog\r\n                showReconnect={false}\r\n                fullScreen\r\n                vendor={vendor}\r\n                onDone={() => {\r\n                    setDeviceNotReady(false)\r\n                    onConnect()\r\n                }}\r\n                isOpen={deviceNotReady}\r\n                useClickOutside={false}\r\n                cancelButton={true}\r\n                onCancel={() => setDeviceNotReady(false)}\r\n            />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default HardwareWalletConnectionPage\r\n","import { useHistory, useParams } from \"react-router-dom\"\r\nimport { Devices } from \"../../context/commTypes\"\r\nimport ConnectDeviceStepsLayout from \"./ConnectDeviceStepsLayout\"\r\nimport { DEVICE_CONNECTION_STEPS } from \"../../util/connectionStepUtils\"\r\nimport useHardwareWalletConnect from \"../../util/hooks/useHardwareWalletConnect\"\r\nimport HardwareDeviceNotLinkedDialog from \"../../components/dialog/HardwareDeviceNotLinkedDialog\"\r\nimport { useState, useMemo } from \"react\"\r\n\r\nconst HardwareWalletReconnectionPage = () => {\r\n    const history = useHistory()\r\n    //As this flow starts with a redirection from the background, we can't grab the vendor from the history state.\r\n    const { vendor } = useParams() as { vendor: Devices }\r\n    const { connect, isLoading } = useHardwareWalletConnect(true)\r\n    const [deviceNotReady, setDeviceNotReady] = useState(false)\r\n\r\n    const deviceSteps = useMemo(() => {\r\n        const deviceSteps = DEVICE_CONNECTION_STEPS[vendor as Devices] || []\r\n        if (!deviceSteps) {\r\n            history.push(\"/hardware-wallet\")\r\n        }\r\n        return deviceSteps\r\n    }, [vendor, history])\r\n\r\n    const onConnect = async () => {\r\n        const resultOk = await connect(vendor)\r\n        if (resultOk) {\r\n            history.replace({\r\n                pathname: \"/hardware-wallet/success\",\r\n                state: { vendor, reconnect: true },\r\n            })\r\n        } else {\r\n            setDeviceNotReady(true)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <ConnectDeviceStepsLayout\r\n                title=\"Reconnect your device\"\r\n                subtitle={`Take these ${deviceSteps.length} steps to reconnect your device.`}\r\n                isLoading={isLoading}\r\n                onConnect={onConnect}\r\n                steps={deviceSteps}\r\n            />\r\n            <HardwareDeviceNotLinkedDialog\r\n                showReconnect={false}\r\n                fullScreen\r\n                vendor={vendor}\r\n                onDone={() => {\r\n                    setDeviceNotReady(false)\r\n                    onConnect()\r\n                }}\r\n                isOpen={deviceNotReady}\r\n            />\r\n        </>\r\n    )\r\n}\r\n\r\nexport default HardwareWalletReconnectionPage\r\n","import { useState } from \"react\"\r\nimport classnames from \"classnames\"\r\n\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\n\r\nimport { AccountType, Devices } from \"../../context/commTypes\"\r\nimport Divider from \"../../components/Divider\"\r\n\r\n// Assets & icons\r\nimport ledger from \"../../assets/images/icons/ledger.svg\"\r\nimport trezor from \"../../assets/images/icons/trezor.svg\"\r\nimport { ButtonWithLoading } from \"../../components/button/ButtonWithLoading\"\r\nimport { Classes } from \"../../styles\"\r\n\r\nimport HardwareWalletSetupLayout from \"./SetupLayout\"\r\nimport { useSortedAccounts } from \"../../context/hooks/useSortedAccounts\"\r\nimport { AccountInfo } from \"@block-wallet/background/controllers/AccountTrackerController\"\r\nimport { removeHardwareWallet } from \"../../context/commActions\"\r\n\r\nconst HardwareWalletRemoveDevicePage = () => {\r\n    const history = useOnMountHistory()\r\n    const accounts = useSortedAccounts({ includeHiddenAccounts: true })\r\n    const [selectedVendor, setSelectedVendor] = useState<Devices>()\r\n    const [isLoading, setIsLoading] = useState<boolean>(false)\r\n\r\n    const next = async () => {\r\n        if (!selectedVendor) {\r\n            return\r\n        }\r\n        try {\r\n            setIsLoading(true)\r\n\r\n            const result = await removeHardwareWallet(selectedVendor)\r\n\r\n            if (result) {\r\n                history.push({\r\n                    pathname: \"/hardware-wallet/remove-device/success\",\r\n                    state: { vendor: selectedVendor },\r\n                })\r\n            }\r\n        } catch (e: any) {\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    const isDeviceImported = (device: Devices): number => {\r\n        const accountType =\r\n            device === Devices.LEDGER ? AccountType.LEDGER : AccountType.TREZOR\r\n        return accounts.filter(\r\n            (account: AccountInfo) => account.accountType === accountType\r\n        ).length\r\n    }\r\n\r\n    return (\r\n        <HardwareWalletSetupLayout\r\n            title=\"Remove device\"\r\n            subtitle=\"Select a Hardware Wallet you'd like to remove from BlockWallet. All the accounts imported from the selected device will be removed.\"\r\n            buttons={\r\n                <ButtonWithLoading\r\n                    label={\"Remove device and accounts\"}\r\n                    buttonClass={classnames(Classes.button, \"h-14\")}\r\n                    onClick={next}\r\n                    disabled={!selectedVendor}\r\n                    isLoading={isLoading}\r\n                />\r\n            }\r\n        >\r\n            <div className=\"flex flex-col\">\r\n                <div className=\"flex flex-row space-x-4 items-center justify-evenly p-8\">\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() =>\r\n                            isDeviceImported(Devices.LEDGER) &&\r\n                            setSelectedVendor(Devices.LEDGER)\r\n                        }\r\n                        className={classnames(\r\n                            \"bg-white rounded-md p-4 w-1/2 flex flex-col items-center justify-center space-y-3 cursor-pointer border hover:border-primary-300\",\r\n                            selectedVendor === Devices.LEDGER\r\n                                ? \"border-primary-300\"\r\n                                : \"border-primary-100\",\r\n                            !isDeviceImported(Devices.LEDGER) &&\r\n                                \"opacity-50 pointer-events-none\"\r\n                        )}\r\n                        style={{ height: \"120px\" }}\r\n                    >\r\n                        <img\r\n                            src={ledger}\r\n                            alt=\"Connect Ledger\"\r\n                            className=\"h-8\"\r\n                        />\r\n                        {isDeviceImported(Devices.LEDGER)} Accounts\r\n                    </button>\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() =>\r\n                            isDeviceImported(Devices.TREZOR) &&\r\n                            setSelectedVendor(Devices.TREZOR)\r\n                        }\r\n                        className={classnames(\r\n                            \"bg-white rounded-md justify-center p-4 w-1/2 flex flex-col items-center group space-y-3 cursor-pointer border hover:border-primary-300\",\r\n                            selectedVendor === Devices.TREZOR\r\n                                ? \"border-primary-300\"\r\n                                : \"border-primary-100\",\r\n                            !isDeviceImported(Devices.TREZOR) &&\r\n                                \"opacity-50 pointer-events-none\"\r\n                        )}\r\n                        style={{ height: \"120px\" }}\r\n                    >\r\n                        <img\r\n                            src={trezor}\r\n                            alt=\"Connect Trezor\"\r\n                            className=\"h-8\"\r\n                        />\r\n                        {isDeviceImported(Devices.TREZOR)} Accounts\r\n                    </button>\r\n                </div>\r\n                <Divider />\r\n            </div>\r\n        </HardwareWalletSetupLayout>\r\n    )\r\n}\r\n\r\nexport default HardwareWalletRemoveDevicePage\r\n","import { HashRouter } from \"react-router-dom\"\r\nimport { useBlankState } from \"../context/background/backgroundHooks\"\r\nimport IntroductionPage from \"../routes/IntroductionPage\"\r\nimport BackupConfirmPage from \"../routes/setup/BackupConfirmPage\"\r\nimport BackupNoticePage from \"../routes/setup/BackupNoticePage\"\r\nimport PasswordSetupPage from \"../routes/setup/PasswordSetupPage\"\r\nimport SeedImportPage from \"../routes/setup/SeedImportPage\"\r\nimport SetupDonePage from \"../routes/setup/SetupDonePage\"\r\nimport SetupPage from \"../routes/setup/SetupPage\"\r\nimport ResetPage from \"../routes/setup/ResetPage\"\r\nimport ResetDonePage from \"../routes/setup/ResetDonePage\"\r\nimport { makeRoutes } from \"../util/makeRoutes\"\r\nimport HardwareWalletVendorsPage from \"../routes/hardware-wallet/VendorsPage\"\r\nimport HardwareWalletAccountsPage from \"../routes/hardware-wallet/AccountsPage\"\r\nimport HardwareWalletConnectionPage from \"../routes/hardware-wallet/HardwareWalletConnectionPage\"\r\nimport HardwareWalletReconnectionPage from \"../routes/hardware-wallet/HardwareWalletReconnectionPage\"\r\nimport HardwareWalletSuccessPage from \"../routes/hardware-wallet/SuccessPage\"\r\nimport HardwareWalletRemoveDevicePage from \"../routes/hardware-wallet/RemoveDevice\"\r\nimport HardwareWalletRemoveSuccessPage from \"../routes/hardware-wallet/RemoveSuccessPage\"\r\n\r\nconst introRoutes = makeRoutes([\r\n    /* Setup */\r\n    { path: \"/intro\", exact: true, component: IntroductionPage },\r\n    { path: \"/setup\", exact: true, component: SetupPage },\r\n    { path: \"/setup/import\", exact: true, component: SeedImportPage },\r\n    { path: \"/setup/create\", exact: true, component: PasswordSetupPage },\r\n    { path: \"/setup/create/notice\", exact: true, component: BackupNoticePage },\r\n    { path: \"/setup/create/verify\", exact: true, component: BackupConfirmPage },\r\n    { path: \"/setup/done\", exact: true, component: SetupDonePage },\r\n    { path: \"/reset\", exact: true, component: ResetPage },\r\n    { path: \"/reset/done\", exact: true, component: ResetDonePage },\r\n    {\r\n        path: \"/hardware-wallet\",\r\n        exact: true,\r\n        component: HardwareWalletVendorsPage,\r\n    },\r\n    {\r\n        path: \"/hardware-wallet/remove-device\",\r\n        exact: true,\r\n        component: HardwareWalletRemoveDevicePage,\r\n    },\r\n    {\r\n        path: \"/hardware-wallet/remove-device/success\",\r\n        exact: true,\r\n        component: HardwareWalletRemoveSuccessPage,\r\n    },\r\n    {\r\n        path: \"/hardware-wallet/success\",\r\n        exact: true,\r\n        component: HardwareWalletSuccessPage,\r\n    },\r\n    {\r\n        path: \"/hardware-wallet/connect\",\r\n        exact: true,\r\n        component: HardwareWalletConnectionPage,\r\n    },\r\n    {\r\n        path: \"/hardware-wallet/:vendor/reconnect\",\r\n        exact: true,\r\n        component: HardwareWalletReconnectionPage,\r\n    },\r\n    {\r\n        path: \"/hardware-wallet/accounts\",\r\n        exact: true,\r\n        component: HardwareWalletAccountsPage,\r\n    },\r\n])\r\n\r\nconst TabRouter = ({\r\n    children,\r\n}: {\r\n    children?: React.ReactNode | undefined\r\n}) => {\r\n    const state = useBlankState()!\r\n    const rootComponent = state?.isOnboarded ? SetupDonePage : IntroductionPage\r\n    return (\r\n        <HashRouter>\r\n            {makeRoutes([{ path: \"/\", exact: true, component: rootComponent }])}\r\n            {introRoutes}\r\n            {children}\r\n        </HashRouter>\r\n    )\r\n}\r\n\r\nexport default TabRouter\r\n","import LogoHeader from \"../../components/LogoHeader\"\r\nimport PageLayout from \"../../components/PageLayout\"\r\n\r\nimport logo from \"../../assets/images/logo.svg\"\r\nimport { Devices } from \"../../context/commTypes\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport { capitalize } from \"../../util/capitalize\"\r\n\r\nconst HardwareWalletRemoveSuccessPage = () => {\r\n    const history = useOnMountHistory()!\r\n    const vendor = history.location.state.vendor as Devices\r\n    const vendorName = capitalize(vendor.toString().toLowerCase())\r\n\r\n    return (\r\n        <>\r\n            <PageLayout centered className=\"relative overflow-hidden\">\r\n                <div className=\"flex flex-col items-center relative py-14 z-10\">\r\n                    <LogoHeader />\r\n                    <div className=\"flex flex-col items-center my-12 space-y-6\">\r\n                        <span className=\"font-title font-semibold text-5xl text-center\">\r\n                            {vendorName}\r\n                            {\" removed!\"}\r\n                        </span>\r\n                        <div className=\"flex flex-col md:flex-row items-center space-x-1 w-92 px-4 md:px-0 md:w-full mx-auto text-gray-600 text-sm text-center leading-loose justify-center\">\r\n                            <span>\r\n                                Your {vendorName} accounts were removed\r\n                                successfully.\r\n                                <br />\r\n                                You can't access them anymore from BlockWallet.\r\n                                <br />\r\n                                If you'd like to, you can import them again.\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div\r\n                    className=\"absolute w-64 h-64 left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 opacity-5\"\r\n                    style={{\r\n                        color: \"blue\",\r\n                        background: `url(${logo})`,\r\n                        backgroundRepeat: \"no-repeat\",\r\n                        backgroundPosition: \"center\",\r\n                        backgroundSize: \"cover\",\r\n                    }}\r\n                />\r\n            </PageLayout>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default HardwareWalletRemoveSuccessPage\r\n","import { useEffect, useState } from \"react\"\r\n\r\nimport Confetti from \"react-dom-confetti\"\r\n\r\nimport LogoHeader from \"../../components/LogoHeader\"\r\nimport PageLayout from \"../../components/PageLayout\"\r\n\r\nimport logo from \"../../assets/images/logo.svg\"\r\nimport { Devices } from \"../../context/commTypes\"\r\nimport { useOnMountHistory } from \"../../context/hooks/useOnMount\"\r\nimport { capitalize } from \"../../util/capitalize\"\r\n\r\nconst HardwareWalletSuccessPage = () => {\r\n    const history = useOnMountHistory()!\r\n\r\n    const vendor = history.location.state.vendor as Devices\r\n    const reconnect = (history.location.state.reconnect as boolean) ?? false\r\n\r\n    const vendorName = capitalize(vendor.toString().toLowerCase())\r\n\r\n    const [confettiActive, setConfettiActive] = useState(false)\r\n    useEffect(() => {\r\n        setConfettiActive(true)\r\n    }, [])\r\n    const config = {\r\n        angle: 90,\r\n        spread: 360,\r\n        startVelocity: 40,\r\n        elementCount: 70,\r\n        dragFriction: 0.12,\r\n        duration: 3000,\r\n        stagger: 3,\r\n        width: \"10px\",\r\n        height: \"10px\",\r\n        perspective: \"500px\",\r\n        colors: [\"#000\", \"#333\", \"#666\"],\r\n    }\r\n    return (\r\n        <>\r\n            <div className=\"absolute w-full h-full flex flex-row items-center justify-center overflow-hidden z-10\">\r\n                <Confetti active={confettiActive} config={config} />\r\n            </div>\r\n            <PageLayout centered className=\"relative overflow-hidden\">\r\n                <div className=\"flex flex-col items-center relative py-14 z-10\">\r\n                    <LogoHeader />\r\n                    <div className=\"flex flex-col items-center my-12 space-y-6\">\r\n                        <span className=\"font-title font-semibold text-5xl text-center\">\r\n                            {vendorName}{\" \"}\r\n                            {!reconnect ? \"import completed!\" : \"reconnected!\"}\r\n                        </span>\r\n                        <div className=\"flex flex-col md:flex-row items-center space-x-1 w-92 px-4 md:px-0 md:w-full mx-auto text-gray-600 text-sm text-center leading-loose justify-center\">\r\n                            {!reconnect ? (\r\n                                <span>\r\n                                    Your {vendorName} accounts were imported\r\n                                    successfully.\r\n                                    <br />\r\n                                    You can now access them in BlockWallet.\r\n                                    <br />\r\n                                    Open the wallet via the extensions section\r\n                                    of your browser.\r\n                                </span>\r\n                            ) : (\r\n                                <span>\r\n                                    Your {vendorName} device has been\r\n                                    reconnected successfully.\r\n                                    <br />\r\n                                    You can continue with your current flow\r\n                                    normally.\r\n                                    <br />\r\n                                    Open the wallet via the extensions section\r\n                                    of your browser.\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div\r\n                    className=\"absolute w-64 h-64 left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 opacity-5\"\r\n                    style={{\r\n                        color: \"blue\",\r\n                        background: `url(${logo})`,\r\n                        backgroundRepeat: \"no-repeat\",\r\n                        backgroundPosition: \"center\",\r\n                        backgroundSize: \"cover\",\r\n                    }}\r\n                />\r\n            </PageLayout>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default HardwareWalletSuccessPage\r\n","import GlobalModal from \"./components/GlobalModal\"\r\nimport BackgroundState from \"./context/background/BackgroundState\"\r\nimport { ModalProvider } from \"./context/ModalContext\"\r\nimport Spinner from \"./components/spinner/Spinner\"\r\nimport { useBlankState } from \"./context/background/backgroundHooks\"\r\nimport { isPopup } from \"./context/util/isPopup\"\r\nimport PopupRouter from \"./router/PopupRouter\"\r\nimport TabRouter from \"./router/TabRouter\"\r\nimport { WindowIdProvider } from \"./context/hooks/useWindowId\"\r\n\r\nconst AppLoading = () => {\r\n    return (\r\n        <div className=\"w-full h-full flex flex-row items-center justify-center bg-primary-100\">\r\n            <Spinner />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst App = () => {\r\n    const blankState = useBlankState()\r\n    return blankState ? (\r\n        <ModalProvider>\r\n            <WindowIdProvider>\r\n                <GlobalModal />\r\n                {isPopup() ? <PopupRouter /> : <TabRouter />}\r\n            </WindowIdProvider>\r\n        </ModalProvider>\r\n    ) : (\r\n        <AppLoading />\r\n    )\r\n}\r\n\r\nconst WrappedApp = () => (\r\n    <BackgroundState>\r\n        <App />\r\n    </BackgroundState>\r\n)\r\n\r\nexport default WrappedApp\r\n","export const isPopup = () => document.location.pathname.includes(\"popup.html\")\r\n","import log, { LogLevelDesc } from \"loglevel\"\r\nimport { StrictMode } from \"react\"\r\nimport Modal from \"react-modal\"\r\nimport App from \"./App\"\r\nimport { createRoot } from \"react-dom/client\"\r\n\r\nimport \"./styles\"\r\n\r\n// Setting the default log level\r\nlog.setLevel((process.env.LOG_LEVEL as LogLevelDesc) || \"error\")\r\n\r\nModal.setAppElement(\"#root\")\r\n\r\nconst container = document.getElementById(\"root\")\r\nconst root = createRoot(container!)\r\nroot.render(\r\n    <StrictMode>\r\n        <App />\r\n    </StrictMode>\r\n)\r\n"],"sourceRoot":""}